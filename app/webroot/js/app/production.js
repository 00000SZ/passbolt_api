steal.packages({});
steal.has("stealconfig.js","app/passbolt.js","lib/mad/mad.js","lib/jquerypp/class/class.js","lib/can/construct/construct.js","lib/can/util/string/string.js","lib/can/util/util.js","lib/can/util/jquery/jquery.js","lib/can/util/can.js","lib/can/util/array/each.js","lib/can/construct/proxy/proxy.js","lib/can/construct/super/super.js","lib/mad/core/class.js","lib/jquerypp/lang/string/string.js","lib/jquerypp/controller/controller.js","lib/can/control/control.js","lib/can/control/plugin/plugin.js","lib/jquerypp/model/model.js",
"lib/can/model/model.js","lib/can/observe/observe.js","lib/can/util/bind/bind.js","lib/can/observe/attributes/attributes.js","lib/can/observe/setter/setter.js","lib/can/observe/elements/elements.js","lib/jquerypp/view/ejs/ejs.js","lib/jquerypp/view/view.js","lib/can/view/view.js","lib/can/view/modifiers/modifiers.js","lib/can/view/ejs/ejs.js","lib/can/observe/compute/compute.js","lib/can/view/scanner.js","lib/can/view/elements.js","lib/can/view/render.js","lib/can/view/live.js","lib/can/view/node_lists.js",
"lib/mad/controller/controller.js","lib/mad/route/extensionControllerActionDispatcher.js","lib/mad/route/dispatcherInterface.js","lib/mad/helper/routeHelper.js","lib/mad/model/model.js","lib/mad/model/list.js","lib/mad/model/serializer/cakeSerializer.js","lib/mad/model/serializer/serializer.js","lib/mad/model/attribute.js","lib/mad/view/view.js","lib/mad/event/eventable.js","lib/mad/bootstrap/appBootstrap.js","lib/jquerypp/dom/route/route.js","lib/can/route/route.js","lib/can/util/string/deparam/deparam.js",
"lib/mad/bootstrap/bootstrapInterface.js","lib/mad/event/eventBus.js","lib/mad/helper/htmlHelper.js","lib/mad/config/config.js","lib/mad/error/exception.js","lib/mad/error/callAbstractFunctionException.js","lib/mad/error/callInterfaceConstructorException.js","lib/mad/error/callInterfaceFunctionException.js","lib/mad/error/callPrivateFunctionException.js","lib/mad/error/missingOptionException.js","lib/mad/error/missingParameterException.js","lib/mad/error/noConstructorException.js","lib/mad/error/templateMissingException.js",
"lib/mad/error/wrongParametersException.js","lib/mad/error/wrongConfigException.js","lib/mad/error/errorHandler.js","lib/mad/controller/appController.js","lib/mad/controller/componentController.js","lib/mad/helper/controllerHelper.js","lib/mad/view/template/app.ejs","lib/mad/controller/component/buttonController.js","lib/mad/view/template/component/button.ejs","lib/mad/controller/component/compositeController.js","lib/mad/controller/component/dialogController.js","lib/mad/controller/component/freeCompositeController.js",
"lib/mad/view/template/component/workspace.ejs","lib/mad/view/component/dialog.js","lib/mad/controller/component/gridController.js","lib/mad/model/grid/column.js","lib/mad/view/component/grid.js","lib/mad/view/template/component/grid.ejs","lib/mad/object/map.js","lib/mad/core/singleton.js","lib/mad/view/template/component/grid/gridItem.ejs","lib/mad/controller/component/contextualMenuController.js","lib/mad/controller/component/dropDownMenuController.js","lib/mad/controller/component/menuController.js",
"lib/mad/controller/component/treeController.js","lib/mad/view/component/tree.js","lib/mad/view/template/component/tree.ejs","lib/mad/view/template/component/tree/treeItem.ejs","lib/mad/view/template/component/menu/menuItem.ejs","lib/mad/model/action.js","lib/mad/view/component/menu/dropDownMenu.js","lib/mad/view/template/component/menu/dropDownMenu.ejs","lib/mad/controller/component/tabController.js","lib/mad/view/component/tab.js","lib/mad/view/template/component/tab.ejs","lib/mad/controller/component/toggleButtonController.js",
"lib/mad/controller/component/dynamicTreeController.js","lib/mad/view/component/tree/dynamicTree.js","lib/mad/view/template/component/tree/dynamicTree.ejs","lib/mad/crypto/random.js","lib/mad/event/event.js","lib/mad/form/feedbackController.js","lib/mad/form/formElement.js","lib/mad/view/form/formElementView.js","lib/mad/form/formController.js","lib/mad/view/form/formView.js","lib/mad/form/formChoiceElement.js","lib/mad/form/element/autocompleteController.js","lib/mad/form/element/textboxController.js",
"lib/mad/view/form/element/textboxView.js","lib/mad/view/form/element/autocompleteView.js","lib/mad/form/element/checkboxController.js","lib/mad/view/form/element/checkboxView.js","lib/mad/view/template/form/element/checkbox.ejs","lib/mad/form/element/dateController.js","lib/mad/view/form/element/dateView.js","lib/mad/view/template/component/input.ejs","lib/mad/form/element/dropdownController.js","lib/mad/view/form/element/dropdownView.js","lib/mad/view/template/form/element/dropdown.ejs","lib/mad/form/element/freeElementController.js",
"lib/mad/form/element/radiobuttonController.js","lib/mad/view/form/element/radiobuttonView.js","lib/mad/view/template/form/element/radiobutton.ejs","lib/mad/helper/componentHelper.js","lib/mad/helper/component/boxDecorator.js","lib/mad/view/template/component/decorator/box.ejs","lib/mad/lang/i18n.js","lib/mad/model/state.js","lib/mad/model/validationRules.js","lib/mad/net/ajax.js","lib/mad/net/response.js","lib/mad/net/responseHandler.js","lib/mad/string/uuid.js","lib/mad/route/routeListener.js",
"app/bootstrap/appBootstrap.js","app/helper/errorHandler.js","app/controller/appController.js","app/controller/passwordWorkspaceController.js","app/controller/component/categoryChooserController.js","app/view/component/categoryChooser.js","lib/jquerypp/event/drop/drop.js","lib/jquerypp/event/drag/core/core.js","lib/jquerypp/lang/vector/vector.js","lib/jquerypp/event/livehack/livehack.js","lib/jquerypp/event/reverse/reverse.js","lib/jquerypp/dom/within/within.js","lib/jquerypp/dom/compare/compare.js",
"app/model/category.js","app/model/categoryResource.js","app/controller/component/passwordBrowserController.js","app/model/resource.js","app/model/secret.js","app/model/secretStrength.js","app/model/itemTag.js","app/model/tag.js","app/controller/component/copyLoginButtonController.js","app/controller/component/copySecretButtonController.js","app/controller/component/favoriteController.js","app/view/component/favorite.js","app/view/component/passwordBrowser.js","lib/jquerypp/event/drag/drag.js","lib/jquerypp/event/drag/step/step.js",
"lib/jquerypp/dom/styles/styles.js","lib/jquerypp/event/drag/limit/limit.js","lib/jquerypp/event/drag/scroll/scroll.js","app/view/template/component/resource/draggedResource.ejs","app/controller/component/resourceActionsTabController.js","app/controller/component/permissionsController.js","app/view/component/permissions.js","app/view/template/component/permissions.ejs","app/model/group.js","app/model/user.js","app/model/profile.js","app/model/permission.js","app/model/permissionType.js","app/controller/component/resourceDetailsController.js",
"app/view/component/resourceDetails.js","app/controller/component/commentsController.js","app/model/comment.js","app/view/component/comments.js","app/view/template/component/comments.ejs","app/controller/component/commentsListController.js","app/view/component/commentsList.js","app/controller/form/comment/createFormController.js","app/view/template/form/comment/addForm.ejs","app/controller/component/sidebarSectionController.js","app/controller/component/sidebarSections/sidebarSectionTagsController.js",
"app/view/component/sidebarSection/sidebarSectionTags.js","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionTags.ejs","app/controller/component/tagsController.js","app/controller/component/tagsListController.js","app/controller/form/tag/editFormController.js","app/view/template/form/tag/editForm.ejs","app/controller/component/sidebarSections/sidebarSectionDescriptionController.js","app/controller/form/resource/editDescriptionFormController.js","app/view/template/form/resource/editDescriptionForm.ejs",
"app/view/component/sidebarSection/sidebarSectionDescription.js","app/view/template/component/sidebarSection/sidebarSectionDescription.ejs","app/controller/component/resourceShortcutsController.js","app/controller/component/workspaceMenuController.js","app/view/template/component/workspaceMenu.ejs","app/controller/component/workspaceSecondaryMenuController.js","app/view/template/component/workspaceSecondaryMenu.ejs","app/controller/form/category/createFormController.js","app/view/template/form/category/createForm.ejs",
"app/controller/form/resource/createFormController.js","app/controller/component/secretStrengthController.js","app/view/template/component/secret/secretStrength.ejs","app/view/template/form/resource/createForm.ejs","app/model/filter.js","app/controller/peopleWorkspaceController.js","app/controller/component/groupChooserController.js","app/view/component/groupChooser.js","app/model/groupUser.js","app/controller/component/userBrowserController.js","app/view/component/userBrowser.js","app/view/template/component/user/draggedUser.ejs",
"app/controller/component/userShortcutsController.js","app/controller/component/userWorkspaceMenuController.js","app/view/template/component/userWorkspaceMenu.ejs","app/controller/form/user/createFormController.js","app/view/template/form/user/createForm.ejs","app/controller/form/group/createFormController.js","app/view/template/form/group/createForm.ejs","app/controller/component/appNavigationLeftController.js","app/controller/component/appNavigationRightController.js","app/controller/component/appFilterController.js",
"lib/mad/form/element/listController.js","app/view/component/appFilter.js","app/view/template/component/appFilter.ejs","app/controller/component/notificationController.js","app/model/notification.js","app/view/component/notification.js","app/controller/component/loadingBarController.js","app/view/component/loadingBar.js","app/model/favorite.js","app/view/template/app.ejs","app/net/responseHandler.js");
steal("stealconfig.js","app/passbolt.js","lib/mad/mad.js","lib/jquerypp/class/class.js","lib/can/construct/construct.js","lib/can/util/string/string.js","lib/can/util/util.js","lib/can/util/jquery/jquery.js","lib/can/util/can.js","lib/can/util/array/each.js","lib/can/construct/proxy/proxy.js","lib/can/construct/super/super.js","lib/mad/core/class.js","lib/jquerypp/lang/string/string.js","lib/jquerypp/controller/controller.js","lib/can/control/control.js","lib/can/control/plugin/plugin.js","lib/jquerypp/model/model.js",
"lib/can/model/model.js","lib/can/observe/observe.js","lib/can/util/bind/bind.js","lib/can/observe/attributes/attributes.js","lib/can/observe/setter/setter.js","lib/can/observe/elements/elements.js","lib/jquerypp/view/ejs/ejs.js","lib/jquerypp/view/view.js","lib/can/view/view.js","lib/can/view/modifiers/modifiers.js","lib/can/view/ejs/ejs.js","lib/can/observe/compute/compute.js","lib/can/view/scanner.js","lib/can/view/elements.js","lib/can/view/render.js","lib/can/view/live.js","lib/can/view/node_lists.js",
"lib/mad/controller/controller.js","lib/mad/route/extensionControllerActionDispatcher.js","lib/mad/route/dispatcherInterface.js","lib/mad/helper/routeHelper.js","lib/mad/model/model.js","lib/mad/model/list.js","lib/mad/model/serializer/cakeSerializer.js","lib/mad/model/serializer/serializer.js","lib/mad/model/attribute.js","lib/mad/view/view.js","lib/mad/event/eventable.js","lib/mad/bootstrap/appBootstrap.js","lib/jquerypp/dom/route/route.js","lib/can/route/route.js","lib/can/util/string/deparam/deparam.js",
"lib/mad/bootstrap/bootstrapInterface.js","lib/mad/event/eventBus.js","lib/mad/helper/htmlHelper.js","lib/mad/config/config.js","lib/mad/error/exception.js","lib/mad/error/callAbstractFunctionException.js","lib/mad/error/callInterfaceConstructorException.js","lib/mad/error/callInterfaceFunctionException.js","lib/mad/error/callPrivateFunctionException.js","lib/mad/error/missingOptionException.js","lib/mad/error/missingParameterException.js","lib/mad/error/noConstructorException.js","lib/mad/error/templateMissingException.js",
"lib/mad/error/wrongParametersException.js","lib/mad/error/wrongConfigException.js","lib/mad/error/errorHandler.js","lib/mad/controller/appController.js","lib/mad/controller/componentController.js","lib/mad/helper/controllerHelper.js","lib/mad/view/template/app.ejs","lib/mad/controller/component/buttonController.js","lib/mad/view/template/component/button.ejs","lib/mad/controller/component/compositeController.js","lib/mad/controller/component/dialogController.js","lib/mad/controller/component/freeCompositeController.js",
"lib/mad/view/template/component/workspace.ejs","lib/mad/view/component/dialog.js","lib/mad/controller/component/gridController.js","lib/mad/model/grid/column.js","lib/mad/view/component/grid.js","lib/mad/view/template/component/grid.ejs","lib/mad/object/map.js","lib/mad/core/singleton.js","lib/mad/view/template/component/grid/gridItem.ejs","lib/mad/controller/component/contextualMenuController.js","lib/mad/controller/component/dropDownMenuController.js","lib/mad/controller/component/menuController.js",
"lib/mad/controller/component/treeController.js","lib/mad/view/component/tree.js","lib/mad/view/template/component/tree.ejs","lib/mad/view/template/component/tree/treeItem.ejs","lib/mad/view/template/component/menu/menuItem.ejs","lib/mad/model/action.js","lib/mad/view/component/menu/dropDownMenu.js","lib/mad/view/template/component/menu/dropDownMenu.ejs","lib/mad/controller/component/tabController.js","lib/mad/view/component/tab.js","lib/mad/view/template/component/tab.ejs","lib/mad/controller/component/toggleButtonController.js",
"lib/mad/controller/component/dynamicTreeController.js","lib/mad/view/component/tree/dynamicTree.js","lib/mad/view/template/component/tree/dynamicTree.ejs","lib/mad/crypto/random.js","lib/mad/event/event.js","lib/mad/form/feedbackController.js","lib/mad/form/formElement.js","lib/mad/view/form/formElementView.js","lib/mad/form/formController.js","lib/mad/view/form/formView.js","lib/mad/form/formChoiceElement.js","lib/mad/form/element/autocompleteController.js","lib/mad/form/element/textboxController.js",
"lib/mad/view/form/element/textboxView.js","lib/mad/view/form/element/autocompleteView.js","lib/mad/form/element/checkboxController.js","lib/mad/view/form/element/checkboxView.js","lib/mad/view/template/form/element/checkbox.ejs","lib/mad/form/element/dateController.js","lib/mad/view/form/element/dateView.js","lib/mad/view/template/component/input.ejs","lib/mad/form/element/dropdownController.js","lib/mad/view/form/element/dropdownView.js","lib/mad/view/template/form/element/dropdown.ejs","lib/mad/form/element/freeElementController.js",
"lib/mad/form/element/radiobuttonController.js","lib/mad/view/form/element/radiobuttonView.js","lib/mad/view/template/form/element/radiobutton.ejs","lib/mad/helper/componentHelper.js","lib/mad/helper/component/boxDecorator.js","lib/mad/view/template/component/decorator/box.ejs","lib/mad/lang/i18n.js","lib/mad/model/state.js","lib/mad/model/validationRules.js","lib/mad/net/ajax.js","lib/mad/net/response.js","lib/mad/net/responseHandler.js","lib/mad/string/uuid.js","lib/mad/route/routeListener.js",
"app/bootstrap/appBootstrap.js","app/helper/errorHandler.js","app/controller/appController.js","app/controller/passwordWorkspaceController.js","app/controller/component/categoryChooserController.js","app/view/component/categoryChooser.js","lib/jquerypp/event/drop/drop.js","lib/jquerypp/event/drag/core/core.js","lib/jquerypp/lang/vector/vector.js","lib/jquerypp/event/livehack/livehack.js","lib/jquerypp/event/reverse/reverse.js","lib/jquerypp/dom/within/within.js","lib/jquerypp/dom/compare/compare.js",
"app/model/category.js","app/model/categoryResource.js","app/controller/component/passwordBrowserController.js","app/model/resource.js","app/model/secret.js","app/model/secretStrength.js","app/model/itemTag.js","app/model/tag.js","app/controller/component/copyLoginButtonController.js","app/controller/component/copySecretButtonController.js","app/controller/component/favoriteController.js","app/view/component/favorite.js","app/view/component/passwordBrowser.js","lib/jquerypp/event/drag/drag.js","lib/jquerypp/event/drag/step/step.js",
"lib/jquerypp/dom/styles/styles.js","lib/jquerypp/event/drag/limit/limit.js","lib/jquerypp/event/drag/scroll/scroll.js","app/view/template/component/resource/draggedResource.ejs","app/controller/component/resourceActionsTabController.js","app/controller/component/permissionsController.js","app/view/component/permissions.js","app/view/template/component/permissions.ejs","app/model/group.js","app/model/user.js","app/model/profile.js","app/model/permission.js","app/model/permissionType.js","app/controller/component/resourceDetailsController.js",
"app/view/component/resourceDetails.js","app/controller/component/commentsController.js","app/model/comment.js","app/view/component/comments.js","app/view/template/component/comments.ejs","app/controller/component/commentsListController.js","app/view/component/commentsList.js","app/controller/form/comment/createFormController.js","app/view/template/form/comment/addForm.ejs","app/controller/component/sidebarSectionController.js","app/controller/component/sidebarSections/sidebarSectionTagsController.js",
"app/view/component/sidebarSection/sidebarSectionTags.js","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionTags.ejs","app/controller/component/tagsController.js","app/controller/component/tagsListController.js","app/controller/form/tag/editFormController.js","app/view/template/form/tag/editForm.ejs","app/controller/component/sidebarSections/sidebarSectionDescriptionController.js","app/controller/form/resource/editDescriptionFormController.js","app/view/template/form/resource/editDescriptionForm.ejs",
"app/view/component/sidebarSection/sidebarSectionDescription.js","app/view/template/component/sidebarSection/sidebarSectionDescription.ejs","app/controller/component/resourceShortcutsController.js","app/controller/component/workspaceMenuController.js","app/view/template/component/workspaceMenu.ejs","app/controller/component/workspaceSecondaryMenuController.js","app/view/template/component/workspaceSecondaryMenu.ejs","app/controller/form/category/createFormController.js","app/view/template/form/category/createForm.ejs",
"app/controller/form/resource/createFormController.js","app/controller/component/secretStrengthController.js","app/view/template/component/secret/secretStrength.ejs","app/view/template/form/resource/createForm.ejs","app/model/filter.js","app/controller/peopleWorkspaceController.js","app/controller/component/groupChooserController.js","app/view/component/groupChooser.js","app/model/groupUser.js","app/controller/component/userBrowserController.js","app/view/component/userBrowser.js","app/view/template/component/user/draggedUser.ejs",
"app/controller/component/userShortcutsController.js","app/controller/component/userWorkspaceMenuController.js","app/view/template/component/userWorkspaceMenu.ejs","app/controller/form/user/createFormController.js","app/view/template/form/user/createForm.ejs","app/controller/form/group/createFormController.js","app/view/template/form/group/createForm.ejs","app/controller/component/appNavigationLeftController.js","app/controller/component/appNavigationRightController.js","app/controller/component/appFilterController.js",
"lib/mad/form/element/listController.js","app/view/component/appFilter.js","app/view/template/component/appFilter.ejs","app/controller/component/notificationController.js","app/model/notification.js","app/view/component/notification.js","app/controller/component/loadingBarController.js","app/view/component/loadingBar.js","app/model/favorite.js","app/view/template/app.ejs","app/net/responseHandler.js");steal.pushPending();
steal.config({map:{"*":{"jquerypp/":"lib/jquerypp/","jquery/jquery.js":"jquery","can/":"lib/can/","can/util/util.js":"can/util/jquery/jquery.js","jquery/":"lib/jquerypp/","mad/":"lib/mad/"}},paths:{"mad/":"lib/mad/","jquery/":"jquerypp/",jquery:"lib/can/lib/jquery.1.8.3.js"},shim:{jquery:{exports:"jQuery",packaged:!1}},ext:{js:"js",css:"css",less:"steal/less/less.js",coffee:"steal/coffee/coffee.js",ejs:"can/view/ejs/ejs.js",mustache:"can/view/mustache/mustache.js"}});steal.executed("stealconfig.js");
APP_URL=document.location.protocol+"//"+document.location.hostname+document.location.pathname;steal("mad/mad.js").then("app/bootstrap/appBootstrap.js","app/controller/appController.js","app/net/responseHandler.js").then(function(){$(document).ready(function(){new passbolt.bootstrap.AppBootstrap({config:["app/config/config.json"]})})});steal.executed("app/passbolt.js");
steal("jquery/class","mad/core/class.js").then("jquery/controller","jquery/model","jquery/view/ejs","mad/controller","mad/model","mad/model/attribute.js","mad/view").then("mad/bootstrap/appBootstrap.js","mad/config/config.js","mad/error/exception.js","mad/error/errorHandler.js","mad/controller/appController.js","mad/controller/componentController.js","mad/controller/component/buttonController.js","mad/controller/component/compositeController.js","mad/controller/component/dialogController.js","mad/controller/component/freeCompositeController.js",
"mad/controller/component/gridController.js","mad/controller/component/contextualMenuController.js","mad/controller/component/dropDownMenuController.js","mad/controller/component/menuController.js","mad/controller/component/tabController.js","mad/controller/component/toggleButtonController.js","mad/controller/component/treeController.js","mad/controller/component/dynamicTreeController.js","mad/core/singleton.js","mad/crypto/random.js","mad/event/event.js","mad/event/eventBus.js","mad/form/feedbackController.js",
"mad/form/formController.js","mad/form/formElement.js","mad/form/formChoiceElement.js","mad/form/element/autocompleteController.js","mad/form/element/checkboxController.js","mad/form/element/dateController.js","mad/form/element/dropdownController.js","mad/form/element/freeElementController.js","mad/form/element/radiobuttonController.js","mad/form/element/textboxController.js","mad/helper/controllerHelper.js","mad/helper/htmlHelper.js","mad/helper/routeHelper.js","mad/helper/componentHelper.js","mad/helper/component/boxDecorator.js",
"mad/lang/i18n.js","mad/model/action.js","mad/model/state.js","mad/model/validationRules.js","mad/net/ajax.js","mad/object/map.js","mad/string/uuid.js","mad/route/routeListener.js","mad/route/dispatcherInterface.js","mad/route/extensionControllerActionDispatcher.js");steal.executed("lib/mad/mad.js");steal("jquery","can/construct","can/construct/proxy","can/construct/super",function(a,b){a.Class=b})();steal.executed("lib/jquerypp/class/class.js");
steal("can/util/string",function(a){var b=0;a.Construct=function(){if(arguments.length)return a.Construct.extend.apply(a.Construct,arguments)};a.extend(a.Construct,{newInstance:function(){var a=this.instance(),b;a.setup&&(b=a.setup.apply(a,arguments));a.init&&a.init.apply(a,b||arguments);return a},_inherit:function(b,d,e){a.extend(e||b,b||{})},_overwrite:function(a,b,e,f){a[e]=f},setup:function(b){this.defaults=a.extend(!0,{},b.defaults,this.defaults)},instance:function(){b=1;var a=new this;b=0;return a},
extend:function(c,d,e){function f(){if(!b)return this.constructor!==f&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.constructor.newInstance.apply(this.constructor,arguments)}"string"!=typeof c&&(e=d,d=c,c=null);e||(e=d,d=null);var e=e||{},h=this.prototype,g,j,l,m;m=this.instance();a.Construct._inherit(e,h,m);for(g in this)this.hasOwnProperty(g)&&(f[g]=this[g]);a.Construct._inherit(d,this,f);if(c){l=c.split(".");j=l.pop();l=h=a.getObject(l.join("."),window,!0);var k=
a.underscore(c.replace(/\./g,"_")),n=a.underscore(j);h[j]=f}a.extend(f,{constructor:f,prototype:m,namespace:l,shortName:j,_shortName:n,fullName:c,_fullName:k});f.prototype.constructor=f;j=[this].concat(a.makeArray(arguments));m=f.setup.apply(f,j);f.init&&f.init.apply(f,m||j);return f}});return a.Construct});steal.executed("lib/can/construct/construct.js");
steal("can/util",function(a){var b=/\=\=/,c=/([A-Z]+)([A-Z][a-z])/g,d=/([a-z\d])([A-Z])/g,e=/([a-z\d])([A-Z])/g,f=/\{([^\}]+)\}/g,h=/"/g,g=/'/g,j=function(a,b,d){var c=a[b];void 0===c&&!0===d&&(c=a[b]={});return c};a.extend(a,{esc:function(a){return(""+(null===a||void 0===a||isNaN(a)&&"NaN"===""+a?"":a)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(h,"&#34;").replace(g,"&#39;")},getObject:function(b,d,c,e){var b=b?b.split("."):[],f=b.length,h,g=0,s,o,d=a.isArray(d)?d:[d||
window];if(!f)return d[0];for(;d[g];){h=d[g];for(o=0;o<f-1&&/^f|^o/.test(typeof h);o++)h=j(h,b[o],c);if(/^f|^o/.test(typeof h)&&(s=j(h,b[o],c),c&&"undefined"!=typeof e&&(h[b[o]]=e),void 0!==s))return!1===c&&delete h[b[o]],s;g++}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},underscore:function(a){return a.replace(b,"/").replace(c,"$1_$2").replace(d,"$1_$2").replace(e,"_").toLowerCase()},sub:function(b,d,c){var e=[];e.push((b||"").replace(f,function(b,f){var l=a.getObject(f,
d,!0===c?!1:void 0);return void 0===l?(e=null,""):/^f|^o/.test(typeof l)&&e?(e.push(l),""):""+l}));return null===e?e:1>=e.length?e[0]:e},replacer:f,undHash:/_|-/});return a});steal.executed("lib/can/util/string/string.js");steal("can/util/jquery",function(a){return a});steal.executed("lib/can/util/util.js");
steal("jquery","can/util/can.js","can/util/array/each.js",function(a,b){a.extend(b,a,{trigger:function(b,c,f){b.trigger?b.trigger(c,f):a.event.trigger(c,f,b,!0)},addEvent:function(b,c){a([this]).bind(b,c);return this},removeEvent:function(b,c){a([this]).unbind(b,c);return this},buildFragment:function(b,c){var f=a.buildFragment,b=[b],c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,f=f.call(jQuery,b,c);return f.cacheable?a.clone(f.fragment):f.fragment||f},$:a,each:b.each});a.each(["bind",
"unbind","undelegate","delegate"],function(c,e){b[e]=function(){var b=this[e]?this:a([this]);b[e].apply(b,arguments);return this}});a.each("append filter addClass remove data get".split(" "),function(a,c){b[c]=function(a){return a[c].apply(a,b.makeArray(arguments).slice(1))}});var c=a.cleanData;a.cleanData=function(d){a.each(d,function(a,c){c&&b.trigger(c,"destroyed",[],!1)});c(d)};return b});steal.executed("lib/can/util/jquery/jquery.js");
steal(function(){var a=window.can||{};if("undefined"===typeof GLOBALCAN||!1!==GLOBALCAN)window.can=a;a.isDeferred=function(a){var b=this.isFunction;return a&&b(a.then)&&b(a.pipe)};var b=0;a.cid=function(a,d){return a._cid?a._cid:a._cid=(d||"")+ ++b};a.VERSION="@EDGE";return a});steal.executed("lib/can/util/can.js");
steal("can/util/can.js",function(a){a.each=function(a,c,d){var e=0,f;if(a)if("number"===typeof a.length&&a.pop){a.attr&&a.attr("length");for(f=a.length;e<f&&!1!==c.call(d||a[e],a[e],e,a);e++);}else if(a.hasOwnProperty)for(f in a)if(a.hasOwnProperty(f)&&!1===c.call(d||a[f],a[f],f,a))break;return a};return a});steal.executed("lib/can/util/array/each.js");
steal("can/util","can/construct",function(a){var b=a.isArray,c=a.makeArray,d=function(a){var d=c(arguments),e,a=d.shift();b(a)||(a=[a]);e=this;return function(){for(var l=d.concat(c(arguments)),f,k=a.length,n=0,q;n<k;n++)if(q=a[n])f="string"==typeof q,l=(f?e[q]:q).apply(e,l||[]),n<k-1&&(l=!b(l)||l._use_call?[l]:l);return l}};a.Construct.proxy=a.Construct.prototype.proxy=d;for(var e=[a.Observe,a.Control,a.Model],f=0;f<e.length;f++)e[f]&&(e[f].proxy=d);return a});steal.executed("lib/can/construct/proxy/proxy.js");
steal("can/util","can/construct",function(a){var b=a.isFunction,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;a.Construct._overwrite=function(a,e,f,h){a[f]=b(h)&&b(e[f])&&c.test(h)?function(a,b){return function(){var c=this._super,d;this._super=e[a];d=b.apply(this,arguments);this._super=c;return d}}(f,h):h};a.Construct._inherit=function(b,c,f){var f=f||b,h;for(h in b)a.Construct._overwrite(f,c,h,b[h])};return a});steal.executed("lib/can/construct/super/super.js");
steal("can/construct","jquery/lang/string").then(function(){can.Construct.prototype.decorate=function(a){var b=$.String.getObject(a),c=null;"undefined"==typeof this._decorator&&(this._decorator=[]);c=this._decorator.length;this._decorator[c]={name:a,f:{}};for(var d in b)"undefined"!=typeof this[d]?(this._decorator[c].f[d]=this[d],this[d]=function(a,c,d){return function(){var g=this._super,j;this._super=a._decorator[d].f[c];j=b[c].apply(a,arguments);this._super=g;return j}}(this,d,c)):this[d]=function(a,
c){return function(){return b[c].apply(a,arguments)}}(this,d,c);return this};can.Construct.prototype.getClass=function(){return this.constructor};can.Construct.augment=function(a){console.log(a);a=can.getObject(a);console.log(2);var b=["namespace","shortName","fullName","defaults"];console.log(3);for(var c in a)console.log(4),"undefined"==typeof can.Construct[c]&&-1==$.inArray(c,b)&&(console.log(5),this[c]=a[c]);console.log(51);b=["Class"];console.log(6);console.log(a);for(c in a.prototype)console.log(7),
"undefined"==typeof can.Construct.prototype[c]&&-1==$.inArray(c,b)&&(console.log(8),"init"==c?(console.log(9),"undefined"==typeof this.prototype.__inits&&(console.log(10),this.prototype.__inits=[],this.prototype.__inits.push(this.prototype[c]),console.log(11),this.prototype[c]=function(){return function(a,b,c){console.log(12);for(var h in this.__inits)this.__inits[h].apply(this,arguments)}}(this,"init")),console.log(13),this.prototype.__inits.push(a.prototype[c]),console.log(14)):(console.log(15),
this.prototype[c]=a.prototype[c]));console.log(16)}});steal.executed("lib/mad/core/class.js");
steal("jquery",function(a){var b={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},c=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},d,e=a.String=a.extend(a.String||{},{getObject:d=function(d,e,g){var d=d?d.split(b.dot):[],j=d.length,l,m,k,n=0,e=a.isArray(e)?e:[e||window];if(0==j)return e[0];for(;l=e[n++];){for(k=0;k<j-1&&c(l);k++)l=void 0!==l[d[k]]?l[d[k]]:g&&(l[d[k]]={});if(c(l)&&(m=void 0!==
l[d[k]]?l[d[k]]:g&&(l[d[k]]={}),void 0!==m))return!1===g&&delete l[d[k]],m}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){a=e.classize(a);return a.charAt(0).toLowerCase()+a.substr(1)},classize:function(a,c){for(var d=a.split(b.undHash),j=0;j<d.length;j++)d[j]=e.capitalize(d[j]);return d.join(c||"")},niceName:function(a){return e.classize(a," ")},underscore:function(a){return a.replace(b.colons,"/").replace(b.words,"$1_$2").replace(b.lowUp,"$1_$2").replace(b.dash,
"_").toLowerCase()},sub:function(a,e,g){var j=[],g="boolean"==typeof g?!g:g;j.push(a.replace(b.replacer,function(a,b){var f=d(b,e,g);return c(f)?(j.push(f),""):""+f}));return 1>=j.length?j[0]:j},_regs:b});return a});steal.executed("lib/jquerypp/lang/string/string.js");
steal("jquery","can/control","jquerypp/class","can/control/plugin",function(a,b){a.Controller=b;a.fn.controller=a.fn.control;a.fn.controllers=a.fn.controls;can.Control.prototype.find=can.Control.prototype.find||function(a){return this.element.find(a)};a.Controller.prototype.bind=a.Controller.prototype.on;a.Controller.prototype.delegate=a.Controller.prototype.on});steal.executed("lib/jquerypp/controller/controller.js");
steal("can/util","can/construct",function(a){var b=function(b,c,d){a.bind.call(b,c,d);return function(){a.unbind.call(b,c,d)}},c=a.isFunction,d=a.extend,e=a.each,f=[].slice,h=/\{([^\}]+)\}/g,g=a.getObject("$.event.special",[a])||{},j=function(b,c,d,e){a.delegate.call(b,c,d,e);return function(){a.undelegate.call(b,c,d,e)}},l,m=a.Control=a.Construct({setup:function(){a.Construct.setup.apply(this,arguments);if(a.Control){var b;this.actions={};for(b in this.prototype)this._isAction(b)&&(this.actions[b]=
this._action(b))}},_shifter:function(b,d){var e="string"==typeof d?b[d]:d;c(e)||(e=b[e]);return function(){b.called=d;return e.apply(b,[this.nodeName?a.$(this):this].concat(f.call(arguments,0)))}},_isAction:function(a){var b=this.prototype[a],d=typeof b;return"constructor"!==a&&("function"==d||"string"==d&&c(this.prototype[b]))&&!(!g[a]&&!k[a]&&!/[^\w]/.test(a))},_action:function(b,d){h.lastIndex=0;if(d||!h.test(b)){var c=d?a.sub(b,[d,window]):b;if(!c)return null;var e=a.isArray(c),f=e?c[1]:c,j=f.split(/\s+/g),
m=j.pop();return{processor:k[m]||l,parts:[f,j.join(" "),m],delegate:e?c[0]:void 0}}},processors:{},defaults:{}},{setup:function(b,c){var e=this.constructor,l=e.pluginName||e._fullName;this.element=a.$(b);l&&"can_control"!==l&&this.element.addClass(l);(l=a.data(this.element,"controls"))||a.data(this.element,"controls",l=[]);l.push(this);this.options=d({},e.defaults,c);this.on();return[this.element,this.options]},on:function(c,d,e,l){if(!c){this.off();var c=this.constructor,d=this._bindings,e=c.actions,
l=this.element,f=a.Control._shifter(this,"destroy"),m,k;for(m in e)if(e.hasOwnProperty(m)&&(k=e[m]||c._action(m,this.options)))d.push(k.processor(k.delegate||l,k.parts[2],k.parts[1],m,this));a.bind.call(l,"destroyed",f);d.push(function(b){a.unbind.call(b,"destroyed",f)});return d.length}"string"==typeof c&&(l=e,e=d,d=c,c=this.element);void 0===l&&(l=e,e=d,d=null);"string"==typeof l&&(l=a.Control._shifter(this,l));this._bindings.push(d?j(c,a.trim(d),e,l):b(c,e,l));return this._bindings.length},off:function(){var a=
this.element[0];e(this._bindings||[],function(b){b(a)});this._bindings=[]},destroy:function(){if(null!==this.element){var b=this.constructor,b=b.pluginName||b._fullName;this.off();b&&"can_control"!==b&&this.element.removeClass(b);b=a.data(this.element,"controls");b.splice(a.inArray(this,b),1);a.trigger(this,"destroyed");this.element=null}}}),k=a.Control.processors;l=function(c,d,e,l,f){l=a.Control._shifter(f,l);return e?j(c,a.trim(e),d,l):b(c,d,l)};e("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave touchstart touchmove touchcancel touchend touchleave".split(" "),
function(a){k[a]=l});return m});steal.executed("lib/can/control/control.js");
steal("jquery","can/util","can/control",function(a,b){var c,d=b.makeArray,e=b.Control.setup;b.Control.setup=function(){if(this!==b.Control){var a=this.pluginName||this._fullName;"can_control"!==a&&this.plugin(a);e.apply(this,arguments)}};a.fn.extend({controls:function(){var a=d(arguments),e=[],g,j;this.each(function(){if(g=b.$(this).data("controls"))for(var d=0;d<g.length;d++){j=g[d];var m;if(!(m=!a.length))a:{m=j;var k=a;for(c=0;c<k.length;c++)if("string"==typeof k[c]?m.constructor._shortName==k[c]:
m instanceof k[c]){m=!0;break a}m=!1}m&&e.push(j)}});return e},control:function(a){return this.controls.apply(this,arguments)[0]}});b.Control.plugin=function(c){var e=this;a.fn[c]||(a.fn[c]=function(c){var f=d(arguments),l="string"==typeof c&&a.isFunction(e.prototype[c]),m=f[0],k;this.each(function(){var a=b.$(this).control(e);a?l?k=a[m].apply(a,f.slice(1)):a.update.apply(a,f):e.newInstance.apply(e,[this].concat(f))});return void 0!==k?k:this})};b.Control.prototype.update=function(a){b.extend(this.options,
a);this.on()};return b});steal.executed("lib/can/control/plugin/plugin.js");steal("jquery","can/util","can/model","can/observe/attributes","can/observe/setter","can/observe/elements",function(a,b){a.Model=b.Model;var c=a.Model.prototype.__get;a.Model.prototype.__get=function(a){var e=a&&"get"+b.classize(a);return"function"===typeof this[e]?this[e]():c.apply(this,arguments)};a.Model.prototype.update=function(a,b,c){this.attr(a);return this.save(b,c)}});steal.executed("lib/jquerypp/model/model.js");
steal("can/util","can/observe",function(a){var b=function(b,c,d){var e=new a.Deferred;b.then(function(){var b=a.makeArray(arguments);b[0]=c[d](b[0]);e.resolveWith(e,b)},function(){e.rejectWith(this,arguments)});"function"===typeof b.abort&&(e.abort=function(){return b.abort()});return e},c=0,d=function(b){a.Observe.__reading&&a.Observe.__reading(b,b.constructor.id);return b.__get(b.constructor.id)},e=function(b,c,e,f,h){var g;a.isArray(b)?(g=b[1],b=b[0]):g=b.serialize();g=[g];var p=b.constructor,
r;"destroy"==c&&g.shift();"create"!==c&&g.unshift(d(b));r=p[c].apply(p,g);g=r.pipe(function(a){b[h||c+"d"](a,r);return b});r.abort&&(g.abort=function(){r.abort()});g.then(e,f);return g},f={create:{url:"_shortName",type:"post"},update:{data:function(b,c){var c=c||{},d=this.id;c[d]&&c[d]!==b&&(c["new"+a.capitalize(b)]=c[d],delete c[d]);c[d]=b;return c},type:"put"},destroy:{type:"delete",data:function(a){var b={};b.id=b[this.id]=a;return b}},findAll:{url:"_shortName"},findOne:{}},h=function(b,c){return function(d){var d=
b.data?b.data.apply(this,arguments):d,e=c||this[b.url||"_url"],f=d,h=b.type||"get",g={};"string"==typeof e?(e=e.split(/\s+/),g.url=e.pop(),e.length&&(g.type=e.pop())):a.extend(g,e);g.data="object"==typeof f&&!a.isArray(f)?a.extend(g.data||{},f):f;g.url=a.sub(g.url,g.data,!0);return a.ajax(a.extend({type:h||"post",dataType:"json",success:void 0,error:void 0},g))}};a.Model=a.Observe({fullName:"can.Model",setup:function(b){this.store={};a.Observe.setup.apply(this,arguments);if(a.Model){this.List=g({Observe:this},
{});var d=this,e=a.proxy(this._clean,d);a.each(f,function(c,f){a.isFunction(d[f])||(d[f]=h(c,d[f]));if(d["make"+a.capitalize(f)]){var g=d["make"+a.capitalize(f)](d[f]);a.Construct._overwrite(d,b,f,function(){this._reqs++;var a=g.apply(this,arguments),b=a.then(e,e);b.abort=a.abort;return b})}});if("can.Model"==d.fullName||!d.fullName)d.fullName="Model"+ ++c;this._reqs=0;this._url=this._shortName+"/{"+this.id+"}"}},_ajax:h,_makeRequest:e,_clean:function(a){this._reqs--;if(!this._reqs)for(var b in this.store)this.store[b]._bindings||
delete this.store[b];return a},models:function(b,c){if(b){if(b instanceof this.List)return b;var d=this,e=[],f=c instanceof a.Observe.List?c:new (d.List||g),h=a.isArray(b),p=b instanceof g,p=h?b:p?b.serialize():b.data;f.length&&f.splice(0);a.each(p,function(a){e.push(d.model(a))});f.push.apply(f,e);h||a.each(b,function(a,b){"data"!==b&&f.attr(b,a)});return f}},model:function(a){if(a){a instanceof this&&(a=a.serialize());var b=a[this.id],b=(b||0===b)&&this.store[b]?this.store[b].attr(a,this.removeAttr||
!1):new this(a);this._reqs&&(this.store[a[this.id]]=b);return b}}},{isNew:function(){var a=d(this);return!(a||0===a)},save:function(a,b){return e(this,this.isNew()?"create":"update",a,b)},destroy:function(b,c){if(this.isNew()){var d=this;return a.Deferred().done(function(a){d.destroyed(a)}).resolve(d)}return e(this,"destroy",b,c,"destroyed")},_bindsetup:function(){this.constructor.store[this.__get(this.constructor.id)]=this;return a.Observe.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){delete this.constructor.store[d(this)];
return a.Observe.prototype._bindteardown.apply(this,arguments)},___set:function(b,c){a.Observe.prototype.___set.call(this,b,c);b===this.constructor.id&&this._bindings&&(this.constructor.store[d(this)]=this)}});a.each({makeFindAll:"models",makeFindOne:"model",makeCreate:"model",makeUpdate:"model"},function(c,d){a.Model[d]=function(d){return function(){var e=a.makeArray(arguments),f=a.isFunction(e[1])?e.splice(0,1):e.splice(0,2),f=b(d.apply(this,f),this,c);f.then(e[0],e[1]);return f}}});a.each(["created",
"updated","destroyed"],function(b){a.Model.prototype[b]=function(c){var d=this.constructor;c&&"object"==typeof c&&this.attr(c.attr?c.attr():c);a.trigger(this,"change",b);a.trigger(d,b,this)}});var g=a.Model.List=a.Observe.List({setup:function(b){a.isPlainObject(b)&&!a.isArray(b)?(a.Observe.List.prototype.setup.apply(this),this.replace(this.constructor.Observe.findAll(b))):a.Observe.List.prototype.setup.apply(this,arguments)},_changes:function(b,c){a.Observe.List.prototype._changes.apply(this,arguments);
if(/\w+\.destroyed/.test(c)){var d=this.indexOf(b.target);-1!=d&&this.splice(d,1)}}});return a.Model});steal.executed("lib/can/model/model.js");
steal("can/util","can/util/bind","can/construct",function(a){var b=function(b){return b&&!a.isDeferred(b)&&(a.isArray(b)||a.isPlainObject(b)||b instanceof a.Observe)},c=function(b,c){return a.each(b,function(a){a&&a.unbind&&a.unbind("change"+c)})},d=function(b,d,m,h,g){h=h||f;g=g||f.List;b instanceof f?m._bindings&&c([b],m._cid):b=a.isArray(b)?new g(b):new h(b);m._bindings&&e(b,d,m);return b},e=function(b,c,d){b.bind("change"+d._cid,function(){var e=a.makeArray(arguments),f=e.shift();e[0]=("*"===
c?[d.indexOf(b),e[0]]:[c,e[0]]).join(".");f.triggeredNS=f.triggeredNS||{};f.triggeredNS[d._cid]||(f.triggeredNS[d._cid]=!0,a.trigger(d,f,e))})};observeId=0;serialize=function(c,d,e){c.each(function(c,f){e[f]=b(c)&&a.isFunction(c[d])?c[d]():c});return e};attrParts=function(b,c){return c?[b]:a.isArray(b)?b:(""+b).split(".")};batchNum=1;transactions=0;batchEvents=[];stopCallbacks=[];makeBindSetup=function(a){return function(){var b=this;this._each(function(c,d){c&&c.bind&&e(c,a||d,b)})}};var f=a.Map=
a.Observe=a.Construct({bind:a.bindAndSetup,unbind:a.unbindAndTeardown,id:"id",canMakeObserve:b,startBatch:function(a){transactions++;a&&stopCallbacks.push(a)},stopBatch:function(b,c){b?transactions=0:transactions--;if(0==transactions){var d=batchEvents.slice(0),e=stopCallbacks.slice(0);batchEvents=[];stopCallbacks=[];batchNum++;c&&this.startBatch();a.each(d,function(b){a.trigger.apply(a,b)});a.each(e,function(a){a()})}},triggerBatch:function(b,c,d){if(!b._init){if(0==transactions)return a.trigger(b,
c,d);c="string"===typeof c?{type:c}:c;c.batchNum=batchNum;batchEvents.push([b,c,d])}},keys:function(a){var b=[];f.__reading&&f.__reading(a,"__keys");for(var c in a._data)b.push(c);return b}},{setup:function(b){this._data={};a.cid(this,".observe");this._init=1;this.attr(b);this.bind("change"+this._cid,a.proxy(this._changes,this));delete this._init},_bindsetup:makeBindSetup(),_bindteardown:function(){var a=this._cid;this._each(function(b){c([b],a)})},_changes:function(a,b,c,d,e){f.triggerBatch(this,
{type:b,batchNum:a.batchNum},[d,e])},_triggerChange:function(b,c,d,e){f.triggerBatch(this,"change",a.makeArray(arguments))},_each:function(a){var b=this.__get(),c;for(c in b)b.hasOwnProperty(c)&&a(b[c],c)},attr:function(a,b){var c=typeof a;if("string"!==c&&"number"!==c)return this._attrs(a,b);if(void 0===b)return f.__reading&&f.__reading(this,a),this._get(a);this._set(a,b);return this},each:function(){f.__reading&&f.__reading(this,"__keys");return a.each.apply(void 0,[this.__get()].concat(a.makeArray(arguments)))},
removeAttr:function(b){var c=this instanceof a.Observe.List,b=attrParts(b),d=b.shift(),e=c?this[d]:this._data[d];if(b.length)return e.removeAttr(b);c?this.splice(d,1):d in this._data&&(delete this._data[d],d in this.constructor.prototype||delete this[d],f.triggerBatch(this,"__keys"),this._triggerChange(d,"remove",void 0,e));return e},_get:function(a){var b="string"===typeof a&&!!~a.indexOf(".")&&this.__get(a);if(b)return b;a=attrParts(a);b=this.__get(a.shift());return a.length?b?b._get(a):void 0:
b},__get:function(a){return a?this._data[a]:this._data},_set:function(a,c,d){var a=attrParts(a,d),d=a.shift(),e=this.__get(d);if(b(e)&&a.length)e._set(a,c);else{if(a.length)throw"can.Observe: Object does not exist";this.__convert&&(c=this.__convert(d,c));this.__set(d,c,e)}},__set:function(a,e,h){if(e!==h){var g=this.__get().hasOwnProperty(a)?"set":"add";this.___set(a,b(e)?d(e,a,this):e);"add"==g&&f.triggerBatch(this,"__keys",void 0);this._triggerChange(a,g,e,h);h&&c([h],this._cid)}},___set:function(a,
b){this._data[a]=b;a in this.constructor.prototype||(this[a]=b)},bind:a.bindAndSetup,unbind:a.unbindAndTeardown,serialize:function(){return serialize(this,"serialize",{})},_attrs:function(c,d){if(void 0===c)return serialize(this,"attr",{});var c=a.extend({},c),e,h=this,g;f.startBatch();this.each(function(e,f){g=c[f];void 0===g?d&&h.removeAttr(f):(h.__convert&&(g=h.__convert(f,g)),g instanceof a.Observe?h.__set(f,g,e):b(e)&&b(g)&&e.attr?e.attr(g,d):e!=g&&h.__set(f,g,e),delete c[f])});for(e in c)g=
c[e],this._set(e,g,!0);f.stopBatch();return this},compute:function(b){return a.compute(this,b)}}),h=[].splice,g=f({setup:function(b,c){this.length=0;a.cid(this,".observe");this._init=1;a.isDeferred(b)?this.replace(b):this.push.apply(this,a.makeArray(b||[]));this.bind("change"+this._cid,a.proxy(this._changes,this));a.extend(this,c);delete this._init},_triggerChange:function(a,b,c,d){f.prototype._triggerChange.apply(this,arguments);~a.indexOf(".")||("add"===b?(f.triggerBatch(this,b,[c,+a]),f.triggerBatch(this,
"length",[this.length])):"remove"===b?(f.triggerBatch(this,b,[d,+a]),f.triggerBatch(this,"length",[this.length])):f.triggerBatch(this,b,[c,+a]))},__get:function(a){return a?this[a]:this},___set:function(a,b){this[a]=b;+a>=this.length&&(this.length=+a+1)},_each:function(a){for(var b=this.__get(),c=0;c<b.length;c++)a(b[c],c)},_bindsetup:makeBindSetup("*"),serialize:function(){return serialize(this,"serialize",[])},splice:function(e,f){var g=a.makeArray(arguments),k;for(k=2;k<g.length;k++){var n=g[k];
b(n)&&(g[k]=d(n,"*",this,this.constructor.Observe,this.constructor))}void 0===f&&(f=g[1]=this.length-e);k=h.apply(this,g);a.Observe.startBatch();0<f&&(this._triggerChange(""+e,"remove",void 0,k),c(k,this._cid));2<g.length&&this._triggerChange(""+e,"add",g.slice(2),k);a.Observe.stopBatch();return k},_attrs:function(b,c){if(void 0===b)return serialize(this,"attr",[]);b=a.makeArray(b);f.startBatch();this._updateAttrs(b,c);f.stopBatch()},_updateAttrs:function(a,c){for(var d=Math.min(a.length,this.length),
e=0;e<d;e++){var f=this[e],g=a[e];b(f)&&b(g)?f.attr(g,c):f!=g&&this._set(e,g)}a.length>this.length?this.push.apply(this,a.slice(this.length)):a.length<this.length&&c&&this.splice(a.length)}});a.each({push:"length",unshift:0},function(a,c){var e=[][c];g.prototype[c]=function(){for(var c=[],f=a?this.length:0,l=arguments.length,g;l--;)g=arguments[l],c[l]=b(g)?d(g,"*",this,this.constructor.Observe,this.constructor):g;l=e.apply(this,c);(!this.comparator||c.length)&&this._triggerChange(""+f,"add",c,void 0);
return l}});a.each({pop:"length",shift:0},function(b,c){g.prototype[c]=function(){var d=arguments[0]&&a.isArray(arguments[0])?arguments[0]:a.makeArray(arguments),e=b&&this.length?this.length-1:0,d=[][c].apply(this,d);this._triggerChange(""+e,"remove",void 0,[d]);d&&d.unbind&&d.unbind("change"+this._cid);return d}});a.extend(g.prototype,{indexOf:function(b){this.attr("length");return a.inArray(b,this)},join:[].join,reverse:[].reverse,slice:function(){return new this.constructor(Array.prototype.slice.apply(this,
arguments))},concat:function(){var b=[];a.each(a.makeArray(arguments),function(c,d){b[d]=c instanceof a.Observe.List?c.serialize():c});return new this.constructor(Array.prototype.concat.apply(this.serialize(),b))},forEach:function(b,c){a.each(this,b,c||this)},replace:function(b){a.isDeferred(b)?b.then(a.proxy(this.replace,this)):this.splice.apply(this,[0,this.length].concat(a.makeArray(b||[])));return this}});a.List=f.List=g;f.setup=function(){a.Construct.setup.apply(this,arguments);this.List=f.List({Observe:this},
{})};return f});steal.executed("lib/can/observe/observe.js");steal("can/util",function(a){a.bindAndSetup=function(){a.addEvent.apply(this,arguments);this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup()));return this};a.unbindAndTeardown=function(b,c){a.removeEvent.apply(this,arguments);this._bindings--;this._bindings||this._bindteardown&&this._bindteardown();return this};return a});steal.executed("lib/can/util/bind/bind.js");
steal("can/util","can/observe",function(a){a.each([a.Observe,a.Model],function(b){if(void 0!==b){a.extend(b,{attributes:{},convert:{date:function(a){var b=typeof a;return"string"===b?isNaN(Date.parse(a))?null:Date.parse(a):"number"===b?new Date(a):a},number:function(a){return parseFloat(a)},"boolean":function(a){return"false"===a||"0"===a||!a?!1:!0},"default":function(b,c,d,g){var d=a.getObject(g),j=window;0<=g.indexOf(".")&&(g=g.substring(0,g.lastIndexOf(".")),j=a.getObject(g));return"function"==
typeof d?d.call(j,b,c):b}},serialize:{"default":function(a){return"object"===typeof a&&null!==a&&a&&a.serialize?a.serialize():a},date:function(a){return a&&a.getTime()}}});var d=b.setup;b.setup=function(b,c,h){var g=this;d.call(g,b,c,h);a.each(["attributes"],function(a){if(!g[a]||b[a]===g[a])g[a]={}});a.each(["convert","serialize"],function(c){b[c]!=g[c]&&(g[c]=a.extend({},b[c],g[c]))})}}});var b=a.Observe.prototype.setup;a.Observe.prototype.setup=function(c){var d={};b.call(this,c);a.each(this.constructor.defaults,
function(a,b){this.hasOwnProperty(b)||(d[b]=a)},this);this._init=1;this.attr(d);delete this._init};a.Observe.prototype.__convert=function(a,b){var e=this.constructor,f=this.attr(a),h,g;e.attributes&&(h=e.attributes[a],g=e.convert[h]||e.convert["default"]);return null===b||!h?b:g.call(e,b,f,function(){},h)};a.Observe.prototype.serialize=function(b){var d={},e=this.constructor,f={};void 0!=b?f[b]=this[b]:f=this.__get();a.each(f,function(a,b){var c,f;c=e.attributes?e.attributes[b]:0;f=e.serialize?e.serialize[c]:
0;d[b]=a&&"function"==typeof a.serialize?a.serialize():f?f(a,c):a});return void 0!=b?d[b]:d};return a.Observe});steal.executed("lib/can/observe/attributes/attributes.js");
steal("can/util","can/observe/attributes",function(a){a.classize=function(b,c){for(var d=b.split(a.undHash),g=0;g<d.length;g++)d[g]=a.capitalize(d[g]);return d.join(c||"")};var b=a.classize,c=a.Observe.prototype,d=c.__set;c.__set=function(c,f,h,g,j){var l="set"+b(c),m=function(b){!1!==(j&&j.call(k,b))&&a.trigger(k,"error",[c,b],!0);return!1},k=this;if(!(this[l]&&void 0===(f=this[l](f,function(a){d.call(k,c,a,h,g,m)},m))))return d.call(k,c,f,h,g,m),this};return a.Observe});steal.executed("lib/can/observe/setter/setter.js");
steal("can/util","can/observe",function(a){var b=function(b){var d=[];a.each(b,function(a){a["__u Nique"]||(d.push(a),a["__u Nique"]=1)});return a.each(d,function(a){delete a["__u Nique"]})};a.extend(a.Observe.prototype,{identity:function(){var a=this.constructor,b=this[a.id]||this._cid.replace(/./,"");return((a._fullName?a._fullName+"_":"")+(a.escapeIdentity?encodeURIComponent(b):b)).replace(/ /g,"_")},elements:function(b){var d=this.identity();this.constructor.escapeIdentity&&(d=d.replace(/([ #;&,.+*~\'%:"!^$[\]()=>|\/])/g,
"\\$1"));return a.$("."+d,b)},hookup:function(b){var d=this.constructor._shortName||"",b=a.$(b),e;(e=a.data(b,"instances"))||a.data(b,"instances",e={});a.addClass(b,d+" "+this.identity());e[d]=this}});$.fn.instances=function(){var c=[],d,e;this.each(function(){a.each($.data(this,"instances")||{},function(a){d=void 0===d?a.constructor.List||null:a.constructor.List===d?d:null;c.push(a)})});e=d?new d:new a.Observe.List;e.push.apply(e,b(c));return e};$.fn.instance=function(b){return b&&b instanceof a.Observe?
(b.hookup(this[0]),this):this.instances.apply(this,arguments)[0]};return a.Observe});steal.executed("lib/can/observe/elements/elements.js");steal("jquery","can/util","jquerypp/view","can/view/ejs",function(a,b){a.EJS=b.EJS});steal.executed("lib/jquerypp/view/ejs/ejs.js");steal("jquery","can/util","can/view","can/view/modifiers",function(a,b){a.View=b.view;return a});steal.executed("lib/jquerypp/view/view.js");
steal("can/util",function(a){var b=a.isFunction,c=a.makeArray,d=1,e=a.view=a.template=function(c,d,f,g){b(f)&&(g=f,f=void 0);var h=b(g)?function(a){g(e.frag(a))}:null,c=e.render(c,d,f,h),j=a.Deferred();return b(c)?c:a.isDeferred(c)?(c.then(function(a,b){j.resolve.call(j,e.frag(a),b)},function(){j.fail.apply(j,arguments)}),j):e.frag(c)};a.extend(e,{frag:function(a,b){return e.hookup(e.fragment(a),b)},fragment:function(b){b=a.buildFragment(b,document.body);b.childNodes.length||b.appendChild(document.createTextNode(""));
return b},toId:function(b){return a.map(b.toString().split(/\/|\./g),function(a){if(a)return a}).join("_")},hookup:function(b,c){var d=[],f,g;a.each(b.childNodes?a.makeArray(b.childNodes):b,function(b){1===b.nodeType&&(d.push(b),d.push.apply(d,a.makeArray(b.getElementsByTagName("*"))))});a.each(d,function(a){if(a.getAttribute&&(f=a.getAttribute("data-view-id"))&&(g=e.hookups[f]))g(a,c,f),delete e.hookups[f],a.removeAttribute("data-view-id")});return b},hookups:{},hook:function(a){e.hookups[++d]=a;
return" data-view-id='"+d+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(){},preload:function(){},render:function(d,f,k,n){b(k)&&(n=k,k=void 0);var q=g(f);if(q.length){var p=new a.Deferred,r=a.extend({},f);q.push(h(d,!0));a.when.apply(a,q).then(function(b){var d=c(arguments),e=d.pop();if(a.isDeferred(f))r=j(b);else for(var l in f)a.isDeferred(f[l])&&(r[l]=j(d.shift()));d=e(r,k);p.resolve(d,r);n&&n(d,r)},function(){p.reject.apply(p,
arguments)});return p}var s,q=b(n),p=h(d,q);if(q)s=p,p.then(function(a){n(f?a(f,k):a)});else{if("resolved"===p.state()&&p.__view_id)return d=e.cachedRenderers[p.__view_id],f?d(f,k):d;p.then(function(a){s=f?a(f,k):a})}return s},registerView:function(b,c,d,f){c=(d||e.types[e.ext]).renderer(b,c);f=f||new a.Deferred;e.cache&&(e.cached[b]=f,f.__view_id=b,e.cachedRenderers[b]=c);return f.resolve(c)}});var f=function(a,b){if(!a.length)throw"can.view: No template or empty template:"+b;},h=function(b,c){var d=
b.match(/\.[\w\d]+$/),g,h,j;b.match(/^#/)&&(b=b.substr(1));if(h=document.getElementById(b))d="."+h.type.match(/\/(x\-)?(.+)/)[2];!d&&!e.cached[b]&&(b+=d=e.ext);a.isArray(d)&&(d=d[0]);j=e.toId(b);if(b.match(/^\/\//))var r=b.substr(2),b=!window.steal?r:steal.config().root.mapJoin(r);g=e.types[d];if(e.cached[j])return e.cached[j];if(h)return e.registerView(j,h.innerHTML,g);var s=new a.Deferred;a.ajax({async:c,url:b,dataType:"text",error:function(a){f("",b);s.reject(a)},success:function(a){f(a,b);e.registerView(j,
a,g,s)}});return s},g=function(b){var c=[];if(a.isDeferred(b))return[b];for(var d in b)a.isDeferred(b[d])&&c.push(b[d]);return c},j=function(b){return a.isArray(b)&&"success"===b[1]?b[0]:b};window.steal&&steal.type("view js",function(a,b){var c=e.types["."+a.type],d=e.toId(a.id);a.text="steal('"+(c.plugin||"can/view/"+a.type)+"',function(can){return can.view.preload('"+d+"',"+a.text+");\n})";b()});a.extend(e,{register:function(b){this.types["."+b.suffix]=b;window.steal&&steal.type(b.suffix+" view js",
function(a,b){var c=e.types["."+a.type],d=e.toId(a.id+"");a.text=c.script(d,a.text);b()});e[b.suffix]=function(c,d){if(!d){var f=function(){return e.frag(f.render.apply(this,arguments))};f.render=function(){var a=b.renderer(null,c);return a.apply(a,arguments)};return f}e.preload(c,b.renderer(c,d));return a.view(c)}},registerScript:function(a,b,c){return"can.view.preload('"+b+"',"+e.types["."+a].script(b,c)+");"},preload:function(b,c){function d(){return e.frag(c.apply(this,arguments))}e.cached[b]=
(new a.Deferred).resolve(function(a,b){return c.call(a,a,b)});d.render=c;return d}});return a});steal.executed("lib/can/view/view.js");
steal("jquery","can/view",function(a,b){var c,d,e,f,h,g,j={val:!0,text:!0};c=function(c){var f=a.fn[c];a.fn[c]=function(){var a=b.makeArray(arguments),h,q,p=this;if(b.isDeferred(a[0]))return a[0].done(function(a){d.call(p,[a],f)}),this;if(e(a)){if(h=g(a))return q=a[h],a[h]=function(a){d.call(p,[a],f);q.call(p,a)},b.view.apply(b.view,a),this;a=b.view.apply(b.view,a);if(b.isDeferred(a))return a.done(function(a){d.call(p,[a],f)}),this;a=[a]}return j[c]?f.apply(this,a):d.call(this,a,f)}};d=function(a,
c){for(var d in b.view.hookups)break;d&&a[0]&&f(a[0])&&(a[0]=b.view.frag(a[0]).childNodes);return c.apply(this,a)};e=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!h(a[1])};h=function(a){return a.nodeType||a[0]&&a[0].nodeType};f=function(a){return h(a)?!0:"string"===typeof a?(a=b.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&3<=a.length):!1};g=function(a){return"function"===typeof a[3]?3:"function"===typeof a[2]&&2};a.fn.hookup=function(){b.view.frag(this);
return this};b.each("prepend append after before text html replaceWith val".split(" "),function(a){c(a)});return b});steal.executed("lib/can/view/modifiers/modifiers.js");
steal("can/util","can/view","can/util/string","can/observe/compute","can/view/scanner.js","can/view/render.js",function(a){var b=a.extend,c=function(a){if(this.constructor!=c){var e=new c(a);return function(a,b){return e.render(a,b)}}"function"==typeof a?this.template={fn:a}:(b(this,a),this.template=this.scanner.scan(this.text,this.name))};a.EJS=c;c.prototype.render=function(a,b){a=a||{};return this.template.fn.call(a,a,new c.Helpers(a,b||{}))};b(c.prototype,{scanner:new a.view.Scanner({tokens:[["templateLeft",
"<%%"],["templateRight","%>"],["returnLeft","<%=="],["escapeLeft","<%="],["commentLeft","<%#"],["left","<%"],["right","%>"],["returnRight","%>"]]})});c.Helpers=function(a,c){this._data=a;this._extras=c;b(this,c)};c.Helpers.prototype={list:function(b,c){a.each(b,function(a,h){c(a,h,b)})},each:function(b,c){a.isArray(b)?this.list(b,c):a.view.lists(b,c)}};a.view.register({suffix:"ejs",script:function(a,b){return"can.EJS(function(_CONTEXT,_VIEW) { "+(new c({text:b,name:a})).template.out+" })"},renderer:function(a,
b){return c({text:b,name:a})}});return a});steal.executed("lib/can/view/ejs/ejs.js");
steal("can/util","can/util/bind",function(a){var b=function(b,c){var f;a.Observe&&(f=a.Observe.__reading,a.Observe.__reading=function(a,b){h.push({obj:a,attr:b+""})});var h=[],g=b.call(c);a.Observe&&(a.Observe.__reading=f);return{value:g,observed:h}},c=function(c,e,f,h){var g={},j=!0,l={value:void 0,teardown:function(){for(var a in g){var b=g[a];b.observe.obj.unbind(b.observe.attr,k);delete g[a]}}},m,k=function(a){if(!h||h.bound)if(void 0===a.batchNum||a.batchNum!==m){var b=l.value,c=n();l.value=
c;c!==b&&f(c,b);m=m=a.batchNum}},n=function(){var f=b(c,e),h=f.observed,f=f.value;j=!j;a.each(h,function(a){g[a.obj._cid+"|"+a.attr]?g[a.obj._cid+"|"+a.attr].matched=j:(g[a.obj._cid+"|"+a.attr]={matched:j,observe:a},a.obj.bind(a.attr,k))});for(var l in g)h=g[l],h.matched!==j&&(h.observe.obj.unbind(h.observe.attr,k),delete g[l]);return f};l.value=n();l.isListening=!a.isEmptyObject(g);return l};a.compute=function(b,e,f){if(b&&b.isComputed)return b;var h,g,j={bound:!1,hasDependencies:!1},l=function(){},
m=function(){},k,n=function(){return k},q=function(a){k=a},p=!0;g=function(b){if(arguments.length){var c=k,d=q.call(e,b,c);if(g.hasDependencies)return n.call(e);k=void 0===d?n.call(e):d;c!==k&&a.Observe.triggerBatch(g,"change",[k,c]);return k}a.Observe.__reading&&p&&a.Observe.__reading(g,"change");return j.bound?k:n.call(e)};if("function"===typeof b)n=q=b,p=!1===f?!1:!0,g.hasDependencies=!1,l=function(a){h=c(b,e||this,a,j);g.hasDependencies=h.isListening;k=h.value},m=function(){h.teardown()};else if(e)if("string"==
typeof e){var r=b instanceof a.Observe;r&&(g.hasDependencies=!0);var n=function(){return r?b.attr(e):b[e]},q=function(a){r?b.attr(e,a):b[e]=a},s,l=function(c){s=function(){c(n(),k)};a.bind.call(b,f||e,s)},m=function(){a.unbind.call(b,f||e,s)}}else"function"===typeof e?(k=b,q=e):(k=b,n=e.get||n,q=e.set||q,l=e.on||l,m=e.off||m);else k=b;g.isComputed=!0;a.cid(g,"compute");var o=function(b,c){k=b;a.Observe.triggerBatch(g,"change",[b,c])};return a.extend(g,{_bindsetup:function(){j.bound=!0;l.call(this,
o)},_bindteardown:function(){m.call(this,o);j.bound=!1},bind:a.bindAndSetup,unbind:a.unbindAndTeardown})};a.compute.binder=c;return a.compute});steal.executed("lib/can/observe/compute/compute.js");
steal("can/view","./elements",function(a,b){var c=/(\r|\n)+/g,d=function(a,c,d){if(a)return a;for(;d<c.length;){if("<"==c[d]&&b.reverseTagMap[c[d+1]])return b.reverseTagMap[c[d+1]];d++}return""},e=function(a){eval(a)},f=/([^\s]+)[\s]*=[\s]*$/,h=null,g=null,j=null,l=null,m=function(){return g?"'"+j.match(f)[1]+"'":h?1:0};a.view.Scanner=Scanner=function(b){a.extend(this,{text:{},tokens:[]},b);this.tokenReg=[];this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"};this.tokenComplex=[];this.tokenMap={};for(var b=
0,c;c=this.tokens[b];b++)c[2]?(this.tokenReg.push(c[2]),this.tokenComplex.push({abbr:c[1],re:RegExp(c[2]),rescan:c[3]})):(this.tokenReg.push(c[1]),this.tokenSimple[c[1]]=c[0]),this.tokenMap[c[0]]=c[1];this.tokenReg=RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")};Scanner.prototype={helpers:[{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(a){a=a.match(/\s*\(([\$\w]+)\)\s*->([^\n]*)/);return"function(__){var "+a[1]+"=can.$(__);"+a[2]+"}"}}],scan:function(a,f){var q=
[],p=0,r=this.tokenSimple,s=this.tokenComplex,a=a.replace(c,"\n");a.replace(this.tokenReg,function(b,c){var d=arguments[arguments.length-2];d>p&&q.push(a.substring(p,d));if(r[b])q.push(b);else for(var e=0,f;f=s[e];e++)if(f.re.test(b)){q.push(f.abbr);f.rescan&&q.push(f.rescan(c));break}p=d+c.length});p<a.length&&q.push(a.substr(p));var o="",A=["var ___v1ew = [];"+(this.text.start||"")],w=function(a,b){A.push("___v1ew.push(",'"',a.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("\t").join("\\t"),
'"'+(b||"")+");")},D=[],u,y=null,C=!1,z="",x=[],E=!1,B=0,v,t=this.tokenMap;for(h=g=j=null;void 0!==(v=q[B++]);){if(null===y)switch(v){case t.left:case t.escapeLeft:case t.returnLeft:C=h&&1;case t.commentLeft:y=v;o.length&&w(o);o="";break;case t.escapeFull:C=h&&1;l=1;y=t.escapeLeft;o.length&&w(o);l=q[B++];o=l.content||l;l.before&&w(l.before);q.splice(B,0,t.right);break;case t.commentFull:break;case t.templateLeft:o+=t.left;break;case "<":0!==q[B].indexOf("!--")&&(h=1,C=0);o+=v;break;case ">":h=0;u=
"/"==o.substr(o.length-1)||"--"==o.substr(o.length-2);C||!E&&b.tagToContentPropMap[x[x.length-1]]?(u?w(o.substr(0,o.length-1),',can.view.pending(),"/>"'):w(o,',can.view.pending(),">"'),o="",C=0):o+=v;if(u||E)x.pop(),z=x[x.length-1],E=!1;break;case "'":case '"':h&&(g&&g===v?g=null:null===g&&(g=v,j=u));default:"<"===u&&(z=v.split(/\s/)[0],0===z.indexOf("/")&&x[x.length-1]===z.substr(1)?(z=x[x.length-1],E=!0):x.push(z)),o+=v}else switch(v){case t.right:case t.returnRight:switch(y){case t.left:u=--o.split("{").length-
--o.split("}").length;1==u?(A.push("___v1ew.push(","can.view.txt(0,'"+d(z,q,B)+"',"+m()+",this,function(){","var ___v1ew = [];",o),D.push({before:"",after:"return ___v1ew.join('')}));\n"})):(p=D.length&&-1==u?D.pop():{after:";"},p.before&&A.push(p.before),A.push(o,";",p.after));break;case t.escapeLeft:case t.returnLeft:(u=--o.split("{").length- --o.split("}").length)&&D.push({before:"return ___v1ew.join('')",after:"}));"});for(var y=y===t.escapeLeft?1:0,H={insert:"___v1ew.push(",tagName:d(z,q,B),
status:m()},F=0;F<this.helpers.length;F++){var G=this.helpers[F];if(G.name.test(o)){o=G.fn(o,H);G.name.source==/^>[\s]*\w*/.source&&(y=0);break}}"object"==typeof o?o.raw&&A.push(o.raw):A.push("___v1ew.push(","can.view.txt("+y+",'"+z+"',"+m()+",this,function(){ "+(this.text.escape||"")+"return ",o,u?"var ___v1ew = [];":"}));");l&&l.after&&l.after.length&&(w(l.after.length),l=null)}y=null;o="";break;case t.templateLeft:o+=t.left;break;default:o+=v}u=v}o.length&&w(o);A.push(";");o={out:"with(_VIEW) { with (_CONTEXT) {"+
A.join("")+" return ___v1ew.join('')}}"};e.call(o,"this.fn = (function(_CONTEXT,_VIEW){"+o.out+"});\r\n//@ sourceURL="+f+".js");return o}};return Scanner});steal.executed("lib/can/view/scanner.js");
steal(function(){var a={tagToContentPropMap:{option:"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:{"class":"className",value:"value",innerText:"innerText",textContent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0},defaultValue:["input","textarea"],tagMap:{"":"span",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},
getParentNode:function(a,c){return c&&11===a.parentNode.nodeType?c:a.parentNode},setAttr:function(b,c,d){var e=b.nodeName.toString().toLowerCase(),f=a.attrMap[c];!0===f?b[c]=!0:f?(b[f]=d,"value"===f&&0<=can.inArray(e,a.defaultValue)&&(b.defaultValue=d)):b.setAttribute(c,d)},getAttr:function(b,c){return(a.attrMap[c]&&b[a.attrMap[c]]?b[a.attrMap[c]]:b.getAttribute(c))||""},removeAttr:function(b,c){!0===a.attrMap[c]?b[c]=!1:b.removeAttribute(c)},contentText:function(a){return"string"==typeof a?a:!a&&
0!==a?"":""+a}};return a});steal.executed("lib/can/view/elements.js");
steal("can/view","./elements","./live","can/util/string",function(a,b,c){var d=[],e=function(a){a=b.tagMap[a]||"span";return"span"===a?"@@!!@@":"<"+a+">"+e(a)+"</"+a+">"},f=function(b,c){if("string"==typeof b)return b;if(!b&&0!==b)return"";var e=b.hookup&&function(a,c){b.hookup.call(b,a,c)}||"function"==typeof b&&b;if(e){if(c)return"<"+c+" "+a.view.hook(e)+"></"+c+">";d.push(e);return""}return""+b},h=function(b){return"string"==typeof b||"number"==typeof b?a.esc(b):f(b)};a.extend(a.view,{live:c,setupLists:function(){var b=
a.view.lists,c;a.view.lists=function(a,b){c={list:a,renderer:b}};return function(){a.view.lists=b;return c}},pending:function(){var b=d.slice(0);lastHookups=b;d=[];return a.view.hook(function(c){a.each(b,function(a){a(c)})})},txt:function(g,j,l,m,k){var n=a.view.setupLists(),q=function(){},p=function(){r.unbind("change",q)},r=a.compute(k,m,!1);r.bind("change",q);var k=b.tagMap[j]||"span",s=n(),n=r();if(s)return"<"+k+a.view.hook(function(a,b){c.list(a,s.list,s.renderer,m,b)})+"></"+k+">";if(!r.hasDependencies)return p(),
(g||0!==l?h:f)(n,0===l&&k);j=b.tagToContentPropMap[j];if(0===l&&!j)return"<"+k+a.view.hook(g?function(a,b){c.text(a,r,b);p()}:function(a,b){c.html(a,r,b);p()})+">"+e(k)+"</"+k+">";if(1===l)return d.push(function(a){c.attributes(a,r,r());p()}),r();var o=0===l?j:l;(0===l?lastHookups:d).push(function(a){c.attribute(a,o,r);p()});return c.attributePlaceholder}});return a});steal.executed("lib/can/view/render.js");
steal("can/util","./elements.js","can/view","./node_lists.js",function(a,b,c,d){var e=function(b,c,d){var e=function(){d(f);a.unbind.call(b,"destroyed",e)},f={teardownCheck:function(a){a||e()}};a.bind.call(b,"destroyed",e);c(f);return f},f=function(a,b,c){return e(a,function(){b.bind("change",c)},function(a){b.unbind("change",c);a.nodeList&&d.unregister(a.nodeList)})};insertElementsAfter=function(a,b){var c=a[a.length-1];c.nextSibling?c.parentNode.insertBefore(b,c.nextSibling):c.parentNode.appendChild(b)};
var h={nodeLists:d,list:function(c,f,h,m,k){var n=[],q=function(b,c,e){var f=document.createDocumentFragment(),g=[];a.each(c,function(b){b=h.call(m,b);b=a.view.frag(b,k);g.push(a.makeArray(b.childNodes));f.appendChild(b)});n[e]?(b=n[e][0],b.parentNode.insertBefore(f,b)):insertElementsAfter(0==e?[r]:n[e-1],f);a.each(g,function(a){d.register(a)});[].splice.apply(n,[e,0].concat(g))},p=function(b,c,e){var b=n.splice(e,c.length),f=[];a.each(b,function(a){[].push.apply(f,a);d.replace(a,[]);d.unregister(a)});
a.remove(a.$(f))},k=b.getParentNode(c,k),r=document.createTextNode("");e(k,function(){f.bind("add",q).bind("remove",p)},function(){f.unbind("add",q).unbind("remove",p);a.each(n,function(a){d.unregister(a)})});insertElementsAfter([c],r);a.remove(a.$(c));q({},f,0)},html:function(c,e,h){var h=b.getParentNode(c,h),m=f(h,e,function(a,b){k[0].parentNode&&n(b);m.teardownCheck(k[0].parentNode)}),k,n=function(b){var e=a.view.frag(b,h),b=a.makeArray(e.childNodes);insertElementsAfter(k||[c],e);k?(e=a.makeArray(k),
d.replace(k,b),a.remove(a.$(e))):(a.remove(a.$(c)),k=b,m.nodeList=k,d.register(k))};n(e(),[c])},text:function(a,c,d){var d=b.getParentNode(a,d),e=f(a.parentNode!==d?a.parentNode:d,c,function(a,b){"unknown"!=typeof h.nodeValue&&(h.nodeValue=""+b);e.teardownCheck(h.parentNode)}),h=document.createTextNode(c());a.parentNode!==d&&(d=a.parentNode);d.insertBefore(h,a);d.removeChild(a)},attributes:function(a,c,d){var e=function(c){var c=(c||"").replace(/['"]/g,"").split("="),d=c.shift();d!=h&&h&&b.removeAttr(a,
h);d&&(b.setAttr(a,d,c.join("=")),h=d)};f(a,c,function(a,b){e(b)});if(3<=arguments.length)var h=(d||"").replace(/['"]/g,"").split("=")[0];else e(c())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(c,d,e){f(c,e,function(){b.setAttr(c,d,p.render())});var m=a.$(c),k;(k=a.data(m,"hooks"))||a.data(m,"hooks",k={});var n=b.getAttr(c,d),m=n.split(h.attributePlaceholder),q=[],p;q.push(m.shift(),m.join(h.attributePlaceholder));k[d]?k[d].computes.push(e):k[d]={render:function(){var a=
0;return n?n.replace(h.attributeReplace,function(){return b.contentText(p.computes[a++]())}):b.contentText(p.computes[a++]())},computes:[e],batchNum:void 0};p=k[d];q.splice(1,0,e());b.setAttr(c,d,q.join(""))}};return h});steal.executed("lib/can/view/live.js");
steal("can/util",function(a){var b=!0;try{document.createTextNode("")._=0}catch(c){b=!1}var d={},e={},f={},h="ejs_"+Math.random(),g=0,j=function(a){if(b||3!==a.nodeType)return a[h]?a[h]:a[h]=(a.nodeName?"element_":"obj_")+ ++g;for(var c in e)if(e[c]===a)return c;e["text_"+ ++g]=a;return"text_"+g},l=function(b,c){var e=d[j(b)];if(e){var f=a.inArray(c,e);0<=f&&e.splice(f,1);e.length||delete d[j(b)]}},m=function(a,b){var c=d[j(a)];c||(c=d[j(a)]=[]);c.push(b)},k={id:j,replace:function(b,c){var b=a.makeArray(b),
e=b[0];a.each(a.makeArray(d[j(e)]),function(d){var h=f[d],g=a.inArray(e,h),j=a.inArray(b[b.length-1],h);if(0<=g&&0<=j){for(var w=g;w<=j;w++)l(h[w],d);h.splice.apply(h,[g,j-g+1].concat(c));a.each(c,function(a){m(a,d)})}else k.unregister(h)})},register:function(b){var c=j(b);f[c]=b;a.each(b,function(a){m(a,c)})},unregister:function(b){var c=j(b);a.each(b,function(a){l(a,c)});delete f[c]},nodeMap:d,nodeListMap:f};return k});steal.executed("lib/can/view/node_lists.js");
steal("jquery/controller","mad/route/extensionControllerActionDispatcher.js").then(function(){$.Controller("mad.controller.Controller",{getDispatcher:function(){return mad.route.ExtensionControllerActionDispatcher},defaults:{}},{init:function(a,b){if(!$(a).length)throw new mad.error.Exception('The parameter "el" ('+a+") should refer to an existing DOM node.");this.options=$.extend(!0,{},this.options,b);""==this.getId()&&this.element.attr("id",this.options.id||uuid())},destroy:function(){this._super()},
getComponent:function(a){return mad.app.getComponent(a)},getId:function(){return this.element[0].id},remove:function(){this.element.remove()},getAlias:function(a){var a="undefined"==typeof a?"camel":a,b="",b=this.constructor.shortName.replace(/Controller$/,"");switch(a){case "under":b=jQuery.String.underscore(b)}return b}})});steal.executed("lib/mad/controller/controller.js");
steal("mad/route/dispatcherInterface.js","mad/helper/routeHelper.js").then(function(){mad.route.DispatcherInterface.extend("mad.route.ExtensionControllerActionDispatcher",{dispatch:function(a,b){var c=[];controllerId="undefined"!=typeof b.controllerId?b.controllerId:"js_"+a.extension+"_"+a.controller+"_controller";var d=mad.helper.routeHelper.pluginNameController(a,{prefix:"passbolt"!=a.extension?"passbolt_":""});$controller=$("#"+controllerId);if(!$controller.length&&($controller=$("#gacd-page-controller"),
!$controller.length))throw Error("No element found on the page for the id ("+controllerId+") neither with the default id (gacd-page-controller)");if("undefined"==typeof $controller[d])throw Error("The DOM element ("+controllerId+") has not an attached controller defined by the class ("+mad.helper.routeHelper.classNameController(a)+")");if("undefined"==typeof $controller.data("controllers"))$controller[d]();for(d=1;"undefined"!==typeof a["p"+d];d++)c.push(a["p"+d]);d=$controller.controller();d[a.action].apply(d,
c)}},{})});steal.executed("lib/mad/route/extensionControllerActionDispatcher.js");steal("can/construct").then(function(){can.Construct("mad.route.DispatcherInterface",{dispatch:function(){throw new mad.error.CallInterfaceFunctionException;}},{init:function(){throw new mad.error.CallInterfaceConstructorException;}})});steal.executed("lib/mad/route/dispatcherInterface.js");
steal("can/construct").then(function(){can.Construct("mad.helper.routeHelper",{getClassController:function(){},formatStrToPluginName:function(a){var b="",c=0,d;for(d in a)"_"!=a[d]&&a[d]==a[d].toUpperCase()?(b+="_"+a[d].toLowerCase(),c+=1):b+=a[d],c++;return b},pluginNameController:function(a,b){var c="",d="undefined"!=typeof b&&"undefined"!=typeof b.prefix?b.prefix:"";"object"==typeof a?c=a.extension+"_"+a.controller:(c=a.split("."),c=c[0]+"_"+c[1]+"_"+c[3].substr(0,c[3].length-10).toLowerCase());
return d+mad.helper.routeHelper.formatStrToPluginName(c)},classNameController:function(a,b){var c="undefined"!=typeof b&&"undefined"!=typeof b.prefix?b.prefix:"",d=a.controller.charAt(0).toUpperCase()+a.controller.slice(1)+"Controller";return c+a.extension+".controller."+d}},{init:function(){throw new lb.core.NoConstructor;}})});steal.executed("lib/mad/helper/routeHelper.js");
steal("jquery/model","can/model","mad/model/list.js","mad/model/serializer/cakeSerializer.js").then(function(){can.Model("mad.model.Model",{validationRules:{},serverValidationRules:{},checkServerRules:!0,getModelAttributeValue:function(a,b){for(var c=mad.model.Model.getModelAttributes(a),d="",e=c[c.length-1].name,f=null,h=1;h<c.length-1;h++)d+=d.length?"."+c[h].name:c[h].name;c=can.getObject(d,b);"undefined"!=typeof c&&(c.length?(f=[],can.each(c,function(a){f.push(a[e])})):f=c[e]);return f},isMultipleAttribute:function(a){return/models$/.test(this.attributes[a])},
getAttribute:function(a){var b=null,b=this.attributes[a].substr(0,this.attributes[a].lastIndexOf(".")),b=$.String.getObject(b);return new mad.model.Attribute({name:a,multiple:this.isMultipleAttribute(a),modelReference:b})},getModelAttributes:function(a){var b=[],a=a.split("."),c;for(c in a)if(b.length){var d=b[b.length-1].modelReference;if(d.attributes[a[c]])d=d.attributes[a[c]],e=d.slice(0,d.lastIndexOf(".")),f=$.String.getObject(e),b.push(new mad.model.Attribute({name:a[c],multiple:/models$/.test(d),
modelReference:f}));else{b.push(new mad.model.Attribute({name:a[c],modelReference:null}));break}}else if(a[c][0]===a[c][0].toUpperCase()){var e=a.slice(0,parseInt(c)+1).join("."),f=$.String.getObject(e);b.push(new mad.model.Attribute({name:e,multiple:!1,modelReference:f}))}return b},isModelAttribute:function(a){return/model[s]?$/.test(this.attributes[a])},models:function(a){if("undefined"==typeof a||null==a)a=[];return mad.net.Response.isResponse(a)?can.Model.models.call(this,mad.net.Response.getData(a)):
can.Model.models.call(this,a)},model:function(a){a=a||{};mad.net.Response.isResponse(a)?(a=mad.net.Response.getData(a),a=mad.model.serializer.CakeSerializer.from(a,this)):a[this.shortName]&&(a=mad.model.serializer.CakeSerializer.from(a,this));return can.Model.model.call(this,a)},getValidationRules:function(a){var b={},c=this;if("undefined"==typeof a||null==a)a="default";0<this.validationRules.length?b=this.validationRules:this.checkServerRules&&("undefined"==typeof this.serverValidationRules[this.shortName]&&
(this.serverValidationRules[this.shortName]={}),"undefined"==typeof this.serverValidationRules[this.shortName][a]&&(b="/validation/"+this.shortName+"/"+a,c.serverValidationRules[c.shortName][a]={},mad.net.Ajax.request({async:!1,type:"GET",url:b}).then(function(b){c.serverValidationRules[c.shortName][a]=b})),b=this.serverValidationRules[this.shortName][a]);return b},isRequired:function(a,b){var c=!1,d=this.getValidationRules(b);if(!$.isArray(d[a]))if("undefined"!=typeof d[a].rule){if("undefined"!=
typeof d[a].required&&(!0===typeof d[a].required||d[a].required===b))c=!0}else for(var e in d[a])if("undefined"!=typeof d[a][e].required&&(!0===typeof d[a][e].required||d[a][e].required===b))c=!0;return c},validateAttribute:function(a,b,c,d){var e=!0;"undefined"==typeof d&&(d="default");var f=this.getValidationRules(d);if("undefined"!=typeof f[a]){var d=this.isRequired(a,d),h=mad.model.ValidationRules.validate("required",b);if(d&&!0!==h)return h;if(!d&&!0!==h)return!0;var a=f[a],g;for(g in a)f=mad.model.ValidationRules.validate(a[g],
b,c),!0!==f&&(!0===e&&(e=""),e+=f)}return e},nestedToList:function(a,b,c,d){var e=[],c="undefined"==typeof c?null:c;null!=c?e.push(a.attr(c)):e.push(a);can.each(a[b],function(a){$.merge(e,mad.model.Model.nestedToList(a,b,c,!0))});d||(e=new (a.getClass().List)(e));return e},nestedListToList:function(a,b){var c=null,d=[];can.each(a,function(a){$.merge(d,mad.model.Model.nestedToList(a,b,!0))});a.length&&(c=new (a[0].getClass().List)(d));return c},search:function(a,b,c){var d=[],e=b.split("."),f=e[0],
e=e[1],h;for(h in a){if($.isArray(a[h][f]))for(var g in a[h][f])a[h][f][g][e]==c&&d.push(a[h]);else a[h][f][e]==c&&d.push(a[h]);if(a[h].children){var j=mad.model.Model.search(a[h].children,b,c);j.length&&(d=$.merge(d,j))}}return d},searchOne:function(a,b,c){var d=null,a=mad.model.Model.search(a,b,c);a.length&&(d=a[0]);return d},serialize:{date:function(a){if("number"==typeof a||"string"==typeof a)a=new Date(a);return a.getYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+
":"+a.getMilliseconds()}}},{getClass:function(){return this.constructor}})});steal.executed("lib/mad/model/model.js");steal("can/construct").then(function(){can.Construct("mad.model.List",{indexOf:function(a,b){var c=-1,d=b instanceof mad.model.Model?b.id:b;can.each(a,function(a,b){if(a.id==d)return c=b,!1});return c},remove:function(a,b){var c=mad.model.List.indexOf(a,b);return-1!=c?(a.splice(c,1),!0):!1}},{})});steal.executed("lib/mad/model/list.js");
steal("can/construct","mad/model/serializer/serializer.js").then(function(){can.Construct("mad.model.serializer.CakeSerializer",{from:function(a,b){var c={},c=$.extend(!0,{},a,a[b.shortName]);delete c[b.shortName];return c},to:function(a,b){var c={};c[b.shortName]={};for(var d in a)b.isModelAttribute(d)?c[d]=a[d]:c[b.shortName][d]=a[d];return c}},{})});steal.executed("lib/mad/model/serializer/cakeSerializer.js");
steal("can/construct").then(function(){can.Construct("mad.model.serializer.Serializer",{from:function(){},to:function(){}},{})});steal.executed("lib/mad/model/serializer/serializer.js");steal("mad/model/model.js").then(function(){mad.model.Model.extend("mad.model.Attribute",{attributes:{name:"string",type:"string",modelReference:"string",multiple:"string"}},{getModelReference:function(){return this.modelReference}})});steal.executed("lib/mad/model/attribute.js");
steal("mad/controller","mad/event/eventable.js").then(function(){mad.controller.Controller("mad.view.View",{defaults:{templateUri:null,templateBased:!0,element:null},render:function(a,b){b=b||{};a=steal.idToUri(a).toString();return can.view.render(a,b)}},{init:function(a,b){this._super(a,b);for(var c in b.cssClasses)this.element.hasClass(b.cssClasses[c])||this.element.addClass(b.cssClasses[c])},getController:function(){return this.options.controller},addClass:function(a){this.element.addClass(a)},
getTemplate:function(){return null!=this.getTemplateUri()?this.getTemplateUri():mad.helper.ControllerHelper.getViewPath(this.getController().getClass())},hide:function(){this.element.hide()},loading:function(a){a?this.element.prepend('<div class="js_loading" />'):$(".js_loading",this.element).remove()},removeClass:function(a){this.element.removeClass(a)},position:function(a){mad.helper.HtmlHelper.position(this.element,a)},render:function(){return mad.view.View.render(this.getTemplate(),this.getController().getViewData())},
insertInDom:function(a){this.element.html(a)},getTemplateUri:function(){return this.options.templateUri},setTemplateUri:function(a){this.options.templateUri=a},show:function(){this.element.show()}})});steal.executed("lib/mad/view/view.js");steal("can/construct").then(function(){can.Construct("mad.event.Eventable",{},{trigger:function(a,b){this.element.trigger(a,"undefined"!=typeof b?b:{})},bind:function(a,b){this.element.bind(a,b)}})});steal.executed("lib/mad/event/eventable.js");
steal("jquery/dom/route","mad/bootstrap/bootstrapInterface.js","mad/event/eventBus.js","mad/helper/htmlHelper.js","mad/config/config.js").then(function(){mad.bootstrap.BootstrapInterface.extend("mad.bootstrap.AppBootstrap",{defaults:{config:["mad/config/config.json"],callbacks:{ready:null}}},{init:function(a){this.options={};var b=[];$.merge($.merge(b,mad.bootstrap.AppBootstrap.defaults.config),a.config);$.extend(!0,this.options,mad.bootstrap.AppBootstrap.defaults,a);try{for(var c in b)mad.Config.load(b[c]);
var d=can.getObject(mad.Config.read("error.ErrorHandlerClassName"));if(!d)throw new mad.error.WrongConfigException("error.ErrorHandlerClassName");mad.Config.write("error.ErrorHandlerClass",d);var e=can.getObject(mad.Config.read("net.ResponseHandlerClassName"));if(!e)throw new mad.error.WrongConfigException("net.ResponseHandlerClassName");mad.Config.write("net.ResponseHandlerClass",e);var f=can.getObject(mad.Config.read("app.ControllerClassName"));if(!f)throw new mad.error.WrongConfigException("app.ControllerClassName");
mad.Config.write("app.AppControllerClass",f);if(""===$.trim(mad.Config.read("app.url")))throw new mad.error.WrongConfigException("app.url");if(!$(mad.Config.read("app.controllerElt")).length)throw new mad.error.WrongConfigException("app.controllerElt");can.getObject(mad.Config.read("app.namespace"),window,!0);var h=mad.Config.read("core.components");for(c in h)this["init"+h[c]]()}catch(g){if(mad.Config.read("error.ErrorHandlerClass"))mad.Config.read("error.ErrorHandlerClass").handleException(g);else throw g;
}},initInternationalization:function(){mad.net.Ajax.request({type:"GET",url:APP_URL+"dictionaries/en-EN.json",async:!1,dataType:"json",success:function(a,b,c){mad.lang.I18n.loadDico(c)},error:function(){}})},initAppController:function(){var a=this;mad.bus.bind("app_ready",function(){a.options.callbacks.ready&&a.options.callbacks.ready()});(new (can.getObject(mad.Config.read("app.ControllerClassName")))($(mad.Config.read("app.controllerElt")))).start()},initExtensions:function(){new passbolt.activity.bootstrap.Bootstrap},
initEventBus:function(){var a=mad.helper.HtmlHelper.create($(mad.Config.read("app.controllerElt")),"before","<div/>"),a=new mad.event.EventBus(a);mad.bus=a},initRouteListener:function(){var a=this;mad.bus.bind(mad.APP_NS_ID+"_route_change",function(b,c){a.dispatch(c)});new mad.route.RouteListener}})});steal.executed("lib/mad/bootstrap/appBootstrap.js");steal("jquery","can/util","can/route",function(a,b){a.route=b.route});steal.executed("lib/jquerypp/dom/route/route.js");
steal("can/util","can/observe","can/util/string/deparam",function(a){var b=/\:([\w\.]+)/g,c=function(b){var c=[];a.each(b,function(b,d){c.push(("className"===d?"class":d)+'="'+("href"===d?b:a.esc(b))+'"')});return c.join(" ")},d=function(a,b){var c=0,d=0,e={},f;for(f in a.defaults)a.defaults[f]===b[f]&&(e[f]=1,c++);for(;d<a.names.length;d++){if(!b.hasOwnProperty(a.names[d]))return-1;e[a.names[d]]||c++}return c},e=!0,f=window.location,h=a.each,g=a.extend;a.route=function(c,d){var d=d||{},e=[],f=c.replace(b,
function(b,f,h){e.push(f);return"([^\\"+(c.substr(h+b.length,1)||a.route._querySeparator)+"]"+(d[f]?"*":"+")+")"});a.route.routes[c]={test:RegExp("^"+f+"($|"+(a.route._querySeparator+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")+")"),route:c,names:e,defaults:d,length:c.split("/").length};return a.route};g(a.route,{_querySeparator:"&",_paramsMatcher:/^(?:&[^=]+=[^&]*)+/,param:function(c,e){var f,l=0,j,k=c.route,m=0;delete c.route;h(c,function(){m++});h(a.route.routes,function(a){j=d(a,c);j>l&&(f=
a,l=j);if(j>=m)return!1});a.route.routes[k]&&d(a.route.routes[k],c)===l&&(f=a.route.routes[k]);if(f){var n=g({},c),k=f.route.replace(b,function(a,b){delete n[b];return c[b]===f.defaults[b]?"":encodeURIComponent(c[b])}),u;h(f.defaults,function(a,b){n[b]===a&&delete n[b]});u=a.param(n);e&&a.route.attr("route",f.route);return k+(u?a.route._querySeparator+u:"")}return a.isEmptyObject(c)?"":a.route._querySeparator+a.param(c)},deparam:function(b){var c={length:-1};h(a.route.routes,function(a){a.test.test(b)&&
a.length>c.length&&(c=a)});if(-1<c.length){var d=b.match(c.test),e=d.shift(),f=(e=b.substr(e.length-(d[d.length-1]===a.route._querySeparator?1:0)))&&a.route._paramsMatcher.test(e)?a.deparam(e.slice(1)):{},f=g(!0,{},c.defaults,f);h(d,function(b,d){b&&b!==a.route._querySeparator&&(f[c.names[d]]=decodeURIComponent(b))});f.route=c.route;return f}b.charAt(0)!==a.route._querySeparator&&(b=a.route._querySeparator+b);return a.route._paramsMatcher.test(b)?a.deparam(b.slice(1)):{}},data:new a.Observe({}),routes:{},
ready:function(b){!1===b&&(e=b);if(!0===b||!0===e)a.route._setup(),m();return a.route},url:function(b,c){c&&(b=g({},l,b));return"#!"+a.route.param(b)},link:function(b,d,e,f){return"<a "+c(g({href:a.route.url(d,f)},e))+">"+b+"</a>"},current:function(b){return f.hash=="#!"+a.route.param(b)},_setup:function(){a.bind.call(window,"hashchange",m)},_getHash:function(){return f.href.split(/#!?/)[1]||""},_setHash:function(b){b=a.route.param(b,!0);f.hash="#!"+b;return b}});h("bind unbind delegate undelegate attr removeAttr".split(" "),
function(b){a.route[b]=function(){if(a.route.data[b])return a.route.data[b].apply(a.route.data,arguments)}});var j,l,m=a.route.setState=function(){var b=a.route._getHash();l=a.route.deparam(b);(!n||b!==k)&&a.route.attr(l,!0)},k,n;a.route.bind("change",function(){n=1;clearTimeout(j);j=setTimeout(function(){n=0;var b=a.route.data.serialize();k=a.route._setHash(b)},1)});a.bind.call(document,"ready",a.route.ready);("complete"===document.readyState||"interactive"===document.readyState)&&e&&a.route.ready();
a.route.constructor.canMakeObserve=a.Observe.canMakeObserve;return a.route});steal.executed("lib/can/route/route.js");
steal("can/util","can/util/string",function(a){var b=/^\d+$/,c=/([^\[\]]+)|(\[\])/g,d=/([^?#]*)(#.*)?$/,e=function(a){return decodeURIComponent(a.replace(/\+/g," "))};a.extend(a,{deparam:function(f){var h={},g;f&&d.test(f)&&(f=f.split("&"),a.each(f,function(a){var a=a.split("="),d=e(a.shift()),f=e(a.join("=")),k=h;if(d){for(var a=d.match(c),d=0,n=a.length-1;d<n;d++)k[a[d]]||(k[a[d]]=b.test(a[d+1])||"[]"==a[d+1]?[]:{}),k=k[a[d]];g=a.pop();"[]"==g?k.push(f):k[g]=f}}));return h}});return a});steal.executed("lib/can/util/string/deparam/deparam.js");
steal("can/construct").then(function(){can.Construct("mad.bootstrap.BootstrapInterface",{init:function(){throw new mad.error.CallInterfaceConstructorException;},ready:function(){throw new mad.error.CallInterfaceFunctionException;}})});steal.executed("lib/mad/bootstrap/bootstrapInterface.js");
steal("mad/controller/controller.js","mad/event/eventable.js").then(function(){mad.controller.Controller.extend("mad.event.EventBus",{init:function(){},trigger:function(a,b){this.element.trigger(a,"undefined"!=typeof b?b:{})},bind:function(a,b){this.element.bind(a,b)}})});steal.executed("lib/mad/event/eventBus.js");
steal("can/construct").then(function(){can.Construct("mad.helper.HtmlHelper",{position:function(a,b){"undefined"!=typeof b.mouse?a.css({position:"absolute",left:b.mouse.x+"px",top:b.mouse.y+"px"}):"undefined"!=typeof b.reference&&a.position({my:b.reference.my,at:b.reference.at,of:b.reference.of})},create:function(a,b,c){c=$(c);if(!(a instanceof jQuery))throw new mad.error.WrongParametersException("refElement","jQuery");if(0==a.length)throw new mad.error.WrongParametersException("refElement","jQuery");
switch(b){case "inside_replace":a.empty();c=c.prependTo(a);break;case "replace_with":a.replaceWith(c);break;case "first":c=c.prependTo(a);break;case "last":c=c.appendTo(a);break;case "before":c=c.insertBefore(a);break;case "after":c=c.insertAfter(a);break;default:throw new mad.error.WrongParametersException("position");}return c}},{})});steal.executed("lib/mad/helper/htmlHelper.js");
steal("can/construct").then(function(){can.getObject("mad.config",null,!0);can.Construct("mad.Config",{load:function(a){a=steal.idToUri(a).toString();$.ajax({url:a,async:!1,dataType:"json",success:function(a){$.extend(!0,mad.config,a)}})},read:function(a){return can.getObject(a,mad.config)},write:function(a,b){can.getObject(a,mad.config,!0,b)}},{})});steal.executed("lib/mad/config/config.js");
steal("mad/error/callAbstractFunctionException.js","mad/error/callInterfaceConstructorException.js","mad/error/callInterfaceFunctionException.js","mad/error/callPrivateFunctionException.js","mad/error/missingOptionException.js","mad/error/missingParameterException.js","mad/error/noConstructorException.js","mad/error/templateMissingException.js","mad/error/wrongParametersException.js","mad/error/wrongConfigException.js").then(function(){$.String.getObject("mad.error",null,!0);mad.error.Exception=function(a,
b){this.name="Exception";this.title=b||"An "+this.name+" occured";this.message=a||this.title};mad.error.Exception.prototype=Error()});steal.executed("lib/mad/error/exception.js");steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallAbstractFunctionException=function(a){this.name="CallAbstractFunctionException";this.message=a||"This function is abstract"};mad.error.CallAbstractFunctionException.prototype=Error()});steal.executed("lib/mad/error/callAbstractFunctionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallInterfaceConstructorException=function(a){this.name="CallInterfaceConstructorException";this.message=a||"This constructor is an interface constructor"};mad.error.CallInterfaceConstructorException.prototype=Error()});steal.executed("lib/mad/error/callInterfaceConstructorException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallInterfaceFunctionException=function(a){this.name="CallInterfaceFunctionException";this.message=a||"This function is an interface function"};mad.error.CallInterfaceFunctionException.prototype=Error()});steal.executed("lib/mad/error/callInterfaceFunctionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallPrivateFunctionException=function(a){this.name="CallPrivateFunctionException";this.message=a||"This function is private"};mad.error.CallPrivateFunctionException.prototype=Error()});steal.executed("lib/mad/error/callPrivateFunctionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.MissingOptionException=function(a,b,c){this.name="MissingOptionException";this.message=c||"The option ("+a+") is missing when the class ("+b+") is instantiated"};mad.error.MissingOptionException.prototype=Error()});steal.executed("lib/mad/error/missingOptionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.MissingParameterException=function(a,b){console;this.name="MissingParameterException";this.message=b||"The ("+a+") parameter of the function ( "+arguments.callee.caller.toString()+" ) is missing"};mad.error.MissingParameterException.prototype=Error()});steal.executed("lib/mad/error/missingParameterException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.NoConstructorException=function(a){this.name="NoConstructorException";this.message=a||"This class has no constructor"};mad.error.NoConstructorException.prototype=Error()});steal.executed("lib/mad/error/noConstructorException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.TemplateMissingException=function(a){this.name="TemplateMissingException";this.message=a||"Template missing"};mad.error.TemplateMissingException.prototype=Error()});steal.executed("lib/mad/error/templateMissingException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.WrongParametersException=function(a,b){this.name="WrongParametersException";this.message="Wrong parameter ["+(a||"N/A")+"] expected type is ["+b+"]"};mad.error.WrongParametersException.prototype=Error()});steal.executed("lib/mad/error/wrongParametersException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.WrongConfigException=function(a,b){this.name="WrongConfigException";this.message=b||"The config ("+a+") is not well defined"};mad.error.WrongConfigException.prototype=Error()});steal.executed("lib/mad/error/wrongConfigException.js");
steal("can/construct").then(function(){can.Construct("mad.error.ErrorHandler",{_log:function(a,b,c,d){a=a.toUpperCase()+" "+b+" ("+c+")";console.log(a);console.log(d)},handleException:function(a){mad.error.ErrorHandler._log("exception",a.name,a.message,a.stack||null);throw a;},handleError:function(a,b,c,d){mad.error.ErrorHandler._log(a,b,c||"",d||null)}},{})});steal.executed("lib/mad/error/errorHandler.js");
steal("mad/controller/componentController.js","mad/view/template/app.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.AppController",{defaults:{},destroy:function(){if(null!=mad.controller.AppController.APP_NS_ID){for(var a in mad.controller.AppController.globals){var b=mad.controller.AppController.globals[a];"APP_NS"!=b&&mad.controller.AppController.deleteGlobal(b)}mad.controller.AppController.deleteGlobal("APP_NS");delete window[mad.controller.AppController.APP_NS_ID];
delete mad.APP_NS_ID;delete mad.APP_NS;mad.controller.AppController.APP_NS_ID=null}}},{_components:{},init:function(a,b){mad.app=this;this._super(a,b)},referenceComponent:function(a){this._components[a.getId()]=a},unreferenceComponent:function(a){delete this._components[a.getId()]},getComponent:function(a){var b=null;"undefined"!=typeof this._components[a]&&(b=this._components[a]);return b},stateReady:function(){mad.bus.trigger("app_ready")}})});steal.executed("lib/mad/controller/appController.js");
steal("mad/controller/controller.js","mad/helper/controllerHelper.js").then(function(){mad.controller.Controller.extend("mad.controller.ComponentController",{defaults:{label:"ComponentController",icon:null,templateUri:null,templateBased:!0,viewClass:mad.view.View,state:"ready",cssClasses:["js_component"],tag:"div",viewData:{}}},{state:null,setup:function(){var a=this.init,b=this.render;this.init=function(){a.apply(this,arguments)};this.render=function(){b.apply(this,arguments)};return this._super.apply(this,
arguments)},init:function(a,b){var c=this;if(!this.options.viewClass instanceof mad.view.View)throw new mad.error.WrongParametersException("options.viewClass","mad.view.View");this.state=new mad.model.State;this.state.current.bind("change",function(a,b,f,h){"add"==f&&c.goNextStates(h)});this._super(a,b);mad.app.referenceComponent(this)},destroy:function(){mad.app.unreferenceComponent(this);this.state.unbind("label");this._super()},goNextStates:function(){var a=this.state.previous.attr(),b=this.state.current.attr(),
c;for(c in a){var d=a[c];this.view.removeClass("js_state_"+d);(d=this["state"+$.String.capitalize(d)])&&d.call(this,!1)}for(c in b)a=b[c],this.view.addClass("js_state_"+a),(a=this["state"+$.String.capitalize(a)])&&a.call(this,!0)},setTemplateUri:function(a){this.view.setTemplateUri(a)},setState:function(a){this.state.setState(a)},setViewData:function(a,b){if("object"==typeof a)for(var c in a)this.setViewData(c,a[c]);else this.options.viewData[a]=b;return this},getViewData:function(a){return"undefined"==
typeof a?this.options.viewData:this.options.viewData[a]},refresh:function(){if(null==this.element)console.warn("Try to refresh a component which doesn't have a DOM element.");else{this.element.empty();if(this.options.templateBased){this.beforeRender();var a=this.view.render(),a=this.afterRender(a);this.view.insertInDom(a)}this.afterStart();this.setState(this.options.state);return this}},start:function(){this.initView();if(this.options.templateBased){this.beforeRender();var a=this.view.render(),a=
this.afterRender(a);this.view.insertInDom(a)}this.afterStart();this.setState(this.options.state);return this},initView:function(){this.view=new this.options.viewClass(this.element,{templateUri:this.options.templateUri,cssClasses:this.options.cssClasses,templateBased:this.options.templateBased,controller:this});this.setViewData("controller",this);this.setViewData("icon",this.options.icon);this.setViewData("label",this.options.label);this.setViewData("view",this.view)},afterStart:function(){},beforeRender:function(){},
afterRender:function(a){return a},render:function(){this.start()},stateLoading:function(a){this.view.loading(a);a?mad.bus.trigger("passbolt_component_loading_start",[this]):mad.bus.trigger("passbolt_component_loading_complete",[this])},stateReady:function(){},stateDisabled:function(){},stateHidden:function(a){a?this.view.hide():this.view.show()}})});steal.executed("lib/mad/controller/componentController.js");
steal("can/construct").then(function(){can.Construct("mad.helper.ControllerHelper",{getViewPath:function(a){var b="",a=a.fullName.split("."),c=a.pop(),c=$.String.camelize(c.substr(0,c.indexOf("Controller")));"mad"==a[0]?(b+="mad",a=a.splice(1)):a[0]==mad.Config.read("app.namespace")&&("controller"!=a[1]?(b+="app/plugin/"+a[1],a=a.splice(2)):(b+="app",a=a.splice(1)));if("controller"!=a[0])throw new mad.error.Exception("Controller name mal formed");a=a.splice(1);b+="/view/template/";a.length&&(b+=a.join("/")+
"/");return b+(c+".ejs")}},{})});steal.executed("lib/mad/helper/controllerHelper.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_app_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<\!-----------------------------------------------------------------------------\n  Menu bar\n -----------------------------------------------------------------------------\>\n<div id="menubar" class="grid_16 alpha omega">\n\t<div id="menubar_left" class="grid_8 alpha">\n\t\t<div id="js_menu_controller"/>\n\t</div>\n\t<div id="menubar_right" class="grid_8 omega">\n\t\tMenu bar Right\n\t</div>\n</div>\n<div class="clear"></div>\n<\!-----------------------------------------------------------------------------\n  User bar\n -----------------------------------------------------------------------------\>\n<div id="userbar" class="grid_16 alpha omega">\n\t<div id="logo" class="grid_3 alpha">\n\t\t<span>PASSBOLT</span>\n\t</div>\n\t<div id="search_container" class="grid_10">\n\t\t<div id="js_notif_controller" />\n\t\t<div id="search_field" class="grid_8 alpha">\n\t\t\t<input type="text" /> \n\t\t</div>\n\t\t<div id="search_button" class="grid_2 omega">\n\t\t\t<input type="button" value="search"/> \n\t\t</div>\n\t</div>\n\t<div id="login_container" class="grid_3 omega"> <\!-- 2 + 10 + 2 = 16 wtf --\>\n\t\tbiloute@gmail.com\n\t</div>\n</div>\n<div class="clear"></div>\n<\!-----------------------------------------------------------------------------\n  Workspaces Container\n -----------------------------------------------------------------------------\>\n<div id="js_workspaces_container" class="grid_16 alpha omega"/>\n<div class="clear"></div>');return d.join("")}}))});
steal.executed("lib/mad/view/template/app.ejs");
steal("mad/controller/componentController.js","mad/view/template/component/button.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.component.ButtonController",{defaults:{label:"Button Component",templateUri:"mad/view/template/component/button.ejs",templateBased:!1,value:null,events:{click:null},tag:"button"}},{value:null,init:function(a,b){this._super(a,b);this.value=b.value},getValue:function(){return this.value},setValue:function(a){this.value=a;return this},click:function(a,
b){this.options.events.click&&this.options.events.click(this.element,b,this.value)},stateDisabled:function(a){a?this.element.attr("disabled","disabled").addClass("disabled"):this.element.removeAttr("disabled").removeClass("disabled")}})});steal.executed("lib/mad/controller/component/buttonController.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_button_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<button type="button">\n\t');icon&&img_tag(icon);d.push("\n\t");d.push(a.view.txt(1,"button",0,this,function(){return label}));d.push("\n</button>");return d.join("")}}))});steal.executed("lib/mad/view/template/component/button.ejs");
steal("mad/controller/componentController.js").then(function(){mad.controller.ComponentController.extend("mad.controller.component.CompositeController",{defaults:{label:"Composite Component Controller"}},{init:function(a,b){this._components=[];this._super(a,b)},getComponent:function(a){return this._components[a]},addComponent:function(a){return this._components[a.getId()]=a}})});steal.executed("lib/mad/controller/component/compositeController.js");
steal("mad/controller/component/freeCompositeController.js","mad/view/component/dialog.js").then(function(){mad.controller.component.FreeCompositeController.extend("mad.controller.component.DialogController",{defaults:{singleton:null,label:"Dialog Controller",viewClass:mad.view.component.Dialog,cssClasses:["popup"],tag:"div"}},{init:function(a,b){if(null!=mad.controller.component.DialogController.singleton)return mad.controller.component.DialogController.singleton;var c=mad.helper.HtmlHelper.create(mad.app.element,
"first",'<div id="js_dialog" />');this.setup(c);this._super(c,b);mad.controller.component.DialogController.singleton=this},destroy:function(){mad.controller.component.DialogController.singleton=null;this._super()},add:function(a,b){var c=this.addComponent(a,b,"js_dialog_content");c.start();return c}})});steal.executed("lib/mad/controller/component/dialogController.js");
steal("mad/controller/component/compositeController.js","mad/view/template/component/workspace.ejs").then(function(){mad.controller.component.CompositeController.extend("mad.controller.component.FreeCompositeController",{defaults:{label:"WorkspaceController"}},{addComponent:function(a,b,c){c=$("."+(c||"mad-container-main"),this.element);return this._super(mad.helper.ComponentHelper.create(c,"inside_replace",a,b))}})});steal.executed("lib/mad/controller/component/freeCompositeController.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_workspace_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="js_workspace grid_16 alpha omega">\n\t<\!-----------------------------------------------------------------------------\n\tWorkspace header bar\n\t-----------------------------------------------------------------------------\>\n\t<div class="js_workspace_label grid_3 alpha">\n\t\t');d.push(a.view.txt(1,"div",0,this,function(){return label}));
d.push('\n\t</div>\n\t\n\t<div class="js_workspace_actions_container grid_7"></div>\n\t\n\t<div class="js_workspace_view_actions_container grid_6 omega"></div>\n\t\n\t<div class="clear"></div>\n\t\n\t<\!-----------------------------------------------------------------------------\n\tMain area\n\t-----------------------------------------------------------------------------\>\n\t\n\t<div class="js_workspace_sidebar_first grid_3 alpha">\n\t</div>\n\t\n\t<div class="js_workspace_main grid_7">\n\t</div>\n\t\n\t<div class="js_workspace_sidebar_second grid_6 omega">\n\t</div>\n\t\n\t<div class="clear"></div>\n</div>\n');
return d.join("")}}))});steal.executed("lib/mad/view/template/component/workspace.ejs");steal("mad/view").then(function(){mad.view.View.extend("mad.view.component.Dialog",{defaults:{}},{".dialog-close click":function(){this.element.remove()}})});steal.executed("lib/mad/view/component/dialog.js");
steal("jquery/controller","mad/controller/componentController.js","mad/model/grid/column.js","mad/view/component/grid.js","mad/object/map.js","mad/view/template/component/grid.ejs","mad/view/template/component/grid/gridItem.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.component.GridController",{defaults:{label:"Grid Component",viewClass:mad.view.component.Grid,cssClasses:["mad_grid"],templateUri:"mad/view/template/component/grid.ejs",itemTemplateUri:"mad/view/template/component/grid/gridItem.ejs",
itemClass:null,columnModel:[],map:null,tag:"table",callbacks:{item_selected:null,item_hovered:null}}},{reset:function(){this.view.reset()},beforeRender:function(){this._super();this.setViewData("columnModel",this.options.columnModel);this.setViewData("items",[])},getColumnModel:function(){return this.options.columnModel},getItemClass:function(){return this.options.itemClass},setItemClass:function(a){this.options.itemClass=a},getMap:function(){return this.options.map},setMap:function(a){this.options.map=
a},removeItem:function(a){this.view.removeItem(a)},insertItem:function(a,b,c){if(null==this.getItemClass())throw new mad.error.Exception("The associated itemClass can not be null");if(!(a instanceof this.getItemClass()))throw new mad.error.WrongParametersException("item",this.getItemClass().fullName);var d=this.getMap().mapObject(a),e=this.getColumnModel();this.view.insertItem(a,b,c);for(var f in e){b=e[f];if(b.cellAdapter){var h=d.id,h=$("#"+h+" .js_grid_column_"+b.name+" span");b.cellAdapter(h,
d[b.name],d,a,b)}if(b.widget){var c=b.widget.clazz._fullName,g=b.widget.options,h=d[i].id,h=$("#"+h+" .js_grid_column_"+b.name+" span");g.value=d[i][b.name];h[c](g);h[c]("render")}}},refreshItem:function(a){this.view.refreshItem(a);var b=this.getMap().mapObject(a),c=this.getColumnModel(),d;for(d in c){var e=c[d];if(e.cellAdapter){var f=b.id,f=$("#"+f+" .js_grid_column_"+e.name+" span");e.cellAdapter(f,b[e.name],b,a,e)}if(e.widget){var h=e.widget.clazz._fullName,g=e.widget.options,f=b[i].id,f=$("#"+
f+" .js_grid_column_"+e.name+" span");g.value=b[i][e.name];f[h](g);f[h]("render")}}},load:function(a){var b=this;this.reset();can.each(a,function(a){b.insertItem(a)})},"tbody mouseleave":function(){}," item_selected":function(a,b,c,d){this.options.callbacks.itemSelected&&this.options.callbacks.itemSelected(a,b,c,d)}," item_hovered":function(a,b,c,d){this.options.callbacks.itemHovered&&this.options.callbacks.itemHovered(a,b,c,d)}})});steal.executed("lib/mad/controller/component/gridController.js");
steal("mad/model").then(function(){mad.model.Model("mad.model.grid.Column",{attributes:{id:"string",label:"string",icon:"string",action:"string"}},{})});steal.executed("lib/mad/model/grid/column.js");
steal("mad/view","mad/view/template/component/grid.ejs").then(function(){mad.view.View.extend("mad.view.component.Grid",{},{init:function(a,b){this._super(a,b)},reset:function(){$("tbody tr",this.element).remove()},hideColumn:function(a){$(".js_grid_column_"+a,this.element).hide()},showColumn:function(a){$(".js_grid_column_"+a,this.element).show()},selectItem:function(a){$("#"+a.id,this.element).addClass("selected")},unselectItem:function(a){$("#"+a.id,this.element).removeClass("selected")},removeItem:function(a){$("#"+
a.id,this.element).remove()},_renderRow:function(a){var b=null,b=this.getController().getMap().mapObject(a),c=[],d=this.getController().getColumnModel(),e;for(e in d){var f=d[e],h=null,h=f.valueAdapter?f.valueAdapter(b[f.name],b,f):f.widget||f.cellAdapter?"":b[f.name];c[f.name]=h}return mad.view.View.render(this.getController().options.itemTemplateUri,{item:a,id:b.id,columnModels:d,values:c})},insertItem:function(a,b,c){c=c||"last";b=b?$("#"+b,this.element):$("tbody",this.element);this.getController().getMap().mapObject(a);
var d="",d=this._renderRow(a);return mad.helper.HtmlHelper.create(b,c,d)},refreshItem:function(a){var b=this.getController().getMap().mapObject(a),c="",b=$("#"+b.id,this.element),c=this._renderRow(a);mad.helper.HtmlHelper.create(b,"replace_with",c)},"tbody tr click":function(a,b){var c=null,c=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_selected",[c,b])},"tbody tr hover":function(a,b){var c=null,c=this.getController().getItemClass()?
a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_hovered",[c,b])}})});steal.executed("lib/mad/view/component/grid.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_grid_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="tableview">\n\t<div class="breadcrumbs todo">\n\t\t<ul>\n\t\t\t<li><a href="#">home</a></li>\n\t\t\t<li><a href="#">category 1</a></li>\n\t\t\t<li><a href="#">another one</a></li>\n\t\t</ul>\n\t</div>\n\t<div class="tableview-header">\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n');d.push(a.view.txt(0,"tr",0,this,function(){var b=[],c;for(c in columnModel)b.push('\n\t\t\t\t\t<th class="js_grid_column js_grid_column_'),
b.push(a.view.txt(1,"th","class",this,function(){return columnModel[c].name})),b.push(" "),b.push(a.view.txt(1,"th","class",this,function(){return columnModel[c].header.css.join(" ")})),b.push('"',a.view.pending(),">"),b.push("\n\t\t\t\t\t\t"),b.push(a.view.txt(0,"th",0,this,function(){return columnModel[c].header.label})),b.push("\n\t\t\t\t\t</th>\n");return b.join("")}));d.push('\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t</table>\n\t</div>\n\t<div class="tableview-content scroll">\n\t\t<table>\n\t\t\t<tbody>\n\t\t\t</tbody>\n\t\t</table>\t\n\t</div>\n</div>\n');
return d.join("")}}))});steal.executed("lib/mad/view/template/component/grid.ejs");
steal("mad/core/singleton.js").then(function(){can.Construct("mad.object.Map",{mapObject:function(a,b){return b.mapObject(a)},mapObjects:function(a,b){return b.mapObjects(a)}},{map:{},init:function(a){this.map=a},mapObject:function(a){var b={};getObjFieldPointer=function(a,b){var c=a,d=b.split("."),e;for(e in d)c=c[d[e]];return c};for(var c in this.map){var d=c.split("."),e=b,f=0,h;for(h in d){var g=d[h];if(f==d.length-1)if("object"==typeof this.map[c]){var j=this.map[c].func,l=getObjFieldPointer(a,
this.map[c].key);null!=l&&(e[g]=j(l,this,a))}else l=getObjFieldPointer(a,this.map[c]),null!=l&&(e[g]=l);else"undefined"==typeof e[g]&&(e[g]=[]),e=e[g];f++}}return b},mapObjects:function(a){var b=this,c=[];can.each(a,function(d,e){c[e]=b.mapObject(a[e])});return c}})});steal.executed("lib/mad/object/map.js");
steal("can/construct").then(function(){can.Construct("mad.core.Singleton",{singletonInstance:null,singleton:function(){var a=null;null!=this.singletonInstance?a=this.singletonInstance:(this.singletonInstance="CALL_FROM_SINGLETON",a=this.newInstance.apply(this,arguments));return a}},{init:function(){if("mad.core.Singleton"==this.getClass().fullName)throw new mad.error.CallAbstractFunctionException;if("CALL_FROM_SINGLETON"!=this.getClass().singletonInstance)throw new mad.error.CallPrivateFunctionException("The class is a singleton");
this.getClass().singletonInstance=this}})});steal.executed("lib/mad/core/singleton.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_grid_gridItem_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<tr id="');d.push(a.view.txt(1,"tr","id",this,function(){return id}));d.push('" ');d.push(a.view.txt(1,"tr",1,this,function(){return function(b){a.$(b).data(item.constructor.fullName,item)}}));d.push("",a.view.pending(),">");d.push("\n");d.push(a.view.txt(0,"tr",0,this,function(){var b=[],c;for(c in columnModels)b.push('\n\t<td class="js_grid_column_'),
b.push(a.view.txt(1,"td","class",this,function(){return columnModels[c].name})),b.push(" "),b.push(a.view.txt(1,"td","class",this,function(){return columnModels[c].header.css.join(" ")})),b.push('"',a.view.pending(),">"),b.push("\n\t\t<span>\n\t\t\t"),b.push(a.view.txt(0,"span",0,this,function(){return values[columnModels[c].name]})),b.push("\n\t\t</span>\n\t</td>\n");return b.join("")}));d.push("\n</tr>\n");return d.join("")}}))});steal.executed("lib/mad/view/template/component/grid/gridItem.ejs");
steal("mad/controller/component/dropDownMenuController.js").then(function(){mad.controller.component.DropDownMenuController.extend("mad.controller.component.ContextualMenuController",{},{init:function(a,b){if(null==a||!a.length){0!=$("#js_contextual_menu").length&&$("#js_contextual_menu").remove();var c=mad.helper.HtmlHelper.create(mad.app.element,"first",'<div id="js_contextual_menu" />');this.setup(c)}this._super(c,b)},afterStart:function(){this._super();this.view.position({mouse:{x:this.options.mouseX-
5,y:this.options.mouseY-5}})},mouseleave:function(){this.remove()}})});steal.executed("lib/mad/controller/component/contextualMenuController.js");
steal("mad/controller/component/menuController.js","mad/view/component/menu/dropDownMenu.js","mad/view/template/component/menu/dropDownMenu.ejs").then(function(){mad.controller.component.MenuController.extend("mad.controller.component.DropDownMenuController",{defaults:{label:"Drop Down Menu Controller Component",viewClass:mad.view.component.menu.DropDownMenu,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"mad/view/template/component/menu/dropDownMenu.ejs",cssClasses:["dropdownmenu"],
callbacks:{item_selected:null,item_right_selected:null,item_hovered:null}}},{open:function(a){this.view.open(a)},close:function(a){this.view.close(a)}," item_opened":function(a,b,c){this.open(c)}," item_closed":function(a,b,c){this.close(c)}})});steal.executed("lib/mad/controller/component/dropDownMenuController.js");
steal("mad/controller/component/treeController.js","mad/view/template/component/menu/menuItem.ejs","mad/model/action.js","mad/view/template/component/menu/menuItem.ejs").then(function(){mad.controller.component.TreeController.extend("mad.controller.component.MenuController",{defaults:{label:"MenuController",itemTemplateUri:"mad/view/template/component/menu/menuItem.ejs",cssClasses:["menu"],itemClass:mad.model.Action,map:new mad.object.Map({id:"id",label:"label",cssClasses:{key:"cssClasses",func:function(a){var b=
"";$.each(a,function(a,d){b+=d+" "});return b}},children:{key:"children",func:mad.object.Map.mapObjects}})}},{" item_selected":function(a,b,c){this._super(a,b,c);(action=c.getAction())&&c.action(this)}})});steal.executed("lib/mad/controller/component/menuController.js");
steal("jquery/controller","mad/controller/componentController.js","mad/view/component/tree.js","mad/object/map.js","mad/error/exception.js","mad/view/template/component/tree.ejs","mad/view/template/component/tree/treeItem.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.component.TreeController",{defaults:{label:"Tree Component",viewClass:mad.view.component.Tree,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"mad/view/template/component/tree/treeItem.ejs",
templateBased:!1,cssClasses:["tree"],itemClass:null,map:null,tag:"ul",callbacks:{item_selected:null,item_right_selected:null,item_hovered:null}}},{insertItem:function(a,b,c){if(null==this.getItemClass())throw new mad.error.Exception("The associated itemClass can not be null");if(!(a instanceof this.getItemClass()))throw new mad.error.WrongParametersException("item",this.getItemClass().fullName);this.view.insertItem(a,b,c)},removeItem:function(a){this.view.removeItem(a)},reset:function(){this.view.reset()},
load:function(a){var b=this;can.each(a,function(a){b.insertItem(a)})},getItemClass:function(){return this.options.itemClass},setItemClass:function(a){this.options.itemClass=a},getMap:function(){return this.options.map},setMap:function(a){this.options.map=a}," item_selected":function(a,b,c,d){this.options.callbacks.itemSelected&&this.options.callbacks.itemSelected(a,b,c,d)}," item_right_selected":function(a,b,c,d){this.options.callbacks.itemRightSelected&&this.options.callbacks.itemRightSelected(a,
b,c,d)}," item_hovered":function(a,b,c,d){this.options.callbacks.itemHovered&&this.options.callbacks.itemHovered(a,b,c,d)}})});steal.executed("lib/mad/controller/component/treeController.js");
steal("mad/view").then(function(){mad.view.View.extend("mad.view.component.Tree",{},{init:function(a,b){this._super(a,b)},insertItem:function(a,b,c){var c=c||"last",d=b?this.element.find("#"+b):null,b=d?d.find("ul:first"):this.element,e=this;b.length||(d.append("<ul/>"),b=d.find("ul:first"));var f=this.getController().getMap().mapObject(a);f.hasChildren=f.children&&f.children.length?!0:!1;f.item=a;f.itemClass=this.getController().getItemClass();var d=mad.view.View.render(this.getController().options.itemTemplateUri,
f),h=null,h="first"==c?$(d).prependTo(b):$(d).appendTo(b);f.hasChildren&&can.each(a.children,function(a){e.insertItem(a,f.id,"last")});return h},removeItem:function(a){$("#"+a.id,this.element).remove()},reset:function(){$("li",this.element).remove()},itemSelected:function(a,b,c){this.element.trigger("item_selected",[a,c])},itemRightSelected:function(a,b,c){b.trigger("item_right_selected",[a,c])},itemHovered:function(a,b,c){this.element.trigger("item_hovered",[a,c])},"li .main-cell-wrapper click":function(a,
b){b.stopPropagation();b.preventDefault();var c=null,c=a.parents("li"),c=this.getController().getItemClass()?c.data(this.getController().getItemClass().fullName):c[0].id;this.itemSelected(c,a,b);return!1},"li .main-cell-wrapper contextmenu":function(a,b){b.stopPropagation();b.preventDefault();if(3==b.which){var c=null,c=a.parents("li"),c=this.getController().getItemClass()?c.data(this.getController().getItemClass().fullName):c[0].id;this.itemRightSelected(c,a,b)}return!1},"li .main-cell-wrapper hover":function(a,
b){b.stopPropagation();b.preventDefault();var c=null,c=a.parents("li"),c=this.getController().getItemClass()?c.data(this.getController().getItemClass().fullName):c[0].id;this.itemHovered(c,a,b);return!1}})});steal.executed("lib/mad/view/component/tree.js");steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tree_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push("<ul></ul>");return d.join("")}}))});steal.executed("lib/mad/view/template/component/tree.ejs");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tree_treeItem_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<li id="');d.push(a.view.txt(1,"li","id",this,function(){return id}));d.push('" ');d.push(a.view.txt(1,"li",1,this,function(){return function(b){a.$(b).data(itemClass.fullName,item)}}));d.push("",a.view.pending(),">");d.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');
d.push(a.view.txt(1,"span",0,this,function(){return label}));d.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n\t</row>\n\t\n");d.push(a.view.txt(0,"/row",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul>\n\t</ul>\n");return a.join("")}));d.push("\n</li>\n");return d.join("")}}))});steal.executed("lib/mad/view/template/component/tree/treeItem.ejs");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_menu_menuItem_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<li id="');d.push(a.view.txt(1,"li","id",this,function(){return id}));d.push('" ');d.push(a.view.txt(1,"li",1,this,function(){return function(b){a.$(b).data(itemClass.fullName,item)}}));d.push(' class="');d.push(a.view.txt(1,"li","class",this,function(){return"undefined"!=typeof cssClasses?cssClasses:""}));d.push('"',a.view.pending(),">");d.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');
d.push(a.view.txt(1,"span",0,this,function(){return label}));d.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n");d.push(a.view.txt(0,"li",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul>\n\t</ul>\n");return a.join("")}));d.push("\n</li>\n");return d.join("")}}))});steal.executed("lib/mad/view/template/component/menu/menuItem.ejs");
steal("mad/model").then(function(){mad.model.Model("mad.model.Action",{attributes:{id:"string",label:"string",icon:"string",action:"string"}},{getAction:function(){return"undefined"!=typeof this.action?this.action:null}})});steal.executed("lib/mad/model/action.js");
steal("mad/view/component/tree.js").then(function(){mad.view.component.Tree.extend("mad.view.component.menu.DropDownMenu",{},{init:function(a,b){this._super(a,b)},open:function(a){a=$("#"+a.id,this.element);a.removeClass("closed").addClass("opened");$(".control:first",a).removeClass("open").addClass("close")},close:function(a){a=$("#"+a.id,this.element);a.removeClass("opened").addClass("closed");$(".control:first",a).removeClass("close").addClass("open")},"li mouseover":function(a,b){b.stopPropagation();
b.preventDefault();var c=null,c=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_opened",c)},"li mouseleave":function(a,b){b.stopPropagation();b.preventDefault();var c=null,c=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_closed",c)}})});steal.executed("lib/mad/view/component/menu/dropDownMenu.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_menu_dropDownMenu_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<li id="');d.push(a.view.txt(1,"li","id",this,function(){return id}));d.push('" ');d.push(a.view.txt(1,"li",1,this,function(){return function(b){a.$(b).data(itemClass.fullName,item)}}));d.push(' class="');d.push(a.view.txt(1,"li","class",this,function(){return"undefined"!=typeof cssClasses?cssClasses:""}));d.push('"',a.view.pending(),">");
d.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');d.push(a.view.txt(1,"span",0,this,function(){return label}));d.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n");d.push(a.view.txt(0,"li",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul>\n\t</ul>\n");return a.join("")}));d.push("\n</li>\n");return d.join("")}}))});steal.executed("lib/mad/view/template/component/menu/dropDownMenu.ejs");
steal("mad/controller/component/compositeController.js","mad/view/component/tab.js","mad/view/template/component/tab.ejs").then(function(){mad.controller.component.CompositeController.extend("mad.controller.component.TabController",{defaults:{label:"Tab Controller",viewClass:mad.view.component.Tab,generateMenu:!0}},{init:function(a,b){this.enabledId=null;this._super(a,b)},afterStart:function(){this.options.generateMenu&&(this.options.menu=new mad.controller.component.MenuController($(".js_tabs_nav",
this.element)),this.options.menu.start());this.on()},"{menu} item_selected":function(a,b,c){this.options.generateMenu&&this.enableTab(c.id.replace("js_tab_nav_",""))},enableTab:function(a){this.enabledTabId&&(this.getComponent(this.enabledTabId).setState("hidden"),this.view.unselectTab(this.enabledTabId));this.enabledTabId=a;a=this.getComponent(this.enabledTabId);a.state.is(null)?a.start():a.state.is("hidden")&&a.setState("ready");this.view.selectTab(this.enabledTabId)},addComponent:function(a,b){var c=
["tab-content"];b.id="undefined"!=typeof b.id?b.id:uuid();this.options.generateMenu&&this.options.menu.insertItem(new mad.model.Action({id:"js_tab_nav_"+b.id,label:b.label}));$.isArray(b.cssClasses)?$.merge(b.cssClasses,c):b.cssClasses=c;return this._super(mad.helper.ComponentHelper.create($(".js_tabs_content",this.element),"last",a,b))}})});steal.executed("lib/mad/controller/component/tabController.js");
steal("mad/view").then(function(){mad.view.View.extend("mad.view.component.Tab",{templateUri:"mad/view/template/component/tab.ejs"},{selectTab:function(a){this.getController().getComponent(a).view.addClass("selected");$("#js_tab_nav_"+a,this.element).find("a").addClass("selected")},unselectTab:function(a){this.getController().getComponent(a).view.removeClass("selected");$("#js_tab_nav_"+a,this.element).find("a").removeClass("selected")}})});steal.executed("lib/mad/view/component/tab.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tab_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<ul class="js_tabs_nav tabs-nav">\n</ul>\n<div class="js_tabs_content tabs-content">\n</div>');return d.join("")}}))});steal.executed("lib/mad/view/template/component/tab.ejs");
steal("mad/controller/component/buttonController.js","mad/view/template/component/button.ejs").then(function(){mad.controller.component.ButtonController.extend("mad.controller.component.ToggleButtonController",{defaults:{}},{click:function(a,b){this._super(a,b);this.state.is("selected")?this.setState("ready"):this.setState("selected")},stateSelected:function(a){a?this.element.addClass("selected"):this.element.removeClass("selected")}})});steal.executed("lib/mad/controller/component/toggleButtonController.js");
steal("jquery/controller","mad/controller/component/treeController.js","mad/view/component/tree/dynamicTree.js","mad/object/map.js","mad/view/template/component/tree.ejs","mad/view/template/component/tree/dynamicTree.ejs").then(function(){mad.controller.component.TreeController.extend("mad.controller.component.DynamicTreeController",{defaults:{label:"Dynamix Tree Component",viewClass:mad.view.component.tree.DynamicTree,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"mad/view/template/component/tree/dynamicTree.ejs",
map:null,callbacks:{item_selected:null,item_right_selected:null,item_hovered:null}}},{open:function(a){this.view.open(a)},close:function(a){this.view.close(a)}," item_opened":function(a,b,c){this.open(c)}," item_closed":function(a,b,c){this.close(c)}})});steal.executed("lib/mad/controller/component/dynamicTreeController.js");
steal("mad/view/component/tree.js").then(function(){mad.view.component.Tree.extend("mad.view.component.tree.DynamicTree",{},{init:function(a,b){this._super(a,b)},open:function(a){$("#"+a.id,this.element).removeClass("close").addClass("open")},close:function(a){$("#"+a.id,this.element).removeClass("open").addClass("close")},"div.node-ctrl a click":function(a,b){b.stopPropagation();b.preventDefault();var c=null,d=a.parents("li"),c=this.getController().getItemClass()?d.data(this.getController().getItemClass().fullName):
d[0].id;d.hasClass("close")?this.element.trigger("item_opened",c):this.element.trigger("item_closed",c)}})});steal.executed("lib/mad/view/component/tree/dynamicTree.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tree_dynamicTree_ejs",a.EJS(function(b,c){with(c)with(b){var d=[],e=["node"];hasChildren&&e.push("close");d.push('\n<li id="');d.push(a.view.txt(1,"li","id",this,function(){return id}));d.push('" ');d.push(a.view.txt(1,"li",1,this,function(){return function(b){a.$(b).data(itemClass.fullName,item)}}));d.push(' class="');d.push(a.view.txt(1,"li","class",this,function(){return e.join(" ")}));d.push('"',a.view.pending(),
">");d.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');d.push(a.view.txt(1,"span",0,this,function(){return label}));d.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n");d.push(a.view.txt(0,"div",0,this,function(){var a=[];hasChildren&&a.push('\n\t\t<div class="left-cell node-ctrl">\n\t\t\t<a href="#"><span>open/close</span></a>\n\t\t</div>\n');return a.join("")}));d.push('\n\t\t<div class="right-cell more-ctrl">\n\t\t\t<a href="#"><span>more</span></a>\n\t\t</div>\n\t</div>\n\t\n');
d.push(a.view.txt(0,"li",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul></ul>\n");return a.join("")}));d.push("\n</li>\n");return d.join("")}}))});steal.executed("lib/mad/view/template/component/tree/dynamicTree.ejs");Math.randomRange=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};steal.executed("lib/mad/crypto/random.js");steal("can/construct").then(function(){});steal.executed("lib/mad/event/event.js");
steal("mad/form/formElement.js").then(function(){mad.controller.ComponentController.extend("mad.form.FeedbackController",{defaults:{label:"Feedback Component Controller",message:null,templateBased:!1}},{setMessage:function(a){this.message=a;return this},stateSuccess:function(a){a&&(this.element.html(this.message),this.element.removeClass("error"))},stateError:function(a){a&&(this.element.html(this.message),this.element.addClass("error"))}})});steal.executed("lib/mad/form/feedbackController.js");
steal("mad/controller/componentController.js","mad/view/form/formElementView.js").then(function(){mad.controller.ComponentController.extend("mad.form.FormElement",{defaults:{viewClass:mad.view.form.FormElementView,templateBased:!1,modelReference:null,validate:!0,validateFunction:null,value:null,callbacks:{changed:function(){}}}},{init:function(a,b){this.value=b.value;this._super(a,b)},getModelReference:function(){var a=null;this.options.modelReference&&(a=this.options.modelReference);return a},requireValidation:function(){var a=
!1;this.options.validate&&(a=this.options.validate);return a},setModelReference:function(a){this.options.modelReference=a},getValue:function(){return this.value},reset:function(){this.setState("reset");this.setValue(this.options.value);this.setState("ready")},setValue:function(a){this.value=a;this.view.setValue(this.value);return this},afterStart:function(){this.setValue(this.options.value)},stateReset:function(){this.setState("ready")},stateReady:function(){},stateError:function(){}," changed":function(a,
b,c){this.value=c.value;this.options.callbacks.changed&&this.options.callbacks.changed(this.value)}})});steal.executed("lib/mad/form/formElement.js");steal("mad/view").then(function(){mad.view.View.extend("mad.view.form.FormElementView",{},{getName:function(){return this.element.attr("name")},setValue:function(){},reset:function(){}})});steal.executed("lib/mad/view/form/formElementView.js");
steal("mad/controller","mad/view/form/formView.js","mad/form/formElement.js").then(function(){mad.controller.ComponentController.extend("mad.form.FormController",{defaults:{callbacks:{error:function(){},submit:function(){}},tag:"form",action:null,validateOnChange:!0,templateBased:!1,viewClass:mad.view.form.FormView}},{init:function(a,b){this.elements={};this.feedbackElements={};this.data={};this._super(a,b)},load:function(a){for(var b in this.elements){var c=this.elements[b].getModelReference(),d=
null;if(null!=c){if(!(a instanceof mad.model.Model))throw new mad.error.WrongParametersException("data",mad.model.Model.fullName);d=mad.model.Model.getModelAttributeValue(c,a)}else d=a[b];this.elements[b].setValue(d)}},getElement:function(a){return this.elements[a]},addElement:function(a,b){if(!(a instanceof mad.form.FormElement))throw new mad.error.WrongParametersException("element","mad.form.FormElement");var c=a.getId();this.elements[c]=a;"undefined"!=typeof b&&(this.feedbackElements[c]=b);return a},
removeElement:function(a){if(!(a instanceof mad.form.FormElement)||null==a)throw new mad.error.WrongParametersException("element","mad.form.FormElement");a=a.getId();if("undefined"==typeof this.elements[a])throw new mad.error.Exception("The target element to remove does not exist");delete this.elements[a];delete this.feedbackElements[a]},getData:function(){var a={},b;for(b in this.elements){var c=this.elements[b].getModelReference(),d=this.elements[b].getValue();if(null!=c){var c=mad.model.Model.getModelAttributes(c),
e=c[c.length-1].name;a[c[0].name]||(a[c[0].name]={});if(2>=c.length&&null==c[c.length-1].modelReference)a[c[0].name][e]=d;else{var f=null,h="";if(null!=c[c.length-1].modelReference)f=d,h=can.map(c,function(a){return a.name}).slice(1,c.length).join("."),can.getObject(h,a[c[0].name],!0,f);else{var g=c[c.length-2],h=can.map(c,function(a){return a.name}).slice(1,c.length-1).join(".");g.multiple?(d=can.isArray(d)?d:[d],f=[],can.each(d,function(a){var b={};b[e]=a;f.push(b)}),can.getObject(h,a[c[0].name],
!0,f)):can.getObject(h+"."+e,a[c[0].name],!0,d)}}}else a[b]=d}return a},validateElement:function(a){var b=!0,c=a.getModelReference(),d=!0,e=a.getId();if(a.requireValidation()){var f=a.getValue();"undefined"!=typeof a.options.validateFunction&&null!=a.options.validateFunction?d=a.options.validateFunction(f,{}):null!=c&&(c=mad.model.Model.getModelAttributes(c),a=c[c.length-2].modelReference,c=c[c.length-1].name,a.validateAttribute&&(d=a.validateAttribute(c,f,{},this.options.action)));!0!==d?(f=["error"],
this.elements[e].state.is("hidden")&&f.push("hidden"),this.elements[e].setState(f),this.feedbackElements[e]&&this.feedbackElements[e].setMessage(d).setState("error"),this.view.setElementState(this.elements[e],"error"),b=!1):(f=["success"],this.elements[e].state.is("hidden")&&f.push("hidden"),this.elements[e].setState(f),this.feedbackElements[e]&&this.feedbackElements[e].setMessage("").setState("success"),this.view.setElementState(this.elements[e],"success"))}return b},validate:function(){var a=!0,
b;for(b in this.elements)a&=this.validateElement(this.elements[b]);return a}," submit":function(a,b){b.preventDefault();this.validate()?this.options.callbacks.submit&&this.options.callbacks.submit(this.getData()):this.options.callbacks.error&&this.options.callbacks.error()}," changed":function(a,b){if(this.options.validateOnChange){var c=$(b.target).controllers(mad.form.FormElement);if(c.length)this.validateElement(c[0]);else throw new mad.error.Error;}}})});steal.executed("lib/mad/form/formController.js");
steal("mad/view").then(function(){mad.view.View.extend("mad.view.form.FormView",{},{setElementState:function(a,b){var c=a.getId(),c=$('label[for="'+c+'"]'),d=a.element.parent(".js_form_element_wrapper");switch(b){case "success":c&&c.removeClass("error");d&&d.removeClass("error");break;case "error":c&&c.addClass("error"),d&&d.addClass("error")}}})});steal.executed("lib/mad/view/form/formView.js");
steal("mad/form/formElement.js","mad/view/form/formElementView.js").then(function(){mad.form.FormElement.extend("mad.form.FormChoiceElement",{defaults:{availableValues:[]}},{beforeRender:function(){this._super();this.setViewData("availableValues",this.options.availableValues)},stateReady:function(a){this._super(a)}})});steal.executed("lib/mad/form/formChoiceElement.js");
steal("mad/form/element/textboxController.js","mad/view/form/element/autocompleteView.js").then(function(){mad.form.element.TextboxController.extend("mad.form.element.AutocompleteController",{defaults:{label:"Autocomplete Form Element Controller",viewClass:mad.view.form.element.AutocompleteView,tag:"input",list:null}},{afterStart:function(){var a={viewClass:mad.view.component.tree.List,itemClass:mad.model.Model,cssClasses:["autocomplete-content"],templateUri:"mad/view/template/component/tree.ejs",
state:"hidden",map:new mad.object.Map({id:"id",label:"label",model:"model"})};this.options.list=mad.helper.ComponentHelper.create(this.element,"after",mad.controller.component.TreeController,a);this.options.list.start();this.on()}," changed":function(a,b,c){var d=this;this.options.callbacks.ajax&&this.options.callbacks.ajax.apply(this,[c.value]).done(function(a){d.options.list.reset();d.options.list.load(a);d.options.list.setState("ready")})},"{list} item_selected":function(a,b,c){this.setValue(c.label);
this.options.list.setState("hidden")}})});steal.executed("lib/mad/form/element/autocompleteController.js");steal("mad/form/formElement.js","mad/view/form/element/textboxView.js").then(function(){mad.form.FormElement.extend("mad.form.element.TextboxController",{defaults:{label:"Textbox Form Element Controller",viewClass:mad.view.form.element.TextboxView,tag:"input",onChangeTimeout:0}},{})});steal.executed("lib/mad/form/element/textboxController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.TextboxView",{defaults:{blackKeys:[13]}},{init:function(a,b){this._super(a,b);this._changeTimeout=null;this.changeTimeout=this.getController().options.changeTimeout},getValue:function(){return this.element.val()},setValue:function(a){this.element.val(a)}," keypress":function(a){var b=this;-1==$.inArray(event.which,this.options.blackKeys)&&(null!=this._changeTimeout&&clearTimeout(this._changeTimeout),
2<=this.getValue().length&&(this._changeTimeout=setTimeout(function(){a.trigger("changed",{value:b.getValue()})},this.changeTimeout)))}," keydown":function(a,b){var c=this;8==b.which&&(null!=this._changeTimeout&&clearTimeout(this._changeTimeout),this._changeTimeout=setTimeout(function(){a.trigger("changed",{value:c.getValue()})},this.changeTimeout))}," paste":function(a){var b=this;setTimeout(function(){a.trigger("changed",{value:b.getValue()})},0)}," cut":function(a){var b=this;setTimeout(function(){a.trigger("changed",
{value:b.getValue()})},0)}})});steal.executed("lib/mad/view/form/element/textboxView.js");steal("mad/view/form/element/textboxView.js").then(function(){mad.view.form.element.TextboxView.extend("mad.view.form.element.AutocompleteView",{defaults:{}},{})});steal.executed("lib/mad/view/form/element/autocompleteView.js");
steal("mad/form/formElement.js","mad/view/form/element/checkboxView.js","mad/view/template/form/element/checkbox.ejs").then(function(){mad.form.FormChoiceElement.extend("mad.form.element.CheckboxController",{defaults:{label:"CheckboxController Form Element Controller",templateBased:!0,templateUri:"mad/view/template/form/element/checkbox.ejs",viewClass:mad.view.form.element.CheckboxView}},{})});steal.executed("lib/mad/form/element/checkboxController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.CheckboxView",{},{getValue:function(){var a=[];this.element.find("input:checked").each(function(){a.push($(this).val())});return a},setValue:function(a){a="undefined"!=typeof a&&null!=a?a:[];this.element.find("input").each(function(){-1!=a.indexOf($(this).val())?$(this).attr("checked","checked"):$(this).removeAttr("checked")})},"input click":function(a,b){b.stopPropagation();a.attr("checked")?
this.element.trigger("checked",a.val()):this.element.trigger("unchecked",a.val())},"input change":function(a,b){b.stopPropagation();this.element.trigger("changed",{value:this.getValue()})}})});steal.executed("lib/mad/view/form/element/checkboxView.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_form_element_checkbox_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push(a.view.txt(0,"",0,this,function(){var b=[],c;for(c in availableValues)b.push('\n<input type="checkbox" name="'),b.push(a.view.txt(0,"input","name",this,function(){return view.getName()})),b.push('" value="'),b.push(a.view.txt(0,"input","value",this,function(){return c})),b.push('" ',a.view.pending(),"/>"),b.push(a.view.txt(0,"undefined",0,this,
function(){return availableValues[c]})),b.push("\n");return b.join("")}));d.push("\n");return d.join("")}}))});steal.executed("lib/mad/view/template/form/element/checkbox.ejs");
steal("mad/form/formElement.js","mad/view/form/element/dateView.js","mad/view/template/component/input.ejs").then(function(){mad.form.FormElement.extend("mad.form.element.DateController",{defaults:{label:"Input Date Element Controller",templateBased:!1,templateUri:"//mad/view/template/component/input.ejs",value:null,event:{click:null}}},{})});steal.executed("lib/mad/form/element/dateController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.DateView",{},{setValue:function(a){this.val(a)}})});steal.executed("lib/mad/view/form/element/dateView.js");steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_input_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<input type="');d.push(a.view.txt(1,"input","type",this,function(){return type}));d.push('" ',a.view.pending(),"/>");return d.join("")}}))});
steal.executed("lib/mad/view/template/component/input.ejs");steal("mad/form/formChoiceElement.js","mad/view/form/element/dropdownView.js","mad/view/template/form/element/dropdown.ejs").then(function(){mad.form.FormChoiceElement.extend("mad.form.element.DropdownController",{defaults:{label:"DropdownController Form Element Controller",templateBased:!0,templateUri:"mad/view/template/form/element/dropdown.ejs",viewClass:mad.view.form.element.DropdownView,emptyValue:!0}},{})});steal.executed("lib/mad/form/element/dropdownController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.DropdownView",{},{getValue:function(){return this.element.val()},setValue:function(a){this.element.val(a)},change:function(a){a.trigger("changed",{value:this.getValue()})}})});steal.executed("lib/mad/view/form/element/dropdownView.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_form_element_dropdown_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push(a.view.txt(0,"",0,this,function(){var b=[];controller.options.emptyValue&&(b.push('\n<option value=""',a.view.pending(),">"),b.push(a.view.txt(0,"option",0,this,function(){return __("select a value")})),b.push("</option>\n"));return b.join("")}));d.push("\n");d.push(a.view.txt(0,"",0,this,function(){var b=[],c;for(c in availableValues)b.push('\n<option value="'),
b.push(a.view.txt(0,"option","value",this,function(){return c})),b.push('"',a.view.pending(),">"),b.push(a.view.txt(0,"option",0,this,function(){return availableValues[c]})),b.push("</option>\n");return b.join("")}));d.push("\n");return d.join("")}}))});steal.executed("lib/mad/view/template/form/element/dropdown.ejs");
steal("mad/form/formElement.js").then(function(){mad.form.FormElement.extend("mad.form.element.FreeElementController",{defaults:{label:"free Form Element Controller",tag:"input",attributes:{type:"hidden"}}},{setValue:function(a){this.value=a;return this}})});steal.executed("lib/mad/form/element/freeElementController.js");
steal("mad/form/formElement.js","mad/view/form/element/radiobuttonView.js","mad/view/template/form/element/radiobutton.ejs").then(function(){mad.form.FormChoiceElement.extend("mad.form.element.RadiobuttonController",{defaults:{label:"Radiobutton Form Element Controller",templateBased:!0,templateUri:"mad/view/template/form/element/radiobutton.ejs",viewClass:mad.view.form.element.RadiobuttonView}},{})});steal.executed("lib/mad/form/element/radiobuttonController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.RadiobuttonView",{},{getValue:function(){return this.element.find(":checked").val()},setValue:function(a){this.element.find("input").val(a)},change:function(a){a.trigger("changed",{value:this.getValue()})}})});steal.executed("lib/mad/view/form/element/radiobuttonView.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_form_element_radiobutton_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push(a.view.txt(0,"",0,this,function(){var b=[],c;for(c in availableValues)b.push('\n<input type="radio" name="'),b.push(a.view.txt(0,"input","name",this,function(){return this.getName()})),b.push('" value="'),b.push(a.view.txt(0,"input","value",this,function(){return c})),b.push('" ',a.view.pending(),"/>"),b.push(a.view.txt(0,"undefined",0,this,
function(){return availableValues[c]})),b.push("\n");return b.join("")}));return d.join("")}}))});steal.executed("lib/mad/view/template/form/element/radiobutton.ejs");
steal("can/construct").then(function(){can.Construct("mad.helper.ComponentHelper",{create:function(a,b,c,d){var e=null,f=$.extend({},c.defaults.attributes,d.attributes);if(0==a.length)throw new mad.error.WrongParametersException("refElement");var e="<"+c.defaults.tag+' id="'+(d.id||"")+'"',h;for(h in f)e+=" "+h+'="'+f[h]+'"';e=mad.helper.HtmlHelper.create(a,b,e+"/>");return"undefined"!=typeof c.singleton?c.singleton(e,d):new c(e,d)}},{})});steal.executed("lib/mad/helper/componentHelper.js");
steal("jquery/class","jquery/view/ejs","jquery/lang/string","mad/controller/controller.js","mad/view/template/component/decorator/box.ejs").then(function(){$.String.getObject("mad.helper.component",window,!0);mad.helper.component.BoxDecorator={init:function(){this.options.loading=!0;this._super()},render:function(){if(!this.getBoxElement().length){var a=$($.View("//mad/view/template/component/decorator/box.ejs")).insertBefore(this.element),b=this.element.detach();a.find(".mad_helper_component_boxDecorator_content").append(b)}this._super()},
getBoxElement:function(){if("undefined"==typeof this.element)throw Error("The component has to be rendered yet");return $(this.element.parents(".mad_helper_component_boxDecorator").get(0))}}});steal.executed("lib/mad/helper/component/boxDecorator.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_decorator_box_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="mad_helper_component_boxDecorator">\n\t<div class="mad_helper_component_boxDecorator_header" style="background-color:#CC0000">header</div>\n\t<div class="mad_helper_component_boxDecorator_content"></div>\n\t<div class="mad_helper_component_boxDecorator_footer" style="background-color:#CC0000">footer</div>\n</div>');return d.join("")}}))});
steal.executed("lib/mad/view/template/component/decorator/box.ejs");
steal("can/construct").then(function(){__=function(a){var b=[],c=Array.prototype.slice.call(arguments);delete c.callee;delete c.caller;for(var d in c)b.push(c[d]);return mad.lang.I18n.translate(a,b.slice(1))};can.Construct.extend("mad.lang.I18n",{dico:{},translate:function(a,b){b="undefined"!=typeof b?b:[];return mad.lang.I18n.replaceHooks(this.getEntry(a),b)},loadDico:function(a){for(var b in a)mad.lang.I18n.dico[b]=a[b]},replaceHooks:function(a,b){var c="";split=[];split=a.split("%s");if(split.length!=
b.length+1)throw new mad.error.WrongParametersException("I18n Error : The sentence to translate does not contain as many hooks as they are variables");if(2>split.length)return a;var d,e;for(e in b){d=parseInt(e);if("string"!=typeof b[d]&&"number"!=typeof b[d]&&"boolean"!=typeof b[d]&&null!==b[d])throw new mad.error.WrongParametersException("I18n Error : Variables has to be a scalar");c+=split[e]+b[d]}return c+("undefined"!=typeof split[d+1]?split[d+1]:"")},getEntry:function(a){var b=a;"undefined"!=
typeof mad.lang.I18n.dico[a]&&""!=this.dico[a]&&(b=mad.lang.I18n.dico[a]);return b}},{})});steal.executed("lib/mad/lang/i18n.js");
steal("mad/model").then(function(){mad.model.Model.extend("mad.model.State",{attributes:{previous:"can.List",current:"can.List"}},{init:function(){this.previous=new can.List([]);this.current=new can.List([])},is:function(a){return null==a&&!this.current.length?!0:-1!=this.current.indexOf(a)?!0:!1},was:function(a){return null==a&&!this.previous.length?!0:-1!=this.previous.indexOf(a)?!0:!1},setState:function(a){a=$.isArray(a)?a:[a];this.previous.replace(this.current.attr());this.current.replace(a)},
addState:function(a){a=$.isArray(a)?a:[a];this.previous.replace(this.current.attr());$.each(this.current.attr(),function(b,c){a.push(c)});this.current.replace(a)},removeState:function(a){var a=$.isArray(a)?a:[a],b=[];this.previous.replace(this.current.attr());$.each(this.current.attr(),function(c,d){-1==a.indexOf(d)&&b.push(d)});this.current.replace(b)},getState:function(){return this.attr("label")}})});steal.executed("lib/mad/model/state.js");
steal("can/construct").then(function(){can.Construct("mad.model.ValidationRules",{validate:function(a,b,c,d){if("object"==typeof a){d=a;if("undefined"==typeof a.rule)throw new mad.error.Exception("The target rule has not been defined. Define the rule attribute.");"0"==a.rule.indexOf("/")?a="regex":$.isArray(a.rule)?(d.params=a.rule.slice(1),a=a.rule[0]):a=a.rule}if("undefined"==typeof mad.model.ValidationRules[a])throw new mad.error.Exception("The rule "+a+" does not exist");return mad.model.ValidationRules[a](b,
c,d)},_getAlphaRegExp:function(a){var b="\\p{L}";if(a)switch(a){case "ASCII":b="a-zA-Z";break;default:b="\\p{"+a+"}"}return b},regex:function(a,b,c){var c=c||{},b=!0,d=c.rule,e=c.not||!1;0==d.indexOf("/")&&(d=d.substr(1,d.length-(d.length-d.lastIndexOf("/")+1)));a=(new XRegExp(d)).test(a);if(e&&a||!e&&!a)b=c.message||__("The regex is not validated");return b},notEmpty:function(a,b,c){return"undefined"==typeof a||null==a||$.isArray(a)&&!a.length||""==$.trim(a)?c.message||__("Should not be empty"):
!0},uuid:function(a){return!(new XRegExp("^[abcdef0-9]{8}-[abcdef0-9]{4}-[abcdef0-9]{4}-[abcdef0-9]{4}-[abcdef0-9]{12}$")).test(a)?__("Not valid uuid"):!0},alphaNumeric:function(a,b,c){c=c||{};b=mad.model.ValidationRules._getAlphaRegExp(c.type);return!(new XRegExp("^["+b+" '0-9]*$")).test(a)?__("Only alpha-numeric characters allowed"):!0},alpha:function(a,b,c){c=c||{};b=mad.model.ValidationRules._getAlphaRegExp(c.type);return!(new XRegExp("^["+b+" ']*$")).test(a)?__("Only alpha characters allowed"):
!0},num:function(a){return!XRegExp("^-?[0-9]+.?[0-9]*$").test(a)?__("Only numeric characters allowed"):!0},required:function(a){var b=XRegExp("^[s\n\t ]*$");return"undefined"==typeof a||null===a||b.test(a)?__("Required"):!0},text:function(a){return XRegExp("<(.|\n)*?>").test(a)?__("No HTML tags allowed"):!0},url:function(a){return XRegExp("^\t\t\t\t([a-z0-9+.-]+):\t\t\t\t\t(?:\t\t\t\t\t\t(?:((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*)@)?\t\t\t\t\t\t((?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*)\t\t\t\t\t\t(?::(d*))?\t\t\t\t\t\t(/(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?\t\t\t\t\t|\t\t\t\t\t\t(/?(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})+(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?\t\t\t\t)\t\t\t\t(?:\t\t\t\t\t((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*)\t\t\t\t)?\t\t\t\t(?:\t\t\t\t\t#((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*)\t\t\t\t)?\t\t\t$").test(a)?
__("Not valid url."):!0},nospace:function(a){return XRegExp("[ ]+").test(a)?__("No space are allowed"):!0},email:function(a){return!XRegExp("^[a-zA-Z0-9_.-]+[@]{1}[a-zA-Z0-9_.-]+.[a-zA-Z]+$").test(a)?__("Only email format is allowed"):!0},date:function(a,b,c){var c=c||{},b=c.format||"dd/mm/yyyy",d=null,e=null,f=null,c=[0,31,29,31,30,31,30,31,31,30,31,30,31],h="",g=!0;switch(b){case "m/d/y":h=/^(\d{1,2})[./-](\d{1,2})[./-](\d{2}|\d{4})$/;e=1;f=2;d=3;break;case "mm/dd/yy":h=/^(\d{1,2})[./-](\d{1,2})[./-](\d{2})$/;
e=1;f=2;d=3;break;case "mm/dd/yyyy":h=/^(\d{1,2})[./-](\d{1,2})[./-](\d{4})$/;e=1;f=2;d=3;break;case "dd/mm/yyyy":h=/^(\d{1,2})[./-](\d{1,2})[./-](\d{4})$/;e=2;f=1;d=3;break;case "d/m/yy":h=/^(\d{1,2})[./-](\d{1,2})[./-](\d{2}|\d{4})$/;e=2;f=1;d=3;break;case "y/m/d":h=/^(\d{2}|\d{4})[./-](\d{1,2})[./-](\d{1,2})$/;e=2;f=3;d=1;break;case "yy/mm/dd":h=/^(\d{4}|\d{1,2})[./-](\d{1,2})[./-](\d{1,2})$/;e=2;f=3;d=1;break;case "yyyy/mm/dd":h=/^(\d{4})[./-](\d{1,2})[./-](\d{1,2})$/,e=2,f=3,d=1}if(a=(a||"").match(h)){d=
1*a[d];e=1*a[e];f=1*a[f];if(1>f||f>c[e]||1>e||12<e)g=__("The date format is incorect, expected : ")+b;if(2==e&&29==f&&!(0!=d%4?0:0!=d%100?thrue:0==d%1E3))g=__("The year %s is not a leap year",d)}else g=__("The date format is incorect, expected : ")+b;return g},between:function(a,b,c){var a=a||"",c=c||[],b=!0,d=c.params[0]||null,e=c.params[1]||null;if(a.length<d||a.length>e)b=c.message?__(c.message,d,e):__("Must be between %s and %s characters long",d,e);return b},foreignRule:function(a,b){var c=!0;
if(b.model&&b.model.validateRules&&b.attribute)for(var d in b.model.validateRules[b.attribute]){var e=mad.model.ValidationRules.validate(b.model.validateRules[b.attribute][d],a);if(!0!==e){c=e;break}}return c},choice:function(a,b){var c=!0,d=[],a="undefined"==typeof a?null:a;b.choices?d=b.choices:b.callback&&(d=b.callback.apply(this));-1==d.indexOf(a)&&(c=__("%s is not a valid value",a));return c}},{})});steal.executed("lib/mad/model/validationRules.js");
steal("can/construct","mad/net/response.js","mad/net/responseHandler.js").then(function(){can.Construct("mad.net.Ajax",{request:function(a){var b=mad.Config.read("net.ResponseHandlerClass");a.originParams=$.extend({},a.params);a.url=$.String.sub(a.url,a.params,!0);a.dataType=a.dataType||"json";a.data=a.params;a.type=a.type?a.type.toUpperCase():"GET";if("undefined"==typeof a.silentLoading&&(a.silentLoading=!0,"POST"==a.type||"DELETE"==a.type||"PUTw"==a.type))a.silentLoading=!1;mad.bus.trigger("passbolt_ajax_request_start",
[a]);var c=can.ajax(a).pipe(function(b,c,f){var c=new mad.net.Response(b),h=null;if(c.getStatus()==mad.net.Response.STATUS_ERROR)return h=$.Deferred(),h.rejectWith(this,[f,"error",c]),h;h=$.Deferred();h.resolveWith(this,[b.body,c,a]);return h},function(b){var c=null,f=null;try{void 0!=typeof b.responseText&&(c=$.parseJSON(b.responseText))}catch(h){}f=null!=c&&mad.net.Response.isResponse(c)?new mad.net.Response(c):mad.net.Response.getResponse("unreachable");c=$.Deferred();c.rejectWith(this,[b,f.getStatus(),
f,a]);return c});c.then(function(a,c,f){mad.bus.trigger("passbolt_ajax_request_complete",[f]);(new b(c,f)).handle()});c.fail(function(c,e,f){mad.bus.trigger("passbolt_ajax_request_complete",[a]);(new b(f,a)).handle()});return c}},{})});steal.executed("lib/mad/net/ajax.js");
steal("jquery/model").then(function(){mad.model.Model("mad.net.Response",{attributes:{header:"json",body:"json"},STATUS_ERROR:"error",STATUS_NOTICE:"notice",STATUS_SUCCESS:"success",STATUS_WARNING:"warning",RESPONSE_ID_UNDEFINED:"undefined",RESPONSE_CONTROLLER_UNDEFINED:"undefined",RESPONSE_ACTION_UNDEFINED:"undefined",getResponse:function(a,b){var c=null,c={},d=null;switch(a){case "unreachable":c={id:mad.net.Response.RESPONSE_ID_UNDEFINED,status:mad.net.Response.STATUS_ERROR,controller:mad.net.Response.RESPONSE_CONTROLLER_UNDEFINED,
action:mad.net.Response.RESPONSE_ACTION_UNDEFINED,title:__("Unable to reach the server"),message:__("The url is probably incorrectly formatted")},d=b}return new mad.net.Response({header:c,body:d})},isResponse:function(a){var b=!1;"undefined"!=typeof a&&null!=a&&a.header&&a.body&&(b=!0);return b},getData:function(a){return a.body}},{getStatus:function(){return this.attr("header").status},getTitle:function(){return this.attr("header").title},getMessage:function(){return this.attr("header").message},
getAction:function(){return this.attr("header").action},getController:function(){return this.attr("header").controller},getData:function(){return this.attr("body")}})});steal.executed("lib/mad/net/response.js");
steal("can/construct").then(function(){can.Construct("mad.net.ResponseHandler",{},{response:null,request:null,callback:null,init:function(a,b,c){this.response=a;this.request=b;this.callbacks=c||{}},handle:function(){this._log();switch(this.response.getStatus("status")){case mad.net.Response.STATUS_ERROR:this._error();break;case mad.net.Response.STATUS_NOTICE:this._notice();break;case mad.net.Response.STATUS_SUCCESS:this._success();break;case mad.net.Response.STATUS_WARNING:this._warning()}},_log:function(){this.response.getStatus().toUpperCase();
this.request.type.toUpperCase();this.response.getController();this.response.getAction();this.response.getTitle()},_success:function(){this.callbacks.success&&this.callbacks.success(this.response,this.request)},_error:function(){mad.Config.read("error.ErrorHandlerClass").handleError(this.response.getStatus(),this.response.getTitle(),this.response.getMessage(),this.response.getData());this.callbacks.error&&this.callbacks.error(this.response,this.request)},_notice:function(){mad.Config.read("error.ErrorHandlerClass").handleError(this.response.getStatus(),
this.response.getTitle(),this.response.getMessage(),this.response.getData());this.callbacks.notice&&this.callbacks.notice(this.response,this.request)},_warning:function(){mad.Config.read("error.ErrorHandlerClass").handleError(this.response.getStatus(),this.response.getTitle(),this.response.getMessage(),this.response.getData());this.callbacks.warning&&this.callbacks.warning(this.response,this.request)}})});steal.executed("lib/mad/net/responseHandler.js");
_uuidlet=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};uuid=function(){return _uuidlet()+_uuidlet()+"-"+_uuidlet()+"-"+_uuidlet()+"-"+_uuidlet()+"-"+_uuidlet()+_uuidlet()+_uuidlet()};steal.executed("lib/mad/string/uuid.js");
steal("can/construct").then(function(){can.Construct("mad.route.RouteListener",{},{init:function(){var a=this;$.route(":extension/:controller/:action/:p1/:p2/:p3/:p4/:p5");$.route(":extension/:controller/:action/:p1/:p2/:p3/:p4");$.route(":extension/:controller/:action/:p1/:p2/:p3");$.route(":extension/:controller/:action/:p1/:p2");$.route(":extension/:controller/:action/:p1");$.route(":extension/:controller/:action");$.route(":extension/:controller");$.route(":extension");$.route("");$.route.ready();
$(window).bind("hashchange",function(){var b=a.getRoute();null!=b&&mad.bus&&mad.bus.trigger(mad.APP_NS_ID+"_route_change",[b])})},getRoute:function(){var a=null,b=new String(location.hash),b="#!"==b.substr(0,2)?b.substr(2):b;""!=b&&(a=$.route.deparam(b));return a}})});steal.executed("lib/mad/route/routeListener.js");steal("mad/bootstrap/appBootstrap.js","app/helper/errorHandler.js").then(function(){mad.bootstrap.AppBootstrap.extend("passbolt.bootstrap.AppBootstrap",{})});steal.executed("app/bootstrap/appBootstrap.js");
steal("mad/error/errorHandler.js").then(function(){mad.error.ErrorHandler.extend("passbolt.helper.ErrorHandler",{handleException:function(a){mad.bus&&(console.log("A"),console.log(a),mad.bus.trigger("passbolt_notify",{status:a.name,title:a.title,message:a.message}),console.log("B"));mad.error.ErrorHandler.handleException(a);console.log("C")},handleError:function(a,b,c,d){mad.bus&&mad.bus.trigger("passbolt_notify",{status:a,title:b,message:c,data:d});mad.error.ErrorHandler.handleError(a,b,c,d)}},{})});
steal.executed("app/helper/errorHandler.js");
steal("mad/controller/appController.js","app/controller/passwordWorkspaceController.js","app/controller/peopleWorkspaceController.js","app/controller/component/appNavigationLeftController.js","app/controller/component/appNavigationRightController.js","app/controller/component/appFilterController.js","app/controller/component/notificationController.js","app/controller/component/loadingBarController.js","app/model/category.js","app/model/favorite.js","app/model/resource.js","app/model/filter.js","app/view/template/app.ejs").then(function(){mad.controller.AppController.extend("passbolt.controller.AppController",
{},{afterStart:function(){this.navLeftCtl=new passbolt.controller.component.AppNavigationLeftController($("#js_app_navigation_left"));this.navLeftCtl.start();this.navRightCtl=new passbolt.controller.component.AppNavigationRightController($("#js_app_navigation_right"));this.navRightCtl.start();this.filterCtl=new passbolt.controller.component.AppFilterController($("#js_app_filter"),{});this.filterCtl.start();this.notifCtl=new passbolt.controller.component.NotificationController($("#js_app_notificator"),
{});this.loadingBarCtl=new passbolt.controller.component.LoadingBarController($("#js_app_loading_bar"),{});this.loadingBarCtl.start();this.workspacesCtl=new mad.controller.component.TabController($("#js_app_panel_main"),{generateMenu:!1});this.workspacesCtl.start();this.passwordWk=this.workspacesCtl.addComponent(passbolt.controller.PasswordWorkspaceController,{id:"js_passbolt_passwordWorkspace_controller",label:"password"});this.peopleWk=this.workspacesCtl.addComponent(passbolt.controller.PeopleWorkspaceController,
{id:"js_passbolt_peopleWorkspace_controller",label:"people"});this.workspacesCtl.enableTab("js_passbolt_passwordWorkspace_controller")},ready:function(){this._super();mad.bus.trigger("app_ready")},"{mad.bus} workspace_selected":function(a,b,c){mad.app.getComponent("js_app_panel_main").enableTab(c)}})});steal.executed("app/controller/appController.js");
steal("mad/controller/component/freeCompositeController.js","app/controller/component/categoryChooserController.js","app/controller/component/passwordBrowserController.js","app/controller/component/resourceActionsTabController.js","app/controller/component/resourceDetailsController.js","app/controller/component/resourceShortcutsController.js","app/controller/component/workspaceMenuController.js","app/controller/component/workspaceSecondaryMenuController.js","app/controller/form/category/createFormController.js",
"app/controller/form/resource/createFormController.js","app/model/filter.js").then(function(){mad.controller.component.FreeCompositeController.extend("passbolt.controller.PasswordWorkspaceController",{defaults:{label:"Password",templateUri:"app/view/template/passwordWorkspace.ejs",selectedRs:new can.Model.List,filter:new passbolt.model.Filter}},{afterStart:function(){this.primMenu=new passbolt.controller.component.WorkspaceMenuController("#js_wsp_primary_menu",{selectedRs:this.options.selectedRs});
this.primMenu.start();this.secMenu=new passbolt.controller.component.WorkspaceSecondaryMenuController("#js_wsp_secondary_menu",{});this.secMenu.start();(new passbolt.controller.component.ResourceShortcutsController("#js_wsp_pwd_rs_shortcuts",{})).start();this.catChooser=new passbolt.controller.component.CategoryChooserController("#js_wsp_pwd_category_chooser",{});this.catChooser.start();this.addComponent(passbolt.controller.component.PasswordBrowserController,{id:"js_passbolt_password_browser",selectedRs:this.options.selectedRs},
"js_workspace_main").start();new passbolt.controller.component.ResourceDetailsController($(".js_wsp_pwd_sidebar_second",this.element),{selectedRs:this.options.selectedRs})},index:function(a,b,c){console.log("Execute function index of the password workspace controller, with the following arguments");console.dir(arguments)},"{mad.bus} category_selected":function(a,b,c){this.options.selectedRs.splice(0,this.options.selectedRs.length);this.options.filter.attr({foreignModels:{Category:new can.List([c])}});
mad.bus.trigger("filter_resources_browser",this.options.filter)},"{mad.bus} copy_login_clipboard":function(){},"{mad.bus} copy_secret_clipboard":function(){},"{mad.bus} request_category_creation":function(a,b,c){var a=new passbolt.model.Category({parent_id:c.id}),d=(new mad.controller.component.DialogController({label:__("Create a new Category")})).start();d.add(passbolt.controller.form.category.CreateFormController,{data:a,callbacks:{submit:function(a){(new passbolt.model.Category(a["passbolt.model.Category"])).save();
d.remove()}}}).load(a)},"{mad.bus} request_category_edition":function(a,b,c){var d=(new mad.controller.component.DialogController({label:__("Edit a Category")})).start();d.add(passbolt.controller.form.category.CreateFormController,{data:c,callbacks:{submit:function(a){c.attr(a["passbolt.model.Category"]).save();d.remove()}}}).load(c)},"{mad.bus} request_category_deletion":function(a,b,c){c.destroy()},"{mad.bus} request_resource_creation":function(a,b,c){"undefined"==typeof c?c=[]:$.isArray(c)||(c=
[c]);var a=new passbolt.model.Resource({Category:c}),d=(new mad.controller.component.DialogController(null,{label:__("Create Password")})).start();d.add(passbolt.controller.form.resource.CreateFormController,{data:a,callbacks:{submit:function(a){(new passbolt.model.Resource(a["passbolt.model.Resource"])).save();d.remove()}}}).load(a)},"{mad.bus} request_resource_edition":function(a,b,c){(new mad.controller.component.DialogController(null,{label:__("Edit Password")})).start().add(passbolt.controller.component.ResourceActionsTabController,
{resource:c}).enableTab("js_rs_edit")},"{mad.bus} request_resource_deletion":function(a,b){for(var c=2;c<arguments.length;c++){var d=arguments[c];if(!(d instanceof passbolt.model.Resource))throw new mad.error.Exception("The parameter "+c+" should be an instance of passbolt.model.Resource");d.destroy()}},"{mad.bus} request_resource_sharing":function(a,b,c){(new mad.controller.component.DialogController(null,{label:__("Share Password")})).start().add(passbolt.controller.component.ResourceActionsTabController,
{resource:c}).enableTab("js_rs_permission")},"{mad.bus} request_favorite":function(a,b,c){(new passbolt.model.Favorite({foreign_model:"resource",foreign_id:c.id})).save(function(a){c.Favorite=a;can.trigger(passbolt.model.Resource,"updated",c)})},"{mad.bus} request_unfavorite":function(a,b,c){c.Favorite.destroy(function(){c.Favorite=null;can.trigger(passbolt.model.Resource,"updated",c)})}})});steal.executed("app/controller/passwordWorkspaceController.js");
steal("mad/controller/component/dynamicTreeController.js","app/view/component/categoryChooser.js","app/model/category.js","app/model/categoryResource.js").then(function(){mad.controller.component.DynamicTreeController.extend("passbolt.controller.component.CategoryChooserController",{defaults:{label:"Category Chooser",viewClass:passbolt.view.component.categoryChooser,itemClass:passbolt.model.Category,templateUri:"mad/view/template/component/tree.ejs",map:new mad.object.Map({id:"id",label:"name",children:{key:"children",
func:mad.object.Map.mapObjects}})}},{showContextualMenu:function(a,b,c){var d=mad.model.Action.models([{id:uuid(),label:"Open",action:function(b){mad.bus.trigger("category_selected",a);b.remove()}},{id:uuid(),label:"Create resource",action:function(b){mad.bus.trigger("request_resource_creation",a);b.remove()}},{id:uuid(),label:"Create category",action:function(b){mad.bus.trigger("request_category_creation",a);b.remove()}},{id:uuid(),label:"Rename...",action:function(b){mad.bus.trigger("request_category_edition",
a);b.remove()}},{id:uuid(),label:"Remove",action:function(b){mad.bus.trigger("request_category_deletion",a);b.remove()}}]),b=new mad.controller.component.ContextualMenuController(null,{mouseX:b,mouseY:c});b.start();b.load(d)}," item_selected":function(a,b,c){mad.bus.trigger("category_selected",c)}," category_dropover":function(){}," category_dropout":function(){}," category_dropon":function(a,b,c,d){a=c.element.parent().attr("id");d=d.element.attr("id");(new passbolt.model.CategoryResource({category_id:a,
resource_id:d})).save()}," item_right_selected":function(a,b,c,d){this._super(a,b,c,d);this.showContextualMenu(c,d.pageX,d.pageY)},"{passbolt.model.Category} created":function(a,b,c){this.insertItem(c,c.parent_id,"last")},"{passbolt.model.Category} destroyed":function(a,b,c){this.removeItem(c)},"{mad.bus} app_ready":function(){var a=this;this.setState("loading");passbolt.model.Category.findAll({children:!0},function(b){a.load(b);a.setState("ready")},function(){})}})});steal.executed("app/controller/component/categoryChooserController.js");
steal("jquery/event/drop","mad/view/component/tree/dynamicTree.js").then(function(){mad.view.component.tree.DynamicTree.extend("passbolt.view.component.categoryChooser",{},{insertItem:function(a,b,c){var d=this,a=this._super(a,b,c);$("> .row",$(a)).bind("dropover",function(a,b,c){$(this).addClass("drop-over");d.element.trigger("category_dropover",[b,c,a])}).bind("dropout",function(a,b,c){$(this).removeClass("drop-over");d.element.trigger("category_dropout",[b,c,a])}).bind("dropon",function(a,b,c){$(this).removeClass("drop-over");
d.element.trigger("category_dropon",[b,c,a])})}})});steal.executed("app/view/component/categoryChooser.js");
steal("jquery","jquerypp/event/drag/core","jquerypp/dom/within","jquerypp/dom/compare",function(a){var b=a.event,c="dropover dropon dropout dropinit dropmove dropend".split(" ");a.Drop=function(b,c){a.extend(this,b);this.element=a(c)};a.each(c,function(){b.special[this]={add:function(){var b=a(this),c=b.data("dropEventCount")||0;b.data("dropEventCount",c+1);0==c&&a.Drop.addElement(this)},remove:function(){var b=a(this),c=b.data("dropEventCount")||0;b.data("dropEventCount",c-1);1>=c&&a.Drop.removeElement(this)}}});
a.extend(a.Drop,{lowerName:"drop",_rootElements:[],_elements:a(),last_active:[],endName:"dropon",addElement:function(a){for(var b=0;b<this._rootElements.length;b++)if(a==this._rootElements[b])return;this._rootElements.push(a)},removeElement:function(a){for(var b=0;b<this._rootElements.length;b++)if(a==this._rootElements[b]){this._rootElements.splice(b,1);break}},sortByDeepestChild:function(a,b){var c=a.element.compare(b.element);return c&16||c&4?1:c&8||c&2?-1:0},isAffected:function(a,b,c){return c.element!=
b.element&&1==c.element.within(a[0],a[1],c._cache).length},deactivate:function(a,b,c){b.out(c,a);a.callHandlers(this.lowerName+"out",a.element[0],c,b)},activate:function(a,b,c){b.over(c,a);a.callHandlers(this.lowerName+"over",a.element[0],c,b)},move:function(a,b,c){a.callHandlers(this.lowerName+"move",a.element[0],c,b)},compile:function(b,e){if(this.dragging||e){this.dragging||(this.dragging=e,this.last_active=[]);for(var f,h,g,j,l=[],m=this.dragging,k=0;k<this._rootElements.length;k++)for(g in f=
this._rootElements[k],h=a.event.findBySelector(f,c),h){j=g?jQuery(g,f):[f];for(var n=0;n<j.length;n++)this.addCallbacks(j[n],h[g],m)&&l.push(j[n])}this.add(l,b,m)}},addCallbacks:function(b,c,f){var h=a.data(b,"_dropData");if(h){if(!f){for(var g in c)h[g]=h[g]?h[g].concat(c[g]):c[g];return!1}}else return a.data(b,"_dropData",new a.Drop(c,b)),!0},add:function(b,c,f){for(var h=0,g;h<b.length;)g=a.data(b[h],"_dropData"),g.callHandlers(this.lowerName+"init",b[h],c,f),g._canceled?b.splice(h,1):h++;this._elements.push.apply(this._elements,
b)},show:function(b,c,f){if(this._elements.length){for(var h=[],g=!0,j=0,l,m,k,n=this.last_active;j<this._elements.length;)(l=a.data(this._elements[j],"_dropData"))?(j++,this.isAffected(b,c,l)&&h.push(l)):this._elements.splice(j,1);h.sort(this.sortByDeepestChild);f.stopRespondPropagate=function(){g=!1};m=h.slice();this.last_active=h;for(b=0;b<n.length;b++){l=n[b];for(j=0;k=m[j];)if(l==k){m.splice(j,1);break}else j++;k||this.deactivate(l,c,f);if(!g)return}for(j=0;j<m.length;j++)if(this.activate(m[j],
c,f),!g)return;for(j=0;j<h.length&&!(this.move(h[j],c,f),!g);j++);}},end:function(b,c){for(var f,h=this.lowerName+"end",g=a.Event(this.endName,b),j=0;j<this.last_active.length&&!(f=this.last_active[j],this.isAffected(b.vector(),c,f)&&f[this.endName]&&f.callHandlers(this.endName,null,g,c),g.isPropagationStopped());j++);for(g=0;g<this._elements.length;g++)(f=a.data(this._elements[g],"_dropData"))&&f.callHandlers(h,null,b,c);this.clear()},clear:function(){this._elements.each(function(){a.removeData(this,
"_dropData")});this._elements=a();delete this.dragging}});a.Drag.responder=a.Drop;a.extend(a.Drop.prototype,{callHandlers:function(a,b,c,h){for(var g=this[a]?this[a].length:0,j=0;j<g;j++)this[a][j].call(b||this.element[0],c,this,h)},cache:function(a){this._cache=null!=a?a:!0},cancel:function(){this._canceled=!0}});return a});steal.executed("lib/jquerypp/event/drop/drop.js");
steal("jquery","jquerypp/lang/vector","jquerypp/event/livehack","jquerypp/event/reverse",function(a){a.event.special.move||a.event.reverse("move");var b=function(b,c){var d=Array.prototype.slice.call(arguments,2);return function(){var e=[this].concat(d,a.makeArray(arguments));return c.apply(b,e)}},c=a.event,d=window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){},e="ontouchend"in document,f=e?"touchstart":"mousedown",h=e?"touchend":"mouseup",g=e?"touchmove":"mousemove",
j=function(a){a.preventDefault()};a.Drag=function(){};a.extend(a.Drag,{lowerName:"drag",current:null,distance:0,mousedown:function(b,d){if(!(!(0===b.button||1==b.button)&&!e||this.current)){var f=new a.Drag,h=b.delegateTarget||d,g=b.handleObj.selector,j=this;this.current=f;f.setup({element:d,delegate:b.delegateTarget||d,selector:b.handleObj.selector,moved:!1,_distance:this.distance,callbacks:{dragdown:c.find(h,["dragdown"],g),draginit:c.find(h,["draginit"],g),dragover:c.find(h,["dragover"],g),dragmove:c.find(h,
["dragmove"],g),dragout:c.find(h,["dragout"],g),dragend:c.find(h,["dragend"],g),dragcleanup:c.find(h,["dragcleanup"],g)},destroyed:function(){j.current=null}},b)}}});a.extend(a.Drag.prototype,{setup:function(c,f){a.extend(this,c);this.element=a(this.element);this.event=f;this.allowOtherDrags=this.moved=!1;var k=b(this,this.mousemove),n=b(this,this.mouseup);this._mousemove=k;this._mouseup=n;this._distance=c.distance?c.distance:0;this.mouseStartPosition=f.vector();a(document).bind(g,k);a(document).bind(h,
n);e&&a(document).bind(g,j);this.callEvents("down",this.element,f)||(this.noSelection(this.delegate),d())},destroy:function(){a(document).unbind(g,this._mousemove);a(document).unbind(h,this._mouseup);e&&a(document).unbind(g,j);this.moved||(this.event=this.element=null);e||this.selection(this.delegate);this.destroyed()},mousemove:function(a,b){if(!this.moved){if(Math.sqrt(Math.pow(b.pageX-this.event.pageX,2)+Math.pow(b.pageY-this.event.pageY,2))<this._distance)return!1;this.init(this.element,b);this.moved=
!0}this.element.trigger("move",this);var c=b.vector();(!this._start_position||!this._start_position.equals(c))&&this.draw(c,b)},mouseup:function(a,b){this.moved&&this.end(b);this.destroy()},noSelection:function(b){b=b||this.delegate;document.documentElement.onselectstart=function(){return!1};document.documentElement.unselectable="on";this.selectionDisabled=this.selectionDisabled?this.selectionDisabled.add(b):a(b);this.selectionDisabled.css("-moz-user-select","-moz-none")},selection:function(){this.selectionDisabled&&
(document.documentElement.onselectstart=function(){},document.documentElement.unselectable="off",this.selectionDisabled.css("-moz-user-select",""))},init:function(b,c){var b=a(b),d=this.movingElement=this.element=a(b);this._cancelled=!1;this.event=c;this.mouseElementPosition=this.mouseStartPosition.minus(this.element.offsetv());this.callEvents("init",b,c);!0!==this._cancelled&&(this.startPosition=d!=this.movingElement?this.movingElement.offsetv():this.currentDelta(),this.makePositioned(this.movingElement),
this.oldZIndex=this.movingElement.css("zIndex"),this.movingElement.css("zIndex",1E3),!this._only&&this.constructor.responder&&this.constructor.responder.compile(c,this))},makePositioned:function(a){var b;b=a.css("position");if(!b||"static"==b)b={position:"relative"},window.opera&&(b.top="0px",b.left="0px"),a.css(b)},callEvents:function(a,b,c,d){for(var e=this.callbacks[this.constructor.lowerName+a],a=0;a<e.length;a++)e[a].call(b,c,this,d);return e.length},currentDelta:function(){return new a.Vector(parseInt(this.movingElement.css("left"),
10)||0,parseInt(this.movingElement.css("top"),10)||0)},draw:function(a,b){this._cancelled||(d(),this.location=a.minus(this.mouseElementPosition),this.move(b),this._cancelled||(b.isDefaultPrevented()||this.position(this.location),!this._only&&this.constructor.responder&&this.constructor.responder.show(a,this,b)))},position:function(a){var b=this.currentDelta(),b=this.movingElement.offsetv().minus(b);this.required_css_position=a.minus(b);this.offsetv=a;a=this.movingElement[0].style;!this._cancelled&&
!this._horizontal&&(a.top=this.required_css_position.top()+"px");!this._cancelled&&!this._vertical&&(a.left=this.required_css_position.left()+"px")},move:function(a){this.callEvents("move",this.element,a)},over:function(a,b){this.callEvents("over",this.element,a,b)},out:function(a,b){this.callEvents("out",this.element,a,b)},end:function(a){if(!this._cancelled){!this._only&&this.constructor.responder&&this.constructor.responder.end(a,this);this.callEvents("end",this.element,a);if(this._revert){var b=
this;this.movingElement.animate({top:this.startPosition.top()+"px",left:this.startPosition.left()+"px"},function(){b.cleanup.apply(b,arguments)})}else this.cleanup(a);this.event=null}},cleanup:function(a){this.movingElement.css({zIndex:this.oldZIndex});this.movingElement[0]!==this.element[0]&&!this.movingElement.has(this.element[0]).length&&!this.element.has(this.movingElement[0]).length&&this.movingElement.css({display:"none"});this._removeMovingElement&&this.movingElement.remove();a&&this.callEvents("cleanup",
this.element,a);this.movingElement=this.element=this.event=null},cancel:function(){this._cancelled=!0;!this._only&&this.constructor.responder&&this.constructor.responder.clear(this.event.vector(),this,this.event);this.destroy()},ghost:function(b){var c=this.movingElement.clone().css("position","absolute");b?a(b).append(c):a(this.movingElement).after(c);c.width(this.movingElement.width()).height(this.movingElement.height());c.offset(this.movingElement.offset());this.movingElement=c;this.noSelection(c);
this._removeMovingElement=!0;return c},representative:function(b,c,d){this._offsetX=c||0;this._offsetY=d||0;c=this.mouseStartPosition;this.movingElement=a(b);this.movingElement.css({top:c.y()-this._offsetY+"px",left:c.x()-this._offsetX+"px",display:"block",position:"absolute"}).show();this.noSelection(this.movingElement);this.mouseElementPosition=new a.Vector(this._offsetX,this._offsetY);return this},revert:function(a){this._revert=void 0===a?!0:a;return this},vertical:function(){this._vertical=!0;
return this},horizontal:function(){this._horizontal=!0;return this},only:function(a){return this._only=void 0===a?!0:a},distance:function(a){return void 0!==a?(this._distance=a,this):this._distance}});c.setupHelper("dragdown draginit dragover dragmove dragout dragend dragcleanup".split(" "),f,function(b){a.Drag.mousedown.call(a.Drag,b,this)});return a});steal.executed("lib/jquerypp/event/drag/core/core.js");
steal("jquery",function(a){var b=function(a){return void 0!==a?this.array[0]=a:this.array[0]},c=function(a){return void 0!==a?this.array[1]=a:this.array[1]};a.Vector=function(b){this.update(a.isArray(b)?b:a.makeArray(arguments))};a.Vector.prototype={app:function(b){var c,f=[];for(c=0;c<this.array.length;c++)f.push(b(this.array[c],c));return new a.Vector(f)},plus:function(){var b,c=arguments[0]instanceof a.Vector?arguments[0].array:a.makeArray(arguments),f=this.array.slice(0),h=new a.Vector;for(b=
0;b<c.length;b++)f[b]=(f[b]?f[b]:0)+c[b];return h.update(f)},minus:function(){var b,c=arguments[0]instanceof a.Vector?arguments[0].array:a.makeArray(arguments),f=this.array.slice(0),h=new a.Vector;for(b=0;b<c.length;b++)f[b]=(f[b]?f[b]:0)-c[b];return h.update(f)},equals:function(){var b,c=arguments[0]instanceof a.Vector?arguments[0].array:a.makeArray(arguments),f=this.array.slice(0),h=new a.Vector;for(b=0;b<c.length;b++)if(f[b]!=c[b])return null;return h.update(f)},x:b,left:b,width:b,y:c,top:c,height:c,
toString:function(){return"("+this.array.join(", ")+")"},update:function(a){var b;if(this.array)for(b=0;b<this.array.length;b++)delete this.array[b];this.array=a;for(b=0;b<a.length;b++)this[b]=this.array[b];return this}};a.Event.prototype.vector=function(){var b="ontouchend"in document&&this.originalEvent.touches&&this.originalEvent.touches.length?this.originalEvent.changedTouches[0]:this;if(this.originalEvent.synthetic){var c=document.documentElement,f=document.body;return new a.Vector(b.clientX+
(c&&c.scrollLeft||f&&f.scrollLeft||0)-(c.clientLeft||0),b.clientY+(c&&c.scrollTop||f&&f.scrollTop||0)-(c.clientTop||0))}return new a.Vector(b.pageX,b.pageY)};a.fn.offsetv=function(){if(this[0]==window)return new a.Vector(window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop);var b=this.offset()||{};return new a.Vector(b.left,b.top)};a.fn.dimensionsv=function(b){return this[0]==window||!b?new a.Vector(this.width(),
this.height()):new a.Vector(this[b+"Width"](),this[b+"Height"]())};return a});steal.executed("lib/jquerypp/lang/vector/vector.js");
steal("jquery",function(a){var b=a.event,c=function(a,b,c,h){var g,j,l,m,k,n,q;for(g=0;g<b.length;g++){j=b[g];(m=0>j.indexOf("."))||(l=j.split("."),j=l.shift(),q=RegExp("(^|\\.)"+l.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)"));l=(a[j]||[]).slice(0);for(k=0;k<l.length;k++)n=l[k],(m||q.test(n.namespace))&&(h?n.selector===h&&c(j,n.origHandler||n.handler):null===h?c(j,n.origHandler||n.handler,n.selector):n.selector||c(j,n.origHandler||n.handler))}};b.find=function(b,e,f){var b=(a._data(b)||{}).events,
h=[];if(!b)return h;c(b,e,function(a,b){h.push(b)},f);return h};b.findBySelector=function(b,e){var f=a._data(b).events,h={};if(!f)return h;c(f,e,function(a,b,c){c=c||"";c=h[c]||(h[c]={});(c[a]||(c[a]=[])).push(b)},null);return h};b.supportTouch="ontouchend"in document;a.fn.respondsTo=function(c){return this.length?0<b.find(this[0],a.isArray(c)?c:[c]).length:!1};a.fn.triggerHandled=function(b,c){b="string"==typeof b?a.Event(b):b;this.trigger(b,c);return b.handled};b.setupHelper=function(c,e,f){f||
(f=e,e=null);var h=function(h){var g=h.selector||"",m=h.namespace?"."+h.namespace:"";g?(h=b.find(this,c,g),h.length||a(this).delegate(g,e+m,f)):b.find(this,c,g).length||b.add(this,e+m,f,{selector:g,delegate:this})},g=function(h){var g=h.selector||"";g?(h=b.find(this,c,g),h.length||a(this).undelegate(g,e,f)):b.find(this,c,g).length||b.remove(this,e,f,{selector:g,delegate:this})};a.each(c,function(){b.special[this]={add:h,remove:g,setup:function(){},teardown:function(){}}})};return a});steal.executed("lib/jquerypp/event/livehack/livehack.js");
steal("jquery",function(a){a.event.reverse=function(b,c){var d=a(),e=0,f=a.event.handle||a.event.dispatch;a.event.special[b]={setup:function(){this!==window&&(d.push(this),a.unique(d));return this!==window},teardown:function(){d=d.not(this);return this!==window},add:function(b){b.origHandler=b.handler;b.handler=function(g,j){var l=this===window;if(!c||!(c.handler&&!0===c.handler.apply(this,arguments)))if(0===e){e++;var m=!1===j?g.target:this;f.call(m,g,j);if(!g.isPropagationStopped()){for(var k=d.index(this),
n=d.length,q,p;++k<n&&(q=d[k])&&(l||a.contains(m,q));)if(f.call(q,g,j),g.isPropagationStopped())for(;++k<n&&(p=d[k]);)if(!a.contains(q,p)){k--;break}g.stopImmediatePropagation()}e--}else b.origHandler.call(this,g,j)}}};a([document,window]).bind(b,function(){});return a.event.special[b]};return a});steal.executed("lib/jquerypp/event/reverse/reverse.js");
steal("jquery",function(a){a.fn.within=function(b,c,d){var e=[];this.each(function(){var f=jQuery(this);if(this==document.documentElement)return e.push(this);f=d?a.data(this,"offsetCache")||a.data(this,"offsetCache",f.offset()):f.offset();c>=f.top&&c<f.top+this.offsetHeight&&(b>=f.left&&b<f.left+this.offsetWidth)&&e.push(this)});return this.pushStack(a.unique(e),"within",b+","+c)};a.fn.withinBox=function(b,c,d,e,f){var h=[];this.each(function(){var g=jQuery(this);if(this==document.documentElement)return h.push(this);
var j=f?a.data(this,"offset")||a.data(this,"offset",g.offset()):g.offset(),l=g.width(),g=g.height();j.top>c+e||j.top+g<c||(j.left>b+d||j.left+l<b)||h.push(this)});return this.pushStack(a.unique(h),"withinBox",a.makeArray(arguments).join(","))};return a});steal.executed("lib/jquerypp/dom/within/within.js");
steal("jquery",function(a){a.fn.compare=function(a){try{a=a.jquery?a[0]:a}catch(c){return null}if(window.HTMLElement){var d=HTMLElement.prototype.toString.call(a);if("[xpconnect wrapped native prototype]"==d||"[object XULElement]"==d||"[object Window]"===d)return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(a);if(this[0]==document&&a!=document)return 8;var d=(this[0]!==a&&this[0].contains(a)&&16)+(this[0]!=a&&a.contains(this[0])&&8),e=document.documentElement;this[0].sourceIndex&&
(d+=this[0].sourceIndex<a.sourceIndex&&4,d+=this[0].sourceIndex>a.sourceIndex&&2,d+=(this[0].ownerDocument!==a.ownerDocument||this[0]!=e&&0>=this[0].sourceIndex||a!=e&&0>=a.sourceIndex)&&1);return d};return a});steal.executed("lib/jquerypp/dom/compare/compare.js");
steal("mad/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Category",{validateRules:{},attributes:{id:"string",parent_id:"string",lft:"string",rght:"string",name:"string",children:"passbolt.model.Category.models"},create:function(a,b,c){var d=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"categories.json",type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,
[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"categories/{id}",type:"DELETE",params:{id:a},success:b,error:c})},findOne:function(a,b,c){a.children=a.children||!1;return mad.net.Ajax.request({url:APP_URL+"categories/{id}.json",type:"GET",params:a,success:b,error:c})},findAll:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"categories.json",type:"GET",params:a,success:b,error:c})},update:function(a,b,c,d){var e=
this;delete b.created;delete b.modified;b=mad.model.serializer.CakeSerializer.to(b,this);b.id=a;return mad.net.Ajax.request({url:APP_URL+"categories/{id}.json",type:"PUT",params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{getSubCategories:function(){return mad.model.Model.nestedToList(this,"children")}})});steal.executed("app/model/category.js");
steal("mad/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.CategoryResource",{validateRules:{},attributes:{id:"string",category_id:"string",resource_id:"string"},create:function(a,b,c){var d=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"categoriesResources",type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);
return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"categoriesResources/{id}",type:"DELETE",params:{id:a},success:b,error:c})},findOne:function(a,b,c){a.children=a.children||!1;return mad.net.Ajax.request({url:APP_URL+"categoriesResources/{id}.json",type:"GET",params:a,success:b,error:c})},findAll:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"categoriesResources.json",type:"GET",params:a,success:b,error:c})},update:function(a,b,c,d){var e=this;delete b.created;
delete b.modified;b=mad.model.serializer.CakeSerializer.to(b,this);b.id=a;return mad.net.Ajax.request({url:APP_URL+"/categoriesResources/{id}",type:"PUT",params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{})});steal.executed("app/model/categoryResource.js");
steal("mad/controller/component/gridController.js","app/model/resource.js","app/model/category.js","app/controller/component/copyLoginButtonController.js","app/controller/component/copySecretButtonController.js","app/controller/component/favoriteController.js","app/view/component/passwordBrowser.js").then(function(){mad.controller.component.GridController.extend("passbolt.controller.component.PasswordBrowserController",{defaults:{itemClass:passbolt.model.Resource,viewClass:passbolt.view.component.passwordBrowser,
resources:new can.Model.List,categories:[],selectedRs:new can.Model.List}},{init:function(a,b){b.map=new mad.object.Map({id:"id",name:"name",username:"username",uri:"uri",modified:"modified",expires:"expiry_date",owner:"Creator.username",copyLogin:"id",copySecret:"id",Category:"Category"});b.columnModel=[{name:"multipleSelect",index:"multipleSelect",header:{css:["selections s-cell"],label:'<div class="input checkbox"> \t\t\t\t\t\t\t<input type="checkbox" name="select all" value="checkbox-select-all" id="checkbox-select-all"> \t\t\t\t\t\t\t<label for="checkbox-select-all">select all</label> \t\t\t\t\t\t</div>'},
cellAdapter:function(a,b,e,f){b=[];b[f.id]="";mad.helper.ComponentHelper.create(a,"inside_replace",mad.form.element.CheckboxController,{id:"multiple_select_checkbox_"+f.id,name:"test",cssClasses:["js_checkbox_multiple_select"],availableValues:b}).start()}},{name:"favorite",index:"favorite",header:{css:["selections s-cell"],label:'<a href="#"> \t\t\t\t\t\t\t<i class="icon fav no-text"></i> \t\t\t\t\t\t\t<span>fav</span> \t\t\t\t\t\t</a>'},cellAdapter:function(a,b,e,f){mad.helper.ComponentHelper.create(a,
"inside_replace",passbolt.controller.component.FavoriteController,{id:"favorite_"+f.id,name:"test2",instance:f}).start()}},{name:"name",index:"name",header:{css:["m-cell"],label:__("Resource")},valueAdapter:function(a,b){var e=a;can.each(b.Category,function(a){e+=' <span class="password_browser_category_label">'+a.name+"</span>"});return e}},{name:"username",index:"username",header:{css:["m-cell"],label:__("Username")}},{name:"uri",index:"uri",header:{css:["l-cell"],label:__("URI")}},{name:"modified",
index:"modified",header:{css:["m-cell"],label:__("Modified")},valueAdapter:function(a){return moment(a).fromNow()}},{name:"expires",index:"expires",header:{css:["m-cell"],label:__("Expires")},valueAdapter:function(a){return"undefined"==typeof a?"-":moment(a).fromNow()}},{name:"owner",index:"owner",header:{css:["m-cell"],label:__("Owner")}},{name:"copyLogin",index:"copyLogin",header:{css:["s-cell"],label:""},cellAdapter:function(){}},{name:"copySecret",index:"copySecret",header:{css:["s-cell"],label:""},
cellAdapter:function(){}}];this._super(a,b)},insertItem:function(a,b,c){this.options.resources.push(a);this._super(a,b,c)},removeItem:function(a){this._super(a)},refreshItem:function(a){var b=this;if(this.options.categories.length){var c=!1;can.each(a.Category,function(a){-1!=b.options.categories.indexOf(a.id)&&(c=!0)});if(!c){this.removeItem(a);return}}this._super(a)},reset:function(){this.options.resources.splice(0,this.options.resources.length)},load:function(a){this._super(a)},beforeSelect:function(a){var b=
!0;if(this.state.is("selection"))if(0<this.options.selectedRs.length&&this.options.selectedRs[0].id==a.id)this.unselect(a),this.setState("ready"),b=!1;else for(a=this.options.selectedRs.length-1;-1<a;a--)this.unselect(this.options.selectedRs[a]);return b},beforeUnselect:function(){return!0},select:function(a,b){b="undefined"==typeof b?!1:b;this.options.selectedRs.push(a);mad.app.getComponent("multiple_select_checkbox_"+a.id).setValue([a.id]);this.view.selectItem(a);b||mad.bus.trigger("resource_selected",
a)},unselect:function(a,b){b="undefined"==typeof b?!1:b;mad.app.getComponent("multiple_select_checkbox_"+a.id).reset();this.view.unselectItem(a);mad.model.List.remove(this.options.selectedRs,a);b||mad.bus.trigger("resource_unselected",a)},"{passbolt.model.Resource} created":function(a,b,c){var d=this;c.Category.length?c.Category.each(function(a){if(-1!=d.options.categories.indexOf(a.id))return d.insertItem(c,null,"first"),!1}):d.insertItem(c,null,"first")},"{passbolt.model.Resource} updated":function(a,
b,c){-1!=this.options.resources.indexOf(c)&&this.refreshItem(c)},"{resources} remove":function(a,b,c){var d=this;can.each(c,function(a){d.removeItem(a)})},"{passbolt.model.Category} destroyed":function(a,b,c){var d=this,a=mad.model.Model.nestedToList(c,"children");can.each(a,function(a){a=d.options.categories.indexOf(a.id);-1!=a&&d.options.categories.splice(a,1)})}," item_selected":function(a,b,c){this.setState("selection");this.beforeSelect(c)&&this.select(c)},".js_checkbox_multiple_select checked":function(a,
b,c){this.state.is("ready")?this.setState("selection"):this.state.is("selection")&&this.setState("multipleSelection");a=this.options.resources[mad.model.List.indexOf(this.options.resources,c)];this.beforeSelect(a)&&this.select(a)},".js_checkbox_multiple_select unchecked":function(a,b,c){a=this.options.resources[mad.model.List.indexOf(this.options.resources,c)];this.beforeUnselect()&&this.unselect(a);this.options.selectedRs.length?1==this.options.selectedRs.length&&this.setState("selection"):this.setState("ready")},
"{mad.bus} filter_resources_browser":function(a,b,c){var d=this;this.filter=c;this.options.categories=[];(a=c.getForeignModels("Category"))&&can.each(a,function(a){a=a.getSubCategories(!0);can.each(a,function(a){d.options.categories.push(a.id)})});this.setState("loading");passbolt.model.Resource.findAll({filter:this.filter,recursive:!0},function(a){d.load(a);d.setState("ready")})},"{mad.bus} app_ready":function(){var a=this;this.setState("loading");passbolt.model.Resource.findAll({},function(b){a.load(b);
a.setState("ready")})},stateReady:function(){},stateSelection:function(){},stateMultipleSelection:function(){}})});steal.executed("app/controller/component/passwordBrowserController.js");
steal("jquery/model","app/model/category.js","app/model/secret.js","app/model/itemTag.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Resource",{attributes:{id:"string",name:"string",username:"string",uri:"string",created:"string",modified:"string",description:"string",Category:"passbolt.model.Category.models",Secret:"passbolt.model.Secret.model",Favorite:"passbolt.model.Favorite.model",ItemTag:"passbolt.model.ItemTag.models",Creator:"passbolt.model.User.model",
Modifier:"passbolt.model.User.model"},create:function(a,b,c){var d=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"/resources",type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"resources/{id}.json",type:"DELETE",params:{id:a},success:b,error:c})},findAll:function(a,b,c){if("undefined"!=
typeof a.filter){var d=a.filter;delete a.filter;d=d.toRequest();$.extend(a,d)}return mad.net.Ajax.request({url:APP_URL+"resources.json",type:"GET",params:a,success:b,error:c})},findOne:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"resources/{id}.json",type:"GET",params:a,success:b,error:c})},update:function(a,b,c,d){var e=this;delete b.created;delete b.modified;b=mad.model.serializer.CakeSerializer.to(b,this);b.id=a;return mad.net.Ajax.request({url:APP_URL+"resources/{id}.json",type:"PUT",
params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{init:function(){var a=this;passbolt.model.Category.bind("destroyed",function(b,c){var d=mad.model.Model.nestedToList(c,"children","id"),e=!1;can.each(a.Category,function(b,c){-1!=d.indexOf(b.id)&&(a.Category.splice(c,1),e=!0)});e&&can.trigger(passbolt.model.Resource,"updated",a)})},isFavorite:function(){return this.Favorite&&this.Favorite.id?!0:!1},destroy:function(){this._super()}})});
steal.executed("app/model/resource.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js","app/model/secretStrength.js").then(function(){mad.model.Model("passbolt.model.Secret",{attributes:{id:"string",data:"string"},MASKS:{alpha:{size:26,data:"abcdefghijklmnopqrstuvwxyz",pattern:/[a-z]/},uppercase:{size:26,data:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",pattern:/[A-Z]/},digit:{size:10,data:"0123456789",pattern:/[0-9]/},special:{size:32,data:"!\"#$%&'()*+,-./:;<=>?@[:]^_`{|}~",pattern:/[!"#$%&\'\(\)*+,\-./:;<=>?@\[\]^_`{|}~]/}},generate:function(){var a=
"",a=mad.Config.read("secret.generator.masks"),b=mad.Config.read("secret.generator.length"),c=[],d,e;for(e in a)c=$.merge(c,passbolt.model.Secret.MASKS[a[e]].data);do{a="";d=passbolt.model.SecretStrength.mesureEntropy(b,c.length);for(e=0;e<b;e++)a+=c[Math.randomRange(0,c.length-1)]}while(d!=passbolt.model.SecretStrength.mesurePwdEntropy(a));return a}},{})});steal.executed("app/model/secret.js");
steal("jquery/model").then(function(){var a={VERY_WEAK:{start:0,id:"very_weak",label:__("very weak")},WEAK:{start:60,id:"weak",label:__("weak")},FAIR:{start:80,id:"fair",label:__("fair")},STRONG:{start:112,id:"strong",label:__("strong")},VERY_STRONG:{start:128,id:"very_strong",label:__("very strong")}};mad.model.Model("passbolt.model.SecretStrength",{attributes:{id:"string",label:"string",start:"int"},getSecretStrength:function(b){var c=null;if(!b)return c;var b=passbolt.model.SecretStrength.mesurePwdEntropy(b),
d;for(d in a)if(b>=a[d].start)c=new passbolt.model.SecretStrength(a[d]);else break;return c},mesureEntropy:function(a,c){return a*(Math.log(c)/Math.log(2))},mesurePwdEntropy:function(a){var c=0,d;for(d in passbolt.model.Secret.MASKS)a.match(passbolt.model.Secret.MASKS[d].pattern)&&(c+=passbolt.model.Secret.MASKS[d].size);return passbolt.model.SecretStrength.mesureEntropy(a.length,c)}},{})});steal.executed("app/model/secretStrength.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js","app/model/tag.js").then(function(){mad.model.Model("passbolt.model.ItemTag",{validateRules:{foreign_model:["text"],foreign_id:["uid"],tag_id:["uid"],tag_list:["tag_list"]},attributes:{id:"string",tag_id:"string",foreign_model:"string",foreign_id:"string",created:"string",modified:"string",created_by:"string",modified_by:"string",Tag:"passbolt.model.Tag.model"},create:function(a,b,c){var d=this,e=mad.model.serializer.CakeSerializer.to(a,
this);return mad.net.Ajax.request({url:APP_URL+"itemTags/"+a.foreign_model+"/"+a.foreign_id,type:"POST",params:e,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},createBulk:function(a,b,c){var d=this,e=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"itemTags/updateBulk/"+a.foreign_model+"/"+a.foreign_id,type:"POST",params:e,success:b,error:c}).pipe(function(a){var b=$.Deferred();
b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"/itemTags/{id}",type:"DELETE",params:{id:a},success:b,error:c})},findAll:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"itemTags/{foreignModel}/{foreignId}",type:"GET",params:a,success:b,error:c})}},{})});steal.executed("app/model/itemTag.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Tag",{validateRules:{name:["text"]},attributes:{id:"string",name:"string",created:"string",modified:"string",created_by:"string",modified_by:"string"},create:function(a,b,c){var d=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"tags",type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,
d)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"/tags/{id}",type:"DELETE",params:{id:a},success:b,error:c})},findAll:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"tags",type:"GET",params:a,success:b,error:c})}},{init:function(){},destroy:function(){this._super()}})});steal.executed("app/model/tag.js");
steal("mad/controller/component/buttonController.js").then(function(){mad.controller.component.ButtonController.extend("passbolt.controller.component.CopyLoginButtonController",{defaults:{label:"Copy Login To Clipboard",cssClasses:["with_icon","copy_login"],browser:null}},{click:function(){mad.bus.trigger("copy_login_clipboard",this.value)},"{browser} tbody mouseleave":function(){this.state.is("ready")&&this.setState("hidden")},"{browser} item_hovered":function(a,b,c){this.value.id==c.id?this.setState("ready"):
this.setState("hidden")}})});steal.executed("app/controller/component/copyLoginButtonController.js");
steal("mad/controller/component/buttonController.js").then(function(){mad.controller.component.ButtonController.extend("passbolt.controller.component.CopySecretButtonController",{defaults:{label:"Copy Secret To Clipboard",cssClasses:["with_icon","copy_secret"]}},{click:function(){mad.bus.trigger("copy_secret_clipboard",this.value)},"{browser} tbody mouseleave":function(){this.state.is("ready")&&this.setState("hidden")},"{browser} item_hovered":function(a,b,c){this.value.id==c.id?this.setState("ready"):
this.setState("hidden")}})});steal.executed("app/controller/component/copySecretButtonController.js");
steal("mad/controller/component/buttonController.js","app/view/component/favorite.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.FavoriteController",{defaults:{label:"Favorite",viewClass:passbolt.view.component.Favorite,instance:null}},{init:function(a,b){this._super(a,b);this.setViewData("instance",this.options.instance)},click:function(a,b){b.stopPropagation();b.preventDefault();this.options.instance.isFavorite()?mad.bus.trigger("request_unfavorite",
this.options.instance):mad.bus.trigger("request_favorite",this.options.instance)}})});steal.executed("app/controller/component/favoriteController.js");steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.Favorite",{},{" click":function(){this.element.trigger("trigger")}})});steal.executed("app/view/component/favorite.js");
steal("jquery/event/drag","mad/view/component/grid.js","app/view/template/component/resource/draggedResource.ejs").then(function(){mad.view.component.Grid.extend("passbolt.view.component.passwordBrowser",{},{insertItem:function(a,b,c){var a=this._super(a,b,c),d=$(".js_grid_column_name",a);a.on("draginit",function(a,b){var c=$("div#js_dragged_resource");c.length?$(".name",c).text(d.text()):(c=can.view("app/view/template/component/resource/draggedResource.ejs",{name:d.text()}),$(c).appendTo(document.body),
c=$("div#js_dragged_resource"));b.representative(c,0,0)})}})});steal.executed("app/view/component/passwordBrowser.js");steal("jquery","jquerypp/event/drag/core","jquerypp/event/drag/step","jquerypp/event/drag/limit","jquerypp/event/drag/scroll",function(a){return a});steal.executed("lib/jquerypp/event/drag/drag.js");
steal("jquery","jquerypp/event/drag/core","jquerypp/dom/styles",function(a){var b=function(a,b){return Math.round(a/b)*b};a.Drag.prototype.step=function(b,d,e){"number"==typeof b&&(b={x:b,y:b});d=d||a(document.body);this._step=b;var f=d.styles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft"),b=parseInt(f.borderTopWidth)+parseInt(f.paddingTop),f=parseInt(f.borderLeftWidth)+parseInt(f.paddingLeft);this._step.offset=d.offsetv().plus(f,b);this._step.center=e;return this};(function(){var c=
a.Drag.prototype.position;a.Drag.prototype.position=function(a){if(this._step){var e=this._step,f=e.center&&e.center.toLowerCase(),h=this.movingElement.dimensionsv("outer"),g=e.offset.top()-(f&&"x"!=f?h.height()/2:0),e=e.offset.left()-(f&&"y"!=f?h.width()/2:0);this._step.x&&a.left(Math.round(e+b(a.left()-e,this._step.x)));this._step.y&&a.top(Math.round(g+b(a.top()-g,this._step.y)))}c.call(this,a)}})();return a});steal.executed("lib/jquerypp/event/drag/step/step.js");
steal("jquery",function(a){var b=document.defaultView&&document.defaultView.getComputedStyle,c=/([A-Z])/g,d=/-([a-z])/ig,e=function(a,b){return b.toUpperCase()},f=/float/i,h=/^-?\d+(?:px)?$/i,g=/^-?\d/;a.styles=function(j,l){if(!j)return null;var m;m=b?b(j,null):j.currentStyle?j.currentStyle:void 0;for(var k,n,q=j.style,p={},r=0,s,o;r<l.length;r++)(s=l[r],k=s.replace(d,e),f.test(s)&&(s=a.support.cssFloat?"float":"styleFloat",k="cssFloat"),b)?(s=s.replace(c,"-$1").toLowerCase(),n=m.getPropertyValue(s),
"opacity"===s&&""===n&&(n="1"),p[k]=n):(n=s.replace(d,e),p[k]=m[s]||m[n],!h.test(p[k])&&g.test(p[k])&&(s=q.left,o=j.runtimeStyle.left,j.runtimeStyle.left=j.currentStyle.left,q.left="fontSize"===n?"1em":p[k]||0,p[k]=q.pixelLeft+"px",q.left=s,j.runtimeStyle.left=o));return p};a.fn.styles=function(){return a.styles(this[0],a.makeArray(arguments))};return a});steal.executed("lib/jquerypp/dom/styles/styles.js");
steal("jquery","jquerypp/event/drag/core","jquerypp/dom/styles",function(a){a.Drag.prototype.limit=function(b,d){var e=b.styles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft"),e=new a.Vector(parseInt(e.borderLeftWidth,10)+parseInt(e.paddingLeft,10)||0,parseInt(e.borderTopWidth,10)+parseInt(e.paddingTop,10)||0);this._limit={offset:b.offsetv().plus(e),size:b.dimensionsv(),center:!0===d?"both":d};return this};var b=a.Drag.prototype.position;a.Drag.prototype.position=function(a){if(this._limit){var d=
this._limit,e=d.center&&d.center.toLowerCase(),f=this.movingElement.dimensionsv("outer"),h=e&&"x"!=e?f.height()/2:0,e=e&&"y"!=e?f.width()/2:0,g=d.offset.top(),j=d.offset.left(),l=d.size.height(),d=d.size.width();a.top()+h<g&&a.top(g-h);a.top()+f.height()-h>g+l&&a.top(g+l-f.height()+h);a.left()+e<j&&a.left(j-e);a.left()+f.width()-e>j+d&&a.left(j+d-f.left()+e)}b.call(this,a)};return a});steal.executed("lib/jquerypp/event/drag/limit/limit.js");
steal("jquery","jquerypp/event/drop",function(a){a.Drag.prototype.scrolls=function(b,c){for(var b=a(b),d=0;d<b.length;d++)this.constructor.responder._elements.push(b.eq(d).data("_dropData",new a.Scrollable(b[d],c))[0])};a.Scrollable=function(b,c){this.element=jQuery(b);this.options=a.extend({distance:30,delta:function(a,b){return(b-a)/2},direction:"xy"},c);this.x=-1!=this.options.direction.indexOf("x");this.y=-1!=this.options.direction.indexOf("y")};a.extend(a.Scrollable.prototype,{init:function(a){this.element=
jQuery(a)},callHandlers:function(a,c,d,e){this[a](c||this.element[0],d,this,e)},dropover:function(){},dropon:function(){this.clear_timeout()},dropout:function(){this.clear_timeout()},dropinit:function(){},dropend:function(){},clear_timeout:function(){this.interval&&(clearTimeout(this.interval),this.interval=null)},distance:function(a){return(30-a)/2},dropmove:function(b,c,d,e){this.clear_timeout();var f=c.vector(),d=a(b==document.documentElement?window:b),h=d.dimensionsv("outer"),g=d.offsetv(),d=
g.y()+h.y()-f.y(),j=f.y()-g.y(),h=g.x()+h.x()-f.x(),f=f.x()-g.x(),l=0,m=0,g=this.options.distance;d<g&&this.y?m=this.options.delta(d,g):j<g&&this.y&&(m=-this.options.delta(j,g));h<g&&this.options&&this.x?l=this.options.delta(h,g):f<g&&this.x&&(l=-this.options.delta(f,g));if(l||m){var k=this;this.interval=setTimeout(function(){k.move(a(b),e.movingElement,l,m,c,c.clientX,c.clientY,c.screenX,c.screenY)},15)}},move:function(b,c,d,e,f){b.scrollTop(b.scrollTop()+e);b.scrollLeft(b.scrollLeft()+d);c.trigger(a.event.fix({type:"mousemove",
clientX:f.clientX,clientY:f.clientY,screenX:f.screenX,screenY:f.screenY,pageX:f.pageX,pageY:f.pageY}))}});return a});steal.executed("lib/jquerypp/event/drag/scroll/scroll.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_resource_draggedResource_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="dragged_resource" id="js_dragged_resource">\n\tMove \'<span class="name">');d.push(a.view.txt(1,"span",0,this,function(){return name}));d.push("</span>'\n</div>");return d.join("")}}))});steal.executed("app/view/template/component/resource/draggedResource.ejs");
steal("mad/controller/component/tabController.js","app/controller/component/permissionsController.js").then(function(){mad.controller.component.TabController.extend("passbolt.controller.component.ResourceActionsTabController",{defaults:{label:null,resource:null,cssClasses:["tabs"],viewClass:mad.view.component.Tab,templateUri:"mad/view/template/component/tab.ejs"}},{init:function(a,b){this._super(a,b)},afterStart:function(){this._super();var a=this,b=this.addComponent(passbolt.controller.form.resource.CreateFormController,
{id:"js_rs_edit",label:__("Edit"),data:this.options.resource,callbacks:{submit:function(b){a.options.resource.attr(b["passbolt.model.Resource"]).save();mad.app.getComponent("js_dialog").remove()}}});b.start();b.load(this.options.resource);b=this.addComponent(passbolt.controller.component.PermissionsController,{id:"js_rs_permission",label:"Share",resource:this.options.resources,cssClasses:["form-content"]});b.start();b.load(this.options.resource)},load:function(){}})});steal.executed("app/controller/component/resourceActionsTabController.js");
steal("app/view/component/permissions.js","app/model/group.js","app/model/user.js","app/model/permission.js","app/model/permissionType.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.PermissionsController",{defaults:{label:"Permissions Controller",viewClass:passbolt.view.component.Permissions,acoInstance:null,permAroAutocpltTxtbx:null,permAroAutocpltList:null}},{afterStart:function(){var a=this;this.permList=new mad.controller.component.TreeController($("#js_permissions_list"),
{cssClasses:["permissions"],viewClass:mad.view.component.Tree,itemClass:passbolt.model.Permission,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"app/view/template/component/permission/permissionListElement.ejs",map:new mad.object.Map({id:"id",permTarget:{key:"aco_foreign_key",func:function(a,b,e){switch(e.aro){case "Group":return e.Group.name;case "User":return e.User.username}}},permType:{key:"aro",func:function(a){return a.toLowerCase()}},permLabel:{key:"PermissionType",func:function(a){return a.toString("long")}}})});
this.permList.start();this.addFormController=new mad.form.FormController($("#js_permission_add_form",this.element),{templateBased:!0,cssClasses:["perm-create-form","clearfix"],templateUri:"app/view/template/form/permission/addForm.ejs",validateOnChange:!1,callbacks:{submit:function(b){a.addPermission(b)}}});this.addFormController.start();var b=(new mad.form.FeedbackController($("#js_perm_create_form_feedback"),{})).start();this.permAroHiddenTxtbx=(new mad.form.element.TextboxController($("#js_perm_create_form_aro",
this.element),{modelReference:"passbolt.model.Permission.aro_foreign_key"})).start();this.addFormController.addElement(this.permAroHiddenTxtbx);this.options.permAroAutocpltTxtbx=(new mad.form.element.AutocompleteController($("#js_perm_create_form_aro_auto_cplt",this.element),{modelReference:"passbolt.model.Permission.aro_foreign_label",changeTimeout:400,callbacks:{ajax:function(b){return a.autocompleteAro(b)}}})).start();this.addFormController.addElement(this.options.permAroAutocpltTxtbx,b);this.addFormController.addElement((new mad.form.element.DropdownController($("#js_perm_create_form_type",
this.element),{modelReference:"passbolt.model.Permission.type",availableValues:passbolt.model.PermissionType.PERMISSION_TYPES})).start(),b);this.on()},autocompleteAro:function(a){return passbolt.model.User.findAll({keywords:a}).then(function(a){var c=[];a.each(function(a){c.push(new mad.model.Model({id:a.id,label:a.username,model:"passbolt.model.User"}))});return c})},load:function(a){var b=this;this.options.acoInstance=a;passbolt.model.Permission.findAll({aco:this.options.acoInstance.constructor.shortName,
aco_foreign_key:this.options.acoInstance.id},function(a){b.permList.load(a);b.addFormController.load(b.options.acoInstance)})},refresh:function(){this.permList.reset();this.load(this.options.acoInstance)},addPermission:function(a){var b=this,c=mad.model.Model.getModelAttributes(this.permAroHiddenTxtbx.getModelReference())[0],d={aco:this.options.acoInstance.constructor.shortName,aco_foreign_key:this.options.acoInstance.id,type:a["passbolt.model.Permission"].type};d[c.modelReference.shortName]=a[c.modelReference.fullName];
(new passbolt.model.Permission(d)).save(function(){b.refresh()})}," delete":function(a,b,c){var d=this;c.isDirect(this.options.acoInstance)?c.destroy(function(){d.permList.removeItem(c);d.refresh()},function(){alert("Unable to remove the permission")}):(a={aco:this.options.acoInstance.constructor.shortName,aco_foreign_key:this.options.acoInstance.id,type:0},a[c.aro]=c[c.aro],(new passbolt.model.Permission(a)).save(function(){d.refresh()}))},"{permAroAutocpltTxtbx} changed":function(){this.permAroHiddenTxtbx.setValue(null)},
"{permAroAutocpltList} item_selected":function(a,b,c){this.permAroHiddenTxtbx.setModelReference(c.model+".id");this.permAroHiddenTxtbx.setValue(c.id)}})});steal.executed("app/controller/component/permissionsController.js");
steal("mad/view","app/view/template/component/permissions.ejs").then(function(){mad.view.View.extend("passbolt.view.component.Permissions",{defaults:{}},{" .js_perm_delete click":function(a,b){b.stopPropagation();b.preventDefault();this.element.trigger("delete",[a.parents("li").data("passbolt.model.Permission")])},"#js_perm_create_form_add_btn click":function(a,b){b.stopPropagation();b.preventDefault();a.trigger("submit")}})});steal.executed("app/view/component/permissions.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_permissions_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<ul id="js_permissions_list" />\n<form id="js_permission_add_form" />');return d.join("")}}))});steal.executed("app/view/template/component/permissions.ejs");
steal("jquery/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Group",{validateRules:{name:["alphanum","required"]},attributes:{id:"string",name:"string"},create:function(a,b,c){var d=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"groups.json",type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},findAll:function(a,
b,c){return mad.net.Ajax.request({url:APP_URL+"/groups",type:"GET",params:a,success:b,error:c})},update:function(a,b,c,d){var e=this;delete b.created;delete b.modified;b=mad.model.serializer.CakeSerializer.to(b,this);b.id=a;return mad.net.Ajax.request({url:APP_URL+"groups/{id}.json",type:"PUT",params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+
"groups/{id}",type:"DELETE",params:{id:a},success:b,error:c})}},{})});steal.executed("app/model/group.js");
steal("jquery/model","app/model/profile.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.User",{validateRules:{username:["email","required"]},attributes:{id:"string",username:"string",email:"string",active:"string",Profile:"passbolt.model.Profile.model"},create:function(a,b,c){var d=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"users",type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();
b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"/users/{id}",type:"DELETE",params:{id:a},success:b,error:c})},findAll:function(a,b,c){if("undefined"!=typeof a.filter){var d=a.filter;delete a.filter;d=d.toRequest();$.extend(a,d)}return mad.net.Ajax.request({url:APP_URL+"/users",type:"GET",params:a,success:b,error:c})},update:function(a,b,c,d){var e=this;delete b.created;delete b.modified;b=mad.model.serializer.CakeSerializer.to(b,
this);b.id=a;return mad.net.Ajax.request({url:APP_URL+"users/{id}",type:"PUT",params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{})});steal.executed("app/model/user.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Profile",{validateRules:{},attributes:{id:"string",first_name:"string",last_name:"string"},findAll:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"/profiles",type:"GET",params:a,success:b,error:c})}},{})});steal.executed("app/model/profile.js");
steal("jquery/model","app/model/category.js","app/model/permissionType.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Permission",{validateRules:{aro_foreign_key:["required","uid"],aro_foreign_label:["required"],type:["required",{rule:"foreignRule",options:{model:passbolt.model.PermissionType,attribute:"serial"}}]},attributes:{id:"string",type:"string",aco:"string",aco_foreign_key:"string",aro:"string",aro_foreign_key:"string",aro_foreign_label:"string",
PermissionType:"passbolt.model.PermissionType.model",Resource:"passbolt.model.Resource.model",Category:"passbolt.model.Category.model",User:"passbolt.model.User.model",Group:"passbolt.model.Group.model"},create:function(a,b,c){var d=this,e="permissions/"+a.aco.toLowerCase()+"/"+a.aco_foreign_key;delete a.aco;a.aco_foreign_key;a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+e,type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,
[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"permissions/{id}",type:"DELETE",params:{id:a},success:b,error:c})},findAll:function(a,b,c){var d="permissions";"undefined"!=typeof a.aco&&"undefined"!=typeof a.aco_foreign_key&&(d+="/"+a.aco.toLowerCase()+"/"+a.aco_foreign_key);return mad.net.Ajax.request({url:APP_URL+d,type:"GET",params:a,success:b,error:c})},findOne:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+
"/permissions/{id}",type:"GET",params:a,success:b,error:c})},update:function(a,b,c,d){var e=this;delete b.created;delete b.modified;b=mad.model.serializer.CakeSerializer.to(b,this);b.id=a;return mad.net.Ajax.request({url:APP_URL+"/permissions/{id}",type:"PUT",params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{isDirect:function(a){var b=can.getObject("passbolt.model."+this.aco);return a instanceof b&&a.id===
this.aco_foreign_key?!0:!1}})});steal.executed("app/model/permission.js");
steal("jquery/model","app/model/category.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.PermissionType",{validateRules:{serial:[{rule:"choice",options:{callback:function(){return $.map(passbolt.model.PermissionType.PERMISSION_TYPES,function(a,b){return b})}}}]},attributes:{serial:"string",name:"string",binary:"string",_admin:"boolean",_update:"boolean",_create:"boolean",_read:"boolean",description:"string"},PERMISSION_TYPES:{"0":__("deny"),1:__("read"),
3:__("create"),7:__("update"),15:__("admin")}},{toString:function(a){switch(a){case "long":a=passbolt.model.PermissionType.PERMISSION_TYPES[this.serial];"0"!==this.serial&&(a=__("can %s",a));break;default:a=passbolt.model.PermissionType.PERMISSION_TYPES[this.serial]}return a},destroy:function(){}})});steal.executed("app/model/permissionType.js");
steal("mad/view/component/tree.js","app/view/component/resourceDetails.js","app/controller/component/commentsController.js","app/controller/component/sidebarSectionController.js","app/controller/component/sidebarSections/sidebarSectionTagsController.js","app/controller/component/sidebarSections/sidebarSectionDescriptionController.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.ResourceDetailsController",{defaults:{label:"Resource Details Controller",viewClass:passbolt.view.component.ResourceDetails,
resource:null,selectedRs:new can.Model.List}},{beforeRender:function(){this._super();this.setViewData("resource",this.options.resource);this.setViewData("secretStrength",passbolt.model.SecretStrength.getSecretStrength(this.options.resource.Secret.data))},afterStart:function(){(new passbolt.controller.component.sidebarSection.SidebarSectionDescriptionController($("#js_rs_details_description",this.element),{resource:this.options.resource})).start();(new passbolt.controller.component.CommentsController($("#js_rs_details_comments",
this.element),{resource:this.options.resource,foreignModel:"Resource",foreignId:this.options.resource.id})).start();(new passbolt.controller.component.sidebarSection.SidebarSectionTagsController($("#js_rs_details_tags",this.element),{instance:this.options.resource,foreignModel:"Resource",foreignId:this.options.resource.id})).start()},load:function(a){this.options.resource=a;this.state.is(null)?this.start():this.refresh();this.on()},isDisabled:function(){return this.state.is("disabled")||this.state.is(null)&&
("disabled"==this.options.state||$.isArray(this.options.state)&&-1!=this.options.state.indexOf("disabled"))?!0:!1},stateReady:function(a){a&&this.view.show();this._super(a)},"{resource} updated":function(){this.isDisabled()||this.refresh()},"{mad.bus} workspace_showSidebar":function(a,b,c){c?this.state.is(null)?this.options.state="ready":(this.setState("ready"),1==this.options.selectedRs.length&&this.refresh()):this.state.is(null)?this.options.state=["hidden","disabled"]:this.setState(["hidden","disabled"])},
"{selectedRs} add":function(){0==this.options.selectedRs.length||1<this.options.selectedRs.length?(this.options.resource=null,this.isDisabled()||this.setState("hidden")):(this.options.resource=this.options.selectedRs[0],this.isDisabled()||(this.load(this.options.resource),this.setState("ready")))},"{selectedRs} remove":function(){0==this.options.selectedRs.length||1<this.options.selectedRs.length?(this.options.resource=null,!this.isDisabled()&&!this.state.is(null)&&this.setState("hidden")):(this.options.resource=
this.options.selectedRs[0],this.isDisabled()||(this.load(this.options.resource),this.setState("ready")))}})});steal.executed("app/controller/component/resourceDetailsController.js");steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.ResourceDetails",{},{".icon.close click":function(){this.getController().setState("hidden")},"h2 click":function(a){a.next("p").toggle()}})});steal.executed("app/view/component/resourceDetails.js");
steal("app/model/comment.js","app/view/component/comments.js","app/controller/component/commentsListController.js","app/controller/form/comment/createFormController.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.CommentsController",{defaults:{label:"Comments Controller",viewClass:passbolt.view.component.Comments,resource:this.options.resource,foreignModel:null,foreignId:null,commentsListController:null}},{afterStart:function(){this.addFormController=
new passbolt.controller.form.comment.CreateFormController($("#js_rs_details_comments_add_form",this.element),{templateBased:!0,templateUri:"app/view/template/form/comment/addForm.ejs",foreignModel:this.options.foreignModel,foreignId:this.options.foreignId});this.addFormController.start();this.addFormController.setState("hidden");this.commentsListController=new passbolt.controller.component.CommentsListController($("#js_rs_details_comments_list",this.element),{resource:this.options.resource,foreignModel:this.options.foreignModel,
foreignId:this.options.foreignId});this.commentsListController.start()},"{passbolt.model.Comment} created":function(a,b,c){if(c.foreign_id==this.options.resource.id)return this.commentsListController.insertItem(c,null,"first"),this.addFormController.setState("hidden"),!1},"{mad.bus} request_delete_comment":function(a,b,c){c.destroy(function(){mad.bus.trigger("comment_deleted",c)})},"{mad.bus} comment_deleted":function(a,b,c){this.commentsListController.removeItem(c)}})});steal.executed("app/controller/component/commentsController.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Comment",{validateRules:{parent_id:["text"],foreign_model:["text"],foreign_id:["text"],content:["text"]},attributes:{id:"string",parent_id:"string",foreign_model:"string",foreign_id:"string",content:"string",created:"string",modified:"string"},create:function(a,b,c){var d=this,e=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"comments/"+a.foreign_model+
"/"+a.foreign_id+".json",type:"POST",params:e,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"comments/{id}.json",type:"DELETE",params:{id:a},success:b,error:c})},findAll:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"comments/{foreignModel}/{foreignId}.json",type:"GET",params:a,success:b,error:c})},findOne:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+
"comments/{foreignModel}/{foreignId}.json",type:"GET",params:a,success:b,error:c})}},{init:function(){}})});steal.executed("app/model/comment.js");steal("mad/view","app/view/template/component/comments.ejs").then(function(){mad.view.View.extend("passbolt.view.component.Comments",{},{init:function(a,b){this._super(a,b)},".icon.create click":function(){this.getController().addFormController.setState("ready")},"a.button.comment-submit click":function(a){a.trigger("submit")}})});steal.executed("app/view/component/comments.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_comments_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push("<h4>");d.push(a.view.txt(1,"h4",0,this,function(){return __("Comments")}));d.push('</h4>\n<a href="#" class="section-action"><i class="icon create no-text"></i><span>create</span></a>\n<div id="js_rs_details_comments_add_form"></div>\n<ul id="js_rs_details_comments_list"></ul>');return d.join("")}}))});steal.executed("app/view/template/component/comments.ejs");
steal("mad/controller/component/treeController.js","app/view/component/commentsList.js","app/view/component/comments.js","app/model/comment.js").then(function(){mad.controller.component.TreeController.extend("passbolt.controller.component.CommentsListController",{defaults:{label:"Comments List Controller",viewClass:passbolt.view.component.CommentsList,itemClass:passbolt.model.Comment,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"app/view/template/component/comment/commentItem.ejs",
foreignModel:null,foreignId:null,map:new mad.object.Map({id:"id",content:"content",modified:"modified",created_by:"created_by"})}},{init:function(a,b){this._super(a,b);var c=this;passbolt.model.Comment.findAll({foreignModel:this.options.foreignModel,foreignId:this.options.foreignId},function(a){c.load(a)})}," request_delete_comment":function(a,b,c){mad.bus.trigger("request_delete_comment",c)}})});steal.executed("app/controller/component/commentsListController.js");
steal("mad/view","mad/view/component/tree.js","app/view/template/component/comments.ejs").then(function(){mad.view.component.Tree.extend("passbolt.view.component.CommentsList",{},{init:function(a,b){this._super(a,b)},".actions a .icon.delete click":function(a,b){b.stopPropagation();b.preventDefault();var c=null,c=a.parents("li.comment-wrapper"),c=this.getController().getItemClass()?c.data(this.getController().getItemClass().fullName):c[0].id;a.trigger("request_delete_comment",c)}})});steal.executed("app/view/component/commentsList.js");
steal("mad/form/formController.js","app/view/component/comments.js","app/view/template/form/comment/addForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.comment.CreateFormController",{defaults:{templateBased:!0,foreignModel:null,foreignId:null,callbacks:{submit:function(a){(new passbolt.model.Comment(a["passbolt.model.Comment"])).save()}}}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($(".js_comment_parent_id",this.element),{modelReference:"passbolt.model.Comment.parent_id"})).start());
this.addElement((new mad.form.element.TextboxController($(".js_comment_foreign_model",this.element),{modelReference:"passbolt.model.Comment.foreign_model"})).start().setValue("Resource"));this.addElement((new mad.form.element.TextboxController($(".js_comment_foreign_id",this.element),{modelReference:"passbolt.model.Comment.foreign_id"})).start().setValue(this.options.foreignId));this.addElement((new mad.form.element.TextboxController($(".js_comment_content",this.element),{modelReference:"passbolt.model.Comment.content"})).start(),
(new mad.form.FeedbackController($(".js_comment_content_feedback",this.element),{})).start())}})});steal.executed("app/controller/form/comment/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_comment_addForm_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<ul>\n\t<li class="comment-wrapper">\n\t\t<div class="comment add">\n\t\t\t<div class="author profile picture"><a href="#"><img src="img/user.png"></a></div>\n\t\t\t<div class="form-content">\n\t\t\t\t<div class="input textarea required">\n\t\t\t\t\t<label for="Comment">Add a comment</label>\n\t\t\t\t\t<input name="data[comment][parent_id]" class="js_comment_parent_id required" maxlength="36" type="hidden" >\n\t\t\t\t\t<input name="data[comment][foreign_id]" class="js_comment_foreign_id required" maxlength="36" type="hidden" >\n\t\t\t\t\t<input name="data[comment][foreign_model]" class="js_comment_foreign_model required" maxlength="36" type="hidden" >\n\t\t\t\t\t<textarea name="data[comment][content]" class="js_comment_content required" maxlength="150"  placeholder="add a comment"',a.view.pending(),
">");d.push('</textarea>\n                    <div class="js_comment_content_feedback message">\n                    </div>\n\t\t\t\t</div>\n\t\t\t\t<div class="metadata">\n\t\t\t\t\t<span class="author username"><a href="#">You</a></span>\n\t\t\t\t\t<span class="modified">right now</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="actions">\n\t\t\t\t\t<a href="#" class="button comment-submit"><span>send</span></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</li>\n</ul>');return d.join("")}}))});steal.executed("app/view/template/form/comment/addForm.ejs");
steal("mad/view/component/tree.js","app/controller/component/commentsController.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.SidebarSectionController",{defaults:{label:"Sidebar Section Controller",viewClass:passbolt.view.component.ResourceDetails,resource:null}},{})});steal.executed("app/controller/component/sidebarSectionController.js");
steal("app/view/component/sidebarSection/sidebarSectionTags.js","app/controller/component/sidebarSectionController.js","app/controller/component/tagsController.js").then(function(){passbolt.controller.component.SidebarSectionController.extend("passbolt.controller.component.sidebarSection.SidebarSectionTagsController",{defaults:{label:"Sidebar Section Tags Controller",viewClass:passbolt.view.component.sidebarSection.SidebarSectionTags,instance:null,tagsController:null}},{afterStart:function(){this.myState=
"ready";"undefined"==typeof this.options.instance.ItemTag&&(this.options.instance.ItemTag=passbolt.model.ItemTag.models());this.options.tagsController=(new passbolt.controller.component.TagsController($("#js_rs_details_tags_wrapper",this.element),{resource:this.options.resource,instance:this.options.instance,foreignModel:this.options.foreignModel,foreignId:this.options.foreignId})).start();this.on()}," request_tags_edit":function(){this.options.tagsController.setState("edit");this.setState("edit")},
"{instance.ItemTag} change":function(){null!=this.options.instance.ItemTag&&0<this.options.instance.ItemTag.length?this.setState("ready"):this.setState("edit")},stateEdit:function(a){a?$(".edit-action",this.element).hide():$(".edit-action",this.element).show()}})});steal.executed("app/controller/component/sidebarSections/sidebarSectionTagsController.js");
steal("mad/view","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionTags.ejs").then(function(){passbolt.view.component.SidebarSection.extend("passbolt.view.component.sidebarSection.SidebarSectionTags",{},{"a.edit-action click":function(){this.element.trigger("request_tags_edit")}})});steal.executed("app/view/component/sidebarSection/sidebarSectionTags.js");
steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.SidebarSection",{},{init:function(a,b){this._super(a,b)}})});steal.executed("app/view/component/sidebarSection.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_sidebarSection_sidebarSectionTags_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push("<h4>");d.push(a.view.txt(1,"h4",0,this,function(){return __("Tags")}));d.push('</h4>\n<a href="#" class="section-action edit-action">\n\t<i class="icon edit no-text"></i>\n\t<span>edit</span>\n</a>\n<div id="js_rs_details_tags_wrapper"></div>');return d.join("")}}))});steal.executed("app/view/template/component/sidebarSection/sidebarSectionTags.ejs");
steal("app/controller/component/tagsListController.js","app/controller/form/tag/editFormController.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.TagsController",{defaults:{label:"Tags Controller",instance:null,foreignModel:null,foreignId:null}},{afterStart:function(){var a=this;this.editFormController=(new passbolt.controller.form.tag.EditFormController($(".tags-edit",this.element),{templateBased:!0,templateUri:"app/view/template/form/tag/editForm.ejs",
foreignModel:this.options.foreignModel,foreignId:this.options.foreignId,tags:this.options.instance.ItemTag,data:{ItemTag:this.options.instance.ItemTag},callbacks:{submit:function(b){passbolt.model.ItemTag.createBulk(b["passbolt.model.ItemTag"],function(b){b=passbolt.model.ItemTag.models(b);a.refreshInstanceTags(b)})}}})).start();this.tagsListController=(new passbolt.controller.component.TagsListController($("ul.tags",this.element),{tags:this.options.instance.ItemTag})).start();passbolt.model.ItemTag.findAll({foreignModel:this.options.foreignModel,
foreignId:this.options.foreignId},function(b){a.refreshInstanceTags(b)},function(){})},refreshInstanceTags:function(a){this.options.instance.ItemTag.splice(0);this.options.instance.ItemTag.push.apply(this.options.instance.ItemTag,a)},"{instance.ItemTag} change":function(){null!=this.options.instance.ItemTag&&0<this.options.instance.ItemTag.length?this.setState("ready"):this.setState("edit")},stateEdit:function(a){a&&(this.tagsListController.setState("hidden"),this.editFormController.setState("ready"))},
stateReady:function(a){a&&(this.tagsListController.setState("ready"),this.editFormController.setState("hidden"))}})});steal.executed("app/controller/component/tagsController.js");
steal("app/model/itemTag.js","mad/controller/component/treeController.js").then(function(){mad.controller.component.TreeController.extend("passbolt.controller.component.TagsListController",{defaults:{label:"Tags List Controller",viewClass:mad.view.component.tree.List,itemClass:passbolt.model.ItemTag,itemTemplateUri:"app/view/template/component/tag/tagItem.ejs",tags:null,map:new mad.object.Map({id:"id",Tag:"Tag"})}},{afterStart:function(){null!=this.options.tags&&this.load(this.options.tags)},"{tags} add":function(a,
b,c){for(var d in c)this.insertItem(c[d])},"{tags} remove":function(a,b,c){for(var d in c)this.removeItem(c[d])}})});steal.executed("app/controller/component/tagsListController.js");
steal("mad/form/formController.js","app/model/itemTag.js","app/view/template/form/tag/editForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.tag.EditFormController",{defaults:{templateBased:!0,tags:null,foreignModel:null,foreignId:null,action:"update"}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($(".js_tag_foreign_model",this.element),{modelReference:"passbolt.model.ItemTag.foreign_model"})).start().setValue(this.options.foreignModel));
this.addElement((new mad.form.element.TextboxController($(".js_tag_foreign_id",this.element),{modelReference:"passbolt.model.ItemTag.foreign_id"})).start().setValue(this.options.foreignId));this.tagList=this.addElement((new mad.form.element.TextboxController($(".js_tag_list",this.element),{modelReference:"passbolt.model.ItemTag.tag_list",validateFunction:function(a){var a=a.split(","),b;for(b in a){var c=passbolt.model.Tag.validateAttribute("name",a[b],{});if(!0!==c)return c}return!0}})).start(),
(new mad.form.FeedbackController($(".js_field_tag_list_feedback",this.element),{})).start());this.updateTagListTxtbxValue()},updateTagListTxtbxValue:function(){var a=[];this.options.tags.each(function(b,c){a[c]=b.Tag.name});this.tagList.setValue(a.join(","))},"{tags} change":function(){this.updateTagListTxtbxValue()}})});steal.executed("app/controller/form/tag/editFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_tag_editForm_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="form-content tags-edit-wrapper">\n    <input name="data[ItemTag][foreign_id]" class="js_tag_foreign_id required" maxlength="36" type="hidden" >\n    <input name="data[ItemTag][foreign_model]" class="js_tag_foreign_model required" maxlength="36" type="hidden" >\n    <div class="input text required js_form_element_wrapper">\n        <textarea name="data[ItemTag][tag_list]" class="js_tag_list required" maxlength="150"  placeholder="enter your tags here, separated by a comma"',
a.view.pending(),">");d.push('</textarea>\n\t\t<div class="js_field_tag_list_feedback message">\n\t\t</div>\n    </div>\n    <div class="actions">\n        <input type="submit" class="button tags-submit" value="save">\n    </div>\n</div>\n');return d.join("")}}))});steal.executed("app/view/template/form/tag/editForm.ejs");
steal("app/controller/component/sidebarSectionController.js","app/controller/form/resource/editDescriptionFormController.js","app/view/component/sidebarSection/sidebarSectionDescription.js","app/model/resource.js").then(function(){passbolt.controller.component.SidebarSectionController.extend("passbolt.controller.component.sidebarSection.SidebarSectionDescriptionController",{defaults:{label:"Sidebar Section Description Controller",viewClass:passbolt.view.component.sidebarSection.SidebarSectionDescription,
resource:null,editDescriptionFormCtrl:null}},{beforeRender:function(){this._super();this.setViewData("resource",this.options.resource)},afterStart:function(){var a=this;this.options.editDescriptionFormCtrl=(new passbolt.controller.form.resource.EditDescriptionFormController($("#js_rs_details_edit_description",this.element),{templateBased:!0,templateUri:"app/view/template/form/resource/editDescriptionForm.ejs",resource:this.options.resource,state:"hidden",data:{Resource:this.options.resource},callbacks:{submit:function(b){a.options.resource.update({description:b["passbolt.model.Resource"].description},
function(){})}}})).start()}," request_resource_description_edit":function(){this.state.is("edit")?this.setState("ready"):this.setState("edit")},stateEdit:function(a){a?(this.options.editDescriptionFormCtrl.setState("ready"),this.view.showDescription(!1)):(this.options.editDescriptionFormCtrl.setState("hidden"),this.view.showDescription(!0))}})});steal.executed("app/controller/component/sidebarSections/sidebarSectionDescriptionController.js");
steal("mad/form/formController.js","app/model/resource.js","app/view/template/form/resource/editDescriptionForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.resource.EditDescriptionFormController",{defaults:{templateBased:!0,resource:null,descriptionField:null}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($(".js_resource_id",this.element),{modelReference:"passbolt.model.Resource.id"})).start().setValue(this.options.resource.id));
this.options.descriptionField=this.addElement((new mad.form.element.TextboxController($(".js_resource_description",this.element),{modelReference:"passbolt.model.Resource.description"})).start(),(new mad.form.FeedbackController($(".js_resource_description_feedback",this.element),{})).start());this.options.descriptionField.setValue(this.options.resource.description);$(".button.resource-submit").click(function(){$(this).trigger("submit")})}})});steal.executed("app/controller/form/resource/editDescriptionFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_resource_editDescriptionForm_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="form-content resource-description-edit-wrapper">\n\t<input name="data[Resource][id]" class="js_resource_id required" maxlength="36" type="hidden" >\n    <div class="input text required js_form_element_wrapper">\n        <textarea name="data[Resource][description]" class="js_resource_description required" maxlength="150"  placeholder="enter description"',
a.view.pending(),">");d.push('</textarea>\n\t\t<div class="js_resource_description_feedback message">\n\t\t</div>\n    </div>\n\t<div class="actions">\n\t\t<input type="submit" class="button resource-submit" value="save">\n\t</div>\n</div>\n');return d.join("")}}))});steal.executed("app/view/template/form/resource/editDescriptionForm.ejs");
steal("mad/view","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionDescription.ejs").then(function(){passbolt.view.component.SidebarSection.extend("passbolt.view.component.sidebarSection.SidebarSectionDescription",{},{"a#js_edit_description_button, p.description_content click":function(){this.element.trigger("request_resource_description_edit")},showDescription:function(a){a?$(".description_content",$(this.element)).show():$(".description_content",$(this.element)).hide()}})});
steal.executed("app/view/component/sidebarSection/sidebarSectionDescription.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_sidebarSection_sidebarSectionDescription_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push("<h4>");d.push(a.view.txt(1,"h4",0,this,function(){return __("Description")}));d.push('</h4>\n<a href="#" class="edit_description_button section-action" id="js_edit_description_button">\n\t<i class="icon edit no-text"></i>\n\t<span>edit</span>\n</a>\n<p class="description_content">');d.push(a.view.txt(1,"p",0,this,function(){return resource.description}));
d.push('</p>\n<\!-- edit description form --\>\n<div id="js_rs_details_edit_description"></div>');return d.join("")}}))});steal.executed("app/view/template/component/sidebarSection/sidebarSectionDescription.ejs");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.ResourceShortcutsController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("All items"),action:function(){var a=new passbolt.model.Filter({order:"modified"});mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Favorite"),action:function(){var a=new passbolt.model.Filter({"case":"favorite"});
mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Recently modified"),action:function(){var a=new passbolt.model.Filter({order:"modified"});mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Expiring soon"),action:function(){var a=new passbolt.model.Filter({order:"expiry_date"});mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Shared with me"),action:function(){var a=new passbolt.model.Filter({"case":"shared"});
mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Items I own"),action:function(){var a=new passbolt.model.Filter({"case":"own"});mad.bus.trigger("filter_resources_browser",a)}})])}})});steal.executed("app/controller/component/resourceShortcutsController.js");
steal("mad/controller/componentController.js","app/view/template/component/workspaceMenu.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.WorkspaceMenuController",{defaults:{label:"Workspace Menu Controller",selectedRs:new can.Model.List}},{afterStart:function(){this.options.creationButton=(new mad.controller.component.ButtonController($("#js_wk_menu_creation_button"))).start();this.options.editionButton=(new mad.controller.component.ButtonController($("#js_wk_menu_edition_button"),
{state:"disabled"})).start();this.options.deletionButton=(new mad.controller.component.ButtonController($("#js_wk_menu_deletion_button"),{state:"disabled"})).start();this.options.sharingButton=(new mad.controller.component.ButtonController($("#js_wk_menu_sharing_button"),{state:"disabled"})).start();this.options.moreButton=(new mad.controller.component.ButtonController($("#js_wk_menu_more_button"),{state:"disabled"})).start();this.on()},"{creationButton} click":function(){var a=this.options.creationButton.getValue();
mad.bus.trigger("request_resource_creation",a)},"{editionButton} click":function(){var a=this.options.editionButton.getValue();mad.bus.trigger("request_resource_edition",a)},"{deletionButton} click":function(){var a=this.options.deletionButton.getValue();mad.bus.trigger("request_resource_deletion",a)},"{sharingButton} click":function(){var a=this.options.sharingButton.getValue();mad.bus.trigger("request_resource_sharing",a)},"{selectedRs} add":function(){0==this.options.selectedRs.length?this.setState("ready"):
1==this.options.selectedRs.length?this.setState("selection"):this.setState("multiSelection")},"{selectedRs} remove":function(){0==this.options.selectedRs.length?this.setState("ready"):1==this.options.selectedRs.length?this.setState("selection"):this.setState("multiSelection")},"{mad.bus} filter_resources_browser":function(a,b,c){a=can.List([]);(c=c.getForeignModels("Category"))&&(a=c);this.options.creationButton.setValue(a)},stateSelection:function(a){a?(this.options.editionButton.setValue(this.options.selectedRs[0]).setState("ready"),
this.options.deletionButton.setValue(this.options.selectedRs).setState("ready"),this.options.sharingButton.setValue(this.options.selectedRs).setState("ready"),this.options.moreButton.setValue(this.options.selectedRs[0]).setState("ready")):(this.options.editionButton.setValue(null).setState("disabled"),this.options.deletionButton.setValue(null).setState("disabled"),this.options.sharingButton.setValue(null).setState("disabled"),this.options.moreButton.setValue(null).setState("disabled"))},stateMultiSelection:function(a){a?
(this.options.editionButton.setState("disabled"),this.options.deletionButton.setValue(this.options.selectedRs).setState("ready"),this.options.sharingButton.setValue(this.options.selectedRs).setState("ready"),this.options.moreButton.setState("disabled")):(this.options.editionButton.setValue(null).setState("disabled"),this.options.deletionButton.setValue(null).setState("disabled"),this.options.sharingButton.setValue(null).setState("disabled"))}})});steal.executed("app/controller/component/workspaceMenuController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_workspaceMenu_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<li>\n\t<a id="js_wk_menu_creation_button" href="#" class="button">\n\t\t<i class="icon create"></i>\n\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("create")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_wk_menu_edition_button" href="#" class="button">\n\t\t<i class="icon edit"></i>\n\t\t<span>');d.push(a.view.txt(1,
"span",0,this,function(){return __("edit")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_wk_menu_deletion_button" href="#" class="button">\n\t\t<i class="icon delete"></i>\n\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("delete")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_wk_menu_sharing_button" href="#" class="button">\n\t\t<i class="icon share"></i>\n\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("share")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<div class="dropdown">\n\t\t<a id="js_wk_menu_more_button" href="http://localhost/passbolt/demo/#" class="button todo">\n\t\t\t<span>');
d.push(a.view.txt(1,"span",0,this,function(){return __("more")}));d.push('</span>\n\t\t\t<i class="icon after arrowdown"></i>\n\t\t</a>\n\t\t<ul class="dropdown-content">\n\t\t\t<li><a href="#">copy login to clipboard</a></li>\n\t\t\t<li><a href="#">copy password to clipboard</a></li>\n\t\t\t<li><a href="#">organize</a></li>\n\t\t\t<li><a href="#">review logs</a></li>\n\t\t</ul>\n\t</div>\n</li>\n');return d.join("")}}))});steal.executed("app/view/template/component/workspaceMenu.ejs");
steal("mad/controller/componentController.js","app/view/template/component/workspaceSecondaryMenu.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.WorkspaceSecondaryMenuController",{defaults:{label:"Workspace Secondary Menu Controller"}},{afterStart:function(){var a=mad.Config.read("ui.workspace.showSidebar");this.options.viewSidebarButton=(new mad.controller.component.ToggleButtonController($("#js_wk_secondary_menu_view_sidebar_button"),{state:a?"selected":
"ready"})).start();this.options.gridLayoutButton=(new mad.controller.component.ButtonController($("#js_wk_secondary_menu_grid_layout_button"))).start();this.options.boxLayoutButton=(new mad.controller.component.ButtonController($("#js_wk_secondary_menu_box_layout_button"),{state:"disabled"})).start();this.options.configButton=(new mad.controller.component.ButtonController($("#js_wk_secondary_menu_config_button"),{state:"disabled"})).start();this.on()},"{viewSidebarButton} click":function(){var a=
!mad.Config.read("ui.workspace.showSidebar");mad.Config.write("ui.workspace.showSidebar",a);mad.bus.trigger("workspace_showSidebar",a)},"{gridLayoutButton} click":function(){console.log("gridLayoutButton")},"{boxLayoutButton} click":function(){console.log("boxLayoutButton")},"{configButton} click":function(){console.log("configButton")}})});steal.executed("app/controller/component/workspaceSecondaryMenuController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_workspaceSecondaryMenu_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<li>\n\t<a id="js_wk_secondary_menu_view_sidebar_button" href="#" class="button toggle">\n\t\t<i class="icon layout eye big no-text"></i>\n\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("view sidebar")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_wk_secondary_menu_grid_layout_button" href="#" class="button selected toggle duo todo">\n\t\t<i class="icon layout grid big no-text"></i>\n\t\t<span>');
d.push(a.view.txt(1,"span",0,this,function(){return __("grid layout")}));d.push('</span>\n\t</a>\n\t<a id="js_wk_secondary_menu_box_layout_button" href="#" class="button toggle duo todo">\n\t\t<i class="icon layout box big no-text"></i>\n\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("box layout")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<div class="dropdown">\n\t\t<a  id="js_wk_secondary_menu_config_button" href="http://localhost/passbolt/demo/#" class="button todo">\n\t\t\t<i class="icon cog big no-text"></i>\n\t\t\t<span>');
d.push(a.view.txt(1,"span",0,this,function(){return __("config")}));d.push('</span>\n\t\t</a>\n\t\t<ul class="dropdown-content right">\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-00d77ffa-7278-41fc-a4bb-1b63d7a10fee" checked>\n\t\t\t\t\t<label for="checkbox-00d77ffa-7278-41fc-a4bb-1b63d7a10fee">resource name</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-10d77ffa-7278-41fc-a4bb-1b63d7a10fee" checked>\n\t\t\t\t\t<label for="checkbox-10d77ffa-7278-41fc-a4bb-1b63d7a10fee">username</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-20d77ffa-7278-41fc-a4bb-1b63d7a10fee" checked>\n\t\t\t\t\t<label for="checkbox-20d77ffa-7278-41fc-a4bb-1b63d7a10fee">password</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-30d77ffa-7278-41fc-a4bb-1b63d7a10fde" checked>\n\t\t\t\t\t<label for="checkbox-30d77ffa-7278-41fc-a4bb-1b63d7a10fde">URL</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-40d77ffa-7278-41fc-a4bb-1b63d7a10fee">\n\t\t\t\t\t<label for="checkbox-40d77ffa-7278-41fc-a4bb-1b63d7a10fee">owner</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-50d77ffa-7278-41fc-a4bb-1b63d7a10fee">\n\t\t\t\t\t<label for="checkbox-50d77ffa-7278-41fc-a4bb-1b63d7a10fee">expire</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-60d77ffa-7278-41fc-a4bb-1b63d7a10fee">\n\t\t\t\t\t<label for="checkbox-60d77ffa-7278-41fc-a4bb-1b63d7a10fee">modified</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t<input type="checkbox" name="select" id="checkbox-70d77ffa-7278-41fc-a4bb-1b63d7a10fed">\n\t\t\t\t\t<label for="checkbox-70d77ffa-7278-41fc-a4bb-1b63d7a10fed">created</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li><a href="#" class="top-separator">save this settings</a></li>\n\t\t\t<li><a href="#">reset to default setting</a></li>\n\t\t</ul>\n\t</div>\n</li>\n');
return d.join("")}}))});steal.executed("app/view/template/component/workspaceSecondaryMenu.ejs");
steal("mad/form/formController.js","app/view/template/form/category/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.category.CreateFormController",{defaults:{templateBased:!0,action:"create"}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($("#js_field_parent_id"),{modelReference:"passbolt.model.Category.parent_id"})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_name"),{modelReference:"passbolt.model.Category.name"})).start(),
(new mad.form.FeedbackController($("#js_field_name_feedback"))).start())}})});steal.executed("app/controller/form/category/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_category_createForm_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="form-content">\n    <input type="hidden" id="js_field_parent_id" class="form_field" />\n    <div class="input text required js_form_element_wrapper">\n        <label for="js_field_name">Category name</label>\n        <input type="text" id="js_field_name" class="required" />\n        <span id="js_field_name_feedback" class="message"/>\n    </div>\n    <div>\n        <input type="submit" value="submit" />\n    </div>\n</div>\n');return d.join("")}}))});
steal.executed("app/view/template/form/category/createForm.ejs");
steal("mad/form/formController.js","app/controller/component/secretStrengthController.js","app/view/template/form/resource/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.resource.CreateFormController",{defaults:{templateBased:!0,secretField:null,action:"create"}},{afterStart:function(){this.options.data.Resource=this.options.data.Resource||{};this.addElement((new mad.form.element.TextboxController($("#js_field_category_id"),{modelReference:"passbolt.model.Resource.Category.id",
validate:!1})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_name"),{modelReference:"passbolt.model.Resource.name"})).start(),(new mad.form.FeedbackController($("#js_field_name_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_uri"),{modelReference:"passbolt.model.Resource.uri"})).start(),(new mad.form.FeedbackController($("#js_field_uri_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_username"),
{modelReference:"passbolt.model.Resource.username"})).start(),(new mad.form.FeedbackController($("#js_field_username_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_secret_id"),{modelReference:"passbolt.model.Resource.Secret.id"})).start());this.options.secretField=(new mad.form.element.TextboxController($("#js_field_secret"),{modelReference:"passbolt.model.Resource.Secret.data"})).start();this.addElement(this.options.secretField,(new mad.form.FeedbackController($("#js_field_password_feedback"),
{})).start());this.options.passwordClear=this.addElement((new mad.form.element.TextboxController($("#js_field_secret_clear"),{state:"hidden",validate:!1})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_description"),{modelReference:"passbolt.model.Resource.description"})).start(),(new mad.form.FeedbackController($("#js_field_description_feedback"),{})).start());this.options.showPwdButton=(new mad.controller.component.ButtonController($("#js_show_pwd_button"))).start();
this.options.genPwdButton=(new mad.controller.component.ButtonController($("#js_gen_pwd_button"))).start();var a=can.getObject("data.Secret.data",this.options),a=passbolt.model.SecretStrength.getSecretStrength(a);this.options.secretStrength=(new passbolt.controller.component.SecretStrengthController($("#js_rs_pwd_strength"),{secretStrength:a})).start();this.on()},updateSecretEntropy:function(a){this.options.secretStrength.load(passbolt.model.SecretStrength.getSecretStrength(a))},"{secretField} changed":function(){this.updateSecretEntropy(this.options.secretField.getValue())},
"{passwordClear} changed":function(){var a=this.getElement("js_field_secret_clear").getValue();this.getElement("js_field_secret").setValue(a);this.updateSecretEntropy(a)},"{showPwdButton} click":function(){var a=this.getElement("js_field_secret"),b=this.getElement("js_field_secret_clear");a.state.is("hidden")?(b.setState("hidden"),a.setState("ready"),this.options.showPwdButton.view.removeClass("selected")):(a.setState("hidden"),b.setState("ready"),b.setValue(a.getValue()),this.options.showPwdButton.view.addClass("selected"))},
"{genPwdButton} click":function(){var a=passbolt.model.Secret.generate();this.getElement("js_field_secret").setValue(a);this.getElement("js_field_secret_clear").setValue(a);this.updateSecretEntropy(a)}})});steal.executed("app/controller/form/resource/createFormController.js");
steal("app/model/secret.js","app/model/secretStrength.js","app/view/template/component/secret/secretStrength.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.SecretStrengthController",{defaults:{label:"Secret Strength Controller",templateBased:!0,templateUri:"app/view/template/component/secret/secretStrength.ejs",secretStrength:null}},{beforeRender:function(){this._super();var a="",b="";this.options.secretStrength&&(a=this.options.secretStrength.label,
b=this.options.secretStrength.id);this.setViewData("strengthLabel",a);this.setViewData("strengthId",b)},load:function(a){this.options.secretStrength=a;this.refresh()}})});steal.executed("app/controller/component/secretStrengthController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_secret_secretStrength_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<span class="progress"><span class="progress-bar ');d.push(a.view.txt(1,"span","class",this,function(){return strengthId}));d.push('"',a.view.pending(),">");d.push('</span></span>\n<span class="complexity-text">');d.push(a.view.txt(1,"span",0,this,function(){return __("complexity")}));d.push(": <strong>");d.push(a.view.txt(1,"strong",0,
this,function(){return strengthLabel}));d.push("</strong></span>");return d.join("")}}))});steal.executed("app/view/template/component/secret/secretStrength.ejs");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_resource_createForm_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="form-content">\n\t\n\t<input type="hidden" name="passbolt.model.Resource.Category.id" id="js_field_category_id" class="form_field" />\n\t\n\t<div class="input text required js_form_element_wrapper">\n\t\t<label for="js_field_name">');d.push(a.view.txt(1,"label",0,this,function(){return __("Name")}));d.push('</label>\n\t\t<input name="passbolt.model.Resource.name" class="required" maxlength="50" type="text" id="js_field_name" placeholder="name"/>\n\t\t<div id="js_field_name_feedback" class="message">\n\t\t</div>\n\t</div>\n\t\n\t<div class="input text js_form_element_wrapper">\n\t\t<label for="js_field_uri">');
d.push(a.view.txt(1,"label",0,this,function(){return __("URL")}));d.push('</label>\n\t\t<input name="passbolt.model.Resource.uri" maxlength="50" type="text" id="js_field_uri" placeholder="https://example.com/login"/>\n\t\t<div id="js_field_uri_feedback" class="message">\n\t\t</div>\n\t</div>\n\t\n\t<div class="input text required js_form_element_wrapper">\n\t\t<label for="js_field_username">');d.push(a.view.txt(1,"label",0,this,function(){return __("Username")}));d.push('</label>\n\t\t<input name="passbolt.model.Resource.username" class="required" maxlength="50" type="text" id="js_field_username" placeholder="name"/>\n\t\t<div id="js_field_username_feedback" class="message">\n\t\t</div>\n\t</div>\n\t<div class="js_form_element_wrapper">\n\t\t<div class="input password required short">\n\t\t\t<label for="js_field_secret">');
d.push(a.view.txt(1,"label",0,this,function(){return __("Password")}));d.push('</label>\n\t\t\t<input type="hidden" name="passbolt.model.Resource.Secret.id" id="js_field_secret_id" class="form_field" />\n\t\t\t<input name="passbolt.model.Resource.Secret.data" class="required" maxlength="50" type="password" id="js_field_secret" placeholder="password"/>\n\t\t\t<input class="required" maxlength="50" type="text" id="js_field_secret_clear" placeholder="password"/>\n\t\t</div>\n\t\t<ul class="actions inline">\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_show_pwd_button" class="button toggle">\n\t\t\t\t\t<i class="icon eye big no-text"></i>\n\t\t\t\t\t<span>');
d.push(a.view.txt(1,"span",0,this,function(){return __("view")}));d.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_gen_pwd_button" class="button">\n\t\t\t\t\t<i class="icon key big no-text"></i>\n\t\t\t\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("generate")}));d.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t\t<div id="js_rs_pwd_strength" class="password-complexity">\n\t\t</div>\n\t\t<div id="js_field_password_feedback" class="message">\n\t\t</div>\n\t</div>\n\t<div class="input-datetime-wrapper js_form_element_wrapper">\n\t\t<div class="input text datetime short">\n\t\t\t<label for="ResourceExpire">');
d.push(a.view.txt(1,"label",0,this,function(){return __("Expiracy date")}));d.push('</label>\n\t\t\t<input name="data[Resource][expire]" class="required todo" type="text" id="ResourceExpire" data-format="YYYY-MM-DD HH:mm" data-template="D MMM YYYY HH:mm" placeholder="DD/MM/YYYY HH:MM">\n\t\t\t<div class="actions inline dropdown">\n\t\t\t\t<a href="#" class="button todo">\n\t\t\t\t\t<i class="clock icon big no-text"></i>\n\t\t\t\t\t<span>pick a date and time</span>\n\t\t\t\t</a>\n\t\t\t\t<ul class="dropdown-content">\n\t\t\t\t\t<li><a href="#">copy login to clipboard</a></li>\n\t\t\t\t\t<li><a href="#">copy password to clipboard</a></li>\n\t\t\t\t\t<li><a href="#">organize</a></li>\n\t\t\t\t\t<li><a href="#">review logs</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="input textarea js_form_element_wrapper">\n\t\t<label for="js_field_description">');
d.push(a.view.txt(1,"label",0,this,function(){return __("Description")}));d.push('</label>\n\t\t<textarea name="passbolt.model.Resource.description" class="required" maxlength="150" id="js_field_description" placeholder="add a description"',a.view.pending(),">");d.push('\n\t\t</textarea>\n\t\t<div id="js_field_description_feedback" class="message">\n\t\t</div>\n\t</div>\n\t\n\t<div>\n\t\t<input type="submit" value="submit" />\n\t</div>\n</div>');return d.join("")}}))});steal.executed("app/view/template/form/resource/createForm.ejs");
steal("mad/model").then(function(){mad.model.Model("passbolt.model.Filter",{attributes:{keywords:"string","case":"string",foreignModels:"array",order:"array",requestPrefix:"string"}},{init:function(a){if("undefined"==typeof a||"undefined"==typeof a.requestPrefix)this.requestPrefix="fltr_";if("undefined"==typeof a||"undefined"==typeof a.foreignModels)this.foreignModels=new can.List([])},toRequest:function(){var a={};null!=this.keywords&&(a[this.requestPrefix+"keywords"]=this.keywords);null!=this["case"]&&
(a[this.requestPrefix+"case"]=this["case"]);null!=this.order&&(a[this.requestPrefix+"order"]=this.order);var b=this.foreignModels.attr(),c;for(c in b)a[this.requestPrefix+"model_"+[c.toLowerCase()]]=can.map(this.foreignModels[c],function(a){return a.id}).join(",");return a},getForeignModels:function(a){var b=[];"undefined"!=typeof this.foreignModels&&"undefined"!=typeof this.foreignModels[a]&&(b=this.foreignModels[a]);return b}})});steal.executed("app/model/filter.js");
steal("mad/controller/component/freeCompositeController.js","app/controller/component/groupChooserController.js","app/controller/component/userBrowserController.js","app/controller/component/userShortcutsController.js","app/controller/component/userWorkspaceMenuController.js","app/controller/form/user/createFormController.js","app/controller/form/group/createFormController.js","app/model/user.js").then(function(){mad.controller.component.FreeCompositeController.extend("passbolt.controller.PeopleWorkspaceController",
{defaults:{label:"People",templateUri:"app/view/template/peopleWorkspace.ejs",selectedUsers:new can.Model.List,filter:new passbolt.model.Filter}},{afterStart:function(){$("#js_wsp_primary_menu").html("");this.primMenu=new passbolt.controller.component.UserWorkspaceMenuController("#js_wsp_primary_menu",{selectedUsers:this.options.selectedUsers});this.primMenu.start();(new passbolt.controller.component.UserShortcutsController("#js_wsp_users_group_shortcuts",{})).start();this.grpChooser=new passbolt.controller.component.GroupChooserController("#js_wsp_users_group_chooser",
{});this.grpChooser.start();this.addComponent(passbolt.controller.component.UserBrowserController,{id:"js_passbolt_user_browser",selectedUsers:this.options.selectedUsers},"js_workspace_users_main").start()},"{mad.bus} group_selected":function(a,b,c){this.options.selectedUsers.splice(0,this.options.selectedUsers.length);this.options.filter.attr({foreignModels:{Group:new can.List([c])}});mad.bus.trigger("filter_users_browser",this.options.filter)},"{mad.bus} request_group_creation":function(){var a=
new passbolt.model.Group,b=(new mad.controller.component.DialogController({label:__("Create a new Group")})).start();b.add(passbolt.controller.form.group.CreateFormController,{data:a,callbacks:{submit:function(a){(new passbolt.model.Group(a["passbolt.model.Group"])).save();b.remove()}}}).load(a)},"{mad.bus} request_group_edition":function(a,b,c){var d=(new mad.controller.component.DialogController({label:__("Edit a Group")})).start();d.add(passbolt.controller.form.group.CreateFormController,{data:c,
callbacks:{submit:function(a){c.attr(a["passbolt.model.Group"]).save();d.remove()}}}).load(c)},"{mad.bus} request_group_deletion":function(a,b,c){c.destroy()},"{mad.bus} request_user_creation":function(){var a=new passbolt.model.User({active:1}),b=(new mad.controller.component.DialogController(null,{label:__("Add User")})).start();b.add(passbolt.controller.form.user.CreateFormController,{data:a,callbacks:{submit:function(a){(new passbolt.model.User(a["passbolt.model.User"])).save();b.remove()}}}).load(a)},
"{mad.bus} request_user_edition":function(a,b,c){var c=this.options.selectedUsers[0],d=(new mad.controller.component.DialogController(null,{label:__("Edit User")})).start();d.add(passbolt.controller.form.user.CreateFormController,{data:c,callbacks:{submit:function(a){c.attr(a["passbolt.model.User"]).save();d.remove()}}}).load(c)},"{mad.bus} request_user_deletion":function(a,b){for(var c=2;c<arguments.length;c++){var d=arguments[c];if(!(d instanceof passbolt.model.User))throw new mad.error.Exception("The parameter "+
c+" should be an instance of passbolt.model.User");d.destroy()}}})});steal.executed("app/controller/peopleWorkspaceController.js");
steal("mad/controller/component/dynamicTreeController.js","app/view/component/groupChooser.js","app/model/group.js","app/model/groupUser.js").then(function(){mad.controller.component.DynamicTreeController.extend("passbolt.controller.component.GroupChooserController",{defaults:{label:"Group Chooser",viewClass:passbolt.view.component.groupChooser,itemClass:passbolt.model.Group,templateUri:"mad/view/template/component/tree.ejs",map:new mad.object.Map({id:"id",label:"name"})}},{afterStart:function(){var a=
this;this.setState("loading");passbolt.model.Group.findAll({},function(b){a.load(b);a.setState("ready")},function(){})},showContextualMenu:function(a,b,c){var d=mad.model.Action.models([{id:uuid(),label:"Open",action:function(b){mad.bus.trigger("category_selected",a);b.remove()}},{id:uuid(),label:"Create user",action:function(b){mad.bus.trigger("request_user_creation",a);b.remove()}},{id:uuid(),label:"Create group",action:function(b){mad.bus.trigger("request_group_creation",a);b.remove()}},{id:uuid(),
label:"Rename...",action:function(b){mad.bus.trigger("request_group_edition",a);b.remove()}},{id:uuid(),label:"Remove",action:function(b){mad.bus.trigger("request_group_deletion",a);b.remove()}}]),b=new mad.controller.component.ContextualMenuController(null,{mouseX:b,mouseY:c});b.start();b.load(d)}," item_selected":function(a,b,c){mad.bus.trigger("group_selected",c)}," group_dropon":function(a,b,c,d){a=c.element.parent().attr("id");d=d.element.attr("id");(new passbolt.model.GroupUser({group_id:a,
user_id:d})).save()}," item_right_selected":function(a,b,c,d){this._super(a,b,c,d);this.showContextualMenu(c,d.pageX,d.pageY)},"{passbolt.model.Group} created":function(a,b,c){this.insertItem(c,null,"last")},"{passbolt.model.Group} updated":function(){this.refresh()},"{passbolt.model.Group} destroyed":function(a,b,c){this.removeItem(c)}})});steal.executed("app/controller/component/groupChooserController.js");
steal("jquery/event/drop","mad/view/component/tree/dynamicTree.js").then(function(){mad.view.component.tree.DynamicTree.extend("passbolt.view.component.groupChooser",{},{insertItem:function(a,b,c){var d=this,a=this._super(a,b,c);$("> .row",$(a)).bind("dropover",function(a,b,c){$(this).addClass("drop-over");d.element.trigger("group_dropover",[b,c,a])}).bind("dropout",function(a,b,c){$(this).removeClass("drop-over");d.element.trigger("group_dropout",[b,c,a])}).bind("dropon",function(a,b,c){$(this).removeClass("drop-over");
d.element.trigger("group_dropon",[b,c,a])})}})});steal.executed("app/view/component/groupChooser.js");
steal("mad/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.GroupUser",{validateRules:{},attributes:{id:"string",group_id:"string",user_id:"string"},create:function(a,b,c){var d=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"groupsUsers",type:"POST",params:a,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,d)]);return b})},destroy:function(a,
b,c){return mad.net.Ajax.request({url:APP_URL+"groupsUsers/{id}",type:"DELETE",params:{id:a},success:b,error:c})},findOne:function(a,b,c){a.children=a.children||!1;return mad.net.Ajax.request({url:APP_URL+"groupsUsers/{id}.json",type:"GET",params:a,success:b,error:c})},findAll:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"groupsUsers.json",type:"GET",params:a,success:b,error:c})},update:function(a,b,c,d){var e=this;delete b.created;delete b.modified;b=mad.model.serializer.CakeSerializer.to(b,
this);b.id=a;return mad.net.Ajax.request({url:APP_URL+"groupsUsers/{id}",type:"PUT",params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{})});steal.executed("app/model/groupUser.js");
steal("mad/controller/component/gridController.js","app/model/user.js","app/model/group.js","app/model/profile.js","app/view/component/userBrowser.js").then(function(){mad.controller.component.GridController.extend("passbolt.controller.component.UserBrowserController",{defaults:{itemClass:passbolt.model.User,viewClass:passbolt.view.component.userBrowser,users:new can.Model.List,groups:[],selectedUsers:new can.Model.List}},{init:function(a,b){b.map=new mad.object.Map({id:"id",name:"name",username:"username",
modified:"modified",Group:"Group",Profile:"Profile"});b.columnModel=[{name:"multipleSelect",index:"multipleSelect",header:{css:["selections s-cell"],label:'<div class="input checkbox"> \t\t\t\t\t\t\t<input type="checkbox" name="select all" value="checkbox-select-all" id="checkbox-select-all"> \t\t\t\t\t\t\t<label for="checkbox-select-all">select all</label> \t\t\t\t\t\t</div>'},cellAdapter:function(a,b,e,f){b=[];b[f.id]="";mad.helper.ComponentHelper.create(a,"inside_replace",mad.form.element.CheckboxController,
{id:"multiple_select_checkbox_"+f.id,name:"test",cssClasses:["js_checkbox_multiple_select"],availableValues:b}).start()}},{name:"name",index:"Profile",header:{css:["m-cell"],label:__("User")},valueAdapter:function(a,b){return'<img src="img/user.png" alt="your picture" width="30" height="30">'+b.Profile.first_name+" "+b.Profile.last_name}},{name:"username",index:"username",header:{css:["m-cell"],label:__("Username")}},{name:"modified",index:"modified",header:{css:["m-cell"],label:__("Modified")},valueAdapter:function(a){return moment(a).fromNow()}}];
this._super(a,b)},insertItem:function(a,b,c){this.options.users.push(a);this._super(a,b,c)},removeItem:function(a){this._super(a)},reset:function(){this.options.users.splice(0,this.options.users.length)},load:function(a){this._super(a)},beforeSelect:function(a){var b=!0;if(this.state.is("selection"))if(0<this.options.selectedUsers.length&&this.options.selectedUsers[0].id==a.id)this.unselect(a),this.setState("ready"),b=!1;else for(a=this.options.selectedUsers.length-1;-1<a;a--)this.unselect(this.options.selectedUsers[a]);
return b},select:function(a,b){b="undefined"==typeof b?!1:b;this.options.selectedUsers.push(a);mad.app.getComponent("multiple_select_checkbox_"+a.id).setValue([a.id]);this.view.selectItem(a);b||mad.bus.trigger("user_selected",a)},beforeUnselect:function(){return!0},unselect:function(a,b){b="undefined"==typeof b?!1:b;mad.app.getComponent("multiple_select_checkbox_"+a.id).reset();this.view.unselectItem(a);mad.model.List.remove(this.options.selectedUsers,a);b||mad.bus.trigger("user_unselected",a)},"{passbolt.model.User} created":function(a,
b,c){this.insertItem(c,null,"first");return!1},"{passbolt.model.User} updated":function(a,b,c){-1!=this.options.users.indexOf(c)&&this.refreshItem(c)},"{users} remove":function(a,b,c){var d=this;can.each(c,function(a){d.removeItem(a)})}," item_selected":function(a,b,c){this.setState("selection");this.beforeSelect(c)&&this.select(c)},".js_checkbox_multiple_select checked":function(a,b,c){this.state.is("ready")?this.setState("selection"):this.state.is("selection")&&this.setState("multipleSelection");
a=this.options.users[mad.model.List.indexOf(this.options.users,c)];this.beforeSelect(a)&&this.select(a)},".js_checkbox_multiple_select unchecked":function(a,b,c){a=this.options.users[mad.model.List.indexOf(this.options.users,c)];this.beforeUnselect()&&this.unselect(a);this.options.selectedUsers.length?1==this.options.selectedUsers.length&&this.setState("selection"):this.setState("ready")},afterStart:function(){var a=this;this.setState("loading");passbolt.model.User.findAll({},function(b){a.load(b);
a.setState("ready")})},"{mad.bus} filter_users_browser":function(a,b,c){var d=this;this.filter=c;this.options.groups=[];(a=c.getForeignModels("Group"))&&can.each(a,function(a){d.options.groups.push(a.id)});this.setState("loading");passbolt.model.User.findAll({filter:this.filter,recursive:!0},function(a){d.load(a);d.setState("ready")})},stateReady:function(){},stateSelection:function(){},stateMultipleSelection:function(){}})});steal.executed("app/controller/component/userBrowserController.js");
steal("jquery/event/drag","mad/view/component/grid.js","app/view/template/component/user/draggedUser.ejs").then(function(){mad.view.component.Grid.extend("passbolt.view.component.userBrowser",{},{insertItem:function(a,b,c){var a=this._super(a,b,c),d=$(".js_grid_column_name",a);a.on("draginit",function(a,b){var c=$("div#js_dragged_user");c.length?$(".name",c).text(d.text()):(c=can.view("app/view/template/component/user/draggedUser.ejs",{name:d.text()}),$(c).appendTo(document.body),c=$("div#js_dragged_user"));
b.representative(c,0,0)})}})});steal.executed("app/view/component/userBrowser.js");steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_user_draggedUser_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="dragged_user" id="js_dragged_user">\n\tMove \'<span class="name">');d.push(a.view.txt(1,"span",0,this,function(){return name}));d.push("</span>' in a group\n</div>");return d.join("")}}))});steal.executed("app/view/template/component/user/draggedUser.ejs");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.UserShortcutsController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("All users"),action:function(){var a=new passbolt.model.Filter({order:"modified"});mad.bus.trigger("filter_users_browser",a)}})])}})});steal.executed("app/controller/component/userShortcutsController.js");
steal("mad/controller/componentController.js","app/view/template/component/userWorkspaceMenu.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.UserWorkspaceMenuController",{defaults:{label:"User Workspace Menu Controller",selectedUsers:new can.Model.List}},{afterStart:function(){this.options.creationButton=(new mad.controller.component.ButtonController($("#js_user_wk_menu_creation_button"))).start();this.options.editionButton=(new mad.controller.component.ButtonController($("#js_user_wk_menu_edition_button"),
{state:"disabled"})).start();this.options.deletionButton=(new mad.controller.component.ButtonController($("#js_user_wk_menu_deletion_button"),{state:"disabled"})).start();this.options.moreButton=(new mad.controller.component.ButtonController($("#js_user_wk_menu_more_button"),{state:"disabled"})).start();this.on()},"{creationButton} click":function(){mad.bus.trigger("request_user_creation")},"{editionButton} click":function(){mad.bus.trigger("request_user_edition")},"{deletionButton} click":function(){mad.bus.trigger("request_user_deletion",
this.options.selectedUsers)},"{selectedUsers} add":function(){0==this.options.selectedUsers.length?this.setState("ready"):1==this.options.selectedUsers.length?this.setState("selection"):this.setState("multiSelection")},"{selectedUsers} remove":function(){0==this.options.selectedUsers.length?this.setState("ready"):1==this.options.selectedUsers.length?this.setState("selection"):this.setState("multiSelection")},stateSelection:function(a){a?(this.options.editionButton.setValue(this.options.selectedUsers[0]).setState("ready"),
this.options.deletionButton.setValue(this.options.selectedUsers).setState("ready"),this.options.moreButton.setValue(this.options.selectedUsers[0]).setState("ready")):(this.options.editionButton.setValue(null).setState("disabled"),this.options.deletionButton.setValue(null).setState("disabled"),this.options.moreButton.setValue(null).setState("disabled"))},stateMultiSelection:function(a){a?(this.options.editionButton.setState("disabled"),this.options.deletionButton.setValue(this.options.selectedUsers).setState("ready"),
this.options.moreButton.setState("disabled")):(this.options.editionButton.setValue(null).setState("disabled"),this.options.deletionButton.setValue(null).setState("disabled"))}})});steal.executed("app/controller/component/userWorkspaceMenuController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_userWorkspaceMenu_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<li>\n\t<a id="js_user_wk_menu_creation_button" href="#" class="button">\n\t\t<i class="icon create"></i>\n\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("create")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_user_wk_menu_edition_button" href="#" class="button">\n\t\t<i class="icon edit"></i>\n\t\t<span>');d.push(a.view.txt(1,
"span",0,this,function(){return __("edit")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_user_wk_menu_deletion_button" href="#" class="button">\n\t\t<i class="icon delete"></i>\n\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("delete")}));d.push('</span>\n\t</a>\n</li>\n<li>\n\t<div class="dropdown">\n\t\t<a id="js_user_wk_menu_more_button" href="http://localhost/passbolt/demo/#" class="button todo">\n\t\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("more")}));
d.push('</span>\n\t\t\t<i class="icon after arrowdown"></i>\n\t\t</a>\n\t\t<ul class="dropdown-content">\n\t\t\t<li><a href="#">copy login to clipboard</a></li>\n\t\t\t<li><a href="#">copy password to clipboard</a></li>\n\t\t\t<li><a href="#">organize</a></li>\n\t\t\t<li><a href="#">review logs</a></li>\n\t\t</ul>\n\t</div>\n</li>\n');return d.join("")}}))});steal.executed("app/view/template/component/userWorkspaceMenu.ejs");
steal("mad/form/formController.js","app/controller/component/secretStrengthController.js","app/view/template/form/user/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.user.CreateFormController",{defaults:{templateBased:!0,passwordField:null}},{afterStart:function(){this.options.data.User=this.options.data.User||{};this.addElement((new mad.form.element.TextboxController($("#js_field_user_active"),{modelReference:"passbolt.model.User.active"})).start()).setValue("test");
this.addElement((new mad.form.element.TextboxController($("#js_field_first_name"),{modelReference:"passbolt.model.User.Profile.first_name"})).start(),(new mad.form.FeedbackController($("#js_field_first_name_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_last_name"),{modelReference:"passbolt.model.User.Profile.last_name"})).start(),(new mad.form.FeedbackController($("#js_field_last_name_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_username"),
{modelReference:"passbolt.model.User.username"})).start(),(new mad.form.FeedbackController($("#js_field_username_feedback"),{})).start());this.options.passwordField=(new mad.form.element.TextboxController($("#js_field_password"),{modelReference:"passbolt.model.User.password"})).start();this.addElement(this.options.passwordField);this.options.passwordClear=this.addElement((new mad.form.element.TextboxController($("#js_field_password_clear"),{state:"hidden"})).start());this.options.showPwdButton=(new mad.controller.component.ButtonController($("#js_show_pwd_button"))).start();
this.options.genPwdButton=(new mad.controller.component.ButtonController($("#js_gen_pwd_button"))).start();var a=can.getObject("data.Secret.data",this.options),a=passbolt.model.SecretStrength.getSecretStrength(a);this.options.secretStrength=(new passbolt.controller.component.SecretStrengthController($("#js_user_pwd_strength"),{secretStrength:a})).start();this.on()},updateSecretEntropy:function(a){this.options.secretStrength.load(passbolt.model.SecretStrength.getSecretStrength(a))},"{passwordField} changed":function(){this.updateSecretEntropy(this.options.passwordField.getValue())},
"{passwordClear} changed":function(){var a=this.getElement("js_field_password_clear").getValue();this.getElement("js_field_password").setValue(a);this.updateSecretEntropy(a)},"{showPwdButton} click":function(){var a=this.getElement("js_field_password"),b=this.getElement("js_field_password_clear");a.state.is("hidden")?(b.setState("hidden"),a.setState("ready"),this.options.showPwdButton.view.removeClass("selected")):(a.setState("hidden"),b.setState("ready"),b.setValue(a.getValue()),this.options.showPwdButton.view.addClass("selected"))},
"{genPwdButton} click":function(){var a=passbolt.model.Secret.generate();this.getElement("js_field_password").setValue(a);this.getElement("js_field_password_clear").setValue(a);this.updateSecretEntropy(a)}})});steal.executed("app/controller/form/user/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_user_createForm_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="form-content">\n\t<input type="hidden" name="passbolt.model.User.Group.id" id="js_field_group_id" class="form_field" />\n\t<input type="hidden" name="passbolt.model.User.active" id="js_field_user_active" class="form_field" />\n\t<div class="input text required">\n\t\t<label for="js_field_first_name">');d.push(a.view.txt(1,"label",0,this,
function(){return __("First Name")}));d.push('</label>\n\t\t<input name="passbolt.model.User.Profile.first_name" class="required" maxlength="50" type="text" id="js_field_first_name" placeholder="first name"/>\n\t\t<div id="js_field_first_name_feedback" class="message error">\n\t\t</div>\n\t</div>\n\t<div class="input text required">\n\t\t<label for="js_field_last_name">');d.push(a.view.txt(1,"label",0,this,function(){return __("Last Name")}));d.push('</label>\n\t\t<input name="passbolt.model.User.Profile.last_name" class="required" maxlength="50" type="text" id="js_field_last_name" placeholder="last name"/>\n\t\t<div id="js_field_last_name_feedback" class="message error">\n\t\t</div>\n\t</div>\n\t<div class="input text required">\n\t\t<label for="js_field_username">');
d.push(a.view.txt(1,"label",0,this,function(){return __("Email")}));d.push('</label>\n\t\t<input name="passbolt.model.User.username" class="required" maxlength="50" type="text" id="js_field_username" placeholder="email"/>\n\t\t<div id="js_field_username_feedback" class="message error">\n\t\t</div>\n\t</div>\n\t<div class="input-password-wrapper">\n\t\t<div class="input password required short">\n\t\t\t<label for="js_field_password">');d.push(a.view.txt(1,"label",0,this,function(){return __("Password")}));
d.push('</label>\n\t\t\t<input name="passbolt.model.User.password" class="required" maxlength="50" type="password" id="js_field_password" placeholder="password"/>\n\t\t\t<input class="required" maxlength="50" type="text" id="js_field_password_clear" placeholder="password"/>\n\t\t</div>\n\t\t<ul class="actions inline">\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_show_pwd_button" class="button toggle">\n\t\t\t\t\t<i class="icon eye big no-text"></i>\n\t\t\t\t\t<span>');d.push(a.view.txt(1,"span",0,this,
function(){return __("view")}));d.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_gen_pwd_button" class="button">\n\t\t\t\t\t<i class="icon key big no-text"></i>\n\t\t\t\t\t<span>');d.push(a.view.txt(1,"span",0,this,function(){return __("generate")}));d.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t\t<div id="js_user_pwd_strength" class="password-complexity">\n\t\t</div>\n\t</div>\n\t<div>\n\t\t<input type="submit" value="submit" />\n\t</div>\n</div>');return d.join("")}}))});
steal.executed("app/view/template/form/user/createForm.ejs");steal("mad/form/formController.js","app/view/template/form/group/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.group.CreateFormController",{defaults:{templateBased:!0,action:"create"}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($("#js_field_name"),{modelReference:"passbolt.model.Group.name"})).start(),(new mad.form.FeedbackController($("#js_field_name_feedback"))).start())}})});
steal.executed("app/controller/form/group/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_group_createForm_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="form-content">\n    <div class="input text required js_form_element_wrapper">\n        <label for="js_field_name">Group name</label>\n        <input type="text" id="js_field_name" class="required" />\n        <span id="js_field_name_feedback" class="message"/>\n    </div>\n    <div>\n        <input type="submit" value="submit" />\n    </div>\n</div>\n');return d.join("")}}))});
steal.executed("app/view/template/form/group/createForm.ejs");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.AppNavigationLeftController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("home"),cssClasses:["home"],action:function(){mad.bus.trigger("workspace_selected","js_passbolt_passwordWorkspace_controller")}}),new mad.model.Action({id:uuid(),label:__("passwords"),cssClasses:["passwords"],action:function(){mad.bus.trigger("workspace_selected",
"js_passbolt_passwordWorkspace_controller")}}),new mad.model.Action({id:uuid(),label:__("users"),cssClasses:["users"],action:function(){mad.bus.trigger("workspace_selected","js_passbolt_peopleWorkspace_controller")}}),new mad.model.Action({id:uuid(),label:__("help"),cssClasses:["help todo"],action:function(){mad.bus.trigger("workspace_selected","js_passbolt_passwordWorkspace_controller")}})])}})});steal.executed("app/controller/component/appNavigationLeftController.js");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.AppNavigationRightController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("logout"),cssClasses:["logout"],action:function(){document.location.href=APP_URL+"/logout"}})])}})});steal.executed("app/controller/component/appNavigationRightController.js");
steal("mad/controller/componentController.js","mad/form/element/listController.js","app/view/component/appFilter.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.AppFilterController",{defaults:{viewClass:passbolt.view.component.AppFilter}},{afterStart:function(){this.filterForm=new mad.form.FormController("#js_app_filter_form",{});this.filterForm.start();this.keywordsFormElement=this.filterForm.addElement(new mad.form.element.TextboxController("#js_app_filter_keywords",
{modelReference:"passbolt.model.Filter.keywords"}));this.keywordsFormElement.start()},reset:function(){this.keywordsFormElement.setValue("")},"{mad.bus} category_selected":function(){this.reset()}," update":function(){var a=this.filterForm.getData(),a=new passbolt.model.Filter(a["passbolt.model.Filter"]);mad.bus.trigger("filter_resources_browser",a)}," reset":function(){this.reset();var a=new passbolt.model.Filter({keywords:"",tags:[]});mad.bus.trigger("filter_resources_browser",a)}})});steal.executed("app/controller/component/appFilterController.js");
steal("mad/form/formElement.js").then(function(){mad.form.FormElement.extend("mad.form.element.ListController",{defaults:{label:"List Form Element Controller",templateBased:!1,itemClass:passbolt.model,itemTemplateUri:"app/view/template/component/tagFilterItem.ejs",tag:"ul",value:[]}},{afterStart:function(){this.treeCtl=new mad.controller.component.TreeController(this.element,{itemClass:this.options.itemClass,itemTemplateUri:this.options.itemTemplateUri,map:new mad.object.Map({id:"id",label:"name"})});
this.treeCtl.start()},setValue:function(a){var b=this;this.value=a;this.treeCtl.reset();can.each(a,function(a){if(!(a instanceof b.options.itemClass))throw new mad.error.WrongParametersException("tag",b.options.itemClass.fullName);b.treeCtl.insertItem(a)})}})});steal.executed("lib/mad/form/element/listController.js");steal("mad/view","app/view/template/component/appFilter.ejs").then(function(){mad.view.View.extend("passbolt.view.component.AppFilter",{defaults:{}},{"{element} form submit":function(){this.element.trigger("update")}})});
steal.executed("app/view/component/appFilter.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_appFilter_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<form id="js_app_filter_form" class="search">\n\t<\!-- <ul id="js_filter_tags" class="tags"></ul> --\>\n    <div class="input search required">\n        <label for="js_app_filter_form">\n            Search</label>\n        <input id="js_app_filter_keywords" class="required" maxlength="50" type="search" placeholder="search">\n    </div>\n    <button value="search">\n        <i class="icon search"></i>\n        <span class="text visuallyhidden">search</span>\n    </button>\n</form>\n<\!-- <form id="js_filter_form">\n    <ul id="js_filter_tags" class="tags"></ul>\n    <fieldset>\n        <legend>\n            Please enter a search keyword\n        </legend>\n        <div class="input text required">\n            <label for="js_filter_keywords">\n                Search</label>\n            <input id="js_filter_keywords" class="required" maxlength="50" type="text">\n        </div>\n    </fieldset>\n    <span id="js_filter_reset" class="control reset">x</span>\n    <div class="submit">\n        <input type="submit">\n    </div>\n</form> --\>');return d.join("")}}))});
steal.executed("app/view/template/component/appFilter.ejs");
steal("mad/controller/componentController.js","app/model/notification.js","app/view/component/notification.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.NotificationController",{defaults:{label:"Notification Controller",viewClass:passbolt.view.component.Notification,notification:null,status:"hidden"}},{load:function(a){this.options.notification=a;this.setViewData(this.options.notification);null==this.view?this.start():(this.refresh(),this.setState("ready"))},
"{mad.bus} passbolt_notify":function(a,b,c){this.load(new passbolt.model.Notification(c))}})});steal.executed("app/controller/component/notificationController.js");steal("mad/model").then(function(){mad.model.Model("passbolt.model.Notification",{attributes:{status:"string",title:"string"}},{})});steal.executed("app/model/notification.js");
steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.Notification",{defaults:{timeout:2500,timeoutBeforeReset:null,persistent:!1}},{init:function(a,b){var c=mad.Config.read("notification.timeout");"undefined"!=typeof c&&(this.options.timeout=c);this._super(a,b)},render:function(){var a=this;this.options.timeoutBeforeReset&&(this.options.persistent||clearTimeout(this.options.timeoutBeforeReset),a.getController().setState("hidden"));this.options.persistent||(a.options.timeoutBeforeReset=
setTimeout(function(){a.getController().setState("hidden")},a.options.timeout));return this._super()}})});steal.executed("app/view/component/notification.js");
steal("mad/controller/componentController.js","app/view/component/loadingBar.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.LoadingBarController",{defaults:{label:"Loading Bar Controller",viewClass:passbolt.view.component.LoadingBar,templateBased:!1,currentProcs:0,previousProcs:0,maxProcs:0,loadingPercent:0,postponedUpdate:!1}},{loading_start:function(a){this.view.update(20,!0,function(){a&&a()})},loading_complete:function(a){var b=this;this.view.update(100,
!0,function(){b.view.update(0,false);a&&a()})},stateLoading:function(){},update:function(a){var b=this;"undefined"!=typeof a&&a&&(this.options.postponedUpdate=!1);this.state.is("updating")?this.options.postponedUpdate||(this.options.postponedUpdate=!0,setTimeout(function(){b.update(!0)},100)):(this.state.addState("updating"),a=this.options.currentProcs,this.options.maxProcs<a&&(this.options.maxProcs=a),a-this.options.previousProcs?a?(this.state.is("progressing")||this.state.addState("progressing"),
this.view.update(100-(this.options.maxProcs-(this.options.maxProcs-this.options.currentProcs))*(1*(100/this.options.maxProcs)/2),!0,function(){b.state.removeState("updating")})):(this.state.addState("completing"),this.loading_complete(function(){b.state.setState("ready")})):this.state.removeState("updating"),this.options.previousProcs=a)},"{mad.bus} passbolt_component_loading_start":function(){this.options.currentProcs++;this.update()},"{mad.bus} passbolt_component_loading_complete":function(){this.options.currentProcs--;
this.update()},"{mad.bus} passbolt_ajax_request_start":function(a,b,c){c.silentLoading||(this.options.currentProcs++,this.update())},"{mad.bus} passbolt_ajax_request_complete":function(a,b,c){c.silentLoading||(this.options.currentProcs--,this.update())},"{mad.bus} passbolt_loading":function(){this.options.currentProcs++;this.update()},"{mad.bus} passbolt_loading_complete":function(){this.options.currentProcs--;this.update()}})});steal.executed("app/controller/component/loadingBarController.js");
steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.LoadingBar",{defaults:{}},{update:function(a,b,c){c=c||null;a+="%";("undefined"!=typeof b?b:1)?$(".progress-bar span",this.element).animate({width:a},c):($(".progress-bar span",this.element).css("width",a),c&&c())}})});steal.executed("app/view/component/loadingBar.js");
steal("jquery/model","app/model/category.js","app/model/secret.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Favorite",{validateRules:{user_id:[],foreign_model:[],foreign_id:[]},attributes:{id:"string",user_id:"string",foreign_model:"string",foreign_id:"string"},create:function(a,b,c){var d=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"/favorites/"+a.foreign_model.toLowerCase()+"/"+a.foreign_id,type:"POST",
params:d,success:b,error:c}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,self)]);return b})},destroy:function(a,b,c){return mad.net.Ajax.request({url:APP_URL+"/favorites/"+a,type:"DELETE",params:{id:a},success:b,error:c})}},{})});steal.executed("app/model/favorite.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_app_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div id="js_app_loading_bar" class="update-loading-bar">\n\t<div class="progress-bar">\n\t\t<span style="width:0%"></span>\n\t</div>\n</div>\n<div class="notification-container">\n    <div id="js_app_notificator" class="notification col2_3 push_1">\n    </div>\n</div>\n<div class="header first">\n    <nav>\n        <div class="primary navigation top">\n            <ul id="js_app_navigation_left" class="left">\n            </ul>\n            <ul id="js_app_navigation_right" class="right">\n            </ul>\n        </div>\n    </nav>\n</div>\n<div class="header second">\n    <div class="col1">\n        <div class="logo">\n            <img src="img/logo/acme.png" alt="passbolt"/>\n        </div>\n    </div>\n    <div class="col2 search-wrapper">\n        <div id="js_app_filter">\n        </div>\n    </div>\n    <div class="col3 profile-wrapper">\n        <div class="user profile dropdown">\n            <div class="center-cell-wrapper todo">\n                <div class="details center-cell">\n                    <span class="name">Mr Splashy Pants</span>\n                    <span class="email">splashy@passbolt.com</span>\n                </div>\n            </div>\n            <div class="picture left-cell">\n                <img src="img/user.png" alt="your picture"/>\n            </div>\n            <div class="more right-cell">\n                <a href="#" data-dropdown-content-id="cc1d4fae-7dec-11d0-a765-00a0c91e6bf6"><span>more</span></a>\n            </div>\n            <div class="dropdown-content right" id="cc1d4fae-7dec-11d0-a765-00a0c91e6bf6">\n                <ul>\n                    <li>\n                        <a href="#">my profile</a>\n                    </li>\n                    <li>\n                        <a href="#">manage or generate new keys</a>\n                    </li>\n                    <li>\n                        <a href="#" class="separator">manage people</a>\n                    </li>\n                    <li>\n                        <a href="#">logout</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="header third">\n\t\n\t<div class="col1 workspace-title-wrapper">\n\t\t<h1 class="workspace-title">Passwords</h1>\n\t</div>\n\t\n\t<div class="col2_3 actions-wrapper">\n\t\t<ul id="js_wsp_primary_menu" class="actions">\n\t\t</ul>\n\t\t<ul id="js_wsp_secondary_menu" class="actions secondary">\n\t\t</ul>\n\t</div>\n\t\n</div>\n<div id="js_app_panel_main" class="panel main">\n</div>\n<div class="footer">\n    <span class="copyright">');d.push(a.view.txt(0,
"span",0,this,function(){return mad.Config.read("app.copyright")}));d.push('</span> &bullet;\n    <span class="version">');d.push(a.view.txt(1,"span",0,this,function(){return mad.Config.read("app.version.number")}));d.push("</span>\n</div>\n");return d.join("")}}))});steal.executed("app/view/template/app.ejs");
steal("jquery/class").then(function(){mad.net.ResponseHandler.extend("passbolt.net.ResponseHandler",{},{_success:function(){switch(this.request.type.toUpperCase()){case "POST":case "PUT":case "DELETE":mad.bus&&mad.bus.trigger("passbolt_notify",{status:this.response.getStatus(),title:this.response.getMessage()})}this._super()},_error:function(){this.response.getStatus()==mad.net.Response.STATUS_ERROR&&this.response.getMessage()==__("You need to login to access this location")?location.href=mad.Config.read("app.url"):
this.response.attr("header").title=this.response.getMessage();this._super()}})});steal.executed("app/net/responseHandler.js");steal.popPending();

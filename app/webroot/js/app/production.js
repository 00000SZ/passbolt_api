steal.packages({});
steal.has("stealconfig.js","app/passbolt.js","lib/mad/mad.js","lib/jquerypp/class/class.js","lib/can/construct/construct.js","lib/can/util/string/string.js","lib/can/util/util.js","lib/can/util/jquery/jquery.js","lib/can/util/can.js","lib/can/util/array/each.js","lib/can/construct/proxy/proxy.js","lib/can/construct/super/super.js","lib/mad/core/class.js","lib/jquerypp/lang/string/string.js","lib/jquerypp/controller/controller.js","lib/can/control/control.js","lib/can/control/plugin/plugin.js","lib/jquerypp/model/model.js",
"lib/can/model/model.js","lib/can/observe/observe.js","lib/can/util/bind/bind.js","lib/can/observe/attributes/attributes.js","lib/can/observe/setter/setter.js","lib/can/observe/elements/elements.js","lib/jquerypp/view/ejs/ejs.js","lib/jquerypp/view/view.js","lib/can/view/view.js","lib/can/view/modifiers/modifiers.js","lib/can/view/ejs/ejs.js","lib/can/observe/compute/compute.js","lib/can/view/scanner.js","lib/can/view/elements.js","lib/can/view/render.js","lib/can/view/live.js","lib/can/view/node_lists.js",
"lib/mad/controller/controller.js","lib/mad/route/extensionControllerActionDispatcher.js","lib/mad/route/dispatcherInterface.js","lib/mad/helper/routeHelper.js","lib/mad/model/model.js","lib/mad/model/list.js","lib/mad/model/serializer/cakeSerializer.js","lib/mad/model/serializer/serializer.js","lib/mad/model/attribute.js","lib/mad/view/view.js","lib/mad/event/eventable.js","lib/mad/bootstrap/appBootstrap.js","lib/jquerypp/dom/route/route.js","lib/can/route/route.js","lib/can/util/string/deparam/deparam.js",
"lib/mad/bootstrap/bootstrapInterface.js","lib/mad/event/eventBus.js","lib/mad/devel/devel.js","lib/mad/controller/componentController.js","lib/mad/helper/controllerHelper.js","lib/mad/devel/components/develSidebarController.js","lib/mad/devel/components/componentsBrowserController.js","lib/mad/controller/component/gridController.js","lib/mad/model/grid/column.js","lib/mad/view/component/grid.js","lib/mad/view/template/component/grid.ejs","lib/mad/object/map.js","lib/mad/core/singleton.js","lib/mad/view/template/component/grid/gridItem.ejs",
"lib/mad/view/template/devel/develSidebar.ejs","lib/mad/helper/htmlHelper.js","lib/mad/config/config.js","lib/mad/error/exception.js","lib/mad/error/callAbstractFunctionException.js","lib/mad/error/callInterfaceConstructorException.js","lib/mad/error/callInterfaceFunctionException.js","lib/mad/error/callPrivateFunctionException.js","lib/mad/error/missingOptionException.js","lib/mad/error/missingParameterException.js","lib/mad/error/noConstructorException.js","lib/mad/error/templateMissingException.js",
"lib/mad/error/wrongParametersException.js","lib/mad/error/wrongConfigException.js","lib/mad/error/errorHandler.js","lib/mad/controller/appController.js","lib/mad/view/template/app.ejs","lib/mad/controller/component/buttonController.js","lib/mad/view/template/component/button.ejs","lib/mad/controller/component/buttonDropdownController.js","lib/mad/view/component/buttonDropdown.js","lib/mad/view/template/component/buttonDropdown.ejs","lib/mad/controller/component/compositeController.js","lib/mad/controller/component/dialogController.js",
"lib/mad/controller/component/freeCompositeController.js","lib/mad/view/template/component/workspace.ejs","lib/mad/view/component/dialog.js","lib/mad/view/template/component/dialog.ejs","lib/mad/controller/component/contextualMenuController.js","lib/mad/controller/component/dropDownMenuController.js","lib/mad/controller/component/menuController.js","lib/mad/controller/component/treeController.js","lib/mad/view/component/tree.js","lib/mad/view/template/component/tree.ejs","lib/mad/view/template/component/tree/treeItem.ejs",
"lib/mad/view/template/component/menu/menuItem.ejs","lib/mad/model/action.js","lib/mad/model/state.js","lib/mad/view/component/menu/dropDownMenu.js","lib/mad/view/template/component/menu/dropDownMenu.ejs","lib/mad/view/component/menu/contextualMenu.js","lib/mad/controller/component/tabController.js","lib/mad/view/component/tab.js","lib/mad/view/template/component/tab.ejs","lib/mad/controller/component/toggleButtonController.js","lib/mad/controller/component/dynamicTreeController.js","lib/mad/view/component/tree/dynamicTree.js",
"lib/mad/view/template/component/tree/dynamicTree.ejs","lib/mad/crypto/random.js","lib/mad/event/event.js","lib/mad/form/feedbackController.js","lib/mad/form/formElement.js","lib/mad/view/form/formElementView.js","lib/mad/form/formController.js","lib/mad/view/form/formView.js","lib/mad/form/formChoiceElement.js","lib/mad/form/element/autocompleteController.js","lib/mad/form/element/textboxController.js","lib/mad/view/form/element/textboxView.js","lib/mad/view/form/element/autocompleteView.js","lib/mad/form/element/checkboxController.js",
"lib/mad/view/form/element/checkboxView.js","lib/mad/view/template/form/element/checkbox.ejs","lib/mad/form/element/dateController.js","lib/mad/view/form/element/dateView.js","lib/mad/view/template/component/input.ejs","lib/mad/form/element/dropdownController.js","lib/mad/view/form/element/dropdownView.js","lib/mad/view/template/form/element/dropdown.ejs","lib/mad/form/element/freeElementController.js","lib/mad/form/element/radiobuttonController.js","lib/mad/view/form/element/radiobuttonView.js",
"lib/mad/view/template/form/element/radiobutton.ejs","lib/mad/helper/componentHelper.js","lib/mad/helper/component/boxDecorator.js","lib/mad/view/template/component/decorator/box.ejs","lib/mad/lang/i18n.js","lib/mad/model/validationRules.js","lib/mad/net/ajax.js","lib/mad/net/response.js","lib/mad/net/responseHandler.js","lib/mad/string/uuid.js","lib/mad/route/routeListener.js","app/bootstrap/appBootstrap.js","app/helper/errorHandler.js","app/controller/appController.js","app/controller/settingsWorkspaceController.js",
"app/controller/component/settingsMenuController.js","app/controller/component/settingsBreadcrumbController.js","app/view/template/component/breadcrumb/breadcrumb.ejs","app/view/template/component/breadcrumb/breadcrumbItem.ejs","app/controller/component/profileController.js","app/controller/component/keysController.js","app/model/gpgkey.js","app/model/user.js","app/model/profile.js","app/model/imageStorage.js","app/controller/form/user/createFormController.js","app/controller/component/secretStrengthController.js",
"app/model/secret.js","app/model/secretStrength.js","app/view/template/component/secret/secretStrength.ejs","app/view/template/form/user/createForm.ejs","app/controller/form/user/passwordFormController.js","app/view/template/form/user/passwordForm.ejs","app/controller/form/user/avatarFormController.js","app/view/template/form/user/avatarForm.ejs","app/view/template/settingsWorkspace.ejs","app/controller/component/passwordWorkspaceMenuController.js","app/view/template/component/passwordWorkspaceMenu.ejs",
"app/controller/passwordWorkspaceController.js","app/controller/component/passwordBreadcrumbController.js","app/model/category.js","app/controller/component/categoryActionsTabController.js","app/controller/component/permissionsController.js","app/view/component/permissions.js","app/view/template/component/permissions.ejs","app/model/group.js","app/model/permission.js","app/model/permissionType.js","app/view/template/form/permission/addForm.ejs","app/view/template/component/permission/permissionListItem.ejs",
"app/controller/component/categoryChooserController.js","app/view/component/categoryChooser.js","lib/jquerypp/event/drop/drop.js","lib/jquerypp/event/drag/core/core.js","lib/jquerypp/lang/vector/vector.js","lib/jquerypp/event/livehack/livehack.js","lib/jquerypp/event/reverse/reverse.js","lib/jquerypp/dom/within/within.js","lib/jquerypp/dom/compare/compare.js","app/model/categoryResource.js","app/controller/component/passwordBrowserController.js","app/model/resource.js","app/model/itemTag.js","app/model/tag.js",
"app/controller/component/copyLoginButtonController.js","app/controller/component/copySecretButtonController.js","app/controller/component/favoriteController.js","app/view/component/favorite.js","app/view/template/component/favorite.ejs","app/view/component/passwordBrowser.js","lib/jquerypp/event/drag/drag.js","lib/jquerypp/event/drag/step/step.js","lib/jquerypp/dom/styles/styles.js","lib/jquerypp/event/drag/limit/limit.js","lib/jquerypp/event/drag/scroll/scroll.js","app/view/template/component/resource/draggedResource.ejs",
"app/controller/component/resourceActionsTabController.js","app/controller/component/resourceDetailsController.js","app/view/component/resourceDetails.js","app/controller/component/commentsController.js","app/model/comment.js","app/view/component/comments.js","app/view/template/component/comments.ejs","app/controller/component/commentsListController.js","app/view/component/commentsList.js","app/controller/form/comment/createFormController.js","app/view/template/form/comment/addForm.ejs","app/controller/component/sidebarSectionController.js",
"app/controller/component/sidebarSections/sidebarSectionTagsController.js","app/view/component/sidebarSection/sidebarSectionTags.js","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionTags.ejs","app/controller/component/tagsController.js","app/controller/component/tagsListController.js","app/view/template/component/tag/tagItem.ejs","app/controller/form/tag/editFormController.js","app/view/template/form/tag/editForm.ejs","app/view/template/component/tags.ejs",
"app/controller/component/sidebarSections/sidebarSectionDescriptionController.js","app/controller/form/resource/editDescriptionFormController.js","app/view/template/form/resource/editDescriptionForm.ejs","app/view/component/sidebarSection/sidebarSectionDescription.js","app/view/template/component/sidebarSection/sidebarSectionDescription.ejs","app/view/template/component/resourceDetails.ejs","app/controller/component/resourceShortcutsController.js","app/controller/component/workspaceSecondaryMenuController.js",
"app/view/template/component/workspaceSecondaryMenu.ejs","app/controller/form/category/createFormController.js","app/view/template/form/category/createForm.ejs","app/controller/form/resource/createFormController.js","app/controller/form/secret/createFormController.js","app/view/template/form/resource/createForm.ejs","app/model/filter.js","app/view/template/passwordWorkspace.ejs","app/controller/peopleWorkspaceController.js","app/controller/component/peopleBreadcrumbController.js","app/controller/component/groupChooserController.js",
"app/view/component/groupChooser.js","app/model/groupUser.js","app/controller/component/userBrowserController.js","app/view/component/userBrowser.js","app/view/template/component/user/draggedUser.ejs","app/controller/component/userShortcutsController.js","app/controller/component/userDetailsController.js","app/view/component/userDetails.js","app/view/template/component/userDetails.ejs","app/controller/form/group/createFormController.js","app/view/template/form/group/createForm.ejs","app/controller/component/peopleWorkspaceMenuController.js",
"app/view/template/component/peopleWorkspaceMenu.ejs","app/controller/component/settingsWorkspaceMenuController.js","app/view/template/component/settingsWorkspaceMenu.ejs","app/controller/component/appNavigationLeftController.js","app/controller/component/appNavigationRightController.js","app/controller/component/appFilterController.js","lib/mad/form/element/listController.js","app/view/component/appFilter.js","app/view/template/component/appFilter.ejs","app/controller/component/profileDropdownController.js",
"app/view/template/component/profileDropdown.ejs","app/controller/component/notificationController.js","app/model/notification.js","app/view/component/notification.js","app/view/template/component/notification.ejs","app/controller/component/loadingBarController.js","app/view/component/loadingBar.js","app/model/favorite.js","app/view/template/app.ejs","app/net/responseHandler.js");
steal("stealconfig.js","app/passbolt.js","lib/mad/mad.js","lib/jquerypp/class/class.js","lib/can/construct/construct.js","lib/can/util/string/string.js","lib/can/util/util.js","lib/can/util/jquery/jquery.js","lib/can/util/can.js","lib/can/util/array/each.js","lib/can/construct/proxy/proxy.js","lib/can/construct/super/super.js","lib/mad/core/class.js","lib/jquerypp/lang/string/string.js","lib/jquerypp/controller/controller.js","lib/can/control/control.js","lib/can/control/plugin/plugin.js","lib/jquerypp/model/model.js",
"lib/can/model/model.js","lib/can/observe/observe.js","lib/can/util/bind/bind.js","lib/can/observe/attributes/attributes.js","lib/can/observe/setter/setter.js","lib/can/observe/elements/elements.js","lib/jquerypp/view/ejs/ejs.js","lib/jquerypp/view/view.js","lib/can/view/view.js","lib/can/view/modifiers/modifiers.js","lib/can/view/ejs/ejs.js","lib/can/observe/compute/compute.js","lib/can/view/scanner.js","lib/can/view/elements.js","lib/can/view/render.js","lib/can/view/live.js","lib/can/view/node_lists.js",
"lib/mad/controller/controller.js","lib/mad/route/extensionControllerActionDispatcher.js","lib/mad/route/dispatcherInterface.js","lib/mad/helper/routeHelper.js","lib/mad/model/model.js","lib/mad/model/list.js","lib/mad/model/serializer/cakeSerializer.js","lib/mad/model/serializer/serializer.js","lib/mad/model/attribute.js","lib/mad/view/view.js","lib/mad/event/eventable.js","lib/mad/bootstrap/appBootstrap.js","lib/jquerypp/dom/route/route.js","lib/can/route/route.js","lib/can/util/string/deparam/deparam.js",
"lib/mad/bootstrap/bootstrapInterface.js","lib/mad/event/eventBus.js","lib/mad/devel/devel.js","lib/mad/controller/componentController.js","lib/mad/helper/controllerHelper.js","lib/mad/devel/components/develSidebarController.js","lib/mad/devel/components/componentsBrowserController.js","lib/mad/controller/component/gridController.js","lib/mad/model/grid/column.js","lib/mad/view/component/grid.js","lib/mad/view/template/component/grid.ejs","lib/mad/object/map.js","lib/mad/core/singleton.js","lib/mad/view/template/component/grid/gridItem.ejs",
"lib/mad/view/template/devel/develSidebar.ejs","lib/mad/helper/htmlHelper.js","lib/mad/config/config.js","lib/mad/error/exception.js","lib/mad/error/callAbstractFunctionException.js","lib/mad/error/callInterfaceConstructorException.js","lib/mad/error/callInterfaceFunctionException.js","lib/mad/error/callPrivateFunctionException.js","lib/mad/error/missingOptionException.js","lib/mad/error/missingParameterException.js","lib/mad/error/noConstructorException.js","lib/mad/error/templateMissingException.js",
"lib/mad/error/wrongParametersException.js","lib/mad/error/wrongConfigException.js","lib/mad/error/errorHandler.js","lib/mad/controller/appController.js","lib/mad/view/template/app.ejs","lib/mad/controller/component/buttonController.js","lib/mad/view/template/component/button.ejs","lib/mad/controller/component/buttonDropdownController.js","lib/mad/view/component/buttonDropdown.js","lib/mad/view/template/component/buttonDropdown.ejs","lib/mad/controller/component/compositeController.js","lib/mad/controller/component/dialogController.js",
"lib/mad/controller/component/freeCompositeController.js","lib/mad/view/template/component/workspace.ejs","lib/mad/view/component/dialog.js","lib/mad/view/template/component/dialog.ejs","lib/mad/controller/component/contextualMenuController.js","lib/mad/controller/component/dropDownMenuController.js","lib/mad/controller/component/menuController.js","lib/mad/controller/component/treeController.js","lib/mad/view/component/tree.js","lib/mad/view/template/component/tree.ejs","lib/mad/view/template/component/tree/treeItem.ejs",
"lib/mad/view/template/component/menu/menuItem.ejs","lib/mad/model/action.js","lib/mad/model/state.js","lib/mad/view/component/menu/dropDownMenu.js","lib/mad/view/template/component/menu/dropDownMenu.ejs","lib/mad/view/component/menu/contextualMenu.js","lib/mad/controller/component/tabController.js","lib/mad/view/component/tab.js","lib/mad/view/template/component/tab.ejs","lib/mad/controller/component/toggleButtonController.js","lib/mad/controller/component/dynamicTreeController.js","lib/mad/view/component/tree/dynamicTree.js",
"lib/mad/view/template/component/tree/dynamicTree.ejs","lib/mad/crypto/random.js","lib/mad/event/event.js","lib/mad/form/feedbackController.js","lib/mad/form/formElement.js","lib/mad/view/form/formElementView.js","lib/mad/form/formController.js","lib/mad/view/form/formView.js","lib/mad/form/formChoiceElement.js","lib/mad/form/element/autocompleteController.js","lib/mad/form/element/textboxController.js","lib/mad/view/form/element/textboxView.js","lib/mad/view/form/element/autocompleteView.js","lib/mad/form/element/checkboxController.js",
"lib/mad/view/form/element/checkboxView.js","lib/mad/view/template/form/element/checkbox.ejs","lib/mad/form/element/dateController.js","lib/mad/view/form/element/dateView.js","lib/mad/view/template/component/input.ejs","lib/mad/form/element/dropdownController.js","lib/mad/view/form/element/dropdownView.js","lib/mad/view/template/form/element/dropdown.ejs","lib/mad/form/element/freeElementController.js","lib/mad/form/element/radiobuttonController.js","lib/mad/view/form/element/radiobuttonView.js",
"lib/mad/view/template/form/element/radiobutton.ejs","lib/mad/helper/componentHelper.js","lib/mad/helper/component/boxDecorator.js","lib/mad/view/template/component/decorator/box.ejs","lib/mad/lang/i18n.js","lib/mad/model/validationRules.js","lib/mad/net/ajax.js","lib/mad/net/response.js","lib/mad/net/responseHandler.js","lib/mad/string/uuid.js","lib/mad/route/routeListener.js","app/bootstrap/appBootstrap.js","app/helper/errorHandler.js","app/controller/appController.js","app/controller/settingsWorkspaceController.js",
"app/controller/component/settingsMenuController.js","app/controller/component/settingsBreadcrumbController.js","app/view/template/component/breadcrumb/breadcrumb.ejs","app/view/template/component/breadcrumb/breadcrumbItem.ejs","app/controller/component/profileController.js","app/controller/component/keysController.js","app/model/gpgkey.js","app/model/user.js","app/model/profile.js","app/model/imageStorage.js","app/controller/form/user/createFormController.js","app/controller/component/secretStrengthController.js",
"app/model/secret.js","app/model/secretStrength.js","app/view/template/component/secret/secretStrength.ejs","app/view/template/form/user/createForm.ejs","app/controller/form/user/passwordFormController.js","app/view/template/form/user/passwordForm.ejs","app/controller/form/user/avatarFormController.js","app/view/template/form/user/avatarForm.ejs","app/view/template/settingsWorkspace.ejs","app/controller/component/passwordWorkspaceMenuController.js","app/view/template/component/passwordWorkspaceMenu.ejs",
"app/controller/passwordWorkspaceController.js","app/controller/component/passwordBreadcrumbController.js","app/model/category.js","app/controller/component/categoryActionsTabController.js","app/controller/component/permissionsController.js","app/view/component/permissions.js","app/view/template/component/permissions.ejs","app/model/group.js","app/model/permission.js","app/model/permissionType.js","app/view/template/form/permission/addForm.ejs","app/view/template/component/permission/permissionListItem.ejs",
"app/controller/component/categoryChooserController.js","app/view/component/categoryChooser.js","lib/jquerypp/event/drop/drop.js","lib/jquerypp/event/drag/core/core.js","lib/jquerypp/lang/vector/vector.js","lib/jquerypp/event/livehack/livehack.js","lib/jquerypp/event/reverse/reverse.js","lib/jquerypp/dom/within/within.js","lib/jquerypp/dom/compare/compare.js","app/model/categoryResource.js","app/controller/component/passwordBrowserController.js","app/model/resource.js","app/model/itemTag.js","app/model/tag.js",
"app/controller/component/copyLoginButtonController.js","app/controller/component/copySecretButtonController.js","app/controller/component/favoriteController.js","app/view/component/favorite.js","app/view/template/component/favorite.ejs","app/view/component/passwordBrowser.js","lib/jquerypp/event/drag/drag.js","lib/jquerypp/event/drag/step/step.js","lib/jquerypp/dom/styles/styles.js","lib/jquerypp/event/drag/limit/limit.js","lib/jquerypp/event/drag/scroll/scroll.js","app/view/template/component/resource/draggedResource.ejs",
"app/controller/component/resourceActionsTabController.js","app/controller/component/resourceDetailsController.js","app/view/component/resourceDetails.js","app/controller/component/commentsController.js","app/model/comment.js","app/view/component/comments.js","app/view/template/component/comments.ejs","app/controller/component/commentsListController.js","app/view/component/commentsList.js","app/controller/form/comment/createFormController.js","app/view/template/form/comment/addForm.ejs","app/controller/component/sidebarSectionController.js",
"app/controller/component/sidebarSections/sidebarSectionTagsController.js","app/view/component/sidebarSection/sidebarSectionTags.js","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionTags.ejs","app/controller/component/tagsController.js","app/controller/component/tagsListController.js","app/view/template/component/tag/tagItem.ejs","app/controller/form/tag/editFormController.js","app/view/template/form/tag/editForm.ejs","app/view/template/component/tags.ejs",
"app/controller/component/sidebarSections/sidebarSectionDescriptionController.js","app/controller/form/resource/editDescriptionFormController.js","app/view/template/form/resource/editDescriptionForm.ejs","app/view/component/sidebarSection/sidebarSectionDescription.js","app/view/template/component/sidebarSection/sidebarSectionDescription.ejs","app/view/template/component/resourceDetails.ejs","app/controller/component/resourceShortcutsController.js","app/controller/component/workspaceSecondaryMenuController.js",
"app/view/template/component/workspaceSecondaryMenu.ejs","app/controller/form/category/createFormController.js","app/view/template/form/category/createForm.ejs","app/controller/form/resource/createFormController.js","app/controller/form/secret/createFormController.js","app/view/template/form/resource/createForm.ejs","app/model/filter.js","app/view/template/passwordWorkspace.ejs","app/controller/peopleWorkspaceController.js","app/controller/component/peopleBreadcrumbController.js","app/controller/component/groupChooserController.js",
"app/view/component/groupChooser.js","app/model/groupUser.js","app/controller/component/userBrowserController.js","app/view/component/userBrowser.js","app/view/template/component/user/draggedUser.ejs","app/controller/component/userShortcutsController.js","app/controller/component/userDetailsController.js","app/view/component/userDetails.js","app/view/template/component/userDetails.ejs","app/controller/form/group/createFormController.js","app/view/template/form/group/createForm.ejs","app/controller/component/peopleWorkspaceMenuController.js",
"app/view/template/component/peopleWorkspaceMenu.ejs","app/controller/component/settingsWorkspaceMenuController.js","app/view/template/component/settingsWorkspaceMenu.ejs","app/controller/component/appNavigationLeftController.js","app/controller/component/appNavigationRightController.js","app/controller/component/appFilterController.js","lib/mad/form/element/listController.js","app/view/component/appFilter.js","app/view/template/component/appFilter.ejs","app/controller/component/profileDropdownController.js",
"app/view/template/component/profileDropdown.ejs","app/controller/component/notificationController.js","app/model/notification.js","app/view/component/notification.js","app/view/template/component/notification.ejs","app/controller/component/loadingBarController.js","app/view/component/loadingBar.js","app/model/favorite.js","app/view/template/app.ejs","app/net/responseHandler.js");steal.pushPending();
steal.config({map:{"*":{"jquerypp/":"lib/jquerypp/","jquery/jquery.js":"jquery","can/":"lib/can/","can/util/util.js":"can/util/jquery/jquery.js","jquery/":"lib/jquerypp/","mad/":"lib/mad/"}},paths:{"mad/":"lib/mad/","jquery/":"jquerypp/",jquery:"lib/can/lib/jquery.1.8.3.js"},shim:{jquery:{exports:"jQuery",packaged:!1}},ext:{js:"js",css:"css",less:"steal/less/less.js",coffee:"steal/coffee/coffee.js",ejs:"can/view/ejs/ejs.js",mustache:"can/view/mustache/mustache.js"}});steal.executed("stealconfig.js");
steal("mad/mad.js").then("app/bootstrap/appBootstrap.js","app/controller/appController.js","app/net/responseHandler.js").then(function(){$(document).ready(function(){new passbolt.bootstrap.AppBootstrap({config:["app/config/config.json"]})})});steal.executed("app/passbolt.js");
steal("jquery/class","mad/core/class.js").then("jquery/controller","jquery/model","jquery/view/ejs","mad/controller","mad/model","mad/model/attribute.js","mad/view").then("mad/bootstrap/appBootstrap.js","mad/config/config.js","mad/error/exception.js","mad/error/errorHandler.js","mad/controller/appController.js","mad/controller/componentController.js","mad/controller/component/buttonController.js","mad/controller/component/buttonDropdownController.js","mad/controller/component/compositeController.js",
"mad/controller/component/dialogController.js","mad/controller/component/freeCompositeController.js","mad/controller/component/gridController.js","mad/controller/component/contextualMenuController.js","mad/controller/component/dropDownMenuController.js","mad/controller/component/menuController.js","mad/controller/component/tabController.js","mad/controller/component/toggleButtonController.js","mad/controller/component/treeController.js","mad/controller/component/dynamicTreeController.js","mad/core/singleton.js",
"mad/crypto/random.js","mad/event/event.js","mad/event/eventBus.js","mad/form/feedbackController.js","mad/form/formController.js","mad/form/formElement.js","mad/form/formChoiceElement.js","mad/form/element/autocompleteController.js","mad/form/element/checkboxController.js","mad/form/element/dateController.js","mad/form/element/dropdownController.js","mad/form/element/freeElementController.js","mad/form/element/radiobuttonController.js","mad/form/element/textboxController.js","mad/helper/controllerHelper.js",
"mad/helper/htmlHelper.js","mad/helper/routeHelper.js","mad/helper/componentHelper.js","mad/helper/component/boxDecorator.js","mad/lang/i18n.js","mad/model/action.js","mad/model/state.js","mad/model/validationRules.js","mad/net/ajax.js","mad/object/map.js","mad/string/uuid.js","mad/route/routeListener.js","mad/route/dispatcherInterface.js","mad/route/extensionControllerActionDispatcher.js");steal.executed("lib/mad/mad.js");
steal("jquery","can/construct","can/construct/proxy","can/construct/super",function(a,c){a.Class=c})();steal.executed("lib/jquerypp/class/class.js");
steal("can/util/string",function(a){var c=0;a.Construct=function(){if(arguments.length)return a.Construct.extend.apply(a.Construct,arguments)};a.extend(a.Construct,{constructorExtends:!0,newInstance:function(){var a=this.instance(),b;a.setup&&(b=a.setup.apply(a,arguments));a.init&&a.init.apply(a,b||arguments);return a},_inherit:function(c,b,e){a.extend(e||c,c||{})},_overwrite:function(a,b,c,f){a[c]=f},setup:function(c){this.defaults=a.extend(!0,{},c.defaults,this.defaults)},instance:function(){c=
1;var a=new this;c=0;return a},extend:function(d,b,e){function f(){if(!c)return this.constructor!==f&&arguments.length&&f.constructorExtends?arguments.callee.extend.apply(arguments.callee,arguments):f.newInstance.apply(f,arguments)}"string"!=typeof d&&(e=b,b=d,d=null);e||(e=b,b=null);var e=e||{},g=this.prototype,h,k,l,o;o=this.instance();a.Construct._inherit(e,g,o);for(h in this)this.hasOwnProperty(h)&&(f[h]=this[h]);a.Construct._inherit(b,this,f);if(d){l=d.split(".");k=l.pop();l=g=a.getObject(l.join("."),
window,!0);var m=a.underscore(d.replace(/\./g,"_")),n=a.underscore(k);g[k]=f}a.extend(f,{constructor:f,prototype:o,namespace:l,_shortName:n,fullName:d,_fullName:m});void 0!==k&&(f.shortName=k);f.prototype.constructor=f;k=[this].concat(a.makeArray(arguments));o=f.setup.apply(f,k);f.init&&f.init.apply(f,o||k);return f}});a.Construct.prototype.setup=function(){};a.Construct.prototype.init=function(){};return a.Construct});steal.executed("lib/can/construct/construct.js");
steal("can/util",function(a){var c=/\=\=/,d=/([A-Z]+)([A-Z][a-z])/g,b=/([a-z\d])([A-Z])/g,e=/([a-z\d])([A-Z])/g,f=/\{([^\}]+)\}/g,g=/"/g,h=/'/g,k=function(a,b,c){var d=a[b];void 0===d&&!0===c&&(d=a[b]={});return d},l=function(a){return/^f|^o/.test(typeof a)};a.extend(a,{esc:function(a){return(""+(null===a||void 0===a||isNaN(a)&&"NaN"===""+a?"":a)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(g,"&#34;").replace(h,"&#39;")},getObject:function(b,c,d,e){var b=b?b.split("."):
[],f=b.length,g,h=0,p,v,x,c=a.isArray(c)?c:[c||window];x=c.length;if(!f)return c[0];for(h;h<x;h++){g=c[h];v=void 0;for(p=0;p<f&&l(g);p++)v=g,g=k(v,b[p]);if(void 0!==v&&void 0!==g)break}!1===d&&void 0!==g&&delete v[b[p-1]];if(!0===d&&void 0===g){g=c[0];for(p=0;p<f&&l(g);p++)g=k(g,b[p],!0)}if(!0===d&&"undefined"!=typeof e){g=c[0];v=void 0;for(p=0;p<f&&l(g);p++)v=g,g=k(g,b[p],!0);v[b[p-1]]=e}return g},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},underscore:function(a){return a.replace(c,
"/").replace(d,"$1_$2").replace(b,"$1_$2").replace(e,"_").toLowerCase()},sub:function(b,c,d){var e=[];e.push((b||"").replace(f,function(b,f){var g=a.getObject(f,c,!0===d?!1:void 0);return void 0===g||null===g?(e=null,""):l(g)&&e?(e.push(g),""):""+g}));return null===e?e:1>=e.length?e[0]:e},replacer:f,undHash:/_|-/});return a});steal.executed("lib/can/util/string/string.js");steal("can/util/jquery",function(a){return a});steal.executed("lib/can/util/util.js");
steal("jquery","can/util/can.js","can/util/array/each.js",function(a,c){a.extend(c,a,{trigger:function(b,c,d){b.trigger?b.trigger(c,d):a.event.trigger(c,d,b,!0)},addEvent:function(b,c){a([this]).bind(b,c);return this},removeEvent:function(b,c){a([this]).unbind(b,c);return this},buildFragment:function(b,c){var d=a.buildFragment,b=[b],c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d=d.call(jQuery,b,c);return d.cacheable?a.clone(d.fragment):d.fragment||d},$:a,each:c.each});a.each(["bind",
"unbind","undelegate","delegate"],function(b,d){c[d]=function(){var c=this[d]?this:a([this]);c[d].apply(c,arguments);return this}});a.each("append filter addClass remove data get".split(" "),function(a,d){c[d]=function(a){return a[d].apply(a,c.makeArray(arguments).slice(1))}});var d=a.cleanData;a.cleanData=function(b){a.each(b,function(a,b){b&&c.trigger(b,"destroyed",[],!1)});d(b)};return c});steal.executed("lib/can/util/jquery/jquery.js");
steal(function(){var a=window.can||{};if("undefined"===typeof GLOBALCAN||!1!==GLOBALCAN)window.can=a;a.isDeferred=function(a){var c=this.isFunction;return a&&c(a.then)&&c(a.pipe)};var c=0;a.cid=function(a,b){return a._cid?a._cid:a._cid=(b||"")+ ++c};a.VERSION="@EDGE";return a});steal.executed("lib/can/util/can.js");
steal("can/util/can.js",function(a){a.each=function(a,d,b){var e=0,f;if(a)if("number"===typeof a.length&&a.pop){a.attr&&a.attr("length");for(f=a.length;e<f&&!1!==d.call(b||a[e],a[e],e,a);e++);}else if(a.hasOwnProperty)for(f in a)if(a.hasOwnProperty(f)&&!1===d.call(b||a[f],a[f],f,a))break;return a};return a});steal.executed("lib/can/util/array/each.js");
steal("can/util","can/construct",function(a){var c=a.isArray,d=a.makeArray,b=function(a){var b=d(arguments),e,a=b.shift();c(a)||(a=[a]);e=this;return function(){for(var f=b.concat(d(arguments)),o,m=a.length,n=0,r;n<m;n++)if(r=a[n])o="string"==typeof r,f=(o?e[r]:r).apply(e,f||[]),n<m-1&&(f=!c(f)||f._use_call?[f]:f);return f}};a.Construct.proxy=a.Construct.prototype.proxy=b;for(var e=[a.Observe,a.Control,a.Model],f=0;f<e.length;f++)e[f]&&(e[f].proxy=b);return a});steal.executed("lib/can/construct/proxy/proxy.js");
steal("can/util","can/construct",function(a){var c=a.isFunction,d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;a.Construct._overwrite=function(a,e,f,g){a[f]=c(g)&&c(e[f])&&d.test(g)?function(a,b){return function(){var c=this._super,d;this._super=e[a];d=b.apply(this,arguments);this._super=c;return d}}(f,g):g};a.Construct._inherit=function(b,c,d){var d=d||b,g;for(g in b)a.Construct._overwrite(d,c,g,b[g])};return a});steal.executed("lib/can/construct/super/super.js");
steal("can/construct","jquery/lang/string").then(function(){can.Construct.prototype.decorate=function(a){var c=$.String.getObject(a),d=null;"undefined"==typeof this._decorator&&(this._decorator=[]);d=this._decorator.length;this._decorator[d]={name:a,f:{}};for(var b in c)"undefined"!=typeof this[b]?(this._decorator[d].f[b]=this[b],this[b]=function(a,b,d){return function(){var h=this._super,k;this._super=a._decorator[d].f[b];k=c[b].apply(a,arguments);this._super=h;return k}}(this,b,d)):this[b]=function(a,
b){return function(){return c[b].apply(a,arguments)}}(this,b,d);return this};can.Construct.prototype.getClass=function(){return this.constructor};can.Construct.augment=function(a){console.log(a);a=can.getObject(a);console.log(2);var c=["namespace","shortName","fullName","defaults"];console.log(3);for(var d in a)console.log(4),"undefined"==typeof can.Construct[d]&&-1==$.inArray(d,c)&&(console.log(5),this[d]=a[d]);console.log(51);c=["Class"];console.log(6);console.log(a);for(d in a.prototype)console.log(7),
"undefined"==typeof can.Construct.prototype[d]&&-1==$.inArray(d,c)&&(console.log(8),"init"==d?(console.log(9),"undefined"==typeof this.prototype.__inits&&(console.log(10),this.prototype.__inits=[],this.prototype.__inits.push(this.prototype[d]),console.log(11),this.prototype[d]=function(){return function(a,c,d){console.log(12);for(var g in this.__inits)this.__inits[g].apply(this,arguments)}}(this,"init")),console.log(13),this.prototype.__inits.push(a.prototype[d]),console.log(14)):(console.log(15),
this.prototype[d]=a.prototype[d]));console.log(16)}});steal.executed("lib/mad/core/class.js");
steal("jquery",function(a){var c={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},d=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},b,e=a.String=a.extend(a.String||{},{getObject:b=function(b,e,h){var b=b?b.split(c.dot):[],k=b.length,l,o,m,n=0,e=a.isArray(e)?e:[e||window];if(0==k)return e[0];for(;l=e[n++];){for(m=0;m<k-1&&d(l);m++)l=void 0!==l[b[m]]?l[b[m]]:h&&(l[b[m]]={});if(d(l)&&(o=void 0!==
l[b[m]]?l[b[m]]:h&&(l[b[m]]={}),void 0!==o))return!1===h&&delete l[b[m]],o}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){a=e.classize(a);return a.charAt(0).toLowerCase()+a.substr(1)},classize:function(a,b){for(var d=a.split(c.undHash),k=0;k<d.length;k++)d[k]=e.capitalize(d[k]);return d.join(b||"")},niceName:function(a){return e.classize(a," ")},underscore:function(a){return a.replace(c.colons,"/").replace(c.words,"$1_$2").replace(c.lowUp,"$1_$2").replace(c.dash,
"_").toLowerCase()},sub:function(a,e,h){var k=[],h="boolean"==typeof h?!h:h;k.push(a.replace(c.replacer,function(a,c){var f=b(c,e,h);return d(f)?(k.push(f),""):""+f}));return 1>=k.length?k[0]:k},_regs:c});return a});steal.executed("lib/jquerypp/lang/string/string.js");
steal("jquery","can/control","jquerypp/class","can/control/plugin",function(a,c){a.Controller=c;a.fn.controller=a.fn.control;a.fn.controllers=a.fn.controls;can.Control.prototype.find=can.Control.prototype.find||function(a){return this.element.find(a)};a.Controller.prototype.bind=a.Controller.prototype.on;a.Controller.prototype.delegate=a.Controller.prototype.on});steal.executed("lib/jquerypp/controller/controller.js");
steal("can/util","can/construct",function(a){var c=function(b,c,d){a.bind.call(b,c,d);return function(){a.unbind.call(b,c,d)}},d=a.isFunction,b=a.extend,e=a.each,f=[].slice,g=/\{([^\}]+)\}/g,h=a.getObject("$.event.special",[a])||{},k=function(b,c,d,e){a.delegate.call(b,c,d,e);return function(){a.undelegate.call(b,c,d,e)}},l,o=a.Control=a.Construct({setup:function(){a.Construct.setup.apply(this,arguments);if(a.Control){var b;this.actions={};for(b in this.prototype)this._isAction(b)&&(this.actions[b]=
this._action(b))}},_shifter:function(b,c){var e="string"==typeof c?b[c]:c;d(e)||(e=b[e]);return function(){b.called=c;return e.apply(b,[this.nodeName?a.$(this):this].concat(f.call(arguments,0)))}},_isAction:function(a){var b=this.prototype[a],c=typeof b;return"constructor"!==a&&("function"==c||"string"==c&&d(this.prototype[b]))&&!(!h[a]&&!m[a]&&!/[^\w]/.test(a))},_action:function(b,c){g.lastIndex=0;if(c||!g.test(b)){var d=c?a.sub(b,[c,window]):b;if(!d)return null;var e=a.isArray(d),f=e?d[1]:d,h=f.split(/\s+/g),
k=h.pop();return{processor:m[k]||l,parts:[f,h.join(" "),k],delegate:e?d[0]:void 0}}},processors:{},defaults:{}},{setup:function(c,d){var e=this.constructor,f=e.pluginName||e._fullName;this.element=a.$(c);f&&"can_control"!==f&&this.element.addClass(f);(f=a.data(this.element,"controls"))||a.data(this.element,"controls",f=[]);f.push(this);this.options=b({},e.defaults,d);this.on();return[this.element,this.options]},on:function(b,d,e,f){if(!b){this.off();var b=this.constructor,d=this._bindings,e=b.actions,
f=this.element,l=a.Control._shifter(this,"destroy"),g,h;for(g in e)if(e.hasOwnProperty(g)&&(h=e[g]||b._action(g,this.options)))d.push(h.processor(h.delegate||f,h.parts[2],h.parts[1],g,this));a.bind.call(f,"destroyed",l);d.push(function(b){a.unbind.call(b,"destroyed",l)});return d.length}"string"==typeof b&&(f=e,e=d,d=b,b=this.element);void 0===f&&(f=e,e=d,d=null);"string"==typeof f&&(f=a.Control._shifter(this,f));this._bindings.push(d?k(b,a.trim(d),e,f):c(b,e,f));return this._bindings.length},off:function(){var a=
this.element[0];e(this._bindings||[],function(b){b(a)});this._bindings=[]},destroy:function(){if(null!==this.element){var b=this.constructor,b=b.pluginName||b._fullName;this.off();b&&"can_control"!==b&&this.element.removeClass(b);b=a.data(this.element,"controls");b.splice(a.inArray(this,b),1);a.trigger(this,"destroyed");this.element=null}}}),m=a.Control.processors;l=function(b,d,e,f,l){f=a.Control._shifter(l,f);return e?k(b,a.trim(e),d,f):c(b,d,f)};e("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave touchstart touchmove touchcancel touchend touchleave".split(" "),
function(a){m[a]=l});return o});steal.executed("lib/can/control/control.js");
steal("jquery","can/util","can/control",function(a,c){var d,b=c.makeArray,e=c.Control.setup;c.Control.setup=function(){if(this!==c.Control){var a=this.pluginName||this._fullName;"can_control"!==a&&this.plugin(a);e.apply(this,arguments)}};a.fn.extend({controls:function(){var a=b(arguments),e=[],h,k;this.each(function(){if(h=c.$(this).data("controls"))for(var b=0;b<h.length;b++){k=h[b];var o;if(!(o=!a.length))a:{o=k;var m=a;for(d=0;d<m.length;d++)if("string"==typeof m[d]?o.constructor._shortName==m[d]:
o instanceof m[d]){o=!0;break a}o=!1}o&&e.push(k)}});return e},control:function(a){return this.controls.apply(this,arguments)[0]}});c.Control.plugin=function(d){var e=this;a.fn[d]||(a.fn[d]=function(d){var f=b(arguments),l="string"==typeof d&&a.isFunction(e.prototype[d]),o=f[0],m;this.each(function(){var a=c.$(this).control(e);a?l?m=a[o].apply(a,f.slice(1)):a.update.apply(a,f):e.newInstance.apply(e,[this].concat(f))});return void 0!==m?m:this})};c.Control.prototype.update=function(a){c.extend(this.options,
a);this.on()};return c});steal.executed("lib/can/control/plugin/plugin.js");steal("jquery","can/util","can/model","can/observe/attributes","can/observe/setter","can/observe/elements",function(a,c){a.Model=c.Model;var d=a.Model.prototype.__get;a.Model.prototype.__get=function(a){var e=a&&"get"+c.classize(a);return"function"===typeof this[e]?this[e]():d.apply(this,arguments)};a.Model.prototype.update=function(a,c,d){this.attr(a);return this.save(c,d)}});steal.executed("lib/jquerypp/model/model.js");
steal("can/util","can/observe",function(a){var c=function(b,c,d){var e=new a.Deferred;b.then(function(){var b=a.makeArray(arguments),f=!0;try{b[0]=c[d](b[0])}catch(g){f=!1,e.rejectWith(e,[g].concat(b))}f&&e.resolveWith(e,b)},function(){e.rejectWith(this,arguments)});"function"===typeof b.abort&&(e.abort=function(){return b.abort()});return e},d=0,b=function(b){a.Observe.__reading&&a.Observe.__reading(b,b.constructor.id);return b.__get(b.constructor.id)},e=function(c,d,e,f,g){var h;a.isArray(c)?(h=
c[1],c=c[0]):h=c.serialize();h=[h];var q=c.constructor,s;"destroy"==d&&h.shift();"create"!==d&&h.unshift(b(c));s=q[d].apply(q,h);h=s.pipe(function(a){c[g||d+"d"](a,s);return c});s.abort&&(h.abort=function(){s.abort()});h.then(e,f);return h},f={create:{url:"_shortName",type:"post"},update:{data:function(b,c){var c=c||{},d=this.id;c[d]&&c[d]!==b&&(c["new"+a.capitalize(b)]=c[d],delete c[d]);c[d]=b;return c},type:"put"},destroy:{type:"delete",data:function(a){var b={};b.id=b[this.id]=a;return b}},findAll:{url:"_shortName"},
findOne:{}},g=function(b,c){return function(d){var d=b.data?b.data.apply(this,arguments):d,e=c||this[b.url||"_url"],f=d,g=b.type||"get",h={};"string"==typeof e?(e=e.split(/\s+/),h.url=e.pop(),e.length&&(h.type=e.pop())):a.extend(h,e);h.data="object"==typeof f&&!a.isArray(f)?a.extend(h.data||{},f):f;h.url=a.sub(h.url,h.data,!0);return a.ajax(a.extend({type:g||"post",dataType:"json",success:void 0,error:void 0},h))}};a.Model=a.Observe({fullName:"can.Model",_reqs:0,setup:function(b){this.store={};a.Observe.setup.apply(this,
arguments);if(a.Model){this.List=h({Observe:this},{});var c=this,e=a.proxy(this._clean,c);a.each(f,function(d,f){a.isFunction(c[f])||(c[f]=g(d,c[f]));if(c["make"+a.capitalize(f)]){var h=c["make"+a.capitalize(f)](c[f]);a.Construct._overwrite(c,b,f,function(){a.Model._reqs++;var b=h.apply(this,arguments),c=b.then(e,e);c.abort=b.abort;return c})}});if("can.Model"==c.fullName||!c.fullName)c.fullName="Model"+ ++d;a.Model._reqs=0;this._url=this._shortName+"/{"+this.id+"}"}},_ajax:g,_makeRequest:e,_clean:function(b){a.Model._reqs--;
if(!a.Model._reqs)for(var c in this.store)this.store[c]._bindings||delete this.store[c];return b},models:function(b,c){a.Model._reqs++;if(b){if(b instanceof this.List)return b;var d=this,e=[],f=c instanceof a.Observe.List?c:new (d.List||h),g=a.isArray(b),q=b instanceof h,q=g?b:q?b.serialize():b.data;if("undefined"===typeof q)throw Error("Could not get any raw data while converting using .models");f.length&&f.splice(0);a.each(q,function(a){e.push(d.model(a))});f.push.apply(f,e);g||a.each(b,function(a,
b){"data"!==b&&f.attr(b,a)});setTimeout(a.proxy(this._clean,this),1);return f}},model:function(b){if(b){"function"===typeof b.serialize&&(b=b.serialize());var c=b[this.id],c=(c||0===c)&&this.store[c]?this.store[c].attr(b,this.removeAttr||!1):new this(b);a.Model._reqs&&(this.store[b[this.id]]=c);return c}}},{isNew:function(){var a=b(this);return!(a||0===a)},save:function(a,b){return e(this,this.isNew()?"create":"update",a,b)},destroy:function(b,c){if(this.isNew()){var d=this,f=a.Deferred();f.then(b,
c);return f.done(function(a){d.destroyed(a)}).resolve(d)}return e(this,"destroy",b,c,"destroyed")},_bindsetup:function(){this.constructor.store[this.__get(this.constructor.id)]=this;return a.Observe.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){delete this.constructor.store[b(this)];return a.Observe.prototype._bindteardown.apply(this,arguments)},___set:function(c,d){a.Observe.prototype.___set.call(this,c,d);c===this.constructor.id&&this._bindings&&(this.constructor.store[b(this)]=
this)}});a.each({makeFindAll:"models",makeFindOne:"model",makeCreate:"model",makeUpdate:"model"},function(b,d){a.Model[d]=function(d){return function(){var e=a.makeArray(arguments),f=a.isFunction(e[1])?e.splice(0,1):e.splice(0,2),f=c(d.apply(this,f),this,b);f.then(e[0],e[1]);return f}}});a.each(["created","updated","destroyed"],function(b){a.Model.prototype[b]=function(c){var d=this.constructor;c&&"object"==typeof c&&this.attr(c.attr?c.attr():c);a.trigger(this,"change",b);a.trigger(d,b,this)}});var h=
a.Model.List=a.Observe.List({setup:function(b){a.isPlainObject(b)&&!a.isArray(b)?(a.Observe.List.prototype.setup.apply(this),this.replace(this.constructor.Observe.findAll(b))):a.Observe.List.prototype.setup.apply(this,arguments)},_changes:function(b,c){a.Observe.List.prototype._changes.apply(this,arguments);if(/\w+\.destroyed/.test(c)){var d=this.indexOf(b.target);-1!=d&&this.splice(d,1)}}});return a.Model});steal.executed("lib/can/model/model.js");
steal("can/util","can/util/bind","can/construct",function(a){var c=function(b){return b&&!a.isDeferred(b)&&(a.isArray(b)||a.isPlainObject(b)||b instanceof a.Observe)},d=function(b,c){return a.each(b,function(a){a&&a.unbind&&a.unbind("change"+c)})},b=function(b,c,f,g,l){g=g||n;l=l||n.List;b instanceof n?f._bindings&&d([b],f._cid):b=a.isArray(b)?new l(b):new g(b);f._bindings&&e(b,c,f);return b},e=function(b,c,d){b.bind("change"+d._cid,function(){var e=a.makeArray(arguments),f=e.shift();e[0]=("*"===
c?[d.indexOf(b),e[0]]:[c,e[0]]).join(".");f.triggeredNS=f.triggeredNS||{};f.triggeredNS[d._cid]||(f.triggeredNS[d._cid]=!0,a.trigger(d,f,e))})},f=function(b,d,e){b.each(function(b,f){e[f]=c(b)&&a.isFunction(b[d])?b[d]():b});return e},g=function(b,c){return c?[b]:a.isArray(b)?b:(""+b).split(".")},h=1,k=0,l=[],o=[],m=function(a){return function(){var b=this;this._each(function(c,d){c&&c.bind&&e(c,a||d,b)})}},n=a.Map=a.Observe=a.Construct({bind:a.bindAndSetup,unbind:a.unbindAndTeardown,id:"id",canMakeObserve:c,
startBatch:function(a){k++;a&&o.push(a)},stopBatch:function(b,c){b?k=0:k--;if(0==k){var d=l.slice(0),e=o.slice(0);l=[];o=[];h++;c&&this.startBatch();a.each(d,function(b){a.trigger.apply(a,b)});a.each(e,function(a){a()})}},triggerBatch:function(b,c,d){if(!b._init){if(0==k)return a.trigger(b,c,d);c="string"===typeof c?{type:c}:c;c.batchNum=h;l.push([b,c,d])}},keys:function(a){var b=[];n.__reading&&n.__reading(a,"__keys");for(var c in a._data)b.push(c);return b}},{setup:function(b){this._data={};a.cid(this,
".observe");this._init=1;this.attr(b);this.bind("change"+this._cid,a.proxy(this._changes,this));delete this._init},_bindsetup:m(),_bindteardown:function(){var a=this._cid;this._each(function(b){d([b],a)})},_changes:function(a,b,c,d,e){n.triggerBatch(this,{type:b,batchNum:a.batchNum},[d,e])},_triggerChange:function(b,c,d,e){n.triggerBatch(this,"change",a.makeArray(arguments))},_each:function(a){var b=this.__get(),c;for(c in b)b.hasOwnProperty(c)&&a(b[c],c)},attr:function(a,b){var c=typeof a;if("string"!==
c&&"number"!==c)return this._attrs(a,b);if(1===arguments.length)return n.__reading&&n.__reading(this,a),this._get(a);this._set(a,b);return this},each:function(){n.__reading&&n.__reading(this,"__keys");return a.each.apply(void 0,[this.__get()].concat(a.makeArray(arguments)))},removeAttr:function(b){var c=this instanceof a.Observe.List,b=g(b),d=b.shift(),e=c?this[d]:this._data[d];if(b.length)return e.removeAttr(b);c?this.splice(d,1):d in this._data&&(delete this._data[d],d in this.constructor.prototype||
delete this[d],n.triggerBatch(this,"__keys"),this._triggerChange(d,"remove",void 0,e));return e},_get:function(a){var b="string"===typeof a&&!!~a.indexOf(".")&&this.__get(a);if(b)return b;a=g(a);b=this.__get(a.shift());return a.length?b?b._get(a):void 0:b},__get:function(a){return a?this._data[a]:this._data},_set:function(a,b,d){var a=g(a,d),d=a.shift(),e=this.__get(d);if(c(e)&&a.length)e._set(a,b);else{if(a.length)throw"can.Observe: Object does not exist";this.__convert&&(b=this.__convert(d,b));
this.__set(d,b,e)}},__set:function(a,e,f){if(e!==f){var g=this.__get().hasOwnProperty(a)?"set":"add";this.___set(a,c(e)?b(e,a,this):e);"add"==g&&n.triggerBatch(this,"__keys",void 0);this._triggerChange(a,g,e,f);f&&d([f],this._cid)}},___set:function(a,b){this._data[a]=b;a in this.constructor.prototype||(this[a]=b)},bind:a.bindAndSetup,unbind:a.unbindAndTeardown,serialize:function(){return f(this,"serialize",{})},_attrs:function(b,d){if(void 0===b)return f(this,"attr",{});var b=a.extend({},b),e,g=this,
l;n.startBatch();this.each(function(e,f){l=b[f];void 0===l?d&&g.removeAttr(f):(g.__convert&&(l=g.__convert(f,l)),l instanceof a.Observe?g.__set(f,l,e):c(e)&&c(l)&&e.attr?e.attr(l,d):e!=l&&g.__set(f,l,e),delete b[f])});for(e in b)l=b[e],this._set(e,l,!0);n.stopBatch();return this},compute:function(b){return a.compute(this,b)}}),r=[].splice,q=n({setup:function(b,c){this.length=0;a.cid(this,".observe");this._init=1;a.isDeferred(b)?this.replace(b):this.push.apply(this,a.makeArray(b||[]));this.bind("change"+
this._cid,a.proxy(this._changes,this));a.extend(this,c);delete this._init},_triggerChange:function(a,b,c,d){n.prototype._triggerChange.apply(this,arguments);~a.indexOf(".")||("add"===b?(n.triggerBatch(this,b,[c,+a]),n.triggerBatch(this,"length",[this.length])):"remove"===b?(n.triggerBatch(this,b,[d,+a]),n.triggerBatch(this,"length",[this.length])):n.triggerBatch(this,b,[c,+a]))},__get:function(a){return a?this[a]:this},___set:function(a,b){this[a]=b;+a>=this.length&&(this.length=+a+1)},_each:function(a){for(var b=
this.__get(),c=0;c<b.length;c++)a(b[c],c)},_bindsetup:m("*"),serialize:function(){return f(this,"serialize",[])},splice:function(e,f){var g=a.makeArray(arguments),l;for(l=2;l<g.length;l++){var h=g[l];c(h)&&(g[l]=b(h,"*",this,this.constructor.Observe,this.constructor))}void 0===f&&(f=g[1]=this.length-e);l=r.apply(this,g);a.Observe.startBatch();0<f&&(this._triggerChange(""+e,"remove",void 0,l),d(l,this._cid));2<g.length&&this._triggerChange(""+e,"add",g.slice(2),l);a.Observe.stopBatch();return l},_attrs:function(b,
c){if(void 0===b)return f(this,"attr",[]);b=a.makeArray(b);n.startBatch();this._updateAttrs(b,c);n.stopBatch()},_updateAttrs:function(a,b){for(var d=Math.min(a.length,this.length),e=0;e<d;e++){var f=this[e],g=a[e];c(f)&&c(g)?f.attr(g,b):f!=g&&this._set(e,g)}a.length>this.length?this.push.apply(this,a.slice(this.length)):a.length<this.length&&b&&this.splice(a.length)}});a.each({push:"length",unshift:0},function(a,d){var e=[][d];q.prototype[d]=function(){for(var d=[],f=a?this.length:0,g=arguments.length,
l;g--;)l=arguments[g],d[g]=c(l)?b(l,"*",this,this.constructor.Observe,this.constructor):l;g=e.apply(this,d);(!this.comparator||d.length)&&this._triggerChange(""+f,"add",d,void 0);return g}});a.each({pop:"length",shift:0},function(b,c){q.prototype[c]=function(){var d=arguments[0]&&a.isArray(arguments[0])?arguments[0]:a.makeArray(arguments),e=b&&this.length?this.length-1:0,d=[][c].apply(this,d);this._triggerChange(""+e,"remove",void 0,[d]);d&&d.unbind&&d.unbind("change"+this._cid);return d}});a.extend(q.prototype,
{indexOf:function(b){this.attr("length");return a.inArray(b,this)},join:[].join,reverse:[].reverse,slice:function(){return new this.constructor(Array.prototype.slice.apply(this,arguments))},concat:function(){var b=[];a.each(a.makeArray(arguments),function(c,d){b[d]=c instanceof a.Observe.List?c.serialize():c});return new this.constructor(Array.prototype.concat.apply(this.serialize(),b))},forEach:function(b,c){a.each(this,b,c||this)},replace:function(b){a.isDeferred(b)?b.then(a.proxy(this.replace,
this)):this.splice.apply(this,[0,this.length].concat(a.makeArray(b||[])));return this}});a.List=n.List=q;n.setup=function(){a.Construct.setup.apply(this,arguments);this.List=n.List({Observe:this},{})};return n});steal.executed("lib/can/observe/observe.js");
steal("can/util",function(a){a.bindAndSetup=function(){a.addEvent.apply(this,arguments);this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup()));return this};a.unbindAndTeardown=function(c,d){a.removeEvent.apply(this,arguments);null==this._bindings?this._bindings=0:this._bindings--;this._bindings||this._bindteardown&&this._bindteardown();return this};return a});steal.executed("lib/can/util/bind/bind.js");
steal("can/util","can/observe",function(a){a.each([a.Observe,a.Model],function(c){if(void 0!==c){a.extend(c,{attributes:{},convert:{date:function(a){var b=typeof a;return"string"===b?(a=Date.parse(a),isNaN(a)?null:new Date(a)):"number"===b?new Date(a):a},number:function(a){return parseFloat(a)},"boolean":function(a){return"false"===a||"0"===a||!a?!1:!0},"default":function(b,c,d,h){var d=a.getObject(h),k=window;0<=h.indexOf(".")&&(h=h.substring(0,h.lastIndexOf(".")),k=a.getObject(h));return"function"==
typeof d?d.call(k,b,c):b}},serialize:{"default":function(a){return"object"===typeof a&&null!==a&&a&&a.serialize?a.serialize():a},date:function(a){return a&&a.getTime()}}});var b=c.setup;c.setup=function(c,d,g){var h=this;b.call(h,c,d,g);a.each(["attributes"],function(a){if(!h[a]||c[a]===h[a])h[a]={}});a.each(["convert","serialize"],function(b){c[b]!=h[b]&&(h[b]=a.extend({},c[b],h[b]))})}}});var c=a.Observe.prototype.setup;a.Observe.prototype.setup=function(d){var b={};c.call(this,d);a.each(this.constructor.defaults,
function(a,c){this.hasOwnProperty(c)||(b[c]=a)},this);this._init=1;this.attr(b);delete this._init};a.Observe.prototype.__convert=function(a,b){var c=this.constructor,f=this.attr(a),g,h;c.attributes&&(g=c.attributes[a],h=c.convert[g]||c.convert["default"]);return null===b||!g?b:h.call(c,b,f,function(){},g)};a.Observe.prototype.serialize=function(c,b){var e={},f=this.constructor,g={},b=a.isArray(b)?b:[];b.push(this._cid);void 0!==c?g[c]=this[c]:g=this.__get();a.each(g,function(c,d){var g,o;c instanceof
a.Observe&&-1<a.inArray(c._cid,b)?e[d]=c.attr("id"):(g=f.attributes?f.attributes[d]:0,o=f.serialize?f.serialize[g]:0,e[d]=c&&"function"==typeof c.serialize?c.serialize(void 0,b):o?o(c,g):c)});return void 0!=c?e[c]:e};return a.Observe});steal.executed("lib/can/observe/attributes/attributes.js");
steal("can/util","can/observe/attributes",function(a){a.classize=function(b,c){for(var d=b.split(a.undHash),h=0;h<d.length;h++)d[h]=a.capitalize(d[h]);return d.join(c||"")};var c=a.classize,d=a.Observe.prototype,b=d.__set;d.__set=function(d,f,g,h,k){var l="set"+c(d),o=function(b){!1!==(k&&k.call(m,b))&&a.trigger(m,"error",[d,b],!0);return!1},m=this;if(!(this[l]&&void 0===(f=this[l](f,function(a){b.call(m,d,a,g,h,o)},o))))return b.call(m,d,f,g,h,o),this};return a.Observe});steal.executed("lib/can/observe/setter/setter.js");
steal("can/util","can/observe",function(a){var c=function(c){var b=[];a.each(c,function(a){a["__u Nique"]||(b.push(a),a["__u Nique"]=1)});return a.each(b,function(a){delete a["__u Nique"]})};a.extend(a.Observe.prototype,{identity:function(){var a=this.constructor,b=this[a.id]||this._cid.replace(/./,"");return((a._fullName?a._fullName+"_":"")+(a.escapeIdentity?encodeURIComponent(b):b)).replace(/ /g,"_")},elements:function(c){var b=this.identity();this.constructor.escapeIdentity&&(b=b.replace(/([ #;&,.+*~\'%:"!^$[\]()=>|\/])/g,
"\\$1"));return a.$("."+b,c)},hookup:function(c){var b=this.constructor._shortName||"",c=a.$(c),e;(e=a.data(c,"instances"))||a.data(c,"instances",e={});a.addClass(c,b+" "+this.identity());e[b]=this}});$.fn.instances=function(){var d=[],b,e;this.each(function(){a.each($.data(this,"instances")||{},function(a){b=void 0===b?a.constructor.List||null:a.constructor.List===b?b:null;d.push(a)})});e=b?new b:new a.Observe.List;e.push.apply(e,c(d));return e};$.fn.instance=function(c){return c&&c instanceof a.Observe?
(c.hookup(this[0]),this):this.instances.apply(this,arguments)[0]};return a.Observe});steal.executed("lib/can/observe/elements/elements.js");steal("jquery","can/util","jquerypp/view","can/view/ejs",function(a,c){a.EJS=c.EJS});steal.executed("lib/jquerypp/view/ejs/ejs.js");steal("jquery","can/util","can/view","can/view/modifiers",function(a,c){a.View=c.view;return a});steal.executed("lib/jquerypp/view/view.js");
steal("can/util",function(a){var c=a.isFunction,d=a.makeArray,b=1,e=a.view=a.template=function(b,d,f,g){c(f)&&(g=f,f=void 0);var h=c(g)?function(a){g(e.frag(a))}:null,b=e.render(b,d,f,h),k=a.Deferred();return c(b)?b:a.isDeferred(b)?(b.then(function(a,b){k.resolve.call(k,e.frag(a),b)},function(){k.fail.apply(k,arguments)}),k):e.frag(b)};a.extend(e,{frag:function(a,b){return e.hookup(e.fragment(a),b)},fragment:function(b){b=a.buildFragment(b,document.body);b.childNodes.length||b.appendChild(document.createTextNode(""));
return b},toId:function(b){return a.map(b.toString().split(/\/|\./g),function(a){if(a)return a}).join("_")},hookup:function(b,c){var d=[],f,g;a.each(b.childNodes?a.makeArray(b.childNodes):b,function(b){1===b.nodeType&&(d.push(b),d.push.apply(d,a.makeArray(b.getElementsByTagName("*"))))});a.each(d,function(a){if(a.getAttribute&&(f=a.getAttribute("data-view-id"))&&(g=e.hookups[f]))g(a,c,f),delete e.hookups[f],a.removeAttribute("data-view-id")});return b},hookups:{},hook:function(a){e.hookups[++b]=a;
return" data-view-id='"+b+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(a){this.types["."+a.suffix]=a},types:{},ext:".ejs",registerScript:function(){},preload:function(){},render:function(b,f,m,n){c(m)&&(n=m,m=void 0);var r=h(f);if(r.length){var q=new a.Deferred,s=a.extend({},f);r.push(g(b,!0));a.when.apply(a,r).then(function(b){var c=d(arguments),e=c.pop();if(a.isDeferred(f))s=k(b);else for(var g in f)a.isDeferred(f[g])&&(s[g]=k(c.shift()));c=e(s,m);q.resolve(c,s);n&&n(c,s)},function(){q.reject.apply(q,
arguments)});return q}var t,r=c(n),q=g(b,r);if(r)t=q,q.then(function(a){n(f?a(f,m):a)});else{if("resolved"===q.state()&&q.__view_id)return b=e.cachedRenderers[q.__view_id],f?b(f,m):b;q.then(function(a){t=f?a(f,m):a})}return t},registerView:function(b,c,d,f){c=(d||e.types[e.ext]).renderer(b,c);f=f||new a.Deferred;e.cache&&(e.cached[b]=f,f.__view_id=b,e.cachedRenderers[b]=c);return f.resolve(c)}});var f=function(a,b){if(!a.length)throw"can.view: No template or empty template:"+b;},g=function(b,c){var d=
b.match(/\.[\w\d]+$/),g,h,k;b.match(/^#/)&&(b=b.substr(1));if(h=document.getElementById(b))d="."+h.type.match(/\/(x\-)?(.+)/)[2];!d&&!e.cached[b]&&(b+=d=e.ext);a.isArray(d)&&(d=d[0]);k=e.toId(b);if(b.match(/^\/\//))var s=b.substr(2),b=!window.steal?s:steal.config().root.mapJoin(""+steal.id(s));g=e.types[d];if(e.cached[k])return e.cached[k];if(h)return e.registerView(k,h.innerHTML,g);var t=new a.Deferred;a.ajax({async:c,url:b,dataType:"text",error:function(a){f("",b);t.reject(a)},success:function(a){f(a,
b);e.registerView(k,a,g,t)}});return t},h=function(b){var c=[];if(a.isDeferred(b))return[b];for(var d in b)a.isDeferred(b[d])&&c.push(b[d]);return c},k=function(b){return a.isArray(b)&&"success"===b[1]?b[0]:b};window.steal&&steal.type("view js",function(a,b){var c=e.types["."+a.type],d=e.toId(a.id);a.text="steal('"+(c.plugin||"can/view/"+a.type)+"',function(can){return can.view.preload('"+d+"',"+a.text+");\n})";b()});a.extend(e,{register:function(b){this.types["."+b.suffix]=b;window.steal&&steal.type(b.suffix+
" view js",function(a,b){var c=e.types["."+a.type],d=e.toId(a.id+"");a.text=c.script(d,a.text);b()});e[b.suffix]=function(c,d){if(!d){var f=function(){return e.frag(f.render.apply(this,arguments))};f.render=function(){var a=b.renderer(null,c);return a.apply(a,arguments)};return f}e.preload(c,b.renderer(c,d));return a.view(c)}},registerScript:function(a,b,c){return"can.view.preload('"+b+"',"+e.types["."+a].script(b,c)+");"},preload:function(b,c){function d(){return e.frag(c.apply(this,arguments))}
var f=e.cached[b]=(new a.Deferred).resolve(function(a,b){return c.call(a,a,b)});d.render=c;f.__view_id=b;e.cachedRenderers[b]=c;return d}});return a});steal.executed("lib/can/view/view.js");
steal("jquery","can/view",function(a,c){var d,b,e,f,g,h,k={val:!0,text:!0};d=function(d){var f=a.fn[d];a.fn[d]=function(){var a=c.makeArray(arguments),g,r,q=this;if(c.isDeferred(a[0]))return a[0].done(function(a){b.call(q,[a],f)}),this;if(e(a)){if(g=h(a))return r=a[g],a[g]=function(a){b.call(q,[a],f);r.call(q,a)},c.view.apply(c.view,a),this;a=c.view.apply(c.view,a);if(c.isDeferred(a))return a.done(function(a){b.call(q,[a],f)}),this;a=[a]}return k[d]?f.apply(this,a):b.call(this,a,f)}};b=function(a,
b){for(var d in c.view.hookups)break;d&&a[0]&&f(a[0])&&(a[0]=c.view.frag(a[0]).childNodes);return b.apply(this,a)};e=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!g(a[1])};g=function(a){return a.nodeType||a[0]&&a[0].nodeType};f=function(a){return g(a)?!0:"string"===typeof a?(a=c.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&3<=a.length):!1};h=function(a){return"function"===typeof a[3]?3:"function"===typeof a[2]&&2};a.fn.hookup=function(){c.view.frag(this);
return this};c.each("prepend append after before text html replaceWith val".split(" "),function(a){d(a)});return c});steal.executed("lib/can/view/modifiers/modifiers.js");
steal("can/util","can/view","can/util/string","can/observe/compute","can/view/scanner.js","can/view/render.js",function(a){var c=a.extend,d=function(a){if(this.constructor!=d){var e=new d(a);return function(a,b){return e.render(a,b)}}"function"==typeof a?this.template={fn:a}:(c(this,a),this.template=this.scanner.scan(this.text,this.name))};a.EJS=d;d.prototype.render=function(a,c){a=a||{};return this.template.fn.call(a,a,new d.Helpers(a,c||{}))};c(d.prototype,{scanner:new a.view.Scanner({tokens:[["templateLeft",
"<%%"],["templateRight","%>"],["returnLeft","<%=="],["escapeLeft","<%="],["commentLeft","<%#"],["left","<%"],["right","%>"],["returnRight","%>"]],transform:function(a){return a.replace(/<%([\s\S]+?)%>/gm,function(a,b){var c=[],d,k;b.replace(/[{}]/gm,function(a,b){c.push([a,b])});do{d=!1;for(k=c.length-2;0<=k;k--)if("{"==c[k][0]&&"}"==c[k+1][0]){c.splice(k,2);d=!0;break}}while(d);if(2<=c.length){d=["<%"];var l,o=0;for(k=0;l=c[k];k++)d.push(b.substring(o,o=l[1])),"{"==l[0]&&k<c.length-1||"}"==l[0]&&
0<k?d.push("{"==l[0]?"{ %><% ":" %><% }"):d.push(l[0]),++o;d.push(b.substring(o),"%>");return d.join("")}return"<%"+b+"%>"})}})});d.Helpers=function(a,d){this._data=a;this._extras=d;c(this,d)};d.Helpers.prototype={list:function(b,c){a.each(b,function(a,d){c(a,d,b)})},each:function(b,c){a.isArray(b)?this.list(b,c):a.view.lists(b,c)}};a.view.register({suffix:"ejs",script:function(a,c){return"can.EJS(function(_CONTEXT,_VIEW) { "+(new d({text:c,name:a})).template.out+" })"},renderer:function(a,c){return d({text:c,
name:a})}});return a});steal.executed("lib/can/view/ejs/ejs.js");
steal("can/util","can/util/bind",function(a){var c=function(b,c){var d;a.Observe&&(d=a.Observe.__reading,a.Observe.__reading=function(a,b){g.push({obj:a,attr:b+""})});var g=[],h=b.call(c);a.Observe&&(a.Observe.__reading=d);return{value:h,observed:g}},d=function(b,d,f,g){var h={},k=!0,l={value:void 0,teardown:function(){for(var a in h){var b=h[a];b.observe.obj.unbind(b.observe.attr,m);delete h[a]}}},o,m=function(a){if(!g||g.bound)if(void 0===a.batchNum||a.batchNum!==o){var b=l.value,c=n();l.value=
c;c!==b&&f(c,b);o=o=a.batchNum}},n=function(){var f=c(b,d),g=f.observed,f=f.value;k=!k;a.each(g,function(a){h[a.obj._cid+"|"+a.attr]?h[a.obj._cid+"|"+a.attr].matched=k:(h[a.obj._cid+"|"+a.attr]={matched:k,observe:a},a.obj.bind(a.attr,m))});for(var l in h)g=h[l],g.matched!==k&&(g.observe.obj.unbind(g.observe.attr,m),delete h[l]);return f};l.value=n();l.isListening=!a.isEmptyObject(h);return l};a.compute=function(b,e,f){if(b&&b.isComputed)return b;var g,h,k={bound:!1,hasDependencies:!1},l=function(){},
o=function(){},m,n=function(){return m},r=function(a){m=a},q=!0;h=function(b){if(arguments.length){var c=m,d=r.call(e,b,c);if(h.hasDependencies)return n.call(e);m=void 0===d?n.call(e):d;c!==m&&a.Observe.triggerBatch(h,"change",[m,c]);return m}a.Observe&&a.Observe.__reading&&q&&a.Observe.__reading(h,"change");return k.bound?m:n.call(e)};if("function"===typeof b)n=r=b,q=!1===f?!1:!0,h.hasDependencies=!1,l=function(a){g=d(b,e||this,a,k);h.hasDependencies=g.isListening;m=g.value},o=function(){g&&g.teardown()};
else if(e)if("string"==typeof e){var s=b instanceof a.Observe;s&&(h.hasDependencies=!0);var n=function(){return s?b.attr(e):b[e]},r=function(a){s?b.attr(e,a):b[e]=a},t,l=function(d){t=function(){d(n(),m)};a.bind.call(b,f||e,t);m=c(n).value},o=function(){a.unbind.call(b,f||e,t)}}else"function"===typeof e?(m=b,r=e):(m=b,n=e.get||n,r=e.set||r,l=e.on||l,o=e.off||o);else m=b;h.isComputed=!0;a.cid(h,"compute");var p=function(b,c){m=b;a.Observe.triggerBatch(h,"change",[b,c])};return a.extend(h,{_bindsetup:function(){k.bound=
!0;l.call(this,p)},_bindteardown:function(){o.call(this,p);k.bound=!1},bind:a.bindAndSetup,unbind:a.unbindAndTeardown})};a.compute.binder=d;return a.compute});steal.executed("lib/can/observe/compute/compute.js");
steal("can/view","./elements",function(a,c){var d=/(\r|\n)+/g,b=function(a,b,d){if(a)return a;for(;d<b.length;){if("<"==b[d]&&c.reverseTagMap[b[d+1]])return c.reverseTagMap[b[d+1]];d++}return""},e=function(a){eval(a)},f=/([^\s]+)[\s]*=[\s]*$/,g=null,h=null,k=null,l=null,o=function(){return h?"'"+k.match(f)[1]+"'":g?1:0};a.view.Scanner=Scanner=function(b){a.extend(this,{text:{},tokens:[]},b);this.tokenReg=[];this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"};this.tokenComplex=[];this.tokenMap={};for(var b=
0,c;c=this.tokens[b];b++)c[2]?(this.tokenReg.push(c[2]),this.tokenComplex.push({abbr:c[1],re:RegExp(c[2]),rescan:c[3]})):(this.tokenReg.push(c[1]),this.tokenSimple[c[1]]=c[0]),this.tokenMap[c[0]]=c[1];this.tokenReg=RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")};Scanner.prototype={helpers:[{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(a){a=a.match(/\s*\(([\$\w]+)\)\s*->([^\n]*)/);return"can.proxy(function(__){var "+a[1]+"=can.$(__);"+a[2]+"}, this);"}}],scan:function(a,
f){var r=[],q=0,s=this.tokenSimple,t=this.tokenComplex,a=a.replace(d,"\n");this.transform&&(a=this.transform(a));a.replace(this.tokenReg,function(b,c){var d=arguments[arguments.length-2];d>q&&r.push(a.substring(q,d));if(s[b])r.push(b);else for(var e=0,f;f=t[e];e++)if(f.re.test(b)){r.push(f.abbr);f.rescan&&r.push(f.rescan(c));break}q=d+c.length});q<a.length&&r.push(a.substr(q));var p="",v=["var ___v1ew = [];"+(this.text.start||"")],x=function(a,b){v.push("___v1ew.push(",'"',a.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("\t").join("\\t"),
'"'+(b||"")+");")},E=[],w,A=null,D=!1,B="",z=[],F=!1,C=0,y,u=this.tokenMap;for(g=h=k=null;void 0!==(y=r[C++]);){if(null===A)switch(y){case u.left:case u.escapeLeft:case u.returnLeft:D=g&&1;case u.commentLeft:A=y;p.length&&x(p);p="";break;case u.escapeFull:D=g&&1;l=1;A=u.escapeLeft;p.length&&x(p);l=r[C++];p=l.content||l;l.before&&x(l.before);r.splice(C,0,u.right);break;case u.commentFull:break;case u.templateLeft:p+=u.left;break;case "<":0!==r[C].indexOf("!--")&&(g=1,D=0);p+=y;break;case ">":g=0;w=
"/"==p.substr(p.length-1)||"--"==p.substr(p.length-2);D||!F&&c.tagToContentPropMap[z[z.length-1]]?(w?x(p.substr(0,p.length-1),',can.view.pending(),"/>"'):x(p,',can.view.pending(),">"'),p="",D=0):p+=y;if(w||F)z.pop(),B=z[z.length-1],F=!1;break;case "'":case '"':g&&(h&&h===y?h=null:null===h&&(h=y,k=w));default:"<"===w&&(B=y.split(/\s/)[0],0===B.indexOf("/")&&z[z.length-1]===B.substr(1)?(B=z[z.length-1],F=!0):z.push(B)),p+=y}else switch(y){case u.right:case u.returnRight:switch(A){case u.left:w=--p.split("{").length-
--p.split("}").length;1==w?(v.push("___v1ew.push(","can.view.txt(0,'"+b(B,r,C)+"',"+o()+",this,function(){","var ___v1ew = [];",p),E.push({before:"",after:"return ___v1ew.join('')}));\n"})):(q=E.length&&-1==w?E.pop():{after:";"},q.before&&v.push(q.before),v.push(p,";",q.after));break;case u.escapeLeft:case u.returnLeft:(w=--p.split("{").length- --p.split("}").length)&&E.push({before:"return ___v1ew.join('')",after:"}));"});for(var A=A===u.escapeLeft?1:0,I={insert:"___v1ew.push(",tagName:b(B,r,C),
status:o()},G=0;G<this.helpers.length;G++){var H=this.helpers[G];if(H.name.test(p)){p=H.fn(p,I);H.name.source==/^>[\s]*\w*/.source&&(A=0);break}}"object"==typeof p?p.raw&&v.push(p.raw):v.push("___v1ew.push(","can.view.txt("+A+",'"+B+"',"+o()+",this,function(){ "+(this.text.escape||"")+"return ",p,w?"var ___v1ew = [];":"}));");l&&l.after&&l.after.length&&(x(l.after.length),l=null)}A=null;p="";break;case u.templateLeft:p+=u.left;break;default:p+=y}w=y}p.length&&x(p);v.push(";");p={out:"with(_VIEW) { with (_CONTEXT) {"+
v.join("")+" return ___v1ew.join('')}}"};e.call(p,"this.fn = (function(_CONTEXT,_VIEW){"+p.out+"});\r\n//@ sourceURL="+f+".js");return p}};return Scanner});steal.executed("lib/can/view/scanner.js");
steal(function(){var a={tagToContentPropMap:{option:"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:{"class":"className",value:"value",innerText:"innerText",textContent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0},defaultValue:["input","textarea"],tagMap:{"":"span",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},
getParentNode:function(a,d){return d&&11===a.parentNode.nodeType?d:a.parentNode},setAttr:function(c,d,b){var e=c.nodeName.toString().toLowerCase(),f=a.attrMap[d];!0===f?c[d]=!0:f?(c[f]=b,"value"===f&&0<=can.inArray(e,a.defaultValue)&&(c.defaultValue=b)):c.setAttribute(d,b)},getAttr:function(c,d){return(a.attrMap[d]&&c[a.attrMap[d]]?c[a.attrMap[d]]:c.getAttribute(d))||""},removeAttr:function(c,d){!0===a.attrMap[d]?c[d]=!1:c.removeAttribute(d)},contentText:function(a){return"string"==typeof a?a:!a&&
0!==a?"":""+a}};return a});steal.executed("lib/can/view/elements.js");
steal("can/view","./elements","./live","can/util/string",function(a,c,d){var b=[],e=function(a){a=c.tagMap[a]||"span";return"span"===a?"@@!!@@":"<"+a+">"+e(a)+"</"+a+">"},f=function(c,d){if("string"==typeof c)return c;if(!c&&0!==c)return"";var e=c.hookup&&function(a,b){c.hookup.call(c,a,b)}||"function"==typeof c&&c;if(e){if(d)return"<"+d+" "+a.view.hook(e)+"></"+d+">";b.push(e);return""}return""+c},g=function(b){return"string"==typeof b||"number"==typeof b?a.esc(b):f(b)};a.extend(a.view,{live:d,setupLists:function(){var b=
a.view.lists,c;a.view.lists=function(a,b){c={list:a,renderer:b}};return function(){a.view.lists=b;return c}},pending:function(){var c=b.slice(0);lastHookups=c;b=[];return a.view.hook(function(b){a.each(c,function(a){a(b)})})},txt:function(h,k,l,o,m){var n=a.view.setupLists(),r=function(){},q=function(){s.unbind("change",r)},s=a.compute(m,o,!1);s.bind("change",r);var m=c.tagMap[k]||"span",t=n(),n=s();if(t)return"<"+m+a.view.hook(function(a,b){d.list(a,t.list,t.renderer,o,b)})+"></"+m+">";if(!s.hasDependencies)return q(),
(h||0!==l?g:f)(n,0===l&&m);k=c.tagToContentPropMap[k];if(0===l&&!k)return"<"+m+a.view.hook(h?function(a,b){d.text(a,s,b);q()}:function(a,b){d.html(a,s,b);q()})+">"+e(m)+"</"+m+">";if(1===l)return b.push(function(a){d.attributes(a,s,s());q()}),s();var p=0===l?k:l;(0===l?lastHookups:b).push(function(a){d.attribute(a,p,s);q()});return d.attributePlaceholder}});return a});steal.executed("lib/can/view/render.js");
steal("can/util","./elements.js","can/view","./node_lists.js",function(a,c,d,b){var e=function(b,c,d){var e=function(){d(f);a.unbind.call(b,"destroyed",e)},f={teardownCheck:function(a){a||e()}};a.bind.call(b,"destroyed",e);c(f);return f},f=function(a,c,d){return e(a,function(){c.bind("change",d)},function(a){c.unbind("change",d);a.nodeList&&b.unregister(a.nodeList)})};insertElementsAfter=function(a,b){var c=a[a.length-1];c.nextSibling?c.parentNode.insertBefore(b,c.nextSibling):c.parentNode.appendChild(b)};
var g={nodeLists:b,list:function(d,f,g,o,m){var n=[],r=function(c,d,e){var f=document.createDocumentFragment(),h=[];a.each(d,function(b){b=g.call(o,b);b=a.view.frag(b,m);h.push(a.makeArray(b.childNodes));f.appendChild(b)});n[e]?(c=n[e][0],c.parentNode.insertBefore(f,c)):insertElementsAfter(0==e?[s]:n[e-1],f);a.each(h,function(a){b.register(a)});[].splice.apply(n,[e,0].concat(h))},q=function(c,d,e){var c=n.splice(e,d.length),f=[];a.each(c,function(a){[].push.apply(f,a);b.replace(a,[]);b.unregister(a)});
a.remove(a.$(f))},m=c.getParentNode(d,m),s=document.createTextNode("");e(m,function(){f.bind("add",r).bind("remove",q)},function(){f.unbind("add",r).unbind("remove",q);a.each(n,function(a){b.unregister(a)})});insertElementsAfter([d],s);a.remove(a.$(d));r({},f,0)},html:function(d,e,g){var g=c.getParentNode(d,g),o=f(g,e,function(a,b){m[0].parentNode&&n(b);o.teardownCheck(m[0].parentNode)}),m,n=function(c){var e=a.view.frag(c,g),c=a.makeArray(e.childNodes);insertElementsAfter(m||[d],e);m?(e=a.makeArray(m),
b.replace(m,c),a.remove(a.$(e))):(a.remove(a.$(d)),m=c,o.nodeList=m,b.register(m))};n(e(),[d])},text:function(a,b,d){var d=c.getParentNode(a,d),e=f(a.parentNode!==d?a.parentNode:d,b,function(a,b){"unknown"!=typeof g.nodeValue&&(g.nodeValue=""+b);e.teardownCheck(g.parentNode)}),g=document.createTextNode(b());a.parentNode!==d&&(d=a.parentNode);d.insertBefore(g,a);d.removeChild(a)},attributes:function(a,b,d){var e=function(b){var b=(b||"").replace(/['"]/g,"").split("="),d=b.shift();d!=g&&g&&c.removeAttr(a,
g);d&&(c.setAttr(a,d,b.join("=")),g=d)};f(a,b,function(a,b){e(b)});if(3<=arguments.length)var g=(d||"").replace(/['"]/g,"").split("=")[0];else e(b())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(b,d,e){f(b,e,function(){c.setAttr(b,d,q.render())});var o=a.$(b),m;(m=a.data(o,"hooks"))||a.data(o,"hooks",m={});var n=c.getAttr(b,d),o=n.split(g.attributePlaceholder),r=[],q;r.push(o.shift(),o.join(g.attributePlaceholder));m[d]?m[d].computes.push(e):m[d]={render:function(){var a=
0;return n?n.replace(g.attributeReplace,function(){return c.contentText(q.computes[a++]())}):c.contentText(q.computes[a++]())},computes:[e],batchNum:void 0};q=m[d];r.splice(1,0,e());c.setAttr(b,d,r.join(""))}};return g});steal.executed("lib/can/view/live.js");
steal("can/util",function(a){var c=!0;try{document.createTextNode("")._=0}catch(d){c=!1}var b={},e={},f={},g="ejs_"+Math.random(),h=0,k=function(a){if(c||3!==a.nodeType)return a[g]?a[g]:a[g]=(a.nodeName?"element_":"obj_")+ ++h;for(var b in e)if(e[b]===a)return b;e["text_"+ ++h]=a;return"text_"+h},l=function(c,d){var e=b[k(c)];if(e){var f=a.inArray(d,e);0<=f&&e.splice(f,1);e.length||delete b[k(c)]}},o=function(a,c){var d=b[k(a)];d||(d=b[k(a)]=[]);d.push(c)},m={id:k,replace:function(c,d){var c=a.makeArray(c),
e=c[0];a.each(a.makeArray(b[k(e)]),function(b){var g=f[b],h=a.inArray(e,g),k=a.inArray(c[c.length-1],g);if(0<=h&&0<=k){for(var x=h;x<=k;x++)l(g[x],b);g.splice.apply(g,[h,k-h+1].concat(d));a.each(d,function(a){o(a,b)})}else m.unregister(g)})},register:function(b){var c=k(b);f[c]=b;a.each(b,function(a){o(a,c)})},unregister:function(b){var c=k(b);a.each(b,function(a){l(a,c)});delete f[c]},nodeMap:b,nodeListMap:f};return m});steal.executed("lib/can/view/node_lists.js");
steal("jquery/controller","mad/route/extensionControllerActionDispatcher.js").then(function(){$.Controller("mad.controller.Controller",{getDispatcher:function(){return mad.route.ExtensionControllerActionDispatcher},getParentClass:function(){return this.prototype.__proto__.constructor},defaults:{}},{init:function(a,c){if(!$(a).length)throw new mad.error.Exception('The parameter "el" ('+$(a).selector+") should refer to an existing DOM node.");if("undefined"==typeof c.id||null==c.id||""==c.id){var d=
this.element.attr("id");"undefined"==typeof d||""==d?(c.id=uuid(),this.element.attr("id",c.id)):c.id=d}else d=this.element.attr("id"),""==d&&(c.id=d);this.options=$.extend(!0,{},this.options,c)},destroy:function(){this._super()},getComponent:function(a){return mad.app.getComponent(a)},getId:function(){return this.options.id},remove:function(){this.element.remove()},getAlias:function(a){var a="undefined"==typeof a?"camel":a,c="",c=this.constructor.shortName.replace(/Controller$/,"");switch(a){case "under":c=
jQuery.String.underscore(c)}return c},getClass:function(){return this.constructor}})});steal.executed("lib/mad/controller/controller.js");
steal("mad/route/dispatcherInterface.js","mad/helper/routeHelper.js").then(function(){mad.route.DispatcherInterface.extend("mad.route.ExtensionControllerActionDispatcher",{dispatch:function(a,c){var d=[];controllerId="undefined"!=typeof c.controllerId?c.controllerId:"js_"+a.extension+"_"+a.controller+"_controller";var b=mad.helper.routeHelper.pluginNameController(a,{prefix:"passbolt"!=a.extension?"passbolt_":""});$controller=$("#"+controllerId);if(!$controller.length&&($controller=$("#gacd-page-controller"),
!$controller.length))throw Error("No element found on the page for the id ("+controllerId+") neither with the default id (gacd-page-controller)");if("undefined"==typeof $controller[b])throw Error("The DOM element ("+controllerId+") has not an attached controller defined by the class ("+mad.helper.routeHelper.classNameController(a)+")");if("undefined"==typeof $controller.data("controllers"))$controller[b]();for(b=1;"undefined"!==typeof a["p"+b];b++)d.push(a["p"+b]);b=$controller.controller();b[a.action].apply(b,
d)}},{})});steal.executed("lib/mad/route/extensionControllerActionDispatcher.js");steal("can/construct").then(function(){can.Construct("mad.route.DispatcherInterface",{dispatch:function(){throw new mad.error.CallInterfaceFunctionException;}},{init:function(){throw new mad.error.CallInterfaceConstructorException;}})});steal.executed("lib/mad/route/dispatcherInterface.js");
steal("can/construct").then(function(){can.Construct("mad.helper.routeHelper",{getClassController:function(){},formatStrToPluginName:function(a){var c="",d=0,b;for(b in a)"_"!=a[b]&&a[b]==a[b].toUpperCase()?(c+="_"+a[b].toLowerCase(),d+=1):c+=a[b],d++;return c},pluginNameController:function(a,c){var d="",b="undefined"!=typeof c&&"undefined"!=typeof c.prefix?c.prefix:"";"object"==typeof a?d=a.extension+"_"+a.controller:(d=a.split("."),d=d[0]+"_"+d[1]+"_"+d[3].substr(0,d[3].length-10).toLowerCase());
return b+mad.helper.routeHelper.formatStrToPluginName(d)},classNameController:function(a,c){var d="undefined"!=typeof c&&"undefined"!=typeof c.prefix?c.prefix:"",b=a.controller.charAt(0).toUpperCase()+a.controller.slice(1)+"Controller";return d+a.extension+".controller."+b}},{init:function(){throw new lb.core.NoConstructor;}})});steal.executed("lib/mad/helper/routeHelper.js");
steal("jquery/model","can/model","mad/model/list.js","mad/model/serializer/cakeSerializer.js").then(function(){can.Model("mad.model.Model",{forceStore:!1,madStore:new can.Model.List,validationRules:{},serverValidationRules:{},checkServerRules:!0,getModelAttributeValue:function(a,c){for(var d=mad.model.Model.getModelAttributes(a),b="",e=d[d.length-1].name,f=null,g=1;g<d.length-1;g++)b+=b.length?"."+d[g].name:d[g].name;d=can.getObject(b,c);"undefined"!=typeof d&&(d.length?(f=[],can.each(d,function(a){f.push(a[e])})):
f=d[e]);return f},isMultipleAttribute:function(a){return/models$/.test(this.attributes[a])},getAttribute:function(a){var c=null,c=this.attributes[a].substr(0,this.attributes[a].lastIndexOf(".")),c=$.String.getObject(c);return new mad.model.Attribute({name:a,multiple:this.isMultipleAttribute(a),modelReference:c})},getModelAttributes:function(a){var c=[],a=a.split("."),d;for(d in a)if(c.length){var b=c[c.length-1].modelReference;if(b.attributes[a[d]])b=b.attributes[a[d]],e=b.slice(0,b.lastIndexOf(".")),
f=$.String.getObject(e),c.push(new mad.model.Attribute({name:a[d],multiple:/models$/.test(b),modelReference:f}));else{c.push(new mad.model.Attribute({name:a[d],modelReference:null}));break}}else if(a[d][0]===a[d][0].toUpperCase()){var e=a.slice(0,parseInt(d)+1).join("."),f=$.String.getObject(e);c.push(new mad.model.Attribute({name:e,multiple:!1,modelReference:f}))}return c},isModelAttribute:function(a){return/model[s]?$/.test(this.attributes[a])},models:function(a){if("undefined"==typeof a||null==
a)a=[];return mad.net.Response.isResponse(a)?can.Model.models.call(this,mad.net.Response.getData(a)):can.Model.models.call(this,a)},model:function(a){a=a||{};mad.net.Response.isResponse(a)?(a=mad.net.Response.getData(a),a=mad.model.serializer.CakeSerializer.from(a,this)):a[this.shortName]&&(a=mad.model.serializer.CakeSerializer.from(a,this));a=can.Model.model.call(this,a);this.forceStore&&-1==mad.model.List.indexOf(this.madStore,a.id)&&this.madStore.push(a);return a},getValidationRules:function(a){var c=
{},d=this;if("undefined"==typeof a||null==a)a="default";0<this.validationRules.length?c=this.validationRules:this.checkServerRules&&("undefined"==typeof this.serverValidationRules[this.shortName]&&(this.serverValidationRules[this.shortName]={}),"undefined"==typeof this.serverValidationRules[this.shortName][a]&&(c=APP_URL+"validation/"+this.shortName+"/"+a+".json",d.serverValidationRules[d.shortName][a]={},mad.net.Ajax.request({async:!1,type:"GET",url:c}).then(function(b){d.serverValidationRules[d.shortName][a]=
b})),c=this.serverValidationRules[this.shortName][a]);return c},isRequired:function(a,c){var d=!1,b=this.getValidationRules(c);if(!$.isArray(b[a]))if("undefined"!=typeof b[a].rule){if("undefined"!=typeof b[a].required&&(!0===typeof b[a].required||b[a].required===c))d=!0}else for(var e in b[a])if("undefined"!=typeof b[a][e].required&&(!0===typeof b[a][e].required||b[a][e].required===c))d=!0;return d},validateAttribute:function(a,c,d,b){var e=!0;"undefined"==typeof b&&(b="default");var f=this.getValidationRules(b);
if("undefined"!=typeof f[a]){var b=this.isRequired(a,b),g=mad.model.ValidationRules.validate("required",c);if(b&&!0!==g)return g;if(!b&&!0!==g)return!0;var a=f[a],h;for(h in a)f=mad.model.ValidationRules.validate(a[h],c,d),!0!==f&&(!0===e&&(e=""),e+=f)}return e},nestedToList:function(a,c,d,b){var e=[],d="undefined"==typeof d?null:d;null!=d?e.push(a.attr(d)):e.push(a);can.each(a[c],function(a){$.merge(e,mad.model.Model.nestedToList(a,c,d,!0))});b||(e=new (a.getClass().List)(e));return e},nestedListToList:function(a,
c){var d=null,b=[];can.each(a,function(a){$.merge(b,mad.model.Model.nestedToList(a,c,!0))});a.length&&(d=new (a[0].getClass().List)(b));return d},search:function(a,c,d){var b=[],e=c.split("."),f=e[0],e=e[1],g;for(g in a){if($.isArray(a[g][f]))for(var h in a[g][f])a[g][f][h][e]==d&&b.push(a[g]);else a[g][f][e]==d&&b.push(a[g]);if(a[g].children){var k=mad.model.Model.search(a[g].children,c,d);k.length&&(b=$.merge(b,k))}}return b},searchOne:function(a,c,d){var b=null,a=mad.model.Model.search(a,c,d);
a.length&&(b=a[0]);return b},serialize:{date:function(a){if("number"==typeof a||"string"==typeof a)a=new Date(a);return a.getYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getMilliseconds()}}},{getClass:function(){return this.constructor}})});steal.executed("lib/mad/model/model.js");
steal("can/construct").then(function(){can.Construct("mad.model.List",{indexOf:function(a,c){var d=-1,b=c instanceof mad.model.Model?c.id:c;can.each(a,function(a,c){if(a.id==b)return d=c,!1});return d},remove:function(a,c){var d=mad.model.List.indexOf(a,c);return-1!=d?(a.splice(d,1),!0):!1}},{})});steal.executed("lib/mad/model/list.js");
steal("can/construct","mad/model/serializer/serializer.js").then(function(){can.Construct("mad.model.serializer.CakeSerializer",{from:function(a,c){var d={},d=$.extend(!0,{},a,a[c.shortName]);delete d[c.shortName];return d},to:function(a,c){var d={};d[c.shortName]={};for(var b in a)c.isModelAttribute(b)?d[b]=a[b]:d[c.shortName][b]=a[b];return d}},{})});steal.executed("lib/mad/model/serializer/cakeSerializer.js");
steal("can/construct").then(function(){can.Construct("mad.model.serializer.Serializer",{from:function(){},to:function(){}},{})});steal.executed("lib/mad/model/serializer/serializer.js");steal("mad/model/model.js").then(function(){mad.model.Model.extend("mad.model.Attribute",{attributes:{name:"string",type:"string",modelReference:"string",multiple:"string"}},{getModelReference:function(){return this.modelReference}})});steal.executed("lib/mad/model/attribute.js");
steal("mad/controller","mad/event/eventable.js").then(function(){mad.controller.Controller("mad.view.View",{defaults:{templateUri:null,templateBased:!0,element:null},render:function(a,c){c=c||{};"mad"==a.substring(0,3)&&(a="lib/"+a);"undefined"==typeof can.view.cached[can.view.toId(a)]&&(console.warn("[PERF] the template "+a+" is not referenced correctly, what will imply a useless server call on prod."),a=steal.idToUri(a).toString());return can.view.render(a,c)}},{init:function(a,c){this._super(a,
c);for(var d in c.cssClasses)this.element.hasClass(c.cssClasses[d])||this.element.addClass(c.cssClasses[d])},getController:function(){return this.options.controller},addClass:function(a){this.element.addClass(a)},getTemplate:function(){return null!=this.getTemplateUri()?this.getTemplateUri():mad.helper.ControllerHelper.getViewPath(this.getController().getClass())},hide:function(){this.element.hide()},loading:function(a){a?this.element.prepend('<div class="js_loading" />'):$(".js_loading",this.element).remove()},
removeClass:function(a){this.element.removeClass(a)},position:function(a){mad.helper.HtmlHelper.position(this.element,a)},render:function(){return mad.view.View.render(this.getTemplate(),this.getController().getViewData())},insertInDom:function(a){this.element.html(a)},getTemplateUri:function(){return this.options.templateUri},setTemplateUri:function(a){this.options.templateUri=a},show:function(){this.element.show()}})});steal.executed("lib/mad/view/view.js");
steal("can/construct").then(function(){can.Construct("mad.event.Eventable",{},{trigger:function(a,c){this.element.trigger(a,"undefined"!=typeof c?c:{})},bind:function(a,c){this.element.bind(a,c)}})});steal.executed("lib/mad/event/eventable.js");
steal("jquery/dom/route","mad/bootstrap/bootstrapInterface.js","mad/event/eventBus.js","mad/devel/devel.js","mad/helper/htmlHelper.js","mad/config/config.js").then(function(){mad.bootstrap.BootstrapInterface.extend("mad.bootstrap.AppBootstrap",{defaults:{config:["mad/config/config.json"],callbacks:{ready:null}}},{init:function(a){this.options={};var c=[];$.merge($.merge(c,mad.bootstrap.AppBootstrap.defaults.config),a.config);$.extend(!0,this.options,mad.bootstrap.AppBootstrap.defaults,a);for(var d in c)mad.Config.loadFile(c[d]);
"undefined"!=typeof cakephpConfig&&mad.Config.load(cakephpConfig);a=mad.Config.read("app.url");if("undefined"==typeof a)throw new mad.error.WrongConfigException("app.url");APP_URL=a;a=can.getObject(mad.Config.read("error.ErrorHandlerClassName"));if(!a)throw new mad.error.WrongConfigException("error.ErrorHandlerClassName");mad.Config.write("error.ErrorHandlerClass",a);a=can.getObject(mad.Config.read("net.ResponseHandlerClassName"));if(!a)throw new mad.error.WrongConfigException("net.ResponseHandlerClassName");
mad.Config.write("net.ResponseHandlerClass",a);a=can.getObject(mad.Config.read("app.ControllerClassName"));if(!a)throw new mad.error.WrongConfigException("app.ControllerClassName");mad.Config.write("app.AppControllerClass",a);if(""===$.trim(mad.Config.read("app.url")))throw new mad.error.WrongConfigException("app.url");if(!$(mad.Config.read("app.controllerElt")).length)throw new mad.error.WrongConfigException("app.controllerElt");can.getObject(mad.Config.read("app.namespace"),window,!0);a=mad.Config.read("core.components");
for(d in a)if(!("Devel"==a[d]&&(null==mad.Config.read("app.debug")||0==mad.Config.read("app.debug"))))this["init"+a[d]]()},initInternationalization:function(){mad.net.Ajax.request({type:"GET",url:APP_URL+"dictionaries/en-EN.json",async:!1,dataType:"json",success:function(a,c,d){mad.lang.I18n.loadDico(d)},error:function(){}})},initAppController:function(){var a=this;mad.bus.bind("app_ready",function(){a.options.callbacks.ready&&a.options.callbacks.ready()});(new (can.getObject(mad.Config.read("app.ControllerClassName")))($(mad.Config.read("app.controllerElt")))).start()},
initExtensions:function(){new passbolt.activity.bootstrap.Bootstrap},initEventBus:function(){var a=mad.helper.HtmlHelper.create($(mad.Config.read("app.controllerElt")),"before","<div/>"),a=new mad.event.EventBus(a);mad.bus=a},initDevel:function(){var a=mad.helper.HtmlHelper.create($(mad.Config.read("app.controllerElt")),"before","<div/>"),a=new mad.devel.Devel(a);mad.dev=a},initRouteListener:function(){var a=this;mad.bus.bind(mad.APP_NS_ID+"_route_change",function(c,d){a.dispatch(d)});new mad.route.RouteListener}})});
steal.executed("lib/mad/bootstrap/appBootstrap.js");steal("jquery","can/util","can/route",function(a,c){a.route=c.route});steal.executed("lib/jquerypp/dom/route/route.js");
steal("can/util","can/observe","can/util/string/deparam",function(a){var c=/\:([\w\.]+)/g,d=function(b){var c=[];a.each(b,function(b,d){c.push(("className"===d?"class":d)+'="'+("href"===d?b:a.esc(b))+'"')});return c.join(" ")},b=function(a,b){var c=0,d=0,e={},f;for(f in a.defaults)a.defaults[f]===b[f]&&(e[f]=1,c++);for(;d<a.names.length;d++){if(!b.hasOwnProperty(a.names[d]))return-1;e[a.names[d]]||c++}return c},e=!0,f=window.location,g=a.each,h=a.extend;a.route=function(b,d){var d=d||{},e=[],f=b.replace(c,
function(c,f,g){e.push(f);return"([^\\"+(b.substr(g+c.length,1)||a.route._querySeparator)+"]"+(d[f]?"*":"+")+")"});a.route.routes[b]={test:RegExp("^"+f+"($|"+(a.route._querySeparator+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")+")"),route:b,names:e,defaults:d,length:b.split("/").length};return a.route};h(a.route,{_querySeparator:"&",_paramsMatcher:/^(?:&[^=]+=[^&]*)+/,param:function(d,e){var f,l=0,k,o=d.route,m=0;delete d.route;g(d,function(){m++});g(a.route.routes,function(a){k=b(a,d);k>l&&(f=
a,l=k);if(k>=m)return!1});a.route.routes[o]&&b(a.route.routes[o],d)===l&&(f=a.route.routes[o]);if(f){var n=h({},d),o=f.route.replace(c,function(a,b){delete n[b];return d[b]===f.defaults[b]?"":encodeURIComponent(d[b])}),w;g(f.defaults,function(a,b){n[b]===a&&delete n[b]});w=a.param(n);e&&a.route.attr("route",f.route);return o+(w?a.route._querySeparator+w:"")}return a.isEmptyObject(d)?"":a.route._querySeparator+a.param(d)},deparam:function(b){var c={length:-1};g(a.route.routes,function(a){a.test.test(b)&&
a.length>c.length&&(c=a)});if(-1<c.length){var d=b.match(c.test),e=d.shift(),f=(e=b.substr(e.length-(d[d.length-1]===a.route._querySeparator?1:0)))&&a.route._paramsMatcher.test(e)?a.deparam(e.slice(1)):{},f=h(!0,{},c.defaults,f);g(d,function(b,d){b&&b!==a.route._querySeparator&&(f[c.names[d]]=decodeURIComponent(b))});f.route=c.route;return f}b.charAt(0)!==a.route._querySeparator&&(b=a.route._querySeparator+b);return a.route._paramsMatcher.test(b)?a.deparam(b.slice(1)):{}},data:new a.Observe({}),routes:{},
ready:function(b){!1===b&&(e=b);if(!0===b||!0===e)a.route._setup(),o();return a.route},url:function(b,c){c&&(b=h({},l,b));return"#!"+a.route.param(b)},link:function(b,c,e,f){return"<a "+d(h({href:a.route.url(c,f)},e))+">"+b+"</a>"},current:function(b){return f.hash=="#!"+a.route.param(b)},_setup:function(){a.bind.call(window,"hashchange",o)},_getHash:function(){return f.href.split(/#!?/)[1]||""},_setHash:function(b){b=a.route.param(b,!0);f.hash="#!"+b;return b}});g("bind unbind delegate undelegate attr removeAttr".split(" "),
function(b){a.route[b]=function(){if(a.route.data[b])return a.route.data[b].apply(a.route.data,arguments)}});var k,l,o=a.route.setState=function(){var b=a.route._getHash();l=a.route.deparam(b);(!n||b!==m)&&a.route.attr(l,!0)},m,n;a.route.bind("change",function(){n=1;clearTimeout(k);k=setTimeout(function(){n=0;var b=a.route.data.serialize();m=a.route._setHash(b)},1)});a.bind.call(document,"ready",a.route.ready);("complete"===document.readyState||"interactive"===document.readyState)&&e&&a.route.ready();
a.route.constructor.canMakeObserve=a.Observe.canMakeObserve;return a.route});steal.executed("lib/can/route/route.js");
steal("can/util","can/util/string",function(a){var c=/^\d+$/,d=/([^\[\]]+)|(\[\])/g,b=/([^?#]*)(#.*)?$/,e=function(a){return decodeURIComponent(a.replace(/\+/g," "))};a.extend(a,{deparam:function(f){var g={},h;f&&b.test(f)&&(f=f.split("&"),a.each(f,function(a){var a=a.split("="),b=e(a.shift()),f=e(a.join("=")),m=g;if(b){for(var a=b.match(d),b=0,n=a.length-1;b<n;b++)m[a[b]]||(m[a[b]]=c.test(a[b+1])||"[]"==a[b+1]?[]:{}),m=m[a[b]];h=a.pop();"[]"==h?m.push(f):m[h]=f}}));return g}});return a});steal.executed("lib/can/util/string/deparam/deparam.js");
steal("can/construct").then(function(){can.Construct("mad.bootstrap.BootstrapInterface",{init:function(){throw new mad.error.CallInterfaceConstructorException;},ready:function(){throw new mad.error.CallInterfaceFunctionException;}})});steal.executed("lib/mad/bootstrap/bootstrapInterface.js");
steal("mad/controller/controller.js","mad/event/eventable.js").then(function(){mad.controller.Controller.extend("mad.event.EventBus",{init:function(){},trigger:function(a,c){var d="undefined"!=typeof c?c:{};this.element.trigger(a,d);if(!steal.isRhino){var b=document.createEvent("CustomEvent");b.initCustomEvent(a,!0,!0,d);document.documentElement.dispatchEvent(b)}},bind:function(a,c){this.element.bind(a,c)}});window.addEventListener("addon-message",function(a){mad.bus.element.trigger(a.detail.event,
a.detail.data)},!1)});steal.executed("lib/mad/event/eventBus.js");steal("mad/controller/componentController.js","mad/devel/components/develSidebarController.js").then(function(){mad.controller.Controller.extend("mad.devel.Devel",{init:function(a,c){this._super(a,c);mad.helper.ComponentHelper.create($(a),"first",mad.devel.DevelSidebarController,{id:"js-devel-sidebar-ctl"}).start()}})});steal.executed("lib/mad/devel/devel.js");
steal("mad/controller/controller.js","mad/helper/controllerHelper.js").then(function(){mad.controller.Controller.extend("mad.controller.ComponentController",{defaults:{label:"ComponentController",icon:null,templateUri:null,templateBased:!0,viewClass:mad.view.View,state:"ready",cssClasses:["js_component"],tag:"div",viewData:{}}},{state:null,setup:function(){var a=this.init,c=this.render;this.init=function(){a.apply(this,arguments)};this.render=function(){c.apply(this,arguments)};return this._super.apply(this,
arguments)},init:function(a,c){var d=this;if(!this.options.viewClass instanceof mad.view.View)throw new mad.error.WrongParametersException("options.viewClass","mad.view.View");this.state=new mad.model.State;this.state.current.bind("change",function(a,c,f,g){"add"==f&&d.goNextStates(g)});this._super(a,c);mad.app.referenceComponent(this)},destroy:function(){mad.app.unreferenceComponent(this);this.state.unbind("label");this._super()},goNextStates:function(){var a=this.state.previous.attr(),c=this.state.current.attr(),
d;for(d in a){var b=a[d];this.view.removeClass(b);(b=this["state"+$.String.capitalize(b)])&&b.call(this,!1)}for(d in c)a=c[d],this.view.addClass(a),(a=this["state"+$.String.capitalize(a)])&&a.call(this,!0)},setTemplateUri:function(a){this.view.setTemplateUri(a)},setState:function(a){this.state.setState(a)},setViewData:function(a,c){if("object"==typeof a)for(var d in a)this.setViewData(d,a[d]);else this.options.viewData[a]=c;return this},getViewData:function(a){return"undefined"==typeof a?this.options.viewData:
this.options.viewData[a]},refresh:function(){if(null==this.element)console.warn("Try to refresh a component which doesn't have a DOM element.");else{this.element.empty();if(this.options.templateBased){this.beforeRender();var a=this.view.render(),a=this.afterRender(a);this.view.insertInDom(a)}this.afterStart();this.setState(this.options.state);return this}},start:function(){this.initView();if(this.options.templateBased){this.beforeRender();var a=this.view.render(),a=this.afterRender(a);this.view.insertInDom(a)}this.afterStart();
this.setState(this.options.state);return this},initView:function(){this.view=new this.options.viewClass(this.element,{templateUri:this.options.templateUri,cssClasses:this.options.cssClasses,templateBased:this.options.templateBased,controller:this});this.setViewData("controller",this);this.setViewData("icon",this.options.icon);this.setViewData("label",this.options.label);this.setViewData("view",this.view)},afterStart:function(){},beforeRender:function(){},afterRender:function(a){return a},render:function(){this.start()},
closest:function(a){var c=this.element.closest("."+a._fullName).data(),d;for(d in c.controls)if(c.controls[d].getClass().fullName==a.fullName)return c.controls[d];return null},stateLoading:function(a){this.view.loading(a);a?mad.bus.trigger("passbolt_component_loading_start",[this]):mad.bus.trigger("passbolt_component_loading_complete",[this])},stateReady:function(){},stateDisabled:function(){},stateHidden:function(a){a?this.view.hide():this.view.show()}})});steal.executed("lib/mad/controller/componentController.js");
steal("can/construct").then(function(){can.Construct("mad.helper.ControllerHelper",{getViewPath:function(a){var c="",a=a.fullName.split("."),d=a.pop(),d=$.String.camelize(d.substr(0,d.indexOf("Controller")));"mad"==a[0]?(c+="mad",a=a.splice(1)):a[0]==mad.Config.read("app.namespace")&&("controller"!=a[1]?(c+="app/plugin/"+a[1],a=a.splice(2)):(c+="app",a=a.splice(1)));if("controller"!=a[0])throw new mad.error.Exception("Controller name mal formed");a=a.splice(1);c+="/view/template/";a.length&&(c+=a.join("/")+
"/");return c+(d+".ejs")}},{})});steal.executed("lib/mad/helper/controllerHelper.js");
steal("mad/controller/componentController.js","mad/devel/components/componentsBrowserController.js","mad/view/template/devel/develSidebar.ejs").then(function(){mad.controller.ComponentController.extend("mad.devel.DevelSidebarController",{defaults:{templateUri:"mad/view/template/devel/develSidebar.ejs"}},{afterStart:function(){var a=this;this.options.toggleButton=new mad.controller.component.ButtonController($("#js-devel-sidebar-toggle-button"),{state:"closed"});this.options.toggleButton.start();var c=
[new mad.model.Action({id:uuid(),label:__("Components browser"),cssClasses:[],action:function(){a.showDevelComponentsGrid()}}),new mad.model.Action({id:uuid(),label:__("SQL trace"),cssClasses:[],action:function(){a.showDevelSqlTrace()}}),new mad.model.Action({id:uuid(),label:__("Plugin configuration"),cssClasses:[],action:function(){mad.bus.trigger("passbolt.config.debug",passbolt.model.User.getCurrent().id)}})];this.options.menu=(new mad.controller.component.MenuController($("#js-devel-sidebar-menu"))).start().load(c);
this.options.sqlTrace=new mad.controller.ComponentController($("#js-devel-sql-trace"),{state:"hidden",templateBased:!1});this.options.sqlTrace.start();this.on()},"{toggleButton} click":function(){this.options.toggleButton.state.is("opened")?(this.options.toggleButton.setState("closed"),$(".devel-sidebar",this.element).hide()):this.options.toggleButton.state.is("closed")&&(this.options.toggleButton.setState("opened"),$(".devel-sidebar",this.element).show())},showDevelComponentsGrid:function(){var a=
mad.app._components;(new mad.controller.component.DialogController(null,{label:__("Application components"),cssClasses:["dialog-wrapper-devel-components-browser"].concat(mad.controller.component.DialogController.defaults.cssClasses)})).start().add(mad.devel.ComponentsBrowserController).start().load(a)},showDevelSqlTrace:function(){var a=(new mad.controller.component.DialogController(null,{label:__("Sql trace"),cssClasses:["dialog-wrapper-devel-sql-trace"].concat(mad.controller.component.DialogController.defaults.cssClasses)})).start();
$(".dialog-content",a.element).html(this.options.sqlTrace.element.html())}})});steal.executed("lib/mad/devel/components/develSidebarController.js");
steal("mad/controller/component/gridController.js").then(function(){mad.controller.component.GridController.extend("mad.devel.ComponentsBrowserController",{defaults:{}},{init:function(a,c){c.map=new mad.object.Map({id:{key:"options.id",func:function(a,b,c){return"devel-components-browser-row-"+c.options.id}},template:"options.templateUri"});c.columnModel=[{name:"id",index:"id",header:{css:[],label:__("Identifier")},valueAdapter:function(a,b,c){return c.getId()}},{name:"status",index:"status",header:{css:[],
label:__("Status")},valueAdapter:function(a,b,c){return c.state.toString(", ")}},{name:"controller",index:"controller",header:{css:[],label:__("Controller")},valueAdapter:function(a,b,c){return c.getClass().shortName},titleAdapter:function(a,b,c){return c.getClass().fullName}},{name:"inherit",index:"inherit",header:{css:[],label:__("Inherit")},valueAdapter:function(a,b,c){return c.getClass().getParentClass().shortName},titleAdapter:function(a,b,c){return c.getClass().getParentClass().fullName}},{name:"template",
index:"template",header:{css:[],label:__("Template")},valueAdapter:function(a,b,c){a=[];c.options.templateBased&&c.view&&a.push(c.view.getTemplate());c.options.itemTemplateUri&&a.push(c.options.itemTemplateUri);return a.length?a.join("<br/>"):"-"}}];this._super(a,c)}," item_selected":function(a,c,d){a=d.replace("devel-components-browser-row-","");console.log(mad.app.getComponent(a))}})});steal.executed("lib/mad/devel/components/componentsBrowserController.js");
steal("jquery/controller","mad/controller/componentController.js","mad/model/grid/column.js","mad/view/component/grid.js","mad/object/map.js","mad/view/template/component/grid.ejs","mad/view/template/component/grid/gridItem.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.component.GridController",{defaults:{label:"Grid Component",viewClass:mad.view.component.Grid,cssClasses:["tableview"],templateUri:"mad/view/template/component/grid.ejs",itemTemplateUri:"mad/view/template/component/grid/gridItem.ejs",
itemClass:null,columnModel:[],map:null,tag:"div",callbacks:{item_selected:null,item_hovered:null}}},{reset:function(){this.view.reset()},beforeRender:function(){this._super();this.setViewData("columnModel",this.options.columnModel);this.setViewData("items",[])},getColumnModel:function(){return this.options.columnModel},getItemClass:function(){return this.options.itemClass},setItemClass:function(a){this.options.itemClass=a},getMap:function(){return this.options.map},setMap:function(a){this.options.map=
a},removeItem:function(a){this.view.removeItem(a)},insertItem:function(a,c,d){if(null!=this.getItemClass()&&!(a instanceof this.getItemClass()))throw new mad.error.WrongParametersException("item",this.getItemClass().fullName);var b=this.getMap().mapObject(a),e=this.getColumnModel();this.view.insertItem(a,c,d);for(var f in e){c=e[f];if(c.cellAdapter){var g=b.id,g=$("#"+g+" .js_grid_column_"+c.name+" div");c.cellAdapter(g,b[c.name],b,a,c)}if(c.widget){var d=c.widget.clazz._fullName,h=c.widget.options,
g=b[i].id,g=$("#"+g+" .js_grid_column_"+c.name+" span");h.value=b[i][c.name];g[d](h);g[d]("render")}}},refreshItem:function(a){this.view.refreshItem(a);var c=this.getMap().mapObject(a),d=this.getColumnModel(),b;for(b in d){var e=d[b];if(e.cellAdapter){var f=c.id,f=$("#"+f+" .js_grid_column_"+e.name+" span");e.cellAdapter(f,c[e.name],c,a,e)}if(e.widget){var g=e.widget.clazz._fullName,h=e.widget.options,f=c[i].id,f=$("#"+f+" .js_grid_column_"+e.name+" span");h.value=c[i][e.name];f[g](h);f[g]("render")}}},
load:function(a){var c=this;this.reset();can.each(a,function(a){c.insertItem(a)});return this},"tbody mouseleave":function(){}," item_selected":function(a,c,d,b){this.options.callbacks.itemSelected&&this.options.callbacks.itemSelected(a,c,d,b)}," item_hovered":function(a,c,d,b){this.options.callbacks.itemHovered&&this.options.callbacks.itemHovered(a,c,d,b)}})});steal.executed("lib/mad/controller/component/gridController.js");
steal("mad/model").then(function(){mad.model.Model("mad.model.grid.Column",{attributes:{id:"string",label:"string",icon:"string",action:"string"}},{})});steal.executed("lib/mad/model/grid/column.js");
steal("mad/view","mad/view/template/component/grid.ejs").then(function(){mad.view.View.extend("mad.view.component.Grid",{},{init:function(a,c){this._super(a,c)},reset:function(){$("tbody tr",this.element).remove()},hideColumn:function(a){$(".js_grid_column_"+a,this.element).hide()},showColumn:function(a){$(".js_grid_column_"+a,this.element).show()},selectItem:function(a){$("#"+a.id,this.element).addClass("selected")},unselectItem:function(a){$("#"+a.id,this.element).removeClass("selected")},removeItem:function(a){$("#"+
a.id,this.element).remove()},_renderRow:function(a){var c=null,c=this.getController().getMap().mapObject(a),d=[],b=[],e=this.getController().getColumnModel(),f;for(f in e){var g=e[f],h=null,h=g.valueAdapter?g.valueAdapter(c[g.name],c,a,g):g.widget||g.cellAdapter?"":c[g.name];d[g.name]=h;h=g.titleAdapter?g.titleAdapter(c[g.name],c,a,g):h;b[g.name]=h}return mad.view.View.render(this.getController().options.itemTemplateUri,{item:a,id:c.id,columnModels:e,values:d,titles:b})},insertItem:function(a,c,d){d=
d||"last";c=c?$("#"+c,this.element):$("tbody",this.element);this.getController().getMap().mapObject(a);var b="",b=this._renderRow(a);return mad.helper.HtmlHelper.create(c,d,b)},refreshItem:function(a){var c=this.getController().getMap().mapObject(a),d="",c=$("#"+c.id,this.element),d=this._renderRow(a);mad.helper.HtmlHelper.create(c,"replace_with",d)},"tbody tr click":function(a,c){var d=null,d=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_selected",
[d,c])},"tbody tr hover":function(a,c){var d=null,d=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_hovered",[d,c])}})});steal.executed("lib/mad/view/component/grid.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_grid_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="tableview-header">\n    <table>\n        <thead>\n            <tr>\n');b.push(a.view.txt(0,"tr",0,this,function(){var b=[],c;for(c in columnModel)b.push('\n                <th class="js_grid_column js_grid_column_'),b.push(a.view.txt(1,"th","class",this,function(){return columnModel[c].name})),b.push(" cell_"),b.push(a.view.txt(1,"th","class",
this,function(){return columnModel[c].name})),b.push(" "),b.push(a.view.txt(1,"th","class",this,function(){return columnModel[c].header.css.join(" ")})),b.push('"',a.view.pending(),">"),b.push("\n                    "),b.push(a.view.txt(0,"th",0,this,function(){return columnModel[c].header.label})),b.push("\n                </th>\n");return b.join("")}));b.push('\n            </tr>\n        </thead>\n    </table>\n</div>\n<div class="tableview-content scroll">\n    <table>\n        <tbody>\n        </tbody>\n    </table>\n</div>\n');
return b.join("")}}))});steal.executed("lib/mad/view/template/component/grid.ejs");
steal("mad/core/singleton.js").then(function(){can.Construct("mad.object.Map",{mapObject:function(a,c){return c.mapObject(a)},mapObjects:function(a,c){return c.mapObjects(a)}},{map:{},init:function(a){this.map=a},mapObject:function(a){var c={};getObjFieldPointer=function(a,b){for(var c=a,d=b.split("."),e=0;e<d.length;e++){if(void 0===c[d[e]])return null;c=c[d[e]]}return c};for(var d in this.map){var b=d.split("."),e=c,f=0,g;for(g in b){var h=b[g];if(f==b.length-1)if("object"==typeof this.map[d]){var k=
this.map[d].func,l=getObjFieldPointer(a,this.map[d].key);null!=l&&(e[h]=k(l,this,a,c))}else l=getObjFieldPointer(a,this.map[d]),null!=l&&(e[h]=l);else"undefined"==typeof e[h]&&(e[h]=[]),e=e[h];f++}}return c},mapObjects:function(a){var c=this,d=[];can.each(a,function(b,e){d[e]=c.mapObject(a[e])});return d}})});steal.executed("lib/mad/object/map.js");
steal("can/construct").then(function(){can.Construct("mad.core.Singleton",{singletonInstance:null,singleton:function(){var a=null;null!=this.singletonInstance?a=this.singletonInstance:(this.singletonInstance="CALL_FROM_SINGLETON",a=this.newInstance.apply(this,arguments));return a}},{init:function(){if("mad.core.Singleton"==this.getClass().fullName)throw new mad.error.CallAbstractFunctionException;if("CALL_FROM_SINGLETON"!=this.getClass().singletonInstance)throw new mad.error.CallPrivateFunctionException("The class is a singleton");
this.getClass().singletonInstance=this}})});steal.executed("lib/mad/core/singleton.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_grid_gridItem_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<tr id="');b.push(a.view.txt(1,"tr","id",this,function(){return id}));b.push('" ');b.push(a.view.txt(1,"tr",1,this,function(){return a.proxy(function(b){a.$(b).data(item.constructor.fullName,item)},this)}));b.push("",a.view.pending(),">");b.push("\n");b.push(a.view.txt(0,"tr",0,this,function(){var b=[],c;for(c in columnModels)b.push('\n\t<td class="js_grid_column_'),
b.push(a.view.txt(1,"td","class",this,function(){return columnModels[c].name})),b.push(" cell_"),b.push(a.view.txt(1,"td","class",this,function(){return columnModels[c].name})),b.push(" "),b.push(a.view.txt(1,"td","class",this,function(){return columnModels[c].header.css.join(" ")})),b.push('"',a.view.pending(),">"),b.push('\n\t\t<div title="'),b.push(a.view.txt(0,"div","title",this,function(){return titles[columnModels[c].name]})),b.push('"',a.view.pending(),">"),b.push("\n\t\t\t"),b.push(a.view.txt(0,
"div",0,this,function(){return values[columnModels[c].name]})),b.push("\n\t\t</div>\n\t</td>\n");return b.join("")}));b.push("\n</tr>\n");return b.join("")}}))});steal.executed("lib/mad/view/template/component/grid/gridItem.ejs");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_devel_develSidebar_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<button id="js-devel-sidebar-toggle-button" class="devel-sidebar-toggle-button"></button>\n<div id="js-devel-sidebar" class="devel-sidebar">\n    <div class="devel-sidebar-menu-wrapper">\n        <ul id="js-devel-sidebar-menu" class="devel-sidebar-menu">\n        </ul>\n    </div>\n</div>\n');return b.join("")}}))});steal.executed("lib/mad/view/template/devel/develSidebar.ejs");
steal("can/construct").then(function(){can.Construct("mad.helper.HtmlHelper",{position:function(a,c){"undefined"!=typeof c.coordinates?a.css({position:"absolute",left:c.coordinates.x+"px",top:c.coordinates.y+"px"}):"undefined"!=typeof c.reference&&a.position({my:c.reference.my,at:c.reference.at,of:c.reference.of})},create:function(a,c,d){d=$(d);if(!(a instanceof jQuery))throw new mad.error.WrongParametersException("refElement","jQuery");if(0==a.length)throw new mad.error.WrongParametersException("refElement",
"jQuery");switch(c){case "inside_replace":a.empty();d=d.prependTo(a);break;case "replace_with":a.replaceWith(d);break;case "first":d=d.prependTo(a);break;case "last":d=d.appendTo(a);break;case "before":d=d.insertBefore(a);break;case "after":d=d.insertAfter(a);break;default:throw new mad.error.WrongParametersException("position");}return d}},{})});steal.executed("lib/mad/helper/htmlHelper.js");
steal("can/construct").then(function(){can.getObject("mad.config",null,!0);can.Construct("mad.Config",{loadFile:function(a){var c=this,a=steal.idToUri(a).toString();$.ajax({url:a,async:!1,dataType:"json",success:function(a){c.load(a)}})},load:function(a){$.extend(!0,mad.config,a)},read:function(a){return can.getObject(a,mad.config)},write:function(a,c){can.getObject(a,mad.config,!0,c)}},{})});steal.executed("lib/mad/config/config.js");
steal("mad/error/callAbstractFunctionException.js","mad/error/callInterfaceConstructorException.js","mad/error/callInterfaceFunctionException.js","mad/error/callPrivateFunctionException.js","mad/error/missingOptionException.js","mad/error/missingParameterException.js","mad/error/noConstructorException.js","mad/error/templateMissingException.js","mad/error/wrongParametersException.js","mad/error/wrongConfigException.js").then(function(){$.String.getObject("mad.error",null,!0);mad.error.Exception=function(a,
c){this.name="Exception";this.title=c||"An "+this.name+" occured";this.message=a||this.title};mad.error.Exception.prototype=Error()});steal.executed("lib/mad/error/exception.js");steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallAbstractFunctionException=function(a){this.name="CallAbstractFunctionException";this.message=a||"This function is abstract"};mad.error.CallAbstractFunctionException.prototype=Error()});steal.executed("lib/mad/error/callAbstractFunctionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallInterfaceConstructorException=function(a){this.name="CallInterfaceConstructorException";this.message=a||"This constructor is an interface constructor"};mad.error.CallInterfaceConstructorException.prototype=Error()});steal.executed("lib/mad/error/callInterfaceConstructorException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallInterfaceFunctionException=function(a){this.name="CallInterfaceFunctionException";this.message=a||"This function is an interface function"};mad.error.CallInterfaceFunctionException.prototype=Error()});steal.executed("lib/mad/error/callInterfaceFunctionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.CallPrivateFunctionException=function(a){this.name="CallPrivateFunctionException";this.message=a||"This function is private"};mad.error.CallPrivateFunctionException.prototype=Error()});steal.executed("lib/mad/error/callPrivateFunctionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.MissingOptionException=function(a,c,d){this.name="MissingOptionException";this.message=d||"The option ("+a+") is missing when the class ("+c+") is instantiated"};mad.error.MissingOptionException.prototype=Error()});steal.executed("lib/mad/error/missingOptionException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.MissingParameterException=function(a,c){console;this.name="MissingParameterException";this.message=c||"The ("+a+") parameter of the function ( "+arguments.callee.caller.toString()+" ) is missing"};mad.error.MissingParameterException.prototype=Error()});steal.executed("lib/mad/error/missingParameterException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.NoConstructorException=function(a){this.name="NoConstructorException";this.message=a||"This class has no constructor"};mad.error.NoConstructorException.prototype=Error()});steal.executed("lib/mad/error/noConstructorException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.TemplateMissingException=function(a){this.name="TemplateMissingException";this.message=a||"Template missing"};mad.error.TemplateMissingException.prototype=Error()});steal.executed("lib/mad/error/templateMissingException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.WrongParametersException=function(a,c){this.name="WrongParametersException";this.message="Wrong parameter ["+(a||"N/A")+"] expected type is ["+c+"]"};mad.error.WrongParametersException.prototype=Error()});steal.executed("lib/mad/error/wrongParametersException.js");
steal("jquery/lang/string").then(function(){$.String.getObject("mad.error",null,!0);mad.error.WrongConfigException=function(a,c){this.name="WrongConfigException";this.message=c||"The config ("+a+") is not well defined"};mad.error.WrongConfigException.prototype=Error()});steal.executed("lib/mad/error/wrongConfigException.js");
steal("can/construct").then(function(){can.Construct("mad.error.ErrorHandler",{_log:function(a,c,d,b){a=a.toUpperCase()+" "+c+" ("+d+")";console.log(a);console.log(b)},handleException:function(a){mad.error.ErrorHandler._log("exception",a.name,a.message,a.stack||null);throw a;},handleError:function(a,c,d,b){mad.error.ErrorHandler._log(a,c,d||"",b||null)}},{})});steal.executed("lib/mad/error/errorHandler.js");
steal("mad/controller/componentController.js","mad/view/template/app.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.AppController",{defaults:{},destroy:function(){if(null!=mad.controller.AppController.APP_NS_ID){for(var a in mad.controller.AppController.globals){var c=mad.controller.AppController.globals[a];"APP_NS"!=c&&mad.controller.AppController.deleteGlobal(c)}mad.controller.AppController.deleteGlobal("APP_NS");delete window[mad.controller.AppController.APP_NS_ID];
delete mad.APP_NS_ID;delete mad.APP_NS;mad.controller.AppController.APP_NS_ID=null}}},{_components:{},init:function(a,c){mad.app=this;this._super(a,c)},referenceComponent:function(a){this._components[a.getId()]=a},unreferenceComponent:function(a){delete this._components[a.getId()]},getComponent:function(a){var c=null;"undefined"!=typeof this._components[a]&&(c=this._components[a]);return c},stateReady:function(){mad.bus.trigger("app_ready")}})});steal.executed("lib/mad/controller/appController.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_app_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<\!-----------------------------------------------------------------------------\n  Menu bar\n -----------------------------------------------------------------------------\>\n<div id="menubar" class="grid_16 alpha omega">\n\t<div id="menubar_left" class="grid_8 alpha">\n\t\t<div id="js_menu_controller"/>\n\t</div>\n\t<div id="menubar_right" class="grid_8 omega">\n\t\tMenu bar Right\n\t</div>\n</div>\n<div class="clear"></div>\n<\!-----------------------------------------------------------------------------\n  User bar\n -----------------------------------------------------------------------------\>\n<div id="userbar" class="grid_16 alpha omega">\n\t<div id="logo" class="grid_3 alpha">\n\t\t<span>PASSBOLT</span>\n\t</div>\n\t<div id="search_container" class="grid_10">\n\t\t<div id="js_notif_controller" />\n\t\t<div id="search_field" class="grid_8 alpha">\n\t\t\t<input type="text" /> \n\t\t</div>\n\t\t<div id="search_button" class="grid_2 omega">\n\t\t\t<input type="button" value="search"/> \n\t\t</div>\n\t</div>\n\t<div id="login_container" class="grid_3 omega"> <\!-- 2 + 10 + 2 = 16 wtf --\>\n\t\tbiloute@gmail.com\n\t</div>\n</div>\n<div class="clear"></div>\n<\!-----------------------------------------------------------------------------\n  Workspaces Container\n -----------------------------------------------------------------------------\>\n<div id="js_workspaces_container" class="grid_16 alpha omega"/>\n<div class="clear"></div>');
return b.join("")}}))});steal.executed("lib/mad/view/template/app.ejs");
steal("mad/controller/componentController.js","mad/view/template/component/button.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.component.ButtonController",{defaults:{label:"Button Component",templateUri:"mad/view/template/component/button.ejs",templateBased:!1,value:null,events:{click:null},tag:"button"}},{value:null,init:function(a,c){this._super(a,c);this.value=c.value},getValue:function(){return this.value},setValue:function(a){this.value=a;return this},click:function(a,
c){this.state.is("disabled")?c.stopImmediatePropagation():this.options.events.click&&this.options.events.click(this.element,c,this.value)},stateDisabled:function(a){a?this.element.attr("disabled","disabled").addClass("disabled"):this.element.removeAttr("disabled").removeClass("disabled")}})});steal.executed("lib/mad/controller/component/buttonController.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_button_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<button type="button">\n\t');icon&&img_tag(icon);b.push("\n\t");b.push(a.view.txt(1,"button",0,this,function(){return label}));b.push("\n</button>");return b.join("")}}))});steal.executed("lib/mad/view/template/component/button.ejs");
steal("mad/controller/component/buttonController.js","mad/view/component/buttonDropdown.js","mad/view/template/component/buttonDropdown.ejs").then(function(){mad.controller.component.ButtonController.extend("mad.controller.component.ButtonDropdownController",{defaults:{label:"Button Dropdown Component",viewClass:mad.view.component.ButtonDropdown,menu:null,items:null,contentElement:null}},{afterStart:function(){var a=null,a=null==this.options.contentElement?$('<ul class="dropdown-content"></div>').insertAfter(this.element):
$(this.options.contentElement);this.options.menu=new mad.controller.component.MenuController(a);this.options.menu.start();this.options.menu.load(this.options.items)},setItemState:function(a,c){this.options.menu.setItemState(a,c)},stateDisabled:function(a){this._super(a);a&&this.view.close()}})});steal.executed("lib/mad/controller/component/buttonDropdownController.js");
steal("mad/view").then(function(){mad.view.View.extend("mad.view.component.ButtonDropdown",{defaults:{}},{getDropdownContentElement:function(){var a=this.getController().options.contentElement;return null!=a?$(a):this.element.next()},open:function(){this.element.addClass("pressed");this.getDropdownContentElement().addClass("visible");this.getController().state.addState("open")},close:function(){this.element.removeClass("pressed");this.getDropdownContentElement().removeClass("visible");this.getController().state.is("open")&&
this.getController().state.removeState("open")},click:function(){if(this.getController().state.is("disabled"))return!1;this.getController().state.is("open")?this.close():this.open();return!1},"{document} click":function(a){this.element.is(a)||this.close()}})});steal.executed("lib/mad/view/component/buttonDropdown.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_buttonDropdown_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<div class="dropdown">\n\t<a>\n\t\t<span>more</span>\n\t\t<i class="icon after arrowdown"></i>\n\t</a>\n\t<ul class="dropdown-content">\n\t\t<li><a href="#">submenu1</a></li>\n\t\t<li><a href="#">submenu2</a></li>\n\t</ul>\n</div>');return b.join("")}}))});steal.executed("lib/mad/view/template/component/buttonDropdown.ejs");
steal("mad/controller/componentController.js").then(function(){mad.controller.ComponentController.extend("mad.controller.component.CompositeController",{defaults:{label:"Composite Component Controller"}},{init:function(a,c){this._components=[];this._super(a,c)},getComponent:function(a){return this._components[a]},addComponent:function(a){return this._components[a.getId()]=a}})});steal.executed("lib/mad/controller/component/compositeController.js");
steal("mad/controller/component/freeCompositeController.js","mad/view/component/dialog.js","mad/view/template/component/dialog.ejs").then(function(){mad.controller.component.FreeCompositeController.extend("mad.controller.component.DialogController",{defaults:{label:"Dialog Controller",viewClass:mad.view.component.Dialog,cssClasses:["dialog-wrapper"],tag:"div"},closeLatest:function(){$(".dialog-wrapper:last").remove()}},{init:function(a,c){var d=mad.app.element,b="first",e=$(".dialog-wrapper:last");
e.length&&(d=e,b="after");d=mad.helper.HtmlHelper.create(d,b,"<div />");this.setup(d,c);this._super(d,c)},add:function(a,c){if("undefined"==typeof c||null==c)c={};var d=this.addComponent(a,c,"js_dialog_content");d.start();return d},setTitle:function(a){this.view.setTitle(a)}})});steal.executed("lib/mad/controller/component/dialogController.js");
steal("mad/controller/component/compositeController.js","mad/view/template/component/workspace.ejs").then(function(){mad.controller.component.CompositeController.extend("mad.controller.component.FreeCompositeController",{defaults:{label:"WorkspaceController"}},{addComponent:function(a,c,d){d=$("."+(d||"mad-container-main"),this.element);return this._super(mad.helper.ComponentHelper.create(d,"inside_replace",a,c))}})});steal.executed("lib/mad/controller/component/freeCompositeController.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_workspace_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="js_workspace grid_16 alpha omega">\n\t<\!-----------------------------------------------------------------------------\n\tWorkspace header bar\n\t-----------------------------------------------------------------------------\>\n\t<div class="js_workspace_label grid_3 alpha">\n\t\t');b.push(a.view.txt(1,"div",0,this,function(){return label}));
b.push('\n\t</div>\n\t\n\t<div class="js_workspace_actions_container grid_7"></div>\n\t\n\t<div class="js_workspace_view_actions_container grid_6 omega"></div>\n\t\n\t<div class="clear"></div>\n\t\n\t<\!-----------------------------------------------------------------------------\n\tMain area\n\t-----------------------------------------------------------------------------\>\n\t\n\t<div class="js_workspace_sidebar_first grid_3 alpha">\n\t</div>\n\t\n\t<div class="js_workspace_main grid_7">\n\t</div>\n\t\n\t<div class="js_workspace_sidebar_second grid_6 omega">\n\t</div>\n\t\n\t<div class="clear"></div>\n</div>\n');
return b.join("")}}))});steal.executed("lib/mad/view/template/component/workspace.ejs");steal("mad/view").then(function(){mad.view.View.extend("mad.view.component.Dialog",{defaults:{}},{setTitle:function(a){$(".dialog-header h2",this.element).html(a)},".dialog-close click":function(){this.element.remove()},"{window} keyup":function(a,c){27==c.keyCode&&this.element.remove()}," .js-dialog-cancel click":function(){this.element.remove()}})});steal.executed("lib/mad/view/component/dialog.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_dialog_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="dialog">\n    <div class="dialog-header">\n        <h2>');b.push(a.view.txt(1,"h2",0,this,function(){return label}));b.push('</h2>\n        <a href="#" class="dialog-close"><i class="icon close no-text"></i><span>close</span></a>\n    </div>\n    <div class="js_dialog_content dialog-content">\n    </div>\n</div>\n');return b.join("")}}))});
steal.executed("lib/mad/view/template/component/dialog.ejs");
steal("mad/controller/component/dropDownMenuController.js","mad/view/component/menu/contextualMenu.js").then(function(){mad.controller.component.DropDownMenuController.extend("mad.controller.component.ContextualMenuController",{defaults:{viewClass:mad.view.component.menu.ContextualMenu,cssClasses:["contextual-menu"],source:null,coordinates:{x:null,y:null}}},{init:function(a,c){if(null==a||!a.length){0!=$("#js_contextual_menu").length&&$("#js_contextual_menu").remove();var d=mad.helper.HtmlHelper.create(mad.app.element,
"first",'<ul id="js_contextual_menu" />');this.setup(d)}this._super(d,c)},afterStart:function(){this._super();this.view.position({coordinates:this.options.coordinates})}})});steal.executed("lib/mad/controller/component/contextualMenuController.js");
steal("mad/controller/component/menuController.js","mad/view/component/menu/dropDownMenu.js","mad/view/template/component/menu/dropDownMenu.ejs").then(function(){mad.controller.component.MenuController.extend("mad.controller.component.DropDownMenuController",{defaults:{label:"Drop Down Menu Controller Component",viewClass:mad.view.component.menu.DropDownMenu,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"mad/view/template/component/menu/dropDownMenu.ejs",cssClasses:["dropdownmenu"],
callbacks:{item_selected:null,item_right_selected:null,item_hovered:null}}},{open:function(a){this.view.open(a)},close:function(a){this.view.close(a)}," item_opened":function(a,c,d){this.open(d)}," item_closed":function(a,c,d){this.close(d)}})});steal.executed("lib/mad/controller/component/dropDownMenuController.js");
steal("mad/controller/component/treeController.js","mad/view/template/component/menu/menuItem.ejs","mad/model/action.js").then(function(){mad.controller.component.TreeController.extend("mad.controller.component.MenuController",{defaults:{label:"MenuController",cssClasses:["menu"],itemTemplateUri:"mad/view/template/component/menu/menuItem.ejs",itemClass:mad.model.Action,map:new mad.object.Map({id:"id",label:"label",cssClasses:{key:"cssClasses",func:function(a,c,d){a=$.merge([],a);"undefined"!=typeof d.state&&
(a=$.merge(a,d.state.getState()));return a.join(" ")}},children:{key:"children",func:mad.object.Map.mapObjects}})}},{setItemState:function(a,c){for(i in this.options.items)this.options.items[i].id==a&&(this.options.items[i].state.setState(c),this.refreshItem(this.options.items[i]))}," item_selected":function(a,c,d){this._super(a,c,d);(action=d.getAction()&&!d.state.is("disabled"))&&d.action(this)}})});steal.executed("lib/mad/controller/component/menuController.js");
steal("mad/controller/componentController.js","mad/view/component/tree.js","mad/object/map.js","mad/error/exception.js","mad/view/template/component/tree.ejs","mad/view/template/component/tree/treeItem.ejs").then(function(){mad.controller.ComponentController.extend("mad.controller.component.TreeController",{defaults:{label:"Tree Component",viewClass:mad.view.component.Tree,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"mad/view/template/component/tree/treeItem.ejs",templateBased:!1,
cssClasses:["tree"],items:new can.Model.List,itemClass:null,map:null,tag:"ul",callbacks:{item_selected:null,item_right_selected:null,item_hovered:null}}},{init:function(a,c){c.items=new c.itemClass.List;this._super(a,c)},insertItem:function(a,c,d){if(null==this.getItemClass())throw new mad.error.Exception("The associated itemClass can not be null");if(!(a instanceof this.getItemClass()))throw new mad.error.WrongParametersException("item",this.getItemClass().fullName);this.view.insertItem(a,c,d)},
removeItem:function(a){this.view.removeItem(a)},refreshItem:function(a){if(null==this.getItemClass())throw new mad.error.Exception("The associated itemClass can not be null");if(!(a instanceof this.getItemClass()))throw new mad.error.WrongParametersException("item",this.getItemClass().fullName);this.view.refreshItem(a)},reset:function(){this.options.items.splice(0);this.view.reset()},load:function(a){var c=this;null==a?a=new this.options.itemClass.List:!(a instanceof can.Model.List)&&$.isArray(a)&&
(a=new this.options.itemClass.List(a));this.options.items=this.options.items.concat(a);can.each(this.options.items,function(a){c.insertItem(a)})},getItemClass:function(){return this.options.itemClass},setItemClass:function(a){this.options.itemClass=a},getMap:function(){return this.options.map},setMap:function(a){this.options.map=a},selectItem:function(a){this.view.selectItem(a)},rightSelectItem:function(a){this.view.rightSelectItem(a)},unselectItem:function(){this.view.unselectAll()},unselectAll:function(){this.view.unselectAll()},
hoverItem:function(a){this.view.hoverItem(a)}," item_selected":function(a,c,d,b){this.selectItem(d);this.options.callbacks.itemSelected&&this.options.callbacks.itemSelected(a,c,d,b)}," item_right_selected":function(a,c,d,b){this.rightSelectItem(d);this.options.callbacks.itemRightSelected&&this.options.callbacks.itemRightSelected(a,c,d,b)}," item_hovered":function(a,c,d,b){this.hoverItem(d);this.options.callbacks.itemHovered&&this.options.callbacks.itemHovered(a,c,d,b)}})});steal.executed("lib/mad/controller/component/treeController.js");
steal("mad/view").then(function(){mad.view.View.extend("mad.view.component.Tree",{},{init:function(a,c){this._super(a,c)},getItemElement:function(a){return $("#"+a.id,this.element)},insertItem:function(a,c,d){var d=d||"last",b=c?this.element.find("#"+c):null,c=b?b.find("ul:first"):this.element,e=this;c.length||(b.append("<ul/>"),c=b.find("ul:first"));var f=this.getController().getMap().mapObject(a);this.getController().setViewData("itemClass",this.getController().getItemClass());this.getController().setViewData("item",
a);this.getController().setViewData("mappedItem",f);b=f.children&&f.children.length?!0:!1;this.getController().setViewData("hasChildren",b);var g=[];"undefined"!=typeof f.cssClasses&&(g=g.concat(f.cssClasses));this.getController().setViewData("cssClasses",g);g=mad.view.View.render(this.getController().options.itemTemplateUri,this.getController().getViewData());d=mad.helper.HtmlHelper.create(c,d,g);b&&can.each(a.children,function(a){e.insertItem(a,f.id,"last")});return d},removeItem:function(a){this.getItemElement(a).remove()},
refreshItem:function(a){var c=this,d=this.getItemElement(a),b=this.getController().getMap().mapObject(a);this.getController().setViewData("itemClass",this.getController().getItemClass());this.getController().setViewData("item",a);this.getController().setViewData("mappedItem",b);var e=b.children&&b.children.length?!0:!1;this.getController().setViewData("hasChildren",e);var f=mad.view.View.render(this.getController().options.itemTemplateUri,this.getController().getViewData());d.replaceWith(f);e&&can.each(a.children,
function(a){c.insertItem(a,b.id,"last")});return d},reset:function(){$("li",this.element).remove()},unselectAll:function(){$(".row.selected",this.element).removeClass("selected")},selectItem:function(a){this.unselectAll();a=this.getItemElement(a);$(".row:first",a).addClass("selected")},rightSelectItem:function(){},hoverItem:function(){},"li .main-cell a click":function(a,c){c.stopPropagation();c.preventDefault();var d=null,d=a.parents("li"),d=this.getController().getItemClass()?d.data(this.getController().getItemClass().fullName):
d[0].id;this.element.trigger("item_selected",[d,c]);return!1},"li a contextmenu":function(a,c){c.stopPropagation();c.preventDefault();if(3==c.which){var d=null,d=a.parents("li"),d=this.getController().getItemClass()?d.data(this.getController().getItemClass().fullName):d[0].id;this.element.trigger("item_right_selected",[d,c])}return!1},"li a hover":function(a,c){c.stopPropagation();c.preventDefault();var d=null,d=a.parents("li"),d=this.getController().getItemClass()?d.data(this.getController().getItemClass().fullName):
d[0].id;this.element.trigger("item_hovered",[d,c]);return!1}})});steal.executed("lib/mad/view/component/tree.js");steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tree_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push("<ul></ul>");return b.join("")}}))});steal.executed("lib/mad/view/template/component/tree.ejs");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tree_treeItem_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<li id="');b.push(a.view.txt(1,"li","id",this,function(){return mappedItem.id}));b.push('" ');b.push(a.view.txt(1,"li",1,this,function(){return a.proxy(function(b){a.$(b).data(itemClass.fullName,item)},this)}));b.push(' class="');b.push(a.view.txt(1,"li","class",this,function(){return cssClasses.join(" ")}));b.push('"',a.view.pending(),">");
b.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');b.push(a.view.txt(1,"span",0,this,function(){return mappedItem.label}));b.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n");b.push(a.view.txt(0,"li",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul>\n\t</ul>\n");return a.join("")}));b.push("\n</li>\n");return b.join("")}}))});steal.executed("lib/mad/view/template/component/tree/treeItem.ejs");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_menu_menuItem_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<li id="');b.push(a.view.txt(1,"li","id",this,function(){return mappedItem.id}));b.push('" ');b.push(a.view.txt(1,"li",1,this,function(){return a.proxy(function(b){a.$(b).data(itemClass.fullName,item)},this)}));b.push(' class="');b.push(a.view.txt(1,"li","class",this,function(){return cssClasses.join(" ")}));b.push('"',a.view.pending(),">");
b.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');b.push(a.view.txt(1,"span",0,this,function(){return mappedItem.label}));b.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n");b.push(a.view.txt(0,"li",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul>\n\t</ul>\n");return a.join("")}));b.push("\n</li>\n");return b.join("")}}))});steal.executed("lib/mad/view/template/component/menu/menuItem.ejs");
steal("mad/model","mad/model/state.js").then(function(){mad.model.Model("mad.model.Action",{attributes:{id:"string",label:"string",name:"string",icon:"string",action:"function",cssClasses:"array",initial_state:"string",state:mad.model.State.model,active:"boolean"}},{init:function(){"undefined"==typeof this.initial_state&&(this.initial_state="ready");this.state=new mad.model.State;this.state.setState(this.initial_state);if("undefined"==typeof this.cssClasses||null==this.cssClasses)this.cssClasses=
[]},getAction:function(){return"undefined"!=typeof this.action?this.action:null}})});steal.executed("lib/mad/model/action.js");
steal("mad/model").then(function(){mad.model.Model.extend("mad.model.State",{attributes:{previous:"can.List",current:"can.List"}},{init:function(){this.previous=new can.List([]);this.current=new can.List([])},is:function(a){return null==a&&!this.current.length?!0:-1!=this.current.indexOf(a)?!0:!1},was:function(a){return null==a&&!this.previous.length?!0:-1!=this.previous.indexOf(a)?!0:!1},setState:function(a){a=$.isArray(a)?a:[a];this.previous.replace(this.current.attr());this.current.replace(a)},
addState:function(a){a=$.isArray(a)?a:[a];this.previous.replace(this.current.attr());$.each(this.current.attr(),function(c,d){a.push(d)});this.current.replace(a)},removeState:function(a){var a=$.isArray(a)?a:[a],c=[];this.previous.replace(this.current.attr());$.each(this.current.attr(),function(d,b){-1==a.indexOf(b)&&c.push(b)});this.current.replace(c)},getState:function(){return this.current},toString:function(a){"undefined"==typeof a&&(a=",");return this.current.join(a)}})});steal.executed("lib/mad/model/state.js");
steal("mad/view/component/tree.js").then(function(){mad.view.component.Tree.extend("mad.view.component.menu.DropDownMenu",{},{init:function(a,c){this._super(a,c)},open:function(a){a=$("#"+a.id,this.element);a.removeClass("closed").addClass("opened");$(".control:first",a).removeClass("open").addClass("close")},close:function(a){a=$("#"+a.id,this.element);a.removeClass("opened").addClass("closed");$(".control:first",a).removeClass("close").addClass("open")},"li mouseover":function(a,c){c.stopPropagation();
c.preventDefault();var d=null,d=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_opened",d)},"li mouseleave":function(a,c){c.stopPropagation();c.preventDefault();var d=null,d=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_closed",d)}})});steal.executed("lib/mad/view/component/menu/dropDownMenu.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_menu_dropDownMenu_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<li id="');b.push(a.view.txt(1,"li","id",this,function(){return mappedItem.id}));b.push('" ');b.push(a.view.txt(1,"li",1,this,function(){return a.proxy(function(b){a.$(b).data(itemClass.fullName,item)},this)}));b.push(' class="');b.push(a.view.txt(1,"li","class",this,function(){return cssClasses.join(" ")}));b.push('"',a.view.pending(),
">");b.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');b.push(a.view.txt(1,"span",0,this,function(){return mappedItem.label}));b.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n");b.push(a.view.txt(0,"li",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul>\n\t</ul>\n");return a.join("")}));b.push("\n</li>\n");return b.join("")}}))});steal.executed("lib/mad/view/template/component/menu/dropDownMenu.ejs");
steal("mad/view/component/menu/dropDownMenu.js").then(function(){mad.view.component.menu.DropDownMenu.extend("mad.view.component.menu.ContextualMenu",{},{"{document} click":function(a,c){!this.element.is(a)&&!$(this.getController().options.source).is(c.target)&&this.element.remove()}})});steal.executed("lib/mad/view/component/menu/contextualMenu.js");
steal("mad/controller/component/compositeController.js","mad/view/component/tab.js","mad/view/template/component/tab.ejs").then(function(){mad.controller.component.CompositeController.extend("mad.controller.component.TabController",{defaults:{label:"Tab Controller",viewClass:mad.view.component.Tab,autoMenu:!0}},{init:function(a,c){this.enabledId=null;this._super(a,c);this.setViewData("autoMenu",this.options.autoMenu)},afterStart:function(){this.options.autoMenu&&(this.options.menu=new mad.controller.component.MenuController($(".js_tabs_nav",
this.element)),this.options.menu.start());this.on()},"{menu} item_selected":function(a,c,d){this.options.autoMenu&&this.enableTab(d.id.replace("js_tab_nav_",""))},enableTab:function(a){this.enabledTabId&&(this.getComponent(this.enabledTabId).setState("hidden"),this.view.unselectTab(this.enabledTabId));this.enabledTabId=a;a=this.getComponent(this.enabledTabId);a.state.is(null)?a.start():a.state.is("hidden")&&a.setState("ready");this.view.selectTab(this.enabledTabId)},addComponent:function(a,c){var d=
["tab-content"];c.id="undefined"!=typeof c.id?c.id:uuid();this.options.autoMenu&&this.options.menu.insertItem(new mad.model.Action({id:"js_tab_nav_"+c.id,label:c.label}));$.isArray(c.cssClasses)?$.merge(c.cssClasses,d):c.cssClasses=d;return this._super(mad.helper.ComponentHelper.create($(".js_tabs_content",this.element),"last",a,c))}})});steal.executed("lib/mad/controller/component/tabController.js");
steal("mad/view").then(function(){mad.view.View.extend("mad.view.component.Tab",{templateUri:"mad/view/template/component/tab.ejs"},{selectTab:function(a){this.getController().getComponent(a).view.addClass("selected");$("#js_tab_nav_"+a,this.element).find("a").addClass("selected")},unselectTab:function(a){this.getController().getComponent(a).view.removeClass("selected");$("#js_tab_nav_"+a,this.element).find("a").removeClass("selected")}})});steal.executed("lib/mad/view/component/tab.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tab_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push(a.view.txt(0,"",0,this,function(){var a=[];autoMenu&&a.push('\n<ul class="js_tabs_nav tabs-nav">\n</ul>\n');return a.join("")}));b.push('\n<div class="js_tabs_content tabs-content">\n</div>\n');return b.join("")}}))});steal.executed("lib/mad/view/template/component/tab.ejs");
steal("mad/controller/component/buttonController.js","mad/view/template/component/button.ejs").then(function(){mad.controller.component.ButtonController.extend("mad.controller.component.ToggleButtonController",{defaults:{}},{click:function(a,c){this._super(a,c);this.state.is("selected")?this.setState("ready"):this.setState("selected")},stateSelected:function(a){a?this.element.addClass("selected"):this.element.removeClass("selected")}})});steal.executed("lib/mad/controller/component/toggleButtonController.js");
steal("jquery/controller","mad/controller/component/treeController.js","mad/view/component/tree/dynamicTree.js","mad/object/map.js","mad/view/template/component/tree.ejs","mad/view/template/component/tree/dynamicTree.ejs").then(function(){mad.controller.component.TreeController.extend("mad.controller.component.DynamicTreeController",{defaults:{label:"Dynamix Tree Component",viewClass:mad.view.component.tree.DynamicTree,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"mad/view/template/component/tree/dynamicTree.ejs",
map:null,callbacks:{item_selected:null,item_right_selected:null,item_hovered:null}}},{open:function(a){this.view.open(a)},close:function(a){this.view.close(a)}," item_opened":function(a,c,d){this.open(d)}," item_closed":function(a,c,d){this.close(d)}})});steal.executed("lib/mad/controller/component/dynamicTreeController.js");
steal("mad/view/component/tree.js").then(function(){mad.view.component.Tree.extend("mad.view.component.tree.DynamicTree",{},{init:function(a,c){this._super(a,c)},open:function(a){$("#"+a.id,this.element).removeClass("close").addClass("open")},close:function(a){$("#"+a.id,this.element).removeClass("open").addClass("close")},".node-ctrl a click":function(a,c){c.stopPropagation();c.preventDefault();var d=null,b=a.parents("li"),d=this.getController().getItemClass()?b.data(this.getController().getItemClass().fullName):
b[0].id;b.hasClass("close")?this.element.trigger("item_opened",d):this.element.trigger("item_closed",d)},".more-ctrl a click":function(a,c){c.stopPropagation();c.preventDefault();var d=null,d=a.parents("li"),d=this.getController().getItemClass()?d.data(this.getController().getItemClass().fullName):d[0].id;this.element.trigger("item_right_selected",[d,c])}})});steal.executed("lib/mad/view/component/tree/dynamicTree.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_tree_dynamicTree_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];hasChildren&&cssClasses.push("close");b.push('\n<li id="');b.push(a.view.txt(1,"li","id",this,function(){return mappedItem.id}));b.push('" ');b.push(a.view.txt(1,"li",1,this,function(){return a.proxy(function(b){a.$(b).data(itemClass.fullName,item)},this)}));b.push(' class="node ');b.push(a.view.txt(1,"li","class",this,function(){return cssClasses.join(" ")}));
b.push('"',a.view.pending(),">");b.push('\n\t<div class="row">\n\t\t<div class="main-cell-wrapper">\n\t\t\t<div class="main-cell">\n\t\t\t\t<a href="#"><span>');b.push(a.view.txt(1,"span",0,this,function(){return mappedItem.label}));b.push("</span></a>\n\t\t\t</div>\n\t\t</div>\n");b.push(a.view.txt(0,"div",0,this,function(){var a=[];hasChildren&&a.push('\n\t\t<div class="left-cell node-ctrl">\n\t\t\t<a href="#"><span>open/close</span></a>\n\t\t</div>\n');return a.join("")}));b.push('\n\t\t<div class="right-cell more-ctrl">\n\t\t\t<a href="#"><span>more</span></a>\n\t\t</div>\n\t</div>\n\t\n');
b.push(a.view.txt(0,"li",0,this,function(){var a=[];hasChildren&&a.push("\n\t<ul></ul>\n");return a.join("")}));b.push("\n</li>\n");return b.join("")}}))});steal.executed("lib/mad/view/template/component/tree/dynamicTree.ejs");Math.randomRange=function(a,c){return Math.floor(Math.random()*(c-a+1))+a};steal.executed("lib/mad/crypto/random.js");steal("can/construct").then(function(){});steal.executed("lib/mad/event/event.js");
steal("mad/form/formElement.js").then(function(){mad.controller.ComponentController.extend("mad.form.FeedbackController",{defaults:{label:"Feedback Component Controller",message:null,templateBased:!1}},{setMessage:function(a){this.message=a;return this},stateSuccess:function(a){a&&(this.element.html(this.message),this.element.removeClass("error"))},stateError:function(a){a&&(this.element.html(this.message),this.element.addClass("error"))}})});steal.executed("lib/mad/form/feedbackController.js");
steal("mad/controller/componentController.js","mad/view/form/formElementView.js").then(function(){mad.controller.ComponentController.extend("mad.form.FormElement",{defaults:{viewClass:mad.view.form.FormElementView,templateBased:!1,modelReference:null,validate:!0,validateFunction:null,defaultValue:null,value:null,callbacks:{changed:function(){}}}},{init:function(a,c){this.value=this.defaultValue=c.value;this._super(a,c)},getModelReference:function(){var a=null;this.options.modelReference&&(a=this.options.modelReference);
return a},requireValidation:function(){var a=!1;this.options.validate&&(a=this.options.validate);return a},setModelReference:function(a){this.options.modelReference=a},getValue:function(){return this.value},reset:function(){this.setState("reset");this.setValue(this.options.value);this.setState("ready")},setValue:function(a){this.value=a;this.view.setValue(this.value);return this},afterStart:function(){this.setValue(this.options.value)},stateReset:function(){this.setState("ready")},stateReady:function(){},
stateError:function(){},stateDisabled:function(a){a?this.element.attr("disabled","disabled").addClass("disabled"):this.element.removeAttr("disabled").removeClass("disabled")}," changed":function(a,c,d){this.value=d.value;this.options.callbacks.changed&&this.options.callbacks.changed(this.value)}})});steal.executed("lib/mad/form/formElement.js");
steal("mad/view").then(function(){mad.view.View.extend("mad.view.form.FormElementView",{},{getName:function(){return this.element.attr("name")},setValue:function(){},reset:function(){}})});steal.executed("lib/mad/view/form/formElementView.js");
steal("mad/controller","mad/view/form/formView.js","mad/form/formElement.js").then(function(){mad.controller.ComponentController.extend("mad.form.FormController",{defaults:{callbacks:{error:function(){},submit:function(){}},tag:"form",action:null,validateOnChange:!0,templateBased:!1,viewClass:mad.view.form.FormView}},{init:function(a,c){this.elements={};this.feedbackElements={};this.data={};this._super(a,c)},beforeRender:function(){this.setViewData("action",this.options.action)},reset:function(){for(var a in this.elements)this.elements[a].setValue(this.options.defaultValue)},
load:function(a){for(var c in this.elements){var d=this.elements[c].getModelReference(),b=null;if(null!=d){if(!(a instanceof mad.model.Model))throw new mad.error.WrongParametersException("data",mad.model.Model.fullName);b=mad.model.Model.getModelAttributeValue(d,a)}else b=a[c];this.elements[c].setValue(b)}},getElement:function(a){return this.elements[a]},addElement:function(a,c){if(!(a instanceof mad.form.FormElement))throw new mad.error.WrongParametersException("element","mad.form.FormElement");
var d=a.getId();this.elements[d]=a;"undefined"!=typeof c&&(this.feedbackElements[d]=c);return a},removeElement:function(a){if(!(a instanceof mad.form.FormElement)||null==a)throw new mad.error.WrongParametersException("element","mad.form.FormElement");a=a.getId();if("undefined"==typeof this.elements[a])throw new mad.error.Exception("The target element to remove does not exist");delete this.elements[a];delete this.feedbackElements[a]},getData:function(){var a={},c;for(c in this.elements){var d=this.elements[c].getModelReference(),
b=this.elements[c].getValue();if(null!=d){var d=mad.model.Model.getModelAttributes(d),e=d[d.length-1].name;a[d[0].name]||(a[d[0].name]={});if(2>=d.length&&null==d[d.length-1].modelReference)a[d[0].name][e]=b;else{var f=null,g="";if(null!=d[d.length-1].modelReference)f=b,g=can.map(d,function(a){return a.name}).slice(1,d.length).join("."),can.getObject(g,a[d[0].name],!0,f);else{var h=d[d.length-2],g=can.map(d,function(a){return a.name}).slice(1,d.length-1).join(".");h.multiple?(b=can.isArray(b)?b:[b],
f=[],can.each(b,function(a){var b={};b[e]=a;f.push(b)}),can.getObject(g,a[d[0].name],!0,f)):can.getObject(g+"."+e,a[d[0].name],!0,b)}}}else a[c]=b}return a},showErrors:function(a){console.log(a);for(var c in this.elements){var d=this.elements[c],b=d.getModelReference();if(b){var b=mad.model.Model.getModelAttributes(b),e=b[b.length-2].name,b=b[b.length-1].name,e=e.substr(e.lastIndexOf(".")+1),f=d.getId(),g;for(g in a)if(void 0!=a[g][e]&&void 0!=a[g][e][b]){var h=a[g][e][b][0],k=["error"];d.state.is("hidden")&&
k.push("hidden");d.setState(k);this.feedbackElements[f]&&this.feedbackElements[f].setMessage(h).setState("error");this.view.setElementState(this.elements[f],"error")}}}},validateElement:function(a){var c=!0,d=a.getModelReference(),b=!0,e=a.getId();if(a.requireValidation()){var f=a.getValue();"undefined"!=typeof a.options.validateFunction&&null!=a.options.validateFunction?b=a.options.validateFunction(f,{}):null!=d&&(d=mad.model.Model.getModelAttributes(d),a=d[d.length-2].modelReference,d=d[d.length-
1].name,a.validateAttribute&&(b=a.validateAttribute(d,f,{},this.options.action)));!0!==b?(f=["error"],this.elements[e].state.is("hidden")&&f.push("hidden"),this.elements[e].setState(f),this.feedbackElements[e]&&this.feedbackElements[e].setMessage(b).setState("error"),this.view.setElementState(this.elements[e],"error"),c=!1):(f=["success"],this.elements[e].state.is("hidden")&&f.push("hidden"),this.elements[e].setState(f),this.feedbackElements[e]&&this.feedbackElements[e].setMessage("").setState("success"),
this.view.setElementState(this.elements[e],"success"))}return c},validate:function(){var a=!0,c;for(c in this.elements)a&=this.validateElement(this.elements[c]);return a}," submit":function(a,c){c.preventDefault();this.validate()?this.options.callbacks.submit&&this.options.callbacks.submit(this.getData()):this.options.callbacks.error&&this.options.callbacks.error()}," changed":function(a,c){if(this.options.validateOnChange){var d=$(c.target).controllers(mad.form.FormElement);if(d.length)this.validateElement(d[0]);
else throw new mad.error.Error;}}})});steal.executed("lib/mad/form/formController.js");steal("mad/view").then(function(){mad.view.View.extend("mad.view.form.FormView",{},{setElementState:function(a,c){var d=a.getId(),d=$('label[for="'+d+'"]'),b=a.element.parent(".js_form_element_wrapper");switch(c){case "success":d&&d.removeClass("error");b&&b.removeClass("error");break;case "error":d&&d.addClass("error"),b&&b.addClass("error")}}})});steal.executed("lib/mad/view/form/formView.js");
steal("mad/form/formElement.js","mad/view/form/formElementView.js").then(function(){mad.form.FormElement.extend("mad.form.FormChoiceElement",{defaults:{availableValues:[]}},{beforeRender:function(){this._super();this.setViewData("availableValues",this.options.availableValues)},stateReady:function(a){this._super(a)}})});steal.executed("lib/mad/form/formChoiceElement.js");
steal("mad/form/element/textboxController.js","mad/view/form/element/autocompleteView.js").then(function(){mad.form.element.TextboxController.extend("mad.form.element.AutocompleteController",{defaults:{label:"Autocomplete Form Element Controller",viewClass:mad.view.form.element.AutocompleteView,tag:"input",list:null}},{afterStart:function(){var a={viewClass:mad.view.component.tree.List,itemClass:mad.model.Model,cssClasses:["autocomplete-content"],templateUri:"mad/view/template/component/tree.ejs",
state:"hidden",map:new mad.object.Map({id:"id",label:"label",model:"model"})};this.options.list=mad.helper.ComponentHelper.create(this.element,"after",mad.controller.component.TreeController,a);this.options.list.start();this.on()}," changed":function(a,c,d){var b=this;this.options.callbacks.ajax&&this.options.callbacks.ajax.apply(this,[d.value]).done(function(a){b.options.list.reset();b.options.list.load(a);b.options.list.setState("ready")})},"{list} item_selected":function(a,c,d){this.setValue(d.label);
this.options.list.setState("hidden");this.element.trigger("item_selected",[d,c])}})});steal.executed("lib/mad/form/element/autocompleteController.js");steal("mad/form/formElement.js","mad/view/form/element/textboxView.js").then(function(){mad.form.FormElement.extend("mad.form.element.TextboxController",{defaults:{label:"Textbox Form Element Controller",viewClass:mad.view.form.element.TextboxView,tag:"input",onChangeTimeout:0}},{})});steal.executed("lib/mad/form/element/textboxController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.TextboxView",{defaults:{blackKeys:[13]}},{init:function(a,c){this._super(a,c);this._changeTimeout=null;this.changeTimeout=this.getController().options.changeTimeout},getValue:function(){return this.element.val()},setValue:function(a){this.element.val(a)}," keypress":function(a,c){var d=this;-1==$.inArray(c.which,this.options.blackKeys)&&(null!=this._changeTimeout&&clearTimeout(this._changeTimeout),
2<=this.getValue().length&&(this._changeTimeout=setTimeout(function(){a.trigger("changed",{value:d.getValue()})},this.changeTimeout)))}," keydown":function(a,c){var d=this;8==c.which&&(null!=this._changeTimeout&&clearTimeout(this._changeTimeout),this._changeTimeout=setTimeout(function(){a.trigger("changed",{value:d.getValue()})},this.changeTimeout))}," change":function(){this.getController().value=this.element.val()}," paste":function(a){var c=this;setTimeout(function(){a.trigger("changed",{value:c.getValue()})},
0)}," cut":function(a){var c=this;setTimeout(function(){a.trigger("changed",{value:c.getValue()})},0)}})});steal.executed("lib/mad/view/form/element/textboxView.js");steal("mad/view/form/element/textboxView.js").then(function(){mad.view.form.element.TextboxView.extend("mad.view.form.element.AutocompleteView",{defaults:{}},{})});steal.executed("lib/mad/view/form/element/autocompleteView.js");
steal("mad/form/formElement.js","mad/view/form/element/checkboxView.js","mad/view/template/form/element/checkbox.ejs").then(function(){mad.form.FormChoiceElement.extend("mad.form.element.CheckboxController",{defaults:{label:"CheckboxController Form Element Controller",templateBased:!0,templateUri:"mad/view/template/form/element/checkbox.ejs",viewClass:mad.view.form.element.CheckboxView}},{})});steal.executed("lib/mad/form/element/checkboxController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.CheckboxView",{},{getValue:function(){var a=[];this.element.find("input:checked").each(function(){a.push($(this).val())});return a},setValue:function(a){a="undefined"!=typeof a&&null!=a?a:[];this.element.find("input").each(function(){-1!=a.indexOf($(this).val())?$(this).attr("checked","checked"):$(this).removeAttr("checked")})},"input click":function(a,c){c.stopPropagation();a.attr("checked")?
this.element.trigger("checked",a.val()):this.element.trigger("unchecked",a.val())},"input change":function(a,c){c.stopPropagation();this.element.trigger("changed",{value:this.getValue()})}})});steal.executed("lib/mad/view/form/element/checkboxView.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_form_element_checkbox_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push(a.view.txt(0,"",0,this,function(){var b=[],c;for(c in availableValues){var d=uuid();b.push('\n<div class="input checkbox">\n\t<input type="checkbox" value="');b.push(a.view.txt(0,"input","value",this,function(){return c}));b.push('" id="checkbox');b.push(a.view.txt(1,"input","id",this,function(){return d}));b.push('"',a.view.pending(),"/>");b.push('\n\t<label for="checkbox');
b.push(a.view.txt(1,"label","for",this,function(){return d}));b.push('"',a.view.pending(),">");b.push(a.view.txt(0,"label",0,this,function(){return availableValues[c]}));b.push("</label>\n</div>\n")}return b.join("")}));return b.join("")}}))});steal.executed("lib/mad/view/template/form/element/checkbox.ejs");
steal("mad/form/formElement.js","mad/view/form/element/dateView.js","mad/view/template/component/input.ejs").then(function(){mad.form.FormElement.extend("mad.form.element.DateController",{defaults:{label:"Input Date Element Controller",templateBased:!1,templateUri:"//mad/view/template/component/input.ejs",value:null,event:{click:null}}},{})});steal.executed("lib/mad/form/element/dateController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.DateView",{},{setValue:function(a){this.val(a)}})});steal.executed("lib/mad/view/form/element/dateView.js");steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_input_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<input type="');b.push(a.view.txt(1,"input","type",this,function(){return type}));b.push('" ',a.view.pending(),"/>");return b.join("")}}))});
steal.executed("lib/mad/view/template/component/input.ejs");steal("mad/form/formChoiceElement.js","mad/view/form/element/dropdownView.js","mad/view/template/form/element/dropdown.ejs").then(function(){mad.form.FormChoiceElement.extend("mad.form.element.DropdownController",{defaults:{label:"DropdownController Form Element Controller",templateBased:!0,templateUri:"mad/view/template/form/element/dropdown.ejs",viewClass:mad.view.form.element.DropdownView,emptyValue:!0}},{})});steal.executed("lib/mad/form/element/dropdownController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.DropdownView",{},{getValue:function(){return this.element.val()},setValue:function(a){this.element.val(a)},change:function(a){a.trigger("changed",{value:this.getValue()})}})});steal.executed("lib/mad/view/form/element/dropdownView.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_form_element_dropdown_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push(a.view.txt(0,"",0,this,function(){var b=[];controller.options.emptyValue&&(b.push('\n<option value=""',a.view.pending(),">"),b.push(a.view.txt(0,"option",0,this,function(){return __("select a value")})),b.push("</option>\n"));return b.join("")}));b.push("\n");b.push(a.view.txt(0,"",0,this,function(){var b=[],c;for(c in availableValues)b.push('\n<option value="'),
b.push(a.view.txt(0,"option","value",this,function(){return c})),b.push('"',a.view.pending(),">"),b.push(a.view.txt(0,"option",0,this,function(){return availableValues[c]})),b.push("</option>\n");return b.join("")}));b.push("\n");return b.join("")}}))});steal.executed("lib/mad/view/template/form/element/dropdown.ejs");
steal("mad/form/formElement.js").then(function(){mad.form.FormElement.extend("mad.form.element.FreeElementController",{defaults:{label:"free Form Element Controller",tag:"input",attributes:{type:"hidden"}}},{setValue:function(a){this.value=a;return this}})});steal.executed("lib/mad/form/element/freeElementController.js");
steal("mad/form/formElement.js","mad/view/form/element/radiobuttonView.js","mad/view/template/form/element/radiobutton.ejs").then(function(){mad.form.FormChoiceElement.extend("mad.form.element.RadiobuttonController",{defaults:{label:"Radiobutton Form Element Controller",templateBased:!0,templateUri:"mad/view/template/form/element/radiobutton.ejs",viewClass:mad.view.form.element.RadiobuttonView}},{})});steal.executed("lib/mad/form/element/radiobuttonController.js");
steal("mad/view/form/formElementView.js").then(function(){mad.view.form.FormElementView.extend("mad.view.form.element.RadiobuttonView",{},{getValue:function(){return this.element.find(":checked").val()},setValue:function(a){this.element.find("input").val(a)},change:function(a){a.trigger("changed",{value:this.getValue()})}})});steal.executed("lib/mad/view/form/element/radiobuttonView.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_form_element_radiobutton_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push(a.view.txt(0,"",0,this,function(){var b=[],c;for(c in availableValues)b.push('\n<input type="radio" name="'),b.push(a.view.txt(0,"input","name",this,function(){return this.getName()})),b.push('" value="'),b.push(a.view.txt(0,"input","value",this,function(){return c})),b.push('" ',a.view.pending(),"/>"),b.push(a.view.txt(0,"undefined",0,this,
function(){return availableValues[c]})),b.push("\n");return b.join("")}));return b.join("")}}))});steal.executed("lib/mad/view/template/form/element/radiobutton.ejs");
steal("can/construct").then(function(){can.Construct("mad.helper.ComponentHelper",{create:function(a,c,d,b){var e=null,e={};"undefined"!=typeof d.defaults.attributes&&(e=d.defaults.attributes);var f=$.extend({},e,b.attributes);if(0==a.length)throw new mad.error.WrongParametersException("refElement");var e="<"+d.defaults.tag+' id="'+(b.id||"")+'"',g;for(g in f)e+=" "+g+'="'+f[g]+'"';e=mad.helper.HtmlHelper.create(a,c,e+"/>");return"undefined"!=typeof d.singleton?d.singleton(e,b):new d(e,b)}},{})});
steal.executed("lib/mad/helper/componentHelper.js");
steal("jquery/class","jquery/view/ejs","jquery/lang/string","mad/controller/controller.js","mad/view/template/component/decorator/box.ejs").then(function(){$.String.getObject("mad.helper.component",window,!0);mad.helper.component.BoxDecorator={init:function(){this.options.loading=!0;this._super()},render:function(){if(!this.getBoxElement().length){var a=$($.View("//mad/view/template/component/decorator/box.ejs")).insertBefore(this.element),c=this.element.detach();a.find(".mad_helper_component_boxDecorator_content").append(c)}this._super()},
getBoxElement:function(){if("undefined"==typeof this.element)throw Error("The component has to be rendered yet");return $(this.element.parents(".mad_helper_component_boxDecorator").get(0))}}});steal.executed("lib/mad/helper/component/boxDecorator.js");
steal("can/view/ejs",function(a){return a.view.preload("lib_mad_view_template_component_decorator_box_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<div class="mad_helper_component_boxDecorator">\n\t<div class="mad_helper_component_boxDecorator_header" style="background-color:#CC0000">header</div>\n\t<div class="mad_helper_component_boxDecorator_content"></div>\n\t<div class="mad_helper_component_boxDecorator_footer" style="background-color:#CC0000">footer</div>\n</div>');return b.join("")}}))});
steal.executed("lib/mad/view/template/component/decorator/box.ejs");
steal("can/construct").then(function(){__=function(a){var c=[],d=Array.prototype.slice.call(arguments);delete d.callee;delete d.caller;for(var b in d)c.push(d[b]);return mad.lang.I18n.translate(a,c.slice(1))};can.Construct.extend("mad.lang.I18n",{dico:{},translate:function(a,c){c="undefined"!=typeof c?c:[];return mad.lang.I18n.replaceHooks(this.getEntry(a),c)},loadDico:function(a){for(var c in a)mad.lang.I18n.dico[c]=a[c]},replaceHooks:function(a,c){var d="";split=[];split=a.split("%s");if(split.length!=
c.length+1)throw new mad.error.WrongParametersException("I18n Error : The sentence to translate does not contain as many hooks as they are variables");if(2>split.length)return a;var b,e;for(e in c){b=parseInt(e);if("string"!=typeof c[b]&&"number"!=typeof c[b]&&"boolean"!=typeof c[b]&&null!==c[b])throw new mad.error.WrongParametersException("I18n Error : Variables has to be a scalar");d+=split[e]+c[b]}return d+("undefined"!=typeof split[b+1]?split[b+1]:"")},getEntry:function(a){var c=a;"undefined"!=
typeof mad.lang.I18n.dico[a]&&""!=this.dico[a]&&(c=mad.lang.I18n.dico[a]);return c}},{})});steal.executed("lib/mad/lang/i18n.js");
steal("can/construct").then(function(){can.Construct("mad.model.ValidationRules",{validate:function(a,c,d,b){if("object"==typeof a){b=a;if("undefined"==typeof a.rule)throw new mad.error.Exception("The target rule has not been defined. Define the rule attribute.");"0"==a.rule.indexOf("/")?a="regex":$.isArray(a.rule)?(b.params=a.rule.slice(1),a=a.rule[0]):a=a.rule}if("undefined"==typeof mad.model.ValidationRules[a])throw new mad.error.Exception("The rule "+a+" does not exist");return mad.model.ValidationRules[a](c,
d,b)},_getAlphaRegExp:function(a){var c="\\p{L}";if(a)switch(a){case "ASCII":c="a-zA-Z";break;default:c="\\p{"+a+"}"}return c},regex:function(a,c,d){var d=d||{},c=!0,b=d.rule,e=d.not||!1;0==b.indexOf("/")&&(b=b.substr(1,b.length-(b.length-b.lastIndexOf("/")+1)));a=(new XRegExp(b)).test(a);if(e&&a||!e&&!a)c=d.message||__("The regex is not validated");return c},notEmpty:function(a,c,d){return"undefined"==typeof a||null==a||$.isArray(a)&&!a.length||""==$.trim(a)?d.message||__("Should not be empty"):
!0},uuid:function(a){return!(new XRegExp("^[abcdef0-9]{8}-[abcdef0-9]{4}-[abcdef0-9]{4}-[abcdef0-9]{4}-[abcdef0-9]{12}$")).test(a)?__("Not valid uuid"):!0},alphaNumeric:function(a,c,d){d=d||{};c=mad.model.ValidationRules._getAlphaRegExp(d.type);return!(new XRegExp("^["+c+" '0-9]*$")).test(a)?__("Only alpha-numeric characters allowed"):!0},alpha:function(a,c,d){d=d||{};c=mad.model.ValidationRules._getAlphaRegExp(d.type);return!(new XRegExp("^["+c+" ']*$")).test(a)?__("Only alpha characters allowed"):
!0},num:function(a){return!XRegExp("^-?[0-9]+.?[0-9]*$").test(a)?__("Only numeric characters allowed"):!0},required:function(a){var c=XRegExp("^[s\n\t ]*$");return"undefined"==typeof a||null===a||c.test(a)?__("Required"):!0},text:function(a){return XRegExp("<(.|\n)*?>").test(a)?__("No HTML tags allowed"):!0},url:function(a){return XRegExp("^\t\t\t\t([a-z0-9+.-]+):\t\t\t\t\t(?:\t\t\t\t\t\t(?:((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*)@)?\t\t\t\t\t\t((?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*)\t\t\t\t\t\t(?::(d*))?\t\t\t\t\t\t(/(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?\t\t\t\t\t|\t\t\t\t\t\t(/?(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})+(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?\t\t\t\t)\t\t\t\t(?:\t\t\t\t\t((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*)\t\t\t\t)?\t\t\t\t(?:\t\t\t\t\t#((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*)\t\t\t\t)?\t\t\t$").test(a)?
__("Not valid url."):!0},nospace:function(a){return XRegExp("[ ]+").test(a)?__("No space are allowed"):!0},email:function(a){return!XRegExp("^[a-zA-Z0-9_.-]+[@]{1}[a-zA-Z0-9_.-]+.[a-zA-Z]+$").test(a)?__("Only email format is allowed"):!0},date:function(a,c,d){var d=d||{},c=d.format||"dd/mm/yyyy",b=null,e=null,f=null,d=[0,31,29,31,30,31,30,31,31,30,31,30,31],g="",h=!0;switch(c){case "m/d/y":g=/^(\d{1,2})[./-](\d{1,2})[./-](\d{2}|\d{4})$/;e=1;f=2;b=3;break;case "mm/dd/yy":g=/^(\d{1,2})[./-](\d{1,2})[./-](\d{2})$/;
e=1;f=2;b=3;break;case "mm/dd/yyyy":g=/^(\d{1,2})[./-](\d{1,2})[./-](\d{4})$/;e=1;f=2;b=3;break;case "dd/mm/yyyy":g=/^(\d{1,2})[./-](\d{1,2})[./-](\d{4})$/;e=2;f=1;b=3;break;case "d/m/yy":g=/^(\d{1,2})[./-](\d{1,2})[./-](\d{2}|\d{4})$/;e=2;f=1;b=3;break;case "y/m/d":g=/^(\d{2}|\d{4})[./-](\d{1,2})[./-](\d{1,2})$/;e=2;f=3;b=1;break;case "yy/mm/dd":g=/^(\d{4}|\d{1,2})[./-](\d{1,2})[./-](\d{1,2})$/;e=2;f=3;b=1;break;case "yyyy/mm/dd":g=/^(\d{4})[./-](\d{1,2})[./-](\d{1,2})$/,e=2,f=3,b=1}if(a=(a||"").match(g)){b=
1*a[b];e=1*a[e];f=1*a[f];if(1>f||f>d[e]||1>e||12<e)h=__("The date format is incorect, expected : ")+c;if(2==e&&29==f&&!(0!=b%4?0:0!=b%100?thrue:0==b%1E3))h=__("The year %s is not a leap year",b)}else h=__("The date format is incorect, expected : ")+c;return h},between:function(a,c,d){var a=a||"",d=d||[],c=!0,b=d.params[0]||null,e=d.params[1]||null;if(a.length<b||a.length>e)c=d.message?__(d.message,b,e):__("Must be between %s and %s characters long",b,e);return c},foreignRule:function(a,c){var d=!0;
if(c.model&&c.model.validateRules&&c.attribute)for(var b in c.model.validateRules[c.attribute]){var e=mad.model.ValidationRules.validate(c.model.validateRules[c.attribute][b],a);if(!0!==e){d=e;break}}return d},choice:function(a,c){var d=!0,b=[],a="undefined"==typeof a?null:a;c.choices?b=c.choices:c.callback&&(b=c.callback.apply(this));-1==b.indexOf(a)&&(d=__("%s is not a valid value",a));return d}},{})});steal.executed("lib/mad/model/validationRules.js");
steal("can/construct","mad/net/response.js","mad/net/responseHandler.js").then(function(){can.Construct("mad.net.Ajax",{request:function(a){var c=mad.Config.read("net.ResponseHandlerClass");a.originParams=$.extend({},a.params);a.url=$.String.sub(a.url,a.params,!0);a.dataType=a.dataType||"json";a.data=a.params;a.type=a.type?a.type.toUpperCase():"GET";if("undefined"==typeof a.silentLoading&&(a.silentLoading=!0,"POST"==a.type||"DELETE"==a.type||"PUTw"==a.type))a.silentLoading=!1;mad.bus.trigger("passbolt_ajax_request_start",
[a]);var d=can.ajax(a).pipe(function(b,c,d){var c=new mad.net.Response(b),g=null;if(c.getStatus()==mad.net.Response.STATUS_ERROR)return g=$.Deferred(),g.rejectWith(this,[d,"error",c]),g;g=$.Deferred();g.resolveWith(this,[b.body,c,a]);return g},function(b){var c=null,d=null;try{void 0!=typeof b.responseText&&(c=$.parseJSON(b.responseText))}catch(g){}d=null!=c&&mad.net.Response.isResponse(c)?new mad.net.Response(c):mad.net.Response.getResponse("unreachable");c=$.Deferred();c.rejectWith(this,[b,d.getStatus(),
d,a]);return c});d.then(function(a,d,f){mad.bus.trigger("passbolt_ajax_request_complete",[f]);(new c(d,f)).handle()});d.fail(function(b,d,f){mad.bus.trigger("passbolt_ajax_request_complete",[a]);(new c(f,a)).handle()});return d}},{})});steal.executed("lib/mad/net/ajax.js");
steal("jquery/model").then(function(){mad.model.Model("mad.net.Response",{attributes:{header:"json",body:"json"},STATUS_ERROR:"error",STATUS_NOTICE:"notice",STATUS_SUCCESS:"success",STATUS_WARNING:"warning",RESPONSE_ID_UNDEFINED:"undefined",RESPONSE_CONTROLLER_UNDEFINED:"undefined",RESPONSE_ACTION_UNDEFINED:"undefined",getResponse:function(a,c){var d=null,d={},b=null;switch(a){case "unreachable":d={id:mad.net.Response.RESPONSE_ID_UNDEFINED,status:mad.net.Response.STATUS_ERROR,controller:mad.net.Response.RESPONSE_CONTROLLER_UNDEFINED,
action:mad.net.Response.RESPONSE_ACTION_UNDEFINED,title:__("Unable to reach the server"),message:__("The url is probably incorrectly formatted")},b=c}return new mad.net.Response({header:d,body:b})},isResponse:function(a){var c=!1;"undefined"!=typeof a&&null!=a&&a.header&&a.body&&(c=!0);return c},getData:function(a){return a.body}},{getStatus:function(){return this.attr("header").status},getTitle:function(){return this.attr("header").title},getMessage:function(){return this.attr("header").message},
getAction:function(){return this.attr("header").action},getController:function(){return this.attr("header").controller},getData:function(){return this.attr("body")}})});steal.executed("lib/mad/net/response.js");
steal("can/construct").then(function(){can.Construct("mad.net.ResponseHandler",{},{response:null,request:null,callback:null,init:function(a,c,d){this.response=a;this.request=c;this.callbacks=d||{}},handle:function(){this._log();switch(this.response.getStatus("status")){case mad.net.Response.STATUS_ERROR:this._error();break;case mad.net.Response.STATUS_NOTICE:this._notice();break;case mad.net.Response.STATUS_SUCCESS:this._success();break;case mad.net.Response.STATUS_WARNING:this._warning()}},_log:function(){this.response.getStatus().toUpperCase();
this.request.type.toUpperCase();this.response.getController();this.response.getAction();this.response.getTitle()},_success:function(){this.callbacks.success&&this.callbacks.success(this.response,this.request)},_error:function(){mad.Config.read("error.ErrorHandlerClass").handleError(this.response.getStatus(),this.response.getTitle(),this.response.getMessage(),this.response.getData());this.callbacks.error&&this.callbacks.error(this.response,this.request)},_notice:function(){mad.Config.read("error.ErrorHandlerClass").handleError(this.response.getStatus(),
this.response.getTitle(),this.response.getMessage(),this.response.getData());this.callbacks.notice&&this.callbacks.notice(this.response,this.request)},_warning:function(){mad.Config.read("error.ErrorHandlerClass").handleError(this.response.getStatus(),this.response.getTitle(),this.response.getMessage(),this.response.getData());this.callbacks.warning&&this.callbacks.warning(this.response,this.request)}})});steal.executed("lib/mad/net/responseHandler.js");
_uuidlet=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};uuid=function(){return _uuidlet()+_uuidlet()+"-"+_uuidlet()+"-"+_uuidlet()+"-"+_uuidlet()+"-"+_uuidlet()+_uuidlet()+_uuidlet()};steal.executed("lib/mad/string/uuid.js");
steal("can/construct").then(function(){can.Construct("mad.route.RouteListener",{},{init:function(){var a=this;$.route(":extension/:controller/:action/:p1/:p2/:p3/:p4/:p5");$.route(":extension/:controller/:action/:p1/:p2/:p3/:p4");$.route(":extension/:controller/:action/:p1/:p2/:p3");$.route(":extension/:controller/:action/:p1/:p2");$.route(":extension/:controller/:action/:p1");$.route(":extension/:controller/:action");$.route(":extension/:controller");$.route(":extension");$.route("");$.route.ready();
$(window).bind("hashchange",function(){var c=a.getRoute();null!=c&&mad.bus&&mad.bus.trigger(mad.APP_NS_ID+"_route_change",[c])})},getRoute:function(){var a=null,c=new String(location.hash),c="#!"==c.substr(0,2)?c.substr(2):c;""!=c&&(a=$.route.deparam(c));return a}})});steal.executed("lib/mad/route/routeListener.js");steal("mad/bootstrap/appBootstrap.js","app/helper/errorHandler.js").then(function(){mad.bootstrap.AppBootstrap.extend("passbolt.bootstrap.AppBootstrap",{})});steal.executed("app/bootstrap/appBootstrap.js");
steal("mad/error/errorHandler.js").then(function(){mad.error.ErrorHandler.extend("passbolt.helper.ErrorHandler",{handleException:function(a){mad.bus&&(console.log("A"),console.log(a),mad.bus.trigger("passbolt_notify",{status:a.name,title:a.title,message:a.message}),console.log("B"));mad.error.ErrorHandler.handleException(a);console.log("C")},handleError:function(a,c,d,b){mad.bus&&mad.bus.trigger("passbolt_notify",{status:a,title:c,message:d,data:b});mad.error.ErrorHandler.handleError(a,c,d,b)}},{})});
steal.executed("app/helper/errorHandler.js");
steal("mad/controller/appController.js","app/controller/settingsWorkspaceController.js","app/controller/component/passwordWorkspaceMenuController.js","app/controller/passwordWorkspaceController.js","app/controller/peopleWorkspaceController.js","app/controller/component/peopleWorkspaceMenuController.js","app/controller/component/settingsWorkspaceMenuController.js","app/controller/component/appNavigationLeftController.js","app/controller/component/appNavigationRightController.js","app/controller/component/appFilterController.js",
"app/controller/component/profileDropdownController.js","app/controller/component/notificationController.js","app/controller/component/loadingBarController.js","app/model/category.js","app/model/favorite.js","app/model/resource.js","app/model/filter.js","app/view/template/app.ejs").then(function(){mad.controller.AppController.extend("passbolt.controller.AppController",{defaults:{workspaces:["password","people","settings"]}},{afterStart:function(){var a=this;(new passbolt.controller.component.AppNavigationLeftController($("#js_app_navigation_left"))).start();
(new passbolt.controller.component.AppNavigationRightController($("#js_app_navigation_right"))).start();(new passbolt.controller.component.AppFilterController($("#js_app_filter"),{})).start();passbolt.model.User.findOne({id:mad.Config.read("user.id")}).then(function(c){passbolt.model.User.setCurrent(c);a.profileDropDownCtl=new passbolt.controller.component.ProfileDropdownController($("#js_app_profile_dropdown"),{user:c});a.profileDropDownCtl.start()});new passbolt.controller.component.NotificationController($("#js_app_notificator"),
{});(new passbolt.controller.component.LoadingBarController($("#js_app_loading_bar"),{})).start()},"{mad.bus} workspace_selected":function(a,c,d,b){b="undefined"!=typeof b?b:{};$("#js_app_panel_main").empty();$("#container").removeClass(this.options.workspaces.join(" ")).addClass(d);c="js_passbolt_"+d+"_workspace_controller";a=passbolt.controller[can.capitalize(d)+"WorkspaceController"];d={id:c,label:d};$.extend(d,b);mad.helper.ComponentHelper.create($("#js_app_panel_main"),"last",a,d).start()},"{mad.bus} request_dialog":function(a,
c,d){d=d||{};(new mad.controller.component.DialogController(null,d)).start()},"{mad.bus} request_dialog_close_latest":function(){mad.controller.component.DialogController.closeLatest()},"{mad.bus} app_ready":function(){$("html").removeClass("loading")},stateReady:function(){mad.bus.trigger("workspace_selected","password");mad.bus.trigger("app_ready")}})});steal.executed("app/controller/appController.js");
steal("mad/controller/componentController.js","app/controller/component/settingsMenuController.js","app/controller/component/settingsBreadcrumbController.js","app/controller/component/profileController.js","app/controller/component/keysController.js","app/controller/form/user/createFormController.js","app/controller/form/user/passwordFormController.js","app/controller/form/user/avatarFormController.js","app/view/template/settingsWorkspace.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.SettingsWorkspaceController",
{defaults:{label:"Settings",templateUri:"app/view/template/settingsWorkspace.ejs",sections:["profile","keys"]}},{afterStart:function(){this.section="";mad.helper.ComponentHelper.create($("#js_wsp_primary_menu_wrapper"),"last",passbolt.controller.component.SettingsWorkspaceMenuController,{}).start();this.menuItems=[];this.menuItems.profile=new mad.model.Action({id:uuid(),label:__("My profile"),action:function(){mad.bus.trigger("request_settings_section","profile")}});this.menuItems.keys=new mad.model.Action({id:uuid(),
label:__("Manage your keys"),action:function(){mad.bus.trigger("request_settings_section","keys")}});this.settingsWkMenu=new passbolt.controller.component.SettingsMenuController("#js_wk_settings_menu",{menuItems:[this.menuItems.profile,this.menuItems.keys]});this.settingsWkMenu.start();this.settingsTabsCtl=new mad.controller.component.TabController("#js_wk_settings_main",{autoMenu:!1});this.settingsTabsCtl.start();this.breadcrumCtl=new passbolt.controller.component.SettingsBreadcrumbController($("#js_wsp_settings_breadcrumb"),
{});this.breadcrumCtl.start();this.breadcrumCtl.load();this.profileCtl=this.settingsTabsCtl.addComponent(passbolt.controller.component.ProfileController,{id:"js_settings_wk_profile_controller",label:"profile",user:passbolt.model.User.getCurrent()});this.profileKeysCtl=this.settingsTabsCtl.addComponent(passbolt.controller.component.KeysController,{id:"js_settings_wk_profile_keys_controller",label:"keys"})},destroy:function(){$("#js_wsp_primary_menu_wrapper").empty();this._super()},"{mad.bus} request_profile_edition":function(){if(this.element){var a=
passbolt.model.User.getCurrent(),c=(new mad.controller.component.DialogController(null,{label:__("Edit User")})).start();c.add(passbolt.controller.form.user.CreateFormController,{data:a,action:"edit",callbacks:{submit:function(d){a.attr(d["passbolt.model.User"]).save();c.remove()}}}).load(a)}},"{mad.bus} request_user_password_edition":function(a,c,d){if(this.element){var b=(new mad.controller.component.DialogController(null,{label:__("Edit User Password")})).start();b.add(passbolt.controller.form.user.PasswordFormController,
{data:d,callbacks:{submit:function(a){d.attr(a["passbolt.model.User"]).savePassword();b.remove()}}}).load(d)}},"{mad.bus} request_profile_avatar_edition":function(a,c,d){if(this.element){var b=(new mad.controller.component.DialogController(null,{label:__("Edit Avatar")})).start();b.add(passbolt.controller.form.user.AvatarFormController,{data:d,callbacks:{submit:function(){var a=$("#js_field_avatar");d.saveAvatar(a[0].files[0]);b.remove()}}}).load(d)}},"{mad.bus} request_settings_section":function(a,
c,d){if(this.element&&(a=null,-1!=$.inArray(d,this.options.sections))){switch(d){case "keys":a="js_settings_wk_profile_keys_controller";break;case "profile":a="js_settings_wk_profile_controller"}a&&this.settingsTabsCtl.enableTab(a);$("#container").removeClass(this.options.sections.join(" ")).addClass(d);this.section=d;this.settingsWkMenu.selectItem(this.menuItems[this.section])}},stateReady:function(){mad.bus.trigger("request_settings_section","profile")},stateDisabled:function(a){this._super(a);
$("#container").removeClass(this.options.sections.join(" "))},stateHidden:function(a){this._super(a);$("#container").removeClass(this.options.sections.join(" "))}})});steal.executed("app/controller/settingsWorkspaceController.js");steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.SettingsMenuController",{defaults:{menuItems:null}},{afterStart:function(){this.load(this.options.menuItems)}})});steal.executed("app/controller/component/settingsMenuController.js");
steal("mad/controller/componentController.js","app/view/template/component/breadcrumb/breadcrumb.ejs","app/view/template/component/breadcrumb/breadcrumbItem.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.SettingsBreadcrumbController",{defaults:{templateUri:"app/view/template/component/breadcrumb/breadcrumb.ejs",status:"hidden",filter:null}},{afterStart:function(){var a="#"+this.getId()+" ul";this.options.menu=new mad.controller.component.MenuController(a,
{itemTemplateUri:"app/view/template/component/breadcrumb/breadcrumbItem.ejs"});this.options.menu.start()},parseFilter:function(){var a=[],c=new mad.model.Action({id:uuid(),label:__("All users"),action:function(){var a=new passbolt.model.Filter({label:__("All users"),type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("workspace_selected","people");mad.bus.trigger("filter_users_browser",a)}});a.push(c);c=new mad.model.Action({id:uuid(),label:passbolt.model.User.getCurrent().Profile.first_name+" "+
passbolt.model.User.getCurrent().Profile.last_name,action:function(){}});a.push(c);c=new mad.model.Action({id:uuid(),label:__("Profile"),action:function(){}});a.push(c);return a},load:function(a){a=this.parseFilter(a);this.options.menu.reset();this.options.menu.load(a)}})});steal.executed("app/controller/component/settingsBreadcrumbController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_breadcrumb_breadcrumb_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push("<ul>\n</ul>\n");return b.join("")}}))});steal.executed("app/view/template/component/breadcrumb/breadcrumb.ejs");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_breadcrumb_breadcrumbItem_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];"undefined"==typeof cssClasses&&(cssClasses="");b.push('\n<li id="');b.push(a.view.txt(1,"li","id",this,function(){return mappedItem.id}));b.push('" ');b.push(a.view.txt(1,"li",1,this,function(){return a.proxy(function(b){a.$(b).data(itemClass.fullName,item)},this)}));b.push(' class="');b.push(a.view.txt(1,"li","class",this,function(){return cssClasses}));
b.push('"',a.view.pending(),">");b.push('\n    <div class="main-cell">\n        <a href="#"><span>');b.push(a.view.txt(1,"span",0,this,function(){return mappedItem.label}));b.push("</span></a>\n    </div>\n</li>\n");return b.join("")}}))});steal.executed("app/view/template/component/breadcrumb/breadcrumbItem.ejs");
steal("mad/controller/componentController.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.ProfileController",{defaults:{user:null}},{beforeRender:function(){this._super();this.setViewData("user",this.options.user)},"{user} updated":function(){!this.state.is("disabled")&&!this.state.is(null)&&this.refresh()},".edit-action click":function(){mad.bus.trigger("request_profile_edition",this.options.user)},".edit-password-action click":function(){mad.bus.trigger("request_user_password_edition",
this.options.user)},".edit-avatar-action click":function(){mad.bus.trigger("request_profile_avatar_edition",this.options.user)}})});steal.executed("app/controller/component/profileController.js");
steal("mad/controller/componentController.js","app/model/gpgkey.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.KeysController",{defaults:{}},{afterStart:function(){this._super()},beforeRender:function(){this._super();this.setViewData("gpgkey",passbolt.model.User.getCurrent().Gpgkey)},"#js_settings_keys_download click":function(){mad.bus.trigger("passbolt.settings.backup_key")}})});steal.executed("app/controller/component/keysController.js");
steal("jquery/model","app/model/user.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Gpgkey",{attributes:{id:"string",user_id:"string",key:"string",bits:"string",uid:"string",key_id:"string",fingerprint:"string",type:"string",expires:"string",key_created:"string",User:"passbolt.model.User.model"},findAll:function(a,c,d){if("undefined"!=typeof a.filter){var b=a.filter;delete a.filter;b=b.toRequest();$.extend(a,b)}return mad.net.Ajax.request({url:APP_URL+
"gpgkeys.json",type:"GET",params:a,success:c,error:d})},findOne:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"gpgkeys/{id}.json",type:"GET",params:a,success:c,error:d})}},{})});steal.executed("app/model/gpgkey.js");
steal("jquery/model","app/model/profile.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.User",{current:null,validateRules:{username:["email","required"]},attributes:{id:"string",username:"string",email:"string",role_id:"string",active:"string",Profile:"passbolt.model.Profile.model",GroupUser:"passbolt.model.GroupUser.models"},getCurrent:function(){return passbolt.model.User.current},setCurrent:function(a){passbolt.model.User.current=a},create:function(a,
c,d){var b=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"users",type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"/users/{id}",type:"DELETE",params:{id:a},success:c,error:d})},findAll:function(a,c,d){if("undefined"!=typeof a.filter){var b=a.filter;delete a.filter;b=b.toRequest();
$.extend(a,b)}return mad.net.Ajax.request({url:APP_URL+"/users",type:"GET",params:a,success:c,error:d})},findOne:function(a,c,d){var b=!0;"undefined"!=typeof a.async&&(b=a.async);return mad.net.Ajax.request({url:APP_URL+"users/{id}.json",type:"GET",params:a,success:c,error:d,async:b})},update:function(a,c,d,b){var e=this,c=mad.model.serializer.CakeSerializer.to(c,this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"users/{id}",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();
b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})},updatePassword:function(a,c,d,b){var e=this,c=mad.model.serializer.CakeSerializer.to(c,this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"users/password/{id}",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})},updateAvatar:function(a,c,d,b){var e=this,f=new FormData;f.append("file-0",c.newAvatar);f.id=a;return mad.net.Ajax.request({url:APP_URL+
"users/avatar/{id}",type:"POST",cache:!1,contentType:!1,processData:!1,params:f,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{saveAvatar:function(a){this.attr("newAvatar",a);a=can.Model._makeRequest(this,"updateAvatar",null,null,"updated");this.attr("newAvatar",null);return a},savePassword:function(){return can.Model._makeRequest(this,"updatePassword",null,null,"updated")}})});steal.executed("app/model/user.js");
steal("jquery/model","app/model/imageStorage.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Profile",{validateRules:{},attributes:{id:"string",first_name:"string",last_name:"string",Avatar:"passbolt.model.ImageStorage.model"},findAll:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"/profiles",type:"GET",params:a,success:c,error:d})}},{avatarPath:function(a){return"undefined"!=typeof this.Avatar&&this.Avatar.id?this.Avatar.imagePath(a):"img/avatar/user.png"},
fullName:function(){return this.first_name+" "+this.last_name}})});steal.executed("app/model/profile.js");steal("mad/model").then(function(){mad.model.Model("passbolt.model.ImageStorage",{},{imagePath:function(a){return"undefined"==typeof this.id?"":"undefined"==typeof this.url[a]?"":this.url[a]}})});steal.executed("app/model/imageStorage.js");
steal("mad/form/formController.js","app/controller/component/secretStrengthController.js","app/view/template/form/user/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.user.CreateFormController",{defaults:{templateBased:!0,passwordField:null,currentPasswordField:null,action:"create"}},{afterStart:function(){this.options.data.User=this.options.data.User||{};this.addElement((new mad.form.element.TextboxController($("#js_field_user_active"),{modelReference:"passbolt.model.User.active"})).start());
this.addElement((new mad.form.element.TextboxController($("#js_field_first_name"),{modelReference:"passbolt.model.User.Profile.first_name"})).start(),(new mad.form.FeedbackController($("#js_field_first_name_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_last_name"),{modelReference:"passbolt.model.User.Profile.last_name"})).start(),(new mad.form.FeedbackController($("#js_field_last_name_feedback"),{})).start());var a={};a[cakephpConfig.roles.admin]=__("This user is an administrator");
a[cakephpConfig.roles.user]=__("This user is a normal user");this.options.role=(new mad.form.element.CheckboxController($("#js_field_role_id"),{name:"role_id",modelReference:"passbolt.model.User.role_id",availableValues:a})).start();this.addElement(this.options.role,(new mad.form.FeedbackController($("#js_field_role_id_feedback"),{})).start());$("input[type=checkbox]",$("#js_field_role_id")).not("[value='"+cakephpConfig.roles.admin+"']").hide().next("label").hide();this.addElement((new mad.form.element.TextboxController($("#js_field_username"),
{modelReference:"passbolt.model.User.username"})).start(),(new mad.form.FeedbackController($("#js_field_username_feedback"),{})).start());if("create"!=this.options.action){this.options.passwordField=(new mad.form.element.TextboxController($("#js_field_password"),{modelReference:"passbolt.model.User.password"})).start();this.addElement(this.options.passwordField);this.options.passwordClear=this.addElement((new mad.form.element.TextboxController($("#js_field_password_clear"),{state:"hidden"})).start());
var a=passbolt.model.User.getCurrent().Role.name,c=this.options.data.id;if("admin"!=a||"admin"==a&&c==passbolt.model.User.getCurrent().id)this.options.currentPasswordField=(new mad.form.element.TextboxController($("#js_field_current_password"),{modelReference:"passbolt.model.User.current_password"})).start(),this.addElement(this.options.currentPasswordField,(new mad.form.FeedbackController($("#js_field_current_password_feedback"),{})).start()),this.options.currentPasswordClear=this.addElement((new mad.form.element.TextboxController($("#js_field_current_password_clear"),
{state:"hidden"})).start()),this.options.showCurrPwdButton=(new mad.controller.component.ButtonController($("#js_show_curr_pwd_button"))).start();this.options.showPwdButton=(new mad.controller.component.ButtonController($("#js_show_pwd_button"))).start();this.options.genPwdButton=(new mad.controller.component.ButtonController($("#js_gen_pwd_button"))).start();a=can.getObject("data.Secret.data",this.options);a=passbolt.model.SecretStrength.getSecretStrength(a);this.options.secretStrength=(new passbolt.controller.component.SecretStrengthController($("#js_user_pwd_strength"),
{secretStrength:a})).start()}this.on()},updateSecretEntropy:function(a){this.options.secretStrength.load(passbolt.model.SecretStrength.getSecretStrength(a))},"{passwordField} changed":function(){this.options.passwordField&&this.updateSecretEntropy(this.options.passwordField.getValue())},"{passwordClear} changed":function(){var a=this.getElement("js_field_password_clear").getValue();this.getElement("js_field_password").setValue(a);this.updateSecretEntropy(a)},"{role} checked":function(a,c,d){this.options.role.setValue(d)},
"{role} changed":function(a,c,d){0==d.value.length&&this.options.role.setValue(cakephpConfig.roles.user)},"{showPwdButton} click":function(){var a=this.getElement("js_field_password"),c=this.getElement("js_field_password_clear");a.state.is("hidden")?(c.setState("hidden"),a.setState("ready"),this.options.showPwdButton.view.removeClass("selected")):(a.setState("hidden"),c.setState("ready"),c.setValue(a.getValue()),this.options.showPwdButton.view.addClass("selected"))},"{showCurrPwdButton} click":function(){var a=
this.getElement("js_field_current_password"),c=this.getElement("js_field_current_password_clear");a.state.is("hidden")?(c.setState("hidden"),a.setState("ready"),this.options.showCurrPwdButton.view.removeClass("selected")):(a.setState("hidden"),c.setState("ready"),c.setValue(a.getValue()),this.options.showCurrPwdButton.view.addClass("selected"))},"{genPwdButton} click":function(){var a=passbolt.model.Secret.generate();this.getElement("js_field_password").setValue(a);this.getElement("js_field_password_clear").setValue(a);
this.updateSecretEntropy(a)}})});steal.executed("app/controller/form/user/createFormController.js");
steal("app/model/secret.js","app/model/secretStrength.js","app/view/template/component/secret/secretStrength.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.SecretStrengthController",{defaults:{label:"Secret Strength Controller",templateBased:!0,templateUri:"app/view/template/component/secret/secretStrength.ejs",secretStrength:null}},{beforeRender:function(){this._super();var a="",c="";this.options.secretStrength&&(a=this.options.secretStrength.label,
c=this.options.secretStrength.id);this.setViewData("strengthLabel",a);this.setViewData("strengthId",c)},load:function(a){this.options.secretStrength=a;this.refresh()}})});steal.executed("app/controller/component/secretStrengthController.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js","app/model/secretStrength.js").then(function(){mad.model.Model("passbolt.model.Secret",{attributes:{id:"string",data:"string"},MASKS:{alpha:{size:26,data:"abcdefghijklmnopqrstuvwxyz",pattern:/[a-z]/},uppercase:{size:26,data:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",pattern:/[A-Z]/},digit:{size:10,data:"0123456789",pattern:/[0-9]/},special:{size:32,data:"!\"#$%&'()*+,-./:;<=>?@[:]^_`{|}~",pattern:/[!"#$%&\'\(\)*+,\-./:;<=>?@\[\]^_`{|}~]/}},generate:function(){var a=
"",a=mad.Config.read("secret.generator.masks"),c=mad.Config.read("secret.generator.length"),d=[],b,e;for(e in a)d=$.merge(d,passbolt.model.Secret.MASKS[a[e]].data);do{a="";b=passbolt.model.SecretStrength.mesureEntropy(c,d.length);for(e=0;e<c;e++)a+=d[Math.randomRange(0,d.length-1)]}while(b!=passbolt.model.SecretStrength.mesurePwdEntropy(a));return a}},{})});steal.executed("app/model/secret.js");
steal("jquery/model").then(function(){var a={VERY_WEAK:{start:0,id:"very_weak",label:__("very weak")},WEAK:{start:60,id:"weak",label:__("weak")},FAIR:{start:80,id:"fair",label:__("fair")},STRONG:{start:112,id:"strong",label:__("strong")},VERY_STRONG:{start:128,id:"very_strong",label:__("very strong")}};mad.model.Model("passbolt.model.SecretStrength",{attributes:{id:"string",label:"string",start:"int"},getSecretStrength:function(c){var d=null;if(!c)return d;var c=passbolt.model.SecretStrength.mesurePwdEntropy(c),
b;for(b in a)if(c>=a[b].start)d=new passbolt.model.SecretStrength(a[b]);else break;return d},mesureEntropy:function(a,d){return a*(Math.log(d)/Math.log(2))},mesurePwdEntropy:function(a){var d=0,b;for(b in passbolt.model.Secret.MASKS)a.match(passbolt.model.Secret.MASKS[b].pattern)&&(d+=passbolt.model.Secret.MASKS[b].size);return passbolt.model.SecretStrength.mesureEntropy(a.length,d)}},{})});steal.executed("app/model/secretStrength.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_secret_secretStrength_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<span class="progress"><span class="progress-bar ');b.push(a.view.txt(1,"span","class",this,function(){return strengthId}));b.push('"',a.view.pending(),">");b.push('</span></span>\n<span class="complexity-text">');b.push(a.view.txt(1,"span",0,this,function(){return __("complexity")}));b.push(": <strong>");b.push(a.view.txt(1,"strong",0,
this,function(){return strengthLabel}));b.push("</strong></span>");return b.join("")}}))});steal.executed("app/view/template/component/secret/secretStrength.ejs");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_user_createForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[],e=passbolt.model.User.getCurrent().Role.name;b.push("\n");var f=this.controller.options.data;b.push('\n<div class="form-content">\n\t<input type="hidden" name="passbolt.model.User.Group.id" id="js_field_group_id" class="form_field" />\n\t<input type="hidden" name="passbolt.model.User.active" id="js_field_user_active" class="form_field" />\n\t<div class="input text required">\n\t\t<label for="js_field_first_name">');b.push(a.view.txt(1,
"label",0,this,function(){return __("First Name")}));b.push('</label>\n\t\t<input name="passbolt.model.User.Profile.first_name" class="required" maxlength="50" type="text" id="js_field_first_name" placeholder="first name"/>\n\t\t<div id="js_field_first_name_feedback" class="message">\n\t\t</div>\n\t</div>\n\t<div class="input text required">\n\t\t<label for="js_field_last_name">');b.push(a.view.txt(1,"label",0,this,function(){return __("Last Name")}));b.push('</label>\n\t\t<input name="passbolt.model.User.Profile.last_name" class="required" maxlength="50" type="text" id="js_field_last_name" placeholder="last name"/>\n\t\t<div id="js_field_last_name_feedback" class="message">\n\t\t</div>\n\t</div>\n\t<div class="input text required clearfix">\n\t\t<label for="js_field_username">');
b.push(a.view.txt(1,"label",0,this,function(){return __("Username / Email")}));b.push('</label>\n\t\t<input name="passbolt.model.User.username" class="required" maxlength="50" type="text" id="js_field_username" placeholder="email"');b.push(a.view.txt(0,"input",1,this,function(){var a=[];"create"!=action&&a.push(" disabled");return a.join("")}));b.push(" ",a.view.pending(),"/>");b.push('\n\t\t<div id="js_field_username_feedback" class="message">\n\t\t</div>\n\t</div>\n    ');b.push(a.view.txt(0,"div",
0,this,function(){var b=[];"create"!=action&&(b.push("\n\t"),b.push(a.view.txt(0,"div",0,this,function(){var b=[];if("admin"!=e||"admin"==e&&f.id==passbolt.model.User.getCurrent().id)b.push('\n\t<div class="input text input-current-password-wrapper clearfix">\n\t\t<div class="input current_password required short">\n\t\t\t<label for="js_field_current_password">'),b.push(a.view.txt(1,"label",0,this,function(){return __("Current login password")})),b.push('</label>\n\t\t\t<input name="passbolt.model.User.current_password" class="required" maxlength="50" type="password" id="js_field_current_password" placeholder="password"/>\n\t\t\t<input class="required" maxlength="50" type="text" id="js_field_current_password_clear" placeholder="password"/>\n\t\t</div>\n\t\t<ul class="actions inline">\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_show_curr_pwd_button" class="button toggle">\n\t\t\t\t\t<i class="icon eye big no-text"></i>\n\t\t\t\t\t<span>'),
b.push(a.view.txt(1,"span",0,this,function(){return __("view")})),b.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t\t<div id="js_field_current_password_feedback" class="message"></div>\n\t</div>\n\t');return b.join("")})),b.push('\n\t<div class="input text input-password-wrapper clearfix">\n\t\t<div class="input password required short">\n\t\t\t<label for="js_field_password">'),b.push(a.view.txt(1,"label",0,this,function(){return __("New login password")})),b.push('</label>\n\t\t\t<input name="passbolt.model.User.password" class="required" maxlength="50" type="password" id="js_field_password" placeholder="password"/>\n\t\t\t<input class="required" maxlength="50" type="text" id="js_field_password_clear" placeholder="password"/>\n\t\t</div>\n\t\t<ul class="actions inline">\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_show_pwd_button" class="button toggle">\n\t\t\t\t\t<i class="icon eye big no-text"></i>\n\t\t\t\t\t<span>'),
b.push(a.view.txt(1,"span",0,this,function(){return __("view")})),b.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_gen_pwd_button" class="button">\n\t\t\t\t\t<i class="icon key big no-text"></i>\n\t\t\t\t\t<span>'),b.push(a.view.txt(1,"span",0,this,function(){return __("generate")})),b.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t\t<div id="js_user_pwd_strength" class="password-complexity">\n\t\t</div>\n\t</div>\n\t'));return b.join("")}));b.push('\n\t<div class="input text required">\n\t\t<label for="js_field_role_id">');
b.push(a.view.txt(1,"label",0,this,function(){return __("Role")}));b.push('</label>\n\t\t<div id="js_field_role_id">\n\t\t\t<input name="passbolt.model.User.role_id" value="');b.push(a.view.txt(1,"input","value",this,function(){return cakephpConfig.roles.admin}));b.push('" type="checkbox" ',a.view.pending(),"/>");b.push("\n\t\t\t<span>This user is an administrator</span>\n\t\t</div>\n\t\t");b.push(a.view.txt(0,"div",0,this,function(){var a=[];"create"==action&&a.push("\n\t\t<em>Note: administrators can not see passwords as such but they can edit the password properties, like the name and description. They can also manage other users and the organization settings.</em>\n\t\t");
return a.join("")}));b.push('\n\t\t<div id="js_field_role_id_feedback" class="message">\n\t\t</div>\n\t</div>\n\t');b.push(a.view.txt(0,"div",0,this,function(){var b=[];"create"==action&&(b.push('\n\t<div class="input text required">\n\t\t<label for="js_field_last_name">'),b.push(a.view.txt(1,"label",0,this,function(){return __("Password")})),b.push('</label>\n\t\t<input name="passbolt.model.User.email_user" type="radio" class="required" maxlength="50" id="js_field_email_user" checked="checked"/>\n\t\t<span>Send an email to the user you have just created. It will allow them to set up their password.</span>\n\t\t<div id="js_field_email_user_feedback" class="message">\n\t\t</div>\n\t</div>\n\t'));
return b.join("")}));b.push('\n</div>\n<div class="submit-wrapper clearfix">\n    <input type="submit" class="button primary" value="');b.push(a.view.txt(1,"input","value",this,function(){return __("save")}));b.push('" ',a.view.pending(),"/>");b.push('\n    <a href="#" class="js-dialog-cancel cancel">');b.push(a.view.txt(1,"a",0,this,function(){return __("cancel")}));b.push("</a>\n</div>\n");return b.join("")}}))});steal.executed("app/view/template/form/user/createForm.ejs");
steal("mad/form/formController.js","app/view/template/form/user/passwordForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.user.PasswordFormController",{defaults:{templateBased:!0,passwordField:null}},{afterStart:function(){this.options.passwordField=(new mad.form.element.TextboxController($("#js_field_password"),{modelReference:"passbolt.model.User.password"})).start();this.addElement(this.options.passwordField);this.options.passwordClear=this.addElement((new mad.form.element.TextboxController($("#js_field_password_clear"),
{state:"hidden"})).start());this.options.showPwdButton=(new mad.controller.component.ButtonController($("#js_show_pwd_button"))).start();this.options.genPwdButton=(new mad.controller.component.ButtonController($("#js_gen_pwd_button"))).start();var a=can.getObject("data.Secret.data",this.options),a=passbolt.model.SecretStrength.getSecretStrength(a);this.options.secretStrength=(new passbolt.controller.component.SecretStrengthController($("#js_user_pwd_strength"),{secretStrength:a})).start();this.on()},
updateSecretEntropy:function(a){this.options.secretStrength.load(passbolt.model.SecretStrength.getSecretStrength(a))},"{passwordField} changed":function(){this.options.passwordField&&this.updateSecretEntropy(this.options.passwordField.getValue())},"{passwordClear} changed":function(){var a=this.getElement("js_field_password_clear").getValue();this.getElement("js_field_password").setValue(a);this.updateSecretEntropy(a)},"{showPwdButton} click":function(){var a=this.getElement("js_field_password"),
c=this.getElement("js_field_password_clear");a.state.is("hidden")?(c.setState("hidden"),a.setState("ready"),this.options.showPwdButton.view.removeClass("selected")):(a.setState("hidden"),c.setState("ready"),c.setValue(a.getValue()),this.options.showPwdButton.view.addClass("selected"))},"{genPwdButton} click":function(){var a=passbolt.model.Secret.generate();this.getElement("js_field_password").setValue(a);this.getElement("js_field_password_clear").setValue(a);this.updateSecretEntropy(a)}})});steal.executed("app/controller/form/user/passwordFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_user_passwordForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="form-content">\n\t<div class="input text input-password-wrapper">\n\t\t<div class="input password required short">\n\t\t\t<label for="js_field_password">');b.push(a.view.txt(1,"label",0,this,function(){return __("Password")}));b.push('</label>\n\t\t\t<input name="passbolt.model.User.password" class="required" maxlength="50" type="password" id="js_field_password" placeholder="password"/>\n\t\t\t<input class="required" maxlength="50" type="text" id="js_field_password_clear" placeholder="password"/>\n\t\t</div>\n\t\t<ul class="actions inline">\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_show_pwd_button" class="button toggle">\n\t\t\t\t\t<i class="icon eye big no-text"></i>\n\t\t\t\t\t<span>');
b.push(a.view.txt(1,"span",0,this,function(){return __("view")}));b.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a href="#" id="js_gen_pwd_button" class="button">\n\t\t\t\t\t<i class="icon key big no-text"></i>\n\t\t\t\t\t<span>');b.push(a.view.txt(1,"span",0,this,function(){return __("generate")}));b.push('</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t\t<div id="js_user_pwd_strength" class="password-complexity">\n\t\t</div>\n\t</div>\n</div>\n<div class="submit-wrapper clearfix">\n    <input type="submit" class="button primary" value="');
b.push(a.view.txt(1,"input","value",this,function(){return __("save")}));b.push('" ',a.view.pending(),"/>");b.push('\n    <a href="#" class="js-dialog-cancel cancel">');b.push(a.view.txt(1,"a",0,this,function(){return __("cancel")}));b.push("</a>\n</div>\n");return b.join("")}}))});steal.executed("app/view/template/form/user/passwordForm.ejs");
steal("mad/form/formController.js","app/view/template/form/user/avatarForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.user.AvatarFormController",{defaults:{templateBased:!0}},{afterStart:function(){this.on()}})});steal.executed("app/controller/form/user/avatarFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_user_avatarForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="form-content">\n\t<div class="input text input-password-wrapper">\n\t\t<div class="input required">\n\t\t\t<label for="js_field_avatar">');b.push(a.view.txt(1,"label",0,this,function(){return __("Avatar")}));b.push('</label>\n\t\t\t<input class="required" type="file" id="js_field_avatar" placeholder="select an image"/>\n\t\t</div>\n\t</div>\n</div>\n<div class="submit-wrapper clearfix">\n    <input type="submit" class="button primary" value="');
b.push(a.view.txt(1,"input","value",this,function(){return __("save")}));b.push('" ',a.view.pending(),"/>");b.push('\n    <a href="#" class="js-dialog-cancel cancel">');b.push(a.view.txt(1,"a",0,this,function(){return __("cancel")}));b.push("</a>\n</div>\n");return b.join("")}}))});steal.executed("app/view/template/form/user/avatarForm.ejs");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_settingsWorkspace_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<div class="js_settings_workspace">\n    <div class="panel left">\n        <div class="navigation first">\n            <ul id="js_wk_settings_menu" class="clearfix">\n            </ul>\n        </div>\n    </div>\n    <div class="panel middle">\n\t\t<div id="js_wsp_settings_breadcrumb" class="breadcrumbs">\n\t\t</div>\n\t\t<div id="js_wk_settings_main">\n\t\t</div>\n    </div>\n</div>');return b.join("")}}))});
steal.executed("app/view/template/settingsWorkspace.ejs");
steal("mad/controller/componentController.js","app/view/template/component/passwordWorkspaceMenu.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.PasswordWorkspaceMenuController",{defaults:{label:"Workspace Menu Controller",tag:"ul",selectedRs:new can.Model.List}},{afterStart:function(){var a=this;this.options.creationButton=(new mad.controller.component.ButtonController($("#js_wk_menu_creation_button"))).start();this.options.editionButton=(new mad.controller.component.ButtonController($("#js_wk_menu_edition_button"),
{state:"disabled"})).start();this.options.deletionButton=(new mad.controller.component.ButtonController($("#js_wk_menu_deletion_button"),{state:"disabled"})).start();this.options.sharingButton=(new mad.controller.component.ButtonController($("#js_wk_menu_sharing_button"),{state:"disabled"})).start();var c=[new mad.model.Action({id:uuid(),label:__("copy login to clipboard"),cssClasses:["todo"],action:function(){mad.bus.trigger("passbolt.login.clipboard",a.options.selectedRs[0].username)}}),new mad.model.Action({id:uuid(),
label:__("copy password to clipboard"),cssClasses:["todo"],action:function(){mad.bus.trigger("passbolt.secret.decrypt",a.options.selectedRs[0].Secret[0].data)}})];this.options.moreButton=(new mad.controller.component.ButtonDropdownController($("#js_wk_menu_more_button"),{state:"disabled",items:c})).start();this.on()},"{creationButton} click":function(){var a=this.options.creationButton.getValue();mad.bus.trigger("request_resource_creation",a)},"{editionButton} click":function(){var a=this.options.editionButton.getValue();
mad.bus.trigger("request_resource_edition",a)},"{deletionButton} click":function(){var a=this.options.deletionButton.getValue();mad.bus.trigger("request_resource_deletion",a)},"{sharingButton} click":function(){var a=this.options.sharingButton.getValue();mad.bus.trigger("request_resource_sharing",a)},"{selectedRs} add":function(){0==this.options.selectedRs.length?this.setState("ready"):1==this.options.selectedRs.length?this.setState("selection"):this.setState("multiSelection")},"{selectedRs} remove":function(){0==
this.options.selectedRs.length?this.setState("ready"):1==this.options.selectedRs.length?this.setState("selection"):this.setState("multiSelection")},"{mad.bus} filter_resources_browser":function(a,c,d){if(this.element){a=d.getForeignModels("Category");c="ready";if(a){if(this.options.creationButton.setValue(a),1<a.length||1==a.length&&!passbolt.model.Permission.isAllowedTo(a[0],passbolt.CREATE))c="disabled"}else this.options.creationButton.setValue(new can.List([]));this.options.creationButton.setState(c)}},
stateSelection:function(a){if(a){var a=passbolt.model.Permission.isAllowedTo(this.options.selectedRs[0],passbolt.UPDATE),c=passbolt.model.Permission.isAllowedTo(this.options.selectedRs[0],passbolt.ADMIN);this.options.editionButton.setValue(this.options.selectedRs[0]).setState(a?"ready":"disabled");this.options.deletionButton.setValue(this.options.selectedRs).setState(a?"ready":"disabled");this.options.sharingButton.setValue(this.options.selectedRs).setState(c?"ready":"disabled");this.options.moreButton.setValue(this.options.selectedRs[0]).setState("ready")}else this.options.editionButton.setValue(null).setState("disabled"),
this.options.deletionButton.setValue(null).setState("disabled"),this.options.sharingButton.setValue(null).setState("disabled"),this.options.moreButton.setValue(null).setState("disabled")},stateMultiSelection:function(a){if(a){var a=passbolt.model.Permission.isAllowedTo(this.options.selectedRs,passbolt.UPDATE),c=passbolt.model.Permission.isAllowedTo(this.options.selectedRs,passbolt.ADMIN);this.options.editionButton.setState("disabled");this.options.deletionButton.setValue(this.options.selectedRs).setState(a?
"ready":"disabled");this.options.sharingButton.setValue(this.options.selectedRs).setState(c?"ready":"disabled");this.options.moreButton.setState("disabled")}else this.options.editionButton.setValue(null).setState("disabled"),this.options.deletionButton.setValue(null).setState("disabled"),this.options.sharingButton.setValue(null).setState("disabled")}})});steal.executed("app/controller/component/passwordWorkspaceMenuController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_passwordWorkspaceMenu_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<li>\n\t<a id="js_wk_menu_creation_button" href="#" class="button">\n\t\t<i class="icon create"></i>\n\t\t<span>');b.push(a.view.txt(1,"span",0,this,function(){return __("create")}));b.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_wk_menu_edition_button" href="#" class="button">\n\t\t<i class="icon edit"></i>\n\t\t<span>');b.push(a.view.txt(1,
"span",0,this,function(){return __("edit")}));b.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_wk_menu_deletion_button" href="#" class="button">\n\t\t<i class="icon delete"></i>\n\t\t<span>');b.push(a.view.txt(1,"span",0,this,function(){return __("delete")}));b.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_wk_menu_sharing_button" href="#" class="button">\n\t\t<i class="icon share"></i>\n\t\t<span>');b.push(a.view.txt(1,"span",0,this,function(){return __("share")}));b.push('</span>\n\t</a>\n</li>\n<li>\n\t<div class="dropdown">\n\t\t<a id="js_wk_menu_more_button" href="#" class="button">\n\t\t\t<span>');
b.push(a.view.txt(1,"span",0,this,function(){return __("more")}));b.push('</span>\n\t\t\t<i class="icon after arrowdown"></i>\n\t\t</a>\n\t</div>\n</li>\n');return b.join("")}}))});steal.executed("app/view/template/component/passwordWorkspaceMenu.ejs");
steal("mad/controller/componentController.js","app/controller/component/passwordBreadcrumbController.js","app/controller/component/categoryActionsTabController.js","app/controller/component/categoryChooserController.js","app/controller/component/passwordBrowserController.js","app/controller/component/resourceActionsTabController.js","app/controller/component/resourceDetailsController.js","app/controller/component/resourceShortcutsController.js","app/controller/component/workspaceSecondaryMenuController.js",
"app/controller/form/category/createFormController.js","app/controller/form/resource/createFormController.js","app/model/filter.js","app/view/template/passwordWorkspace.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.PasswordWorkspaceController",{defaults:{label:"Password",templateUri:"app/view/template/passwordWorkspace.ejs",selectedRs:new can.Model.List,filter:new passbolt.model.Filter}},{afterStart:function(){mad.helper.ComponentHelper.create($("#js_wsp_primary_menu_wrapper"),
"last",passbolt.controller.component.PasswordWorkspaceMenuController,{selectedRs:this.options.selectedRs}).start();mad.helper.ComponentHelper.create($("#js_wsp_secondary_menu_wrapper"),"last",passbolt.controller.component.WorkspaceSecondaryMenuController,{}).start();(new passbolt.controller.component.ResourceShortcutsController("#js_wsp_pwd_rs_shortcuts",{})).start();this.breadcrumCtl=new passbolt.controller.component.PasswordBreadcrumbController($("#js_wsp_pwd_breadcrumb"),{});this.breadcrumCtl.start();
(new passbolt.controller.component.PasswordBrowserController("#js_wsp_pwd_browser",{selectedRs:this.options.selectedRs})).start();new passbolt.controller.component.ResourceDetailsController($(".js_wsp_pwd_sidebar_second",this.element),{selectedRs:this.options.selectedRs});var a=new passbolt.model.Filter({label:__("All items"),order:"modified",type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_resources_browser",a)},destroy:function(){$("#js_wsp_primary_menu_wrapper").empty();$("#js_wsp_secondary_menu_wrapper").empty();
this._super()},index:function(a,c,d){console.log("Execute function index of the password workspace controller, with the following arguments");console.dir(arguments)},"{mad.bus} filter_resources_browser":function(a,c,d){this.element&&this.breadcrumCtl.load(d)},"{mad.bus} category_selected":function(a,c,d){this.element&&(this.options.selectedRs.splice(0,this.options.selectedRs.length),this.options.filter.attr({foreignModels:{Category:new can.List([d])},type:passbolt.model.Filter.FOREIGN_MODEL}),mad.bus.trigger("filter_resources_browser",
this.options.filter))},"{mad.bus} copy_login_clipboard":function(){},"{mad.bus} copy_secret_clipboard":function(){},"{mad.bus} request_category_creation":function(a,c,d){if(this.element){var a=new passbolt.model.Category({parent_id:d.id}),b=(new mad.controller.component.DialogController(null,{label:__("Create a new Category")})).start();b.add(passbolt.controller.form.category.CreateFormController,{data:a,callbacks:{submit:function(a){(new passbolt.model.Category(a["passbolt.model.Category"])).save();
b.remove()}}}).load(a)}},"{mad.bus} request_category_edition":function(a,c,d){this.element&&(new mad.controller.component.DialogController(null,{label:__("Edit a Category")})).start().add(passbolt.controller.component.CategoryActionsTabController,{category:d}).enableTab("js_cat_edit")},"{mad.bus} request_category_sharing":function(a,c,d){this.element&&(new mad.controller.component.DialogController(null,{label:__("Share a Category")})).start().add(passbolt.controller.component.CategoryActionsTabController,
{category:d}).enableTab("js_cat_permission")},"{mad.bus} request_category_deletion":function(a,c,d){this.element&&d.destroy()},"{mad.bus} request_resource_creation":function(a,c,d){if(this.element){"undefined"==typeof d?d=[]:$.isArray(d)||(d=[d]);var a=new passbolt.model.Resource({Category:d}),b=(new mad.controller.component.DialogController(null,{label:__("Create Password")})).start();b.add(passbolt.controller.form.resource.CreateFormController,{data:a,callbacks:{submit:function(a){(new passbolt.model.Resource(a["passbolt.model.Resource"])).save();
b.remove()}}}).load(a)}},"{mad.bus} request_resource_edition":function(a,c,d){this.element&&(new mad.controller.component.DialogController(null,{label:__("Edit Password")})).start().add(passbolt.controller.component.ResourceActionsTabController,{resource:d}).enableTab("js_rs_edit")},"{mad.bus} request_resource_deletion":function(a,c){if(this.element)for(var d=2;d<arguments.length;d++){var b=arguments[d];if(!(b instanceof passbolt.model.Resource))throw new mad.error.Exception("The parameter "+d+" should be an instance of passbolt.model.Resource");
b.destroy()}},"{mad.bus} request_resource_sharing":function(a,c,d){this.element&&(new mad.controller.component.DialogController(null,{label:__("Share Password")})).start().add(passbolt.controller.component.ResourceActionsTabController,{resource:d}).enableTab("js_rs_permission")},"{mad.bus} request_favorite":function(a,c,d){this.element&&(new passbolt.model.Favorite({foreign_model:"resource",foreign_id:d.id})).save(function(a){d.Favorite=a;can.trigger(passbolt.model.Resource,"updated",d)})},"{mad.bus} request_unfavorite":function(a,
c,d){this.element&&d.Favorite.destroy(function(){d.Favorite=null;can.trigger(passbolt.model.Resource,"updated",d)})}})});steal.executed("app/controller/passwordWorkspaceController.js");
steal("mad/controller/componentController.js","app/model/category.js","app/view/template/component/breadcrumb/breadcrumb.ejs","app/view/template/component/breadcrumb/breadcrumbItem.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.PasswordBreadcrumbController",{defaults:{categories:passbolt.model.Category.List,templateUri:"app/view/template/component/breadcrumb/breadcrumb.ejs",status:"hidden",filter:null}},{afterStart:function(){var a="#"+this.getId()+
" ul";this.options.menu=new mad.controller.component.MenuController(a,{itemTemplateUri:"app/view/template/component/breadcrumb/breadcrumbItem.ejs"});this.options.menu.start()},parseFilter:function(a){var c=[],d=new mad.model.Action({id:uuid(),label:__("All items"),action:function(){var a=new passbolt.model.Filter({label:__("All items"),order:"modified"});mad.bus.trigger("filter_resources_browser",a)}});c.push(d);if("undefined"!=typeof a.foreignModels.Category){if(1==a.foreignModels.Category.length){var b=
a.foreignModels.Category[0],a=b.getParentCategories();can.each(a,function(a){var b=new mad.model.Action({id:uuid(),label:a.name,action:function(){mad.bus.trigger("category_selected",a)}});c.push(b)});d=new mad.model.Action({id:uuid(),label:b.name,action:function(){mad.bus.trigger("category_selected",b)}});c.push(d)}}else"undefined"!=typeof a.keywords&&""!=a.keywords?(d=new mad.model.Action({id:uuid(),label:__("Search : %s",a.keywords)}),c.push(d)):"undefined"!=typeof a.label&&a.label!=__("All items")&&
(d=new mad.model.Action({id:uuid(),label:a.label}),c.push(d));return c},load:function(a){a=this.parseFilter(a);this.options.menu.reset();this.options.menu.load(a)}})});steal.executed("app/controller/component/passwordBreadcrumbController.js");
steal("mad/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Category",{forceStore:!0,validateRules:{},attributes:{id:"string",parent_id:"string",lft:"string",rght:"string",name:"string",children:"passbolt.model.Category.models",UserCategoryPermission:"passbolt.model.UserCategoryPermission.model",GroupCategoryPermission:"passbolt.model.GroupCategoryPermission.model"},create:function(a,c,d){var b=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+
"categories.json",type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"categories/{id}",type:"DELETE",params:{id:a},success:c,error:d})},findOne:function(a,c,d){a.children=a.children||!1;return mad.net.Ajax.request({url:APP_URL+"categories/{id}.json",type:"GET",params:a,success:c,error:d})},findAll:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+
"categories.json",type:"GET",params:a,success:c,error:d})},update:function(a,c,d,b){var e=this;delete c.created;delete c.modified;c=mad.model.serializer.CakeSerializer.to(c,this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"categories/{id}.json",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{getSubCategories:function(){return mad.model.Model.nestedToList(this,"children")},getParentCategories:function(){var a=
[],c=mad.model.List.indexOf(passbolt.model.Category.madStore,this.parent_id);-1!=c&&(c=passbolt.model.Category.madStore[c],null!=c.parent_id&&(a=c.getParentCategories()),a.push(c));return a}})});steal.executed("app/model/category.js");
steal("mad/controller/component/tabController.js","app/controller/component/permissionsController.js").then(function(){mad.controller.component.TabController.extend("passbolt.controller.component.CategoryActionsTabController",{defaults:{label:null,category:null,cssClasses:["tabs"],viewClass:mad.view.component.Tab,templateUri:"mad/view/template/component/tab.ejs"}},{afterStart:function(){this._super();var a=this,c=passbolt.model.Permission.isAllowedTo(this.options.category,passbolt.UPDATE),d=passbolt.model.Permission.isAllowedTo(this.options.category,
passbolt.ADMIN);c&&(c=this.addComponent(passbolt.controller.form.category.CreateFormController,{id:"js_cat_edit",label:__("Edit"),data:a.options.category,callbacks:{submit:function(b){a.options.category.attr(b["passbolt.model.Category"]).save();a.closest(mad.controller.component.DialogController).remove()}}}),c.start(),c.load(this.options.category));d&&(d=this.addComponent(passbolt.controller.component.PermissionsController,{id:"js_cat_permission",label:"Share",resource:this.options.category,cssClasses:["share-tab"]}),
d.start(),d.load(this.options.category))},load:function(){},enableTab:function(a){this._super(a);a=this.getComponent(this.enabledTabId).options.label+'<span class="dialog-header-subtitle">'+this.options.category.name+"</span>";mad.app.getComponent("js_dialog").setTitle(a)}})});steal.executed("app/controller/component/categoryActionsTabController.js");
steal("app/view/component/permissions.js","app/model/group.js","app/model/user.js","app/model/permission.js","app/model/permissionType.js","app/view/template/form/permission/addForm.ejs","app/view/template/component/permission/permissionListItem.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.PermissionsController",{defaults:{label:"Permissions Controller",viewClass:passbolt.view.component.Permissions,acoInstance:null,permAroAutocpltTxtbx:null,permAroAutocpltList:null,
changes:[]}},{afterStart:function(){var a=this;this.permList=new mad.controller.component.TreeController($("#js_permissions_list"),{cssClasses:["permissions"],viewClass:mad.view.component.Tree,itemClass:passbolt.model.Permission,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"app/view/template/component/permission/permissionListItem.ejs",map:new mad.object.Map({id:"id",isDirect:{key:"aro_foreign_key",func:function(b,c,d){return d.isDirect(a.options.acoInstance)}},aroLabel:{key:"aro",
func:function(a){return a.toLowerCase()}},aroAvatarPath:{key:"id",func:function(a,b,c){return"User"==c.aro?c.User.Profile.avatarPath("small"):"img/group_default.png"}},permType:"PermissionType.serial",permLabel:{key:"type",func:function(a){return passbolt.model.PermissionType.toString(a)}},acoLabel:{key:"aco_foreign_key",func:function(a,b,c){switch(c.aro){case "Group":return c.Group.name;case "User":return c.User.Profile.first_name+" "+c.User.Profile.last_name}}},acoDetails:{key:"aco_foreign_key",
func:function(a,b,c){switch(c.aro){case "Group":return __("group");case "User":return c.User.username}}}})});this.permList.start();this.addFormController=new mad.form.FormController($("#js_permission_add_form",this.element),{templateBased:!0,cssClasses:["perm-create-form","clearfix"],templateUri:"app/view/template/form/permission/addForm.ejs",validateOnChange:!1,callbacks:{submit:function(b){a.formAddPermissionSubmit(b)}}});this.addFormController.start();var c=(new mad.form.FeedbackController($("#js_perm_create_form_feedback"),
{})).start();this.permAroHiddenTxtbx=(new mad.form.element.TextboxController($("#js_perm_create_form_aro",this.element),{modelReference:"passbolt.model.Permission.aro_foreign_key"})).start();this.addFormController.addElement(this.permAroHiddenTxtbx);this.options.permAroAutocpltTxtbx=(new mad.form.element.AutocompleteController($("#js_perm_create_form_aro_auto_cplt",this.element),{modelReference:"passbolt.model.Permission.aro_foreign_label",changeTimeout:400,callbacks:{ajax:function(b){return a.autocompleteAro(b)}}})).start();
this.addFormController.addElement(this.options.permAroAutocpltTxtbx,c);var d={},b;for(b in passbolt.model.PermissionType.PERMISSION_TYPES)d[b]=passbolt.model.PermissionType.toString(b);this.addFormController.addElement((new mad.form.element.DropdownController($("#js_perm_create_form_type",this.element),{emptyValue:!1,modelReference:"passbolt.model.Permission.type",availableValues:d})).start(),c);this.on()},autocompleteAro:function(a){return passbolt.model.User.findAll({keywords:a}).then(function(a){var d=
[],b=passbolt.model.User.getCurrent();a.each(function(a){a.id!=b.id&&d.push(new mad.model.Model({id:a.id,label:a.username,model:"passbolt.model.User",user:a}))});return d})},loadPermission:function(a){var c="#js_share_rs_perm_"+a.id,d={},b;for(b in passbolt.model.PermissionType.PERMISSION_TYPES)d[b]=passbolt.model.PermissionType.toString(b);this.permList.insertItem(a);(new mad.form.element.DropdownController($(".js_share_rs_perm_type",c),{emptyValue:!1,modelReference:"passbolt.model.Permission.type",
availableValues:d})).start().setValue(a.type)},load:function(a){var c=this;this.options.acoInstance=a;this.options.changes={};c.addFormController.load(this.options.acoInstance);passbolt.model.Permission.findAll({aco:this.options.acoInstance.constructor.shortName,aco_foreign_key:this.options.acoInstance.id},function(a){for(var b=0;b<a.length;b++)c.loadPermission(a[b])})},refresh:function(){this.permList.reset();this.load(this.options.acoInstance);$("#js_permissions_changes").addClass("hidden")},"{mad.bus} resource_share_secret_encrypted":function(a,
c,d){this.element&&this.element&&this.save(d)},permissionChange:function(a,c){void 0!==this.options.changes[a]&&void 0!==c["delete"]&&c["delete"]?(delete this.options.changes[a],this.options.changes.length||$("#js_permissions_changes").addClass("hidden")):(this.options.changes[a]={Permission:c},($permissionChanges=$("#js_permissions_changes.hidden")).length&&$permissionChanges.removeClass("hidden"))},formAddPermissionSubmit:function(a){var c=mad.model.Model.getModelAttributes(this.permAroHiddenTxtbx.getModelReference())[0];
passbolt.model.User.findOne({id:a[c.modelReference.fullName].id,async:!1}).then(function(a){user=a});var d=uuid();this.loadPermission(new passbolt.model.Permission({id:d,isNew:!0,aco:this.options.acoInstance.constructor.shortName,aco_foreign_key:this.options.acoInstance.id,aro:c.modelReference.shortName,aro_foreign_key:a[c.modelReference.fullName].id,type:a["passbolt.model.Permission"].type,User:user}));this.permissionChange(d,{isNew:!0,aro:c.modelReference.shortName,aro_foreign_key:a[c.modelReference.fullName].id,
type:a["passbolt.model.Permission"].type});this.addFormController.reset()},save:function(a){var c=this,d={},b=this.options.acoInstance.constructor.shortName,e=this.options.acoInstance.id;d.Permissions=[];for(var f in this.options.changes)d.Permissions.push(this.options.changes[f]);if(a){d.Secrets=[];for(var g in a)d.Secrets.push({Secret:{resource_id:e,user_id:g,data:a[g]}})}passbolt.model.Permission.share(b,e,d).then(function(){c.refresh()})}," request_permission_delete":function(a,c,d){this.permissionChange(d.id,
{id:d.id,"delete":1});this.permList.removeItem(d)},"{permAroAutocpltTxtbx} changed":function(){this.permAroHiddenTxtbx.setValue(null)},"{permAroAutocpltTxtbx} item_selected":function(a,c,d){this.permAroHiddenTxtbx.setModelReference(d.model+".id");this.permAroHiddenTxtbx.setValue(d.id)}," request_permission_edit":function(a,c,d,b){this.permissionChange(d.id,{id:d.id,type:b})},".js_perm_goto click":function(a){a=a.parents("li").data("passbolt.model.Permission");switch(a.aco){case "Category":a=mad.model.List.indexOf(passbolt.model.Category.madStore,
a.Category.id),mad.bus.trigger("request_category_sharing",passbolt.model.Category.madStore[a])}},"#js_rs_share_save click":function(){var a=this.options.acoInstance.id,c=[],d;for(d in this.options.changes)"undefined"!=typeof this.options.changes[d].Permission.isNew&&this.options.changes[d].Permission.isNew&&c.push(this.options.changes[d].Permission.aro_foreign_key);c.length?mad.bus.trigger("passbolt.resource_share.encrypt",{resourceId:a,usersIds:c}):this.save()}})});steal.executed("app/controller/component/permissionsController.js");
steal("mad/view","app/view/template/component/permissions.ejs").then(function(){mad.view.View.extend("passbolt.view.component.Permissions",{defaults:{}},{" .js_perm_delete click":function(a,c){c.stopPropagation();c.preventDefault();this.element.trigger("request_permission_delete",[a.parents("li").data("passbolt.model.Permission")])},".js_share_rs_perm_type changed":function(a,c,d){c.stopPropagation();c.preventDefault();this.element.trigger("request_permission_edit",[a.parents("li").data("passbolt.model.Permission"),
d.value])},"#js_perm_create_form_add_btn click":function(a,c){c.stopPropagation();c.preventDefault();a.trigger("submit")}})});steal.executed("app/view/component/permissions.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_permissions_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="form-content permission-edit">\n    <ul id="js_permissions_list" class="permissions scroll">\n    </ul>\n</div>\n<div id="js_permissions_changes" class="warning message hidden">\n    <span>You need to save to apply the changes.</span>\n</div>\n<div class="form-content permission-add">\n    <form id="js_permission_add_form">\n    </form>\n</div>\n<div class="submit-wrapper clearfix">\n    <input id="js_rs_share_save" type="submit" class="button primary" value="');b.push(a.view.txt(1,
"input","value",this,function(){return __("save")}));b.push('" ',a.view.pending(),"/>");b.push('\n    <a href="#" class="js-dialog-cancel cancel">cancel</a>\n</div>\n');return b.join("")}}))});steal.executed("app/view/template/component/permissions.ejs");
steal("jquery/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Group",{validateRules:{name:["alphanum","required"]},attributes:{id:"string",name:"string"},create:function(a,c,d){var b=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"groups.json",type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},findAll:function(a,
c,d){return mad.net.Ajax.request({url:APP_URL+"/groups",type:"GET",params:a,success:c,error:d})},update:function(a,c,d,b){var e=this;delete c.created;delete c.modified;c=mad.model.serializer.CakeSerializer.to(c,this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"groups/{id}.json",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+
"groups/{id}",type:"DELETE",params:{id:a},success:c,error:d})}},{})});steal.executed("app/model/group.js");
steal("jquery/model","app/model/category.js","app/model/permissionType.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.UserCategoryPermission",{attributes:{permission_id:"string",permission_type:"number"}},{});mad.model.Model("passbolt.model.GroupCategoryPermission",{attributes:{permission_id:"string",permission_type:"number"}},{});mad.model.Model("passbolt.model.UserResourcePermission",{attributes:{permission_id:"string",permission_type:"number"}},{});
mad.model.Model("passbolt.model.GroupResourcePermission",{attributes:{permission_id:"string",permission_type:"number"}},{});mad.model.Model("passbolt.model.Permission",{validateRules:{aro_foreign_key:["required","uid"],aro_foreign_label:["required"],type:["required",{rule:"foreignRule",options:{model:passbolt.model.PermissionType,attribute:"serial"}}]},attributes:{id:"string",type:"string",aco:"string",aco_foreign_key:"string",aro:"string",aro_foreign_key:"string",aro_foreign_label:"string",PermissionType:"passbolt.model.PermissionType.model",
Resource:"passbolt.model.Resource.model",Category:"passbolt.model.Category.model",User:"passbolt.model.User.model",Group:"passbolt.model.Group.model"},create:function(a,c,d){var b=this,e="permissions/"+a.aco.toLowerCase()+"/"+a.aco_foreign_key;delete a.aco;a.aco_foreign_key;a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+e,type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,
b)]);return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"permissions/{id}.json",type:"DELETE",params:{id:a},success:c,error:d})},findAll:function(a,c,d){var b="permissions";"undefined"!=typeof a.aco&&"undefined"!=typeof a.aco_foreign_key&&(b+="/"+a.aco.toLowerCase()+"/"+a.aco_foreign_key);return mad.net.Ajax.request({url:APP_URL+b,type:"GET",params:a,success:c,error:d})},findOne:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"/permissions/{id}",type:"GET",params:a,
success:c,error:d})},update:function(a,c,d,b){var e=this;delete c.created;delete c.modified;c=mad.model.serializer.CakeSerializer.to(c,this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"/permissions/{id}",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})},share:function(a,c,d,b,e){var f=this;return mad.net.Ajax.request({url:APP_URL+"share/"+a+"/"+c+".json",type:"PUT",params:d,success:b,error:e}).pipe(function(a){var b=
$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,f)]);return b})},isAllowedTo:function(a,c){var d=null,b=null;a instanceof can.Model.List||(a=new can.List([a]));a.each(function(a){if(!1!=b){switch(a.constructor.shortName){case "Category":"undefined"!=typeof a.UserCategoryPermission?d=a.UserCategoryPermission:"undefined"!=typeof a.GroupCategoryPermission&&(d=a.GroupCategoryPermission);break;case "Resource":"undefined"!=typeof a.UserResourcePermission?d=a.UserResourcePermission:
"undefined"!=typeof a.GroupResourcePermission&&(d=a.GroupResourcePermission)}b=d.permission_type>=c?!0:!1}});return null!=b?b:!1}},{isDirect:function(a){var c=can.getObject("passbolt.model."+this.aco);return a instanceof c&&a.id===this.aco_foreign_key?!0:!1}})});steal.executed("app/model/permission.js");
steal("jquery/model","app/model/category.js","mad/model/serializer/cakeSerializer.js").then(function(){passbolt.DENY=0;passbolt.READ=1;passbolt.CREATE=3;passbolt.UPDATE=7;passbolt.ADMIN=15;mad.model.Model("passbolt.model.PermissionType",{validateRules:{serial:[{rule:"choice",options:{callback:function(){return $.map(passbolt.model.PermissionType.PERMISSION_TYPES,function(a,c){return c})}}}]},attributes:{serial:"string",name:"string",binary:"string",_admin:"boolean",_update:"boolean",_create:"boolean",
_read:"boolean",description:"string"},PERMISSION_TYPES:{"0":__("deny"),1:__("read"),3:__("create"),7:__("update"),15:__("owner")},toString:function(a){var c="";switch(a){case passbolt.DENY.toString():c=this.PERMISSION_TYPES[a];break;case passbolt.ADMIN.toString():c=__("is %s",this.PERMISSION_TYPES[a]);break;default:c=__("can %s",this.PERMISSION_TYPES[a])}return c},getPermissionTypes:function(a){var c=[],d={Group:[0,1,3,7,15],User:[0,1,7,15]};if("undefined"!=typeof a)for(var b in d[a])c[b]=passbolt.model.PermissionType.PERMISSION_TYPES[b];
else c=passbolt.model.PermissionType.PERMISSION_TYPES;return c}},{toString:function(a){switch(a){case "long":a=passbolt.model.PermissionType.PERMISSION_TYPES[this.serial];this.serial!==passbolt.DENY.toString()&&this.serial!=passbolt.ADMIN.toString()&&(a=__("can %s",a));break;default:a=passbolt.model.PermissionType.PERMISSION_TYPES[this.serial]}return a},destroy:function(){}})});steal.executed("app/model/permissionType.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_permission_addForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<input id="js_perm_create_form_aro" type="hidden" />\n<div class="input text autocomplete">\n\t<label for="js_perm_create_form_aro_auto_cplt">Share with people</label>\n\t<input maxlength="50" type="text" id="js_perm_create_form_aro_auto_cplt" placeholder="');__("start typing a person name");b.push('" autocomplete="off"',a.view.pending(),"/>");
b.push('\n</div>\n<div class="select left perm-type">\n\t<select id="js_perm_create_form_type" class="permission">\n\t</select>\n</div>\n<div class="actions">\n    <input id="js_perm_create_form_add_btn" type="submit" class="button primary" value="add"/>\n</div>\n<div class="input blank">\n\t<div id="js_perm_create_form_feedback" class="message"></div>\n</div>\n');return b.join("")}}))});steal.executed("app/view/template/form/permission/addForm.ejs");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_permission_permissionListItem_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];mappedItem.isDirect?cssClasses.push("direct-permission"):cssClasses.push("inherited-permission");for(var e in passbolt.model.PermissionType.PERMISSION_TYPES)passbolt.model.PermissionType.toString(e);b.push('\n<li id="');b.push(a.view.txt(1,"li","id",this,function(){return mappedItem.id}));b.push('" ');b.push(a.view.txt(1,"li",1,this,function(){return a.proxy(function(b){a.$(b).data(itemClass.fullName,
item)},this)}));b.push(' class="row ');b.push(a.view.txt(1,"li","class",this,function(){return cssClasses.join(" ")}));b.push('"',a.view.pending(),">");b.push('\n    <div class="avatar">\n        <img src="');b.push(a.view.txt(1,"img","src",this,function(){return mappedItem.aroAvatarPath}));b.push('"',a.view.pending(),"/>");b.push('\n    </div>\n    <div class="group">\n        <span class="name">');b.push(a.view.txt(1,"span",0,this,function(){return mappedItem.acoLabel}));b.push('</span>\n        <span class="details"><a href="#">');
b.push(a.view.txt(1,"a",0,this,function(){return mappedItem.acoDetails}));b.push('</a></span>\n    </div>\n    <div class="select rights">\n        <form id="js_share_rs_perm_');b.push(a.view.txt(1,"form","id",this,function(){return mappedItem.id}));b.push('" class="js_perm_edit_form"',a.view.pending(),">");b.push('\n            <select class="js_share_rs_perm_type permission">\n            </select>\n        </form>\n    </div>\n    <div class="actions">\n        ');b.push(a.view.txt(0,"div",0,this,
function(){var b=[];mappedItem.isDirect&&(b.push('\n        <a href="#" class="js_perm_delete close" title="'),b.push(a.view.txt(1,"a","title",this,function(){return __("remove")})),b.push('"',a.view.pending(),">"),b.push('\n            <i class="icon close no-text"></i>\n            <span>'),b.push(a.view.txt(1,"span",0,this,function(){return __("remove")})),b.push("</span>\n        </a>\n        "));return b.join("")}));b.push("\n    </div>\n</li>\n");return b.join("")}}))});steal.executed("app/view/template/component/permission/permissionListItem.ejs");
steal("mad/controller/component/dynamicTreeController.js","app/view/component/categoryChooser.js","app/model/category.js","app/model/categoryResource.js").then(function(){mad.controller.component.DynamicTreeController.extend("passbolt.controller.component.CategoryChooserController",{defaults:{label:"Category Chooser",viewClass:passbolt.view.component.categoryChooser,itemClass:passbolt.model.Category,templateUri:"mad/view/template/component/tree.ejs",map:new mad.object.Map({id:"id",label:"name",children:{key:"children",
func:mad.object.Map.mapObjects}})}},{afterStart:function(){var a=this;this.setState("loading");passbolt.model.Category.findAll({children:!0},function(c){a.load(c);a.setState("ready")},function(){})},showContextualMenu:function(a){var c=$("a span","#"+a.id),d=c.offset(),c=new mad.controller.component.ContextualMenuController(null,{state:"hidden",source:c[0],coordinates:{x:"180",y:d.top}});c.start();var d=passbolt.model.Permission.isAllowedTo(a,passbolt.CREATE),b=passbolt.model.Permission.isAllowedTo(a,
passbolt.UPDATE),e=passbolt.model.Permission.isAllowedTo(a,passbolt.ADMIN),f=new mad.model.Action({id:uuid(),label:"Open",cssClasses:["separator-after"],action:function(b){mad.bus.trigger("category_selected",a);b.remove()}});c.insertItem(f);f=new mad.model.Action({id:uuid(),label:"Create resource",initial_state:!d?"disabled":"ready",action:function(b){mad.bus.trigger("request_resource_creation",a);b.remove()}});c.insertItem(f);f=new mad.model.Action({id:uuid(),label:"Create category",cssClasses:["separator-after"],
initial_state:!d?"disabled":"ready",action:function(b){mad.bus.trigger("request_category_creation",a);b.remove()}});c.insertItem(f);f=new mad.model.Action({id:uuid(),label:"Rename...",initial_state:!b?"disabled":"ready",action:function(b){mad.bus.trigger("request_category_edition",a);b.remove()}});c.insertItem(f);f=new mad.model.Action({id:uuid(),label:"Share",initial_state:!e?"disabled":"ready",action:function(b){mad.bus.trigger("request_category_sharing",a);b.remove()}});c.insertItem(f);f=new mad.model.Action({id:uuid(),
label:"Remove",initial_state:!b?"disabled":"ready",action:function(b){mad.bus.trigger("request_category_deletion",a);b.remove()}});c.insertItem(f);c.setState("ready")}," item_selected":function(a,c,d){mad.bus.trigger("category_selected",d)}," category_dropover":function(){}," category_dropout":function(){}," category_dropon":function(a,c,d,b){a=d.element.parent().attr("id");b=b.element.attr("id");(new passbolt.model.CategoryResource({category_id:a,resource_id:b})).save()}," item_right_selected":function(a,
c,d,b){this._super(a,c,d,b);this.showContextualMenu(d,b.pageX,b.pageY)},"{passbolt.model.Category} created":function(a,c,d){this.insertItem(d,d.parent_id,"last")},"{passbolt.model.Category} destroyed":function(a,c,d){this.removeItem(d)},"{passbolt.model.Category} updated":function(a,c,d){this.refreshItem(d)},"{mad.bus} filter_resources_browser":function(a,c,d){this.element&&(d.type!=passbolt.model.Filter.FOREIGN_MODEL?this.unselectAll():this.selectItem(d.getForeignModels("Category")[0]))}})});steal.executed("app/controller/component/categoryChooserController.js");
steal("jquery/event/drop","mad/view/component/tree/dynamicTree.js").then(function(){mad.view.component.tree.DynamicTree.extend("passbolt.view.component.categoryChooser",{},{insertItem:function(a,c,d){var b=this,a=this._super(a,c,d);$("> .row",$(a)).bind("dropover",function(a,c,d){$(this).addClass("drop-over");b.element.trigger("category_dropover",[c,d,a])}).bind("dropout",function(a,c,d){$(this).removeClass("drop-over");b.element.trigger("category_dropout",[c,d,a])}).bind("dropon",function(a,c,d){$(this).removeClass("drop-over");
b.element.trigger("category_dropon",[c,d,a])})}})});steal.executed("app/view/component/categoryChooser.js");
steal("jquery","jquerypp/event/drag/core","jquerypp/dom/within","jquerypp/dom/compare",function(a){var c=a.event,d="dropover dropon dropout dropinit dropmove dropend".split(" ");a.Drop=function(b,c){a.extend(this,b);this.element=a(c)};a.each(d,function(){c.special[this]={add:function(){var b=a(this),c=b.data("dropEventCount")||0;b.data("dropEventCount",c+1);0==c&&a.Drop.addElement(this)},remove:function(){var b=a(this),c=b.data("dropEventCount")||0;b.data("dropEventCount",c-1);1>=c&&a.Drop.removeElement(this)}}});
a.extend(a.Drop,{lowerName:"drop",_rootElements:[],_elements:a(),last_active:[],endName:"dropon",addElement:function(a){for(var c=0;c<this._rootElements.length;c++)if(a==this._rootElements[c])return;this._rootElements.push(a)},removeElement:function(a){for(var c=0;c<this._rootElements.length;c++)if(a==this._rootElements[c]){this._rootElements.splice(c,1);break}},sortByDeepestChild:function(a,c){var d=a.element.compare(c.element);return d&16||d&4?1:d&8||d&2?-1:0},isAffected:function(a,c,d){return d.element!=
c.element&&1==d.element.within(a[0],a[1],d._cache).length},deactivate:function(a,c,d){c.out(d,a);a.callHandlers(this.lowerName+"out",a.element[0],d,c)},activate:function(a,c,d){c.over(d,a);a.callHandlers(this.lowerName+"over",a.element[0],d,c)},move:function(a,c,d){a.callHandlers(this.lowerName+"move",a.element[0],d,c)},compile:function(b,c){if(this.dragging||c){this.dragging||(this.dragging=c,this.last_active=[]);for(var f,g,h,k,l=[],o=this.dragging,m=0;m<this._rootElements.length;m++)for(h in f=
this._rootElements[m],g=a.event.findBySelector(f,d),g){k=h?jQuery(h,f):[f];for(var n=0;n<k.length;n++)this.addCallbacks(k[n],g[h],o)&&l.push(k[n])}this.add(l,b,o)}},addCallbacks:function(b,c,d){var g=a.data(b,"_dropData");if(g){if(!d){for(var h in c)g[h]=g[h]?g[h].concat(c[h]):c[h];return!1}}else return a.data(b,"_dropData",new a.Drop(c,b)),!0},add:function(b,c,d){for(var g=0,h;g<b.length;)h=a.data(b[g],"_dropData"),h.callHandlers(this.lowerName+"init",b[g],c,d),h._canceled?b.splice(g,1):g++;this._elements.push.apply(this._elements,
b)},show:function(b,c,d){if(this._elements.length){for(var g=[],h=!0,k=0,l,o,m,n=this.last_active;k<this._elements.length;)(l=a.data(this._elements[k],"_dropData"))?(k++,this.isAffected(b,c,l)&&g.push(l)):this._elements.splice(k,1);g.sort(this.sortByDeepestChild);d.stopRespondPropagate=function(){h=!1};o=g.slice();this.last_active=g;for(b=0;b<n.length;b++){l=n[b];for(k=0;m=o[k];)if(l==m){o.splice(k,1);break}else k++;m||this.deactivate(l,c,d);if(!h)return}for(k=0;k<o.length;k++)if(this.activate(o[k],
c,d),!h)return;for(k=0;k<g.length&&!(this.move(g[k],c,d),!h);k++);}},end:function(b,c){for(var d,g=this.lowerName+"end",h=a.Event(this.endName,b),k=0;k<this.last_active.length&&!(d=this.last_active[k],this.isAffected(b.vector(),c,d)&&d[this.endName]&&d.callHandlers(this.endName,null,h,c),h.isPropagationStopped());k++);for(h=0;h<this._elements.length;h++)(d=a.data(this._elements[h],"_dropData"))&&d.callHandlers(g,null,b,c);this.clear()},clear:function(){this._elements.each(function(){a.removeData(this,
"_dropData")});this._elements=a();delete this.dragging}});a.Drag.responder=a.Drop;a.extend(a.Drop.prototype,{callHandlers:function(a,c,d,g){for(var h=this[a]?this[a].length:0,k=0;k<h;k++)this[a][k].call(c||this.element[0],d,this,g)},cache:function(a){this._cache=null!=a?a:!0},cancel:function(){this._canceled=!0}});return a});steal.executed("lib/jquerypp/event/drop/drop.js");
steal("jquery","jquerypp/lang/vector","jquerypp/event/livehack","jquerypp/event/reverse",function(a){a.event.special.move||a.event.reverse("move");var c=function(b,c){var d=Array.prototype.slice.call(arguments,2);return function(){var e=[this].concat(d,a.makeArray(arguments));return c.apply(b,e)}},d=a.event,b=window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){},e="ontouchend"in document,f=e?"touchstart":"mousedown",g=e?"touchend":"mouseup",h=e?"touchmove":"mousemove",
k=function(a){a.preventDefault()};a.Drag=function(){};a.extend(a.Drag,{lowerName:"drag",current:null,distance:0,mousedown:function(b,c){if(!(!(0===b.button||1==b.button)&&!e||this.current)){var f=new a.Drag,g=b.delegateTarget||c,h=b.handleObj.selector,k=this;this.current=f;f.setup({element:c,delegate:b.delegateTarget||c,selector:b.handleObj.selector,moved:!1,_distance:this.distance,callbacks:{dragdown:d.find(g,["dragdown"],h),draginit:d.find(g,["draginit"],h),dragover:d.find(g,["dragover"],h),dragmove:d.find(g,
["dragmove"],h),dragout:d.find(g,["dragout"],h),dragend:d.find(g,["dragend"],h),dragcleanup:d.find(g,["dragcleanup"],h)},destroyed:function(){k.current=null}},b)}}});a.extend(a.Drag.prototype,{setup:function(d,f){a.extend(this,d);this.element=a(this.element);this.event=f;this.allowOtherDrags=this.moved=!1;var m=c(this,this.mousemove),n=c(this,this.mouseup);this._mousemove=m;this._mouseup=n;this._distance=d.distance?d.distance:0;this.mouseStartPosition=f.vector();a(document).bind(h,m);a(document).bind(g,
n);e&&a(document).bind(h,k);this.callEvents("down",this.element,f)||(this.noSelection(this.delegate),b())},destroy:function(){a(document).unbind(h,this._mousemove);a(document).unbind(g,this._mouseup);e&&a(document).unbind(h,k);this.moved||(this.event=this.element=null);e||this.selection(this.delegate);this.destroyed()},mousemove:function(a,b){if(!this.moved){if(Math.sqrt(Math.pow(b.pageX-this.event.pageX,2)+Math.pow(b.pageY-this.event.pageY,2))<this._distance)return!1;this.init(this.element,b);this.moved=
!0}this.element.trigger("move",this);var c=b.vector();(!this._start_position||!this._start_position.equals(c))&&this.draw(c,b)},mouseup:function(a,b){this.moved&&this.end(b);this.destroy()},noSelection:function(b){b=b||this.delegate;document.documentElement.onselectstart=function(){return!1};document.documentElement.unselectable="on";this.selectionDisabled=this.selectionDisabled?this.selectionDisabled.add(b):a(b);this.selectionDisabled.css("-moz-user-select","-moz-none")},selection:function(){this.selectionDisabled&&
(document.documentElement.onselectstart=function(){},document.documentElement.unselectable="off",this.selectionDisabled.css("-moz-user-select",""))},init:function(b,c){var b=a(b),d=this.movingElement=this.element=a(b);this._cancelled=!1;this.event=c;this.mouseElementPosition=this.mouseStartPosition.minus(this.element.offsetv());this.callEvents("init",b,c);!0!==this._cancelled&&(this.startPosition=d!=this.movingElement?this.movingElement.offsetv():this.currentDelta(),this.makePositioned(this.movingElement),
this.oldZIndex=this.movingElement.css("zIndex"),this.movingElement.css("zIndex",1E3),!this._only&&this.constructor.responder&&this.constructor.responder.compile(c,this))},makePositioned:function(a){var b;b=a.css("position");if(!b||"static"==b)b={position:"relative"},window.opera&&(b.top="0px",b.left="0px"),a.css(b)},callEvents:function(a,b,c,d){for(var e=this.callbacks[this.constructor.lowerName+a],a=0;a<e.length;a++)e[a].call(b,c,this,d);return e.length},currentDelta:function(){return new a.Vector(parseInt(this.movingElement.css("left"),
10)||0,parseInt(this.movingElement.css("top"),10)||0)},draw:function(a,c){this._cancelled||(b(),this.location=a.minus(this.mouseElementPosition),this.move(c),this._cancelled||(c.isDefaultPrevented()||this.position(this.location),!this._only&&this.constructor.responder&&this.constructor.responder.show(a,this,c)))},position:function(a){var b=this.currentDelta(),b=this.movingElement.offsetv().minus(b);this.required_css_position=a.minus(b);this.offsetv=a;a=this.movingElement[0].style;!this._cancelled&&
!this._horizontal&&(a.top=this.required_css_position.top()+"px");!this._cancelled&&!this._vertical&&(a.left=this.required_css_position.left()+"px")},move:function(a){this.callEvents("move",this.element,a)},over:function(a,b){this.callEvents("over",this.element,a,b)},out:function(a,b){this.callEvents("out",this.element,a,b)},end:function(a){if(!this._cancelled){!this._only&&this.constructor.responder&&this.constructor.responder.end(a,this);this.callEvents("end",this.element,a);if(this._revert){var b=
this;this.movingElement.animate({top:this.startPosition.top()+"px",left:this.startPosition.left()+"px"},function(){b.cleanup.apply(b,arguments)})}else this.cleanup(a);this.event=null}},cleanup:function(a){this.movingElement.css({zIndex:this.oldZIndex});this.movingElement[0]!==this.element[0]&&!this.movingElement.has(this.element[0]).length&&!this.element.has(this.movingElement[0]).length&&this.movingElement.css({display:"none"});this._removeMovingElement&&this.movingElement.remove();a&&this.callEvents("cleanup",
this.element,a);this.movingElement=this.element=this.event=null},cancel:function(){this._cancelled=!0;!this._only&&this.constructor.responder&&this.constructor.responder.clear(this.event.vector(),this,this.event);this.destroy()},ghost:function(b){var c=this.movingElement.clone().css("position","absolute");b?a(b).append(c):a(this.movingElement).after(c);c.width(this.movingElement.width()).height(this.movingElement.height());c.offset(this.movingElement.offset());this.movingElement=c;this.noSelection(c);
this._removeMovingElement=!0;return c},representative:function(b,c,d){this._offsetX=c||0;this._offsetY=d||0;c=this.mouseStartPosition;this.movingElement=a(b);this.movingElement.css({top:c.y()-this._offsetY+"px",left:c.x()-this._offsetX+"px",display:"block",position:"absolute"}).show();this.noSelection(this.movingElement);this.mouseElementPosition=new a.Vector(this._offsetX,this._offsetY);return this},revert:function(a){this._revert=void 0===a?!0:a;return this},vertical:function(){this._vertical=!0;
return this},horizontal:function(){this._horizontal=!0;return this},only:function(a){return this._only=void 0===a?!0:a},distance:function(a){return void 0!==a?(this._distance=a,this):this._distance}});d.setupHelper("dragdown draginit dragover dragmove dragout dragend dragcleanup".split(" "),f,function(b){a.Drag.mousedown.call(a.Drag,b,this)});return a});steal.executed("lib/jquerypp/event/drag/core/core.js");
steal("jquery",function(a){var c=function(a){return void 0!==a?this.array[0]=a:this.array[0]},d=function(a){return void 0!==a?this.array[1]=a:this.array[1]};a.Vector=function(b){this.update(a.isArray(b)?b:a.makeArray(arguments))};a.Vector.prototype={app:function(b){var c,d=[];for(c=0;c<this.array.length;c++)d.push(b(this.array[c],c));return new a.Vector(d)},plus:function(){var b,c=arguments[0]instanceof a.Vector?arguments[0].array:a.makeArray(arguments),d=this.array.slice(0),g=new a.Vector;for(b=
0;b<c.length;b++)d[b]=(d[b]?d[b]:0)+c[b];return g.update(d)},minus:function(){var b,c=arguments[0]instanceof a.Vector?arguments[0].array:a.makeArray(arguments),d=this.array.slice(0),g=new a.Vector;for(b=0;b<c.length;b++)d[b]=(d[b]?d[b]:0)-c[b];return g.update(d)},equals:function(){var b,c=arguments[0]instanceof a.Vector?arguments[0].array:a.makeArray(arguments),d=this.array.slice(0),g=new a.Vector;for(b=0;b<c.length;b++)if(d[b]!=c[b])return null;return g.update(d)},x:c,left:c,width:c,y:d,top:d,height:d,
toString:function(){return"("+this.array.join(", ")+")"},update:function(a){var c;if(this.array)for(c=0;c<this.array.length;c++)delete this.array[c];this.array=a;for(c=0;c<a.length;c++)this[c]=this.array[c];return this}};a.Event.prototype.vector=function(){var b="ontouchend"in document&&this.originalEvent.touches&&this.originalEvent.touches.length?this.originalEvent.changedTouches[0]:this;if(this.originalEvent.synthetic){var c=document.documentElement,d=document.body;return new a.Vector(b.clientX+
(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c.clientLeft||0),b.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c.clientTop||0))}return new a.Vector(b.pageX,b.pageY)};a.fn.offsetv=function(){if(this[0]==window)return new a.Vector(window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop);var b=this.offset()||{};return new a.Vector(b.left,b.top)};a.fn.dimensionsv=function(b){return this[0]==window||!b?new a.Vector(this.width(),
this.height()):new a.Vector(this[b+"Width"](),this[b+"Height"]())};return a});steal.executed("lib/jquerypp/lang/vector/vector.js");
steal("jquery",function(a){var c=a.event,d=function(a,c,d,g){var h,k,l,o,m,n,r;for(h=0;h<c.length;h++){k=c[h];(o=0>k.indexOf("."))||(l=k.split("."),k=l.shift(),r=RegExp("(^|\\.)"+l.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)"));l=(a[k]||[]).slice(0);for(m=0;m<l.length;m++)n=l[m],(o||r.test(n.namespace))&&(g?n.selector===g&&d(k,n.origHandler||n.handler):null===g?d(k,n.origHandler||n.handler,n.selector):n.selector||d(k,n.origHandler||n.handler))}};c.find=function(b,c,f){var b=(a._data(b)||{}).events,
g=[];if(!b)return g;d(b,c,function(a,b){g.push(b)},f);return g};c.findBySelector=function(b,c){var f=a._data(b).events,g={};if(!f)return g;d(f,c,function(a,b,c){c=c||"";c=g[c]||(g[c]={});(c[a]||(c[a]=[])).push(b)},null);return g};c.supportTouch="ontouchend"in document;a.fn.respondsTo=function(b){return this.length?0<c.find(this[0],a.isArray(b)?b:[b]).length:!1};a.fn.triggerHandled=function(b,c){b="string"==typeof b?a.Event(b):b;this.trigger(b,c);return b.handled};c.setupHelper=function(b,d,f){f||
(f=d,d=null);var g=function(g){var h=g.selector||"",o=g.namespace?"."+g.namespace:"";h?(g=c.find(this,b,h),g.length||a(this).delegate(h,d+o,f)):c.find(this,b,h).length||c.add(this,d+o,f,{selector:h,delegate:this})},h=function(g){var h=g.selector||"";h?(g=c.find(this,b,h),g.length||a(this).undelegate(h,d,f)):c.find(this,b,h).length||c.remove(this,d,f,{selector:h,delegate:this})};a.each(b,function(){c.special[this]={add:g,remove:h,setup:function(){},teardown:function(){}}})};return a});steal.executed("lib/jquerypp/event/livehack/livehack.js");
steal("jquery",function(a){a.event.reverse=function(c,d){var b=a(),e=0,f=a.event.handle||a.event.dispatch;a.event.special[c]={setup:function(){this!==window&&(b.push(this),a.unique(b));return this!==window},teardown:function(){b=b.not(this);return this!==window},add:function(c){c.origHandler=c.handler;c.handler=function(h,k){var l=this===window;if(!d||!(d.handler&&!0===d.handler.apply(this,arguments)))if(0===e){e++;var o=!1===k?h.target:this;f.call(o,h,k);if(!h.isPropagationStopped()){for(var m=b.index(this),
n=b.length,r,q;++m<n&&(r=b[m])&&(l||a.contains(o,r));)if(f.call(r,h,k),h.isPropagationStopped())for(;++m<n&&(q=b[m]);)if(!a.contains(r,q)){m--;break}h.stopImmediatePropagation()}e--}else c.origHandler.call(this,h,k)}}};a([document,window]).bind(c,function(){});return a.event.special[c]};return a});steal.executed("lib/jquerypp/event/reverse/reverse.js");
steal("jquery",function(a){a.fn.within=function(c,d,b){var e=[];this.each(function(){var f=jQuery(this);if(this==document.documentElement)return e.push(this);f=b?a.data(this,"offsetCache")||a.data(this,"offsetCache",f.offset()):f.offset();d>=f.top&&d<f.top+this.offsetHeight&&(c>=f.left&&c<f.left+this.offsetWidth)&&e.push(this)});return this.pushStack(a.unique(e),"within",c+","+d)};a.fn.withinBox=function(c,d,b,e,f){var g=[];this.each(function(){var h=jQuery(this);if(this==document.documentElement)return g.push(this);
var k=f?a.data(this,"offset")||a.data(this,"offset",h.offset()):h.offset(),l=h.width(),h=h.height();k.top>d+e||k.top+h<d||(k.left>c+b||k.left+l<c)||g.push(this)});return this.pushStack(a.unique(g),"withinBox",a.makeArray(arguments).join(","))};return a});steal.executed("lib/jquerypp/dom/within/within.js");
steal("jquery",function(a){a.fn.compare=function(a){try{a=a.jquery?a[0]:a}catch(d){return null}if(window.HTMLElement){var b=HTMLElement.prototype.toString.call(a);if("[xpconnect wrapped native prototype]"==b||"[object XULElement]"==b||"[object Window]"===b)return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(a);if(this[0]==document&&a!=document)return 8;var b=(this[0]!==a&&this[0].contains(a)&&16)+(this[0]!=a&&a.contains(this[0])&&8),e=document.documentElement;this[0].sourceIndex&&
(b+=this[0].sourceIndex<a.sourceIndex&&4,b+=this[0].sourceIndex>a.sourceIndex&&2,b+=(this[0].ownerDocument!==a.ownerDocument||this[0]!=e&&0>=this[0].sourceIndex||a!=e&&0>=a.sourceIndex)&&1);return b};return a});steal.executed("lib/jquerypp/dom/compare/compare.js");
steal("mad/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.CategoryResource",{validateRules:{},attributes:{id:"string",category_id:"string",resource_id:"string"},create:function(a,c,d){var b=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"categoriesResources",type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);
return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"categoriesResources/{id}",type:"DELETE",params:{id:a},success:c,error:d})},findOne:function(a,c,d){a.children=a.children||!1;return mad.net.Ajax.request({url:APP_URL+"categoriesResources/{id}.json",type:"GET",params:a,success:c,error:d})},findAll:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"categoriesResources.json",type:"GET",params:a,success:c,error:d})},update:function(a,c,d,b){var e=this;delete c.created;
delete c.modified;c=mad.model.serializer.CakeSerializer.to(c,this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"/categoriesResources/{id}",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{})});steal.executed("app/model/categoryResource.js");
steal("mad/controller/component/gridController.js","app/model/resource.js","app/model/category.js","app/controller/component/copyLoginButtonController.js","app/controller/component/copySecretButtonController.js","app/controller/component/favoriteController.js","app/view/component/passwordBrowser.js").then(function(){mad.controller.component.GridController.extend("passbolt.controller.component.PasswordBrowserController",{defaults:{itemClass:passbolt.model.Resource,viewClass:passbolt.view.component.passwordBrowser,
resources:new can.Model.List,categories:[],selectedRs:new can.Model.List}},{init:function(a,c){c.map=new mad.object.Map({id:"id",name:"name",username:"username",secret:"Secret",uri:"uri",modified:"modified",owner:"Creator.username",Category:"Category"});c.columnModel=[{name:"multipleSelect",index:"multipleSelect",header:{css:["selections s-cell"],label:'<div class="input checkbox"><input type="checkbox" name="select all" value="checkbox-select-all" id="checkbox-select-all" disabled="disabled"><label for="checkbox-select-all">select all</label> \t\t\t\t\t\t</div>'},
cellAdapter:function(a,b,c,f){b={};b[f.id]="";mad.helper.ComponentHelper.create(a,"inside_replace",mad.form.element.CheckboxController,{id:"multiple_select_checkbox_"+f.id,name:"test",cssClasses:["js_checkbox_multiple_select"],availableValues:b}).start()}},{name:"favorite",index:"favorite",header:{css:["selections s-cell"],label:'<a href="#"> \t\t\t\t\t\t\t<i class="icon fav no-text"></i> \t\t\t\t\t\t\t<span>fav</span> \t\t\t\t\t\t</a>'},cellAdapter:function(a,b,c,f){mad.helper.ComponentHelper.create(a,
"inside_replace",passbolt.controller.component.FavoriteController,{id:"favorite_"+f.id,name:"test2",instance:f}).start()}},{name:"name",index:"name",header:{css:["m-cell"],label:__("Resource")}},{name:"username",index:"username",header:{css:["m-cell"],label:__("Username")}},{name:"secret",index:"secret",header:{css:["m-cell","password"],label:__("Password")},cellAdapter:function(a,b){var c="";"undefined"!=typeof b[0]&&(c=b[0].data);mad.helper.HtmlHelper.create(a,"inside_replace",'<div class="secret-copy"><a href="#copy_secret"><span>copy password to clipboard</span></a><pre>'+
c+"</pre></div>")}},{name:"uri",index:"uri",header:{css:["l-cell"],label:__("URI")}},{name:"modified",index:"modified",header:{css:["m-cell"],label:__("Modified")},valueAdapter:function(a){return moment(a).fromNow()}},{name:"owner",index:"owner",header:{css:["m-cell"],label:__("Owner")}}];this._super(a,c)},showContextualMenu:function(a,c){var d=$("td span","#"+a.id),b=d.offset(),d=new mad.controller.component.ContextualMenuController(null,{state:"hidden",source:d[0],coordinates:{x:c,y:b.top}});d.start();
var b=passbolt.model.Permission.isAllowedTo(a,passbolt.READ),e=passbolt.model.Permission.isAllowedTo(a,passbolt.UPDATE),f=passbolt.model.Permission.isAllowedTo(a,passbolt.ADMIN),g=new mad.model.Action({id:uuid(),label:"Copy username",initial_state:!b?"disabled":"ready",action:function(b){mad.bus.trigger("passbolt.clipboard",{name:"username",data:a.username});b.remove()}});d.insertItem(g);g=new mad.model.Action({id:uuid(),label:"Copy password",initial_state:!b?"disabled":"ready",action:function(b){mad.bus.trigger("passbolt.secret.decrypt",
a.Secret[0].data);b.remove()}});d.insertItem(g);g=new mad.model.Action({id:uuid(),label:"Copy URL",initial_state:!b?"disabled":"ready",action:function(b){mad.bus.trigger("passbolt.clipboard",{name:"URL",data:a.uri});b.remove()}});d.insertItem(g);g=new mad.model.Action({id:uuid(),label:"Open URL in a new tab",initial_state:!b?"disabled":"ready",cssClasses:["separator-after"],action:function(b){window.open(a.uri,"_blank").focus();b.remove()}});d.insertItem(g);g=new mad.model.Action({id:uuid(),label:"Edit",
initial_state:!e?"disabled":"ready",action:function(b){mad.bus.trigger("request_resource_edition",a);b.remove()}});d.insertItem(g);g=new mad.model.Action({id:uuid(),label:"Share",initial_state:!f?"disabled":"ready",action:function(b){mad.bus.trigger("request_resource_sharing",a);b.remove()}});d.insertItem(g);g=new mad.model.Action({id:uuid(),label:"Delete",initial_state:!e?"disabled":"ready",action:function(b){mad.bus.trigger("request_resource_deletion",a);b.remove()}});d.insertItem(g);d.setState("ready")},
insertItem:function(a,c,d){this.options.resources.push(a);this._super(a,c,d)},removeItem:function(a){this._super(a)},refreshItem:function(a){var c=this;if(this.options.categories.length){var d=!1;can.each(a.Category,function(a){-1!=c.options.categories.indexOf(a.id)&&(d=!0)});if(!d){this.removeItem(a);return}}this._super(a);0<this.options.selectedRs.length&&this.select(this.options.selectedRs[0])},reset:function(){this.options.resources.splice(0,this.options.resources.length)},load:function(a){this._super(a)},
beforeSelect:function(a){var c=!0;if(this.state.is("selection"))if(0<this.options.selectedRs.length&&this.options.selectedRs[0].id==a.id)this.unselect(a),this.setState("ready"),c=!1;else for(a=this.options.selectedRs.length-1;-1<a;a--)this.unselect(this.options.selectedRs[a]);return c},beforeUnselect:function(){return!0},select:function(a,c){c="undefined"==typeof c?!1:c;0<this.options.selectedRs.length&&this.unselect(this.options.selectedRs[0]);this.options.selectedRs.push(a);mad.app.getComponent("multiple_select_checkbox_"+
a.id).setValue([a.id]);this.view.selectItem(a);c||mad.bus.trigger("resource_selected",a)},unselect:function(a,c){c="undefined"==typeof c?!1:c;mad.app.getComponent("multiple_select_checkbox_"+a.id).reset();this.view.unselectItem(a);mad.model.List.remove(this.options.selectedRs,a);c||mad.bus.trigger("resource_unselected",a)},"{passbolt.model.Resource} created":function(a,c,d){var b=this;d.Category.length?d.Category.each(function(a){if(-1!=b.options.categories.indexOf(a.id))return b.insertItem(d,null,
"first"),!1}):b.insertItem(d,null,"first")},"{passbolt.model.Resource} updated":function(a,c,d){-1!=this.options.resources.indexOf(d)&&this.refreshItem(d)},"{resources} remove":function(a,c,d){var b=this;can.each(d,function(a){b.removeItem(a)})},"{passbolt.model.Category} destroyed":function(a,c,d){var b=this,a=mad.model.Model.nestedToList(d,"children");can.each(a,function(a){a=b.options.categories.indexOf(a.id);-1!=a&&b.options.categories.splice(a,1)})}," password_clicked":function(a,c,d){mad.bus.trigger("request_secret_view",
d)}," item_selected":function(a,c,d){this.setState("selection");this.beforeSelect(d)&&this.select(d)}," item_right_selected":function(a,c,d,b){this.select(d);this.showContextualMenu(d,b.pageX,b.pageY)}," password_clicked":function(a,c,d){mad.bus.trigger("passbolt.secret.decrypt",d.Secret[0].data)},".js_checkbox_multiple_select checked":function(a,c,d){this.state.is("ready")?this.setState("selection"):this.state.is("selection")&&this.setState("multipleSelection");a=this.options.resources[mad.model.List.indexOf(this.options.resources,
d)];this.beforeSelect(a)&&this.select(a)},".js_checkbox_multiple_select unchecked":function(a,c,d){a=this.options.resources[mad.model.List.indexOf(this.options.resources,d)];this.beforeUnselect()&&this.unselect(a);this.options.selectedRs.length?1==this.options.selectedRs.length&&this.setState("selection"):this.setState("ready")},"{mad.bus} filter_resources_browser":function(a,c,d){if(this.element){var b=this;this.filter=d;this.options.categories=[];(a=d.getForeignModels("Category"))&&can.each(a,function(a){a=
a.getSubCategories(!0);can.each(a,function(a){b.options.categories.push(a.id)})});this.setState("loading");passbolt.model.Resource.findAll({filter:this.filter,recursive:!0},function(a){b.load(a);b.setState("ready")})}},stateReady:function(){},stateSelection:function(){},stateMultipleSelection:function(){}})});steal.executed("app/controller/component/passwordBrowserController.js");
steal("jquery/model","app/model/category.js","app/model/secret.js","app/model/itemTag.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Resource",{attributes:{id:"string",name:"string",username:"string",uri:"string",created:"string",modified:"string",description:"string",Category:"passbolt.model.Category.models",Secret:"passbolt.model.Secret.models",Favorite:"passbolt.model.Favorite.model",ItemTag:"passbolt.model.ItemTag.models",Creator:"passbolt.model.User.model",
Modifier:"passbolt.model.User.model",UserResourcePermission:"passbolt.model.UserResourcePermission.model",GroupResourcePermission:"passbolt.model.GroupResourcePermission.model"},create:function(a,c,d){var b=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"/resources",type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+
"resources/{id}.json",type:"DELETE",params:{id:a},success:c,error:d})},findAll:function(a,c,d){if("undefined"!=typeof a.filter){var b=a.filter;delete a.filter;b=b.toRequest();$.extend(a,b)}return mad.net.Ajax.request({url:APP_URL+"resources.json",type:"GET",params:a,success:c,error:d})},findOne:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"resources/{id}.json",type:"GET",params:a,success:c,error:d})},update:function(a,c,d,b){var e=this;delete c.created;delete c.modified;c=mad.model.serializer.CakeSerializer.to(c,
this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"resources/{id}.json",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{init:function(){var a=this;passbolt.model.Category.bind("destroyed",function(c,d){var b=mad.model.Model.nestedToList(d,"children","id"),e=!1;can.each(a.Category,function(c,d){-1!=b.indexOf(c.id)&&(a.Category.splice(d,1),e=!0)});e&&can.trigger(passbolt.model.Resource,
"updated",a)})},isFavorite:function(){return this.Favorite&&this.Favorite.id?!0:!1},destroy:function(){this._super()}})});steal.executed("app/model/resource.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js","app/model/tag.js").then(function(){mad.model.Model("passbolt.model.ItemTag",{validateRules:{foreign_model:["text"],foreign_id:["uid"],tag_id:["uid"],tag_list:["tag_list"]},attributes:{id:"string",tag_id:"string",foreign_model:"string",foreign_id:"string",created:"string",modified:"string",created_by:"string",modified_by:"string",Tag:"passbolt.model.Tag.model"},create:function(a,c,d){var b=this,e=mad.model.serializer.CakeSerializer.to(a,
this);return mad.net.Ajax.request({url:APP_URL+"itemTags/"+a.foreign_model+"/"+a.foreign_id,type:"POST",params:e,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},createBulk:function(a,c,d){var b=this,e=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"itemTags/updateBulk/"+a.foreign_model+"/"+a.foreign_id,type:"POST",params:e,success:c,error:d}).pipe(function(a){var c=$.Deferred();
c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"/itemTags/{id}",type:"DELETE",params:{id:a},success:c,error:d})},findAll:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"itemTags/{foreignModel}/{foreignId}",type:"GET",params:a,success:c,error:d})}},{})});steal.executed("app/model/itemTag.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Tag",{validateRules:{name:["text"]},attributes:{id:"string",name:"string",created:"string",modified:"string",created_by:"string",modified_by:"string"},create:function(a,c,d){var b=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"tags",type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,
b)]);return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"/tags/{id}",type:"DELETE",params:{id:a},success:c,error:d})},findAll:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"tags",type:"GET",params:a,success:c,error:d})}},{})});steal.executed("app/model/tag.js");
steal("mad/controller/component/buttonController.js").then(function(){mad.controller.component.ButtonController.extend("passbolt.controller.component.CopyLoginButtonController",{defaults:{label:"Copy Login To Clipboard",cssClasses:["with_icon","copy_login"],browser:null}},{click:function(){mad.bus.trigger("copy_login_clipboard",this.value)},"{browser} tbody mouseleave":function(){this.state.is("ready")&&this.setState("hidden")},"{browser} item_hovered":function(a,c,d){this.value.id==d.id?this.setState("ready"):
this.setState("hidden")}})});steal.executed("app/controller/component/copyLoginButtonController.js");
steal("mad/controller/component/buttonController.js").then(function(){mad.controller.component.ButtonController.extend("passbolt.controller.component.CopySecretButtonController",{defaults:{label:"Copy Secret To Clipboard",cssClasses:["with_icon","copy_secret"]}},{click:function(){mad.bus.trigger("copy_secret_clipboard",this.value)},"{browser} tbody mouseleave":function(){this.state.is("ready")&&this.setState("hidden")},"{browser} item_hovered":function(a,c,d){this.value.id==d.id?this.setState("ready"):
this.setState("hidden")}})});steal.executed("app/controller/component/copySecretButtonController.js");
steal("mad/controller/component/buttonController.js","app/view/component/favorite.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.FavoriteController",{defaults:{label:"Favorite",viewClass:passbolt.view.component.Favorite,instance:null}},{init:function(a,c){this._super(a,c);this.setViewData("instance",this.options.instance)},click:function(a,c){c.stopPropagation();c.preventDefault();this.options.instance.isFavorite()?mad.bus.trigger("request_unfavorite",
this.options.instance):mad.bus.trigger("request_favorite",this.options.instance)}})});steal.executed("app/controller/component/favoriteController.js");steal("mad/view","app/view/template/component/favorite.ejs").then(function(){mad.view.View.extend("passbolt.view.component.Favorite",{},{" click":function(){this.element.trigger("trigger")}})});steal.executed("app/view/component/favorite.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_favorite_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<a href="#" class="no-text">\n\t<i class="icon ');b.push(a.view.txt(1,"i","class",this,function(){return instance.isFavorite()?"unfav":"fav"}));b.push('"',a.view.pending(),">");b.push("</i>\n\t<span>fav</span>\n</a>\n");return b.join("")}}))});steal.executed("app/view/template/component/favorite.ejs");
steal("jquery/event/drag","mad/view/component/grid.js","app/view/template/component/resource/draggedResource.ejs").then(function(){mad.view.component.Grid.extend("passbolt.view.component.passwordBrowser",{},{insertItem:function(a,c,d){a=this._super(a,c,d);$(".js_grid_column_name",a)},"tbody tr td.password a click":function(a,c){c.stopPropagation();c.preventDefault();var d=null,d=$(a).parents("tr"),d=this.getController().getItemClass()?d.data(this.getController().getItemClass().fullName):d[0].id;this.element.trigger("password_clicked",
[d,c])},"tbody tr contextmenu":function(a,c){c.stopPropagation();c.preventDefault();if(3==c.which){var d=null,d=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_right_selected",[d,c])}return!1}})});steal.executed("app/view/component/passwordBrowser.js");steal("jquery","jquerypp/event/drag/core","jquerypp/event/drag/step","jquerypp/event/drag/limit","jquerypp/event/drag/scroll",function(a){return a});steal.executed("lib/jquerypp/event/drag/drag.js");
steal("jquery","jquerypp/event/drag/core","jquerypp/dom/styles",function(a){var c=function(a,b){return Math.round(a/b)*b};a.Drag.prototype.step=function(c,b,e){"number"==typeof c&&(c={x:c,y:c});b=b||a(document.body);this._step=c;var f=b.styles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft"),c=parseInt(f.borderTopWidth)+parseInt(f.paddingTop),f=parseInt(f.borderLeftWidth)+parseInt(f.paddingLeft);this._step.offset=b.offsetv().plus(f,c);this._step.center=e;return this};(function(){var d=
a.Drag.prototype.position;a.Drag.prototype.position=function(a){if(this._step){var e=this._step,f=e.center&&e.center.toLowerCase(),g=this.movingElement.dimensionsv("outer"),h=e.offset.top()-(f&&"x"!=f?g.height()/2:0),e=e.offset.left()-(f&&"y"!=f?g.width()/2:0);this._step.x&&a.left(Math.round(e+c(a.left()-e,this._step.x)));this._step.y&&a.top(Math.round(h+c(a.top()-h,this._step.y)))}d.call(this,a)}})();return a});steal.executed("lib/jquerypp/event/drag/step/step.js");
steal("jquery",function(a){var c=document.defaultView&&document.defaultView.getComputedStyle,d=/([A-Z])/g,b=/-([a-z])/ig,e=function(a,b){return b.toUpperCase()},f=/float/i,g=/^-?\d+(?:px)?$/i,h=/^-?\d/;a.styles=function(k,l){if(!k)return null;var o;o=c?c(k,null):k.currentStyle?k.currentStyle:void 0;for(var m,n,r=k.style,q={},s=0,t,p;s<l.length;s++)(t=l[s],m=t.replace(b,e),f.test(t)&&(t=a.support.cssFloat?"float":"styleFloat",m="cssFloat"),c)?(t=t.replace(d,"-$1").toLowerCase(),n=o.getPropertyValue(t),
"opacity"===t&&""===n&&(n="1"),q[m]=n):(n=t.replace(b,e),q[m]=o[t]||o[n],!g.test(q[m])&&h.test(q[m])&&(t=r.left,p=k.runtimeStyle.left,k.runtimeStyle.left=k.currentStyle.left,r.left="fontSize"===n?"1em":q[m]||0,q[m]=r.pixelLeft+"px",r.left=t,k.runtimeStyle.left=p));return q};a.fn.styles=function(){return a.styles(this[0],a.makeArray(arguments))};return a});steal.executed("lib/jquerypp/dom/styles/styles.js");
steal("jquery","jquerypp/event/drag/core","jquerypp/dom/styles",function(a){a.Drag.prototype.limit=function(c,b){var e=c.styles("borderTopWidth","paddingTop","borderLeftWidth","paddingLeft"),e=new a.Vector(parseInt(e.borderLeftWidth,10)+parseInt(e.paddingLeft,10)||0,parseInt(e.borderTopWidth,10)+parseInt(e.paddingTop,10)||0);this._limit={offset:c.offsetv().plus(e),size:c.dimensionsv(),center:!0===b?"both":b};return this};var c=a.Drag.prototype.position;a.Drag.prototype.position=function(a){if(this._limit){var b=
this._limit,e=b.center&&b.center.toLowerCase(),f=this.movingElement.dimensionsv("outer"),g=e&&"x"!=e?f.height()/2:0,e=e&&"y"!=e?f.width()/2:0,h=b.offset.top(),k=b.offset.left(),l=b.size.height(),b=b.size.width();a.top()+g<h&&a.top(h-g);a.top()+f.height()-g>h+l&&a.top(h+l-f.height()+g);a.left()+e<k&&a.left(k-e);a.left()+f.width()-e>k+b&&a.left(k+b-f.left()+e)}c.call(this,a)};return a});steal.executed("lib/jquerypp/event/drag/limit/limit.js");
steal("jquery","jquerypp/event/drop",function(a){a.Drag.prototype.scrolls=function(c,d){for(var c=a(c),b=0;b<c.length;b++)this.constructor.responder._elements.push(c.eq(b).data("_dropData",new a.Scrollable(c[b],d))[0])};a.Scrollable=function(c,d){this.element=jQuery(c);this.options=a.extend({distance:30,delta:function(a,c){return(c-a)/2},direction:"xy"},d);this.x=-1!=this.options.direction.indexOf("x");this.y=-1!=this.options.direction.indexOf("y")};a.extend(a.Scrollable.prototype,{init:function(a){this.element=
jQuery(a)},callHandlers:function(a,d,b,e){this[a](d||this.element[0],b,this,e)},dropover:function(){},dropon:function(){this.clear_timeout()},dropout:function(){this.clear_timeout()},dropinit:function(){},dropend:function(){},clear_timeout:function(){this.interval&&(clearTimeout(this.interval),this.interval=null)},distance:function(a){return(30-a)/2},dropmove:function(c,d,b,e){this.clear_timeout();var f=d.vector(),b=a(c==document.documentElement?window:c),g=b.dimensionsv("outer"),h=b.offsetv(),b=
h.y()+g.y()-f.y(),k=f.y()-h.y(),g=h.x()+g.x()-f.x(),f=f.x()-h.x(),l=0,o=0,h=this.options.distance;b<h&&this.y?o=this.options.delta(b,h):k<h&&this.y&&(o=-this.options.delta(k,h));g<h&&this.options&&this.x?l=this.options.delta(g,h):f<h&&this.x&&(l=-this.options.delta(f,h));if(l||o){var m=this;this.interval=setTimeout(function(){m.move(a(c),e.movingElement,l,o,d,d.clientX,d.clientY,d.screenX,d.screenY)},15)}},move:function(c,d,b,e,f){c.scrollTop(c.scrollTop()+e);c.scrollLeft(c.scrollLeft()+b);d.trigger(a.event.fix({type:"mousemove",
clientX:f.clientX,clientY:f.clientY,screenX:f.screenX,screenY:f.screenY,pageX:f.pageX,pageY:f.pageY}))}});return a});steal.executed("lib/jquerypp/event/drag/scroll/scroll.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_resource_draggedResource_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="dragged_resource" id="js_dragged_resource">\n\tMove \'<span class="name">');b.push(a.view.txt(1,"span",0,this,function(){return name}));b.push("</span>'\n</div>");return b.join("")}}))});steal.executed("app/view/template/component/resource/draggedResource.ejs");
steal("mad/controller/component/tabController.js","app/controller/component/permissionsController.js").then(function(){mad.controller.component.TabController.extend("passbolt.controller.component.ResourceActionsTabController",{defaults:{label:null,resource:null,cssClasses:["tabs"],viewClass:mad.view.component.Tab,templateUri:"mad/view/template/component/tab.ejs"}},{afterStart:function(){this._super();var a=this,c=this.addComponent(passbolt.controller.form.resource.CreateFormController,{id:"js_rs_edit",
label:__("Edit"),action:"edit",data:this.options.resource,callbacks:{submit:function(c){a.options.resource.attr(c["passbolt.model.Resource"]).save();a.closest(mad.controller.component.DialogController).remove()}}});c.start();c.load(this.options.resource);c=this.addComponent(passbolt.controller.component.PermissionsController,{id:"js_rs_permission",label:"Share",resource:this.options.resources,cssClasses:["share-tab"]});c.start();c.load(this.options.resource)},load:function(){},enableTab:function(a){this._super(a);
a=this.getComponent(this.enabledTabId).options.label+'<span class="dialog-header-subtitle">'+this.options.resource.name+"</span>";this.closest(mad.controller.component.DialogController).setTitle(a)}})});steal.executed("app/controller/component/resourceActionsTabController.js");
steal("mad/view/component/tree.js","app/view/component/resourceDetails.js","app/controller/component/commentsController.js","app/controller/component/sidebarSectionController.js","app/controller/component/sidebarSections/sidebarSectionTagsController.js","app/controller/component/sidebarSections/sidebarSectionDescriptionController.js","app/view/template/component/resourceDetails.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.ResourceDetailsController",
{defaults:{label:"Resource Details Controller",viewClass:passbolt.view.component.ResourceDetails,resource:null,selectedRs:new can.Model.List}},{beforeRender:function(){this._super();this.setViewData("resource",this.options.resource);this.setViewData("secretStrength",passbolt.model.SecretStrength.getSecretStrength(this.options.resource.Secret.data))},afterStart:function(){(new passbolt.controller.component.sidebarSection.SidebarSectionDescriptionController($("#js_rs_details_description",this.element),
{resource:this.options.resource})).start();(new passbolt.controller.component.CommentsController($("#js_rs_details_comments",this.element),{resource:this.options.resource,foreignModel:"Resource",foreignId:this.options.resource.id})).start()},load:function(a){this.options.resource=a;this.state.is(null)?this.start():this.refresh();this.on()},isDisabled:function(){return this.state.is("disabled")||this.state.is(null)&&("disabled"==this.options.state||$.isArray(this.options.state)&&-1!=this.options.state.indexOf("disabled"))?
!0:!1},stateReady:function(a){a&&this.view.show();this._super(a)}," password_clicked":function(){mad.bus.trigger("passbolt.secret.decrypt",this.options.selectedRs[0].Secret[0].data)},"{resource} updated":function(){this.isDisabled()||this.refresh()},"{mad.bus} workspace_showSidebar":function(a,c,d){this.element&&(d?this.state.is(null)?this.options.state="ready":(this.setState("ready"),1==this.options.selectedRs.length&&this.refresh()):this.state.is(null)?this.options.state=["hidden","disabled"]:this.setState(["hidden",
"disabled"]))},"{selectedRs} add":function(){0==this.options.selectedRs.length||1<this.options.selectedRs.length?(this.options.resource=null,this.isDisabled()||this.setState("hidden")):(this.options.resource=this.options.selectedRs[0],this.isDisabled()||(this.load(this.options.resource),this.setState("ready")))},"{selectedRs} remove":function(){0==this.options.selectedRs.length||1<this.options.selectedRs.length?(this.options.resource=null,!this.isDisabled()&&!this.state.is(null)&&this.setState("hidden")):
(this.options.resource=this.options.selectedRs[0],this.isDisabled()||(this.load(this.options.resource),this.setState("ready")))}})});steal.executed("app/controller/component/resourceDetailsController.js");
steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.ResourceDetails",{},{".icon.close click":function(){mad.Config.write("ui.workspace.showSidebar",!1);mad.bus.trigger("workspace_showSidebar",!1)},"h2 click":function(a){a.next("p").toggle()},"li.password .secret-copy > a click":function(a,c){c.stopPropagation();c.preventDefault();this.element.trigger("password_clicked",[c])}})});steal.executed("app/view/component/resourceDetails.js");
steal("app/model/comment.js","app/view/component/comments.js","app/controller/component/commentsListController.js","app/controller/form/comment/createFormController.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.CommentsController",{defaults:{label:"Comments Controller",viewClass:passbolt.view.component.Comments,resource:this.options.resource,foreignModel:null,foreignId:null,commentsListController:null}},{afterStart:function(){this.addFormController=
new passbolt.controller.form.comment.CreateFormController($("#js_rs_details_comments_add_form",this.element),{templateBased:!0,templateUri:"app/view/template/form/comment/addForm.ejs",foreignModel:this.options.foreignModel,foreignId:this.options.foreignId});this.addFormController.start();this.addFormController.setState("hidden");this.commentsListController=new passbolt.controller.component.CommentsListController($("#js_rs_details_comments_list",this.element),{resource:this.options.resource,foreignModel:this.options.foreignModel,
foreignId:this.options.foreignId});this.commentsListController.start()},"{passbolt.model.Comment} created":function(a,c,d){if(d.foreign_id==this.options.resource.id)return this.commentsListController.insertItem(d,null,"first"),this.addFormController.setState("hidden"),!1},"{mad.bus} request_delete_comment":function(a,c,d){this.element&&d.destroy(function(){mad.bus.trigger("comment_deleted",d)})},"{mad.bus} comment_deleted":function(a,c,d){this.element&&this.commentsListController.removeItem(d)}})});
steal.executed("app/controller/component/commentsController.js");
steal("jquery/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Comment",{validateRules:{parent_id:["text"],foreign_model:["text"],foreign_id:["text"],content:["text"]},attributes:{id:"string",parent_id:"string",foreign_model:"string",foreign_id:"string",content:"string",created:"string",modified:"string",Creator:"passbolt.model.User.model",Modifier:"passbolt.model.User.model"},create:function(a,c,d){var b=this,e=mad.model.serializer.CakeSerializer.to(a,
this);return mad.net.Ajax.request({url:APP_URL+"comments/"+a.foreign_model+"/"+a.foreign_id+".json",type:"POST",params:e,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"comments/{id}.json",type:"DELETE",params:{id:a},success:c,error:d})},findAll:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"comments/{foreignModel}/{foreignId}.json",type:"GET",
params:a,success:c,error:d})},findOne:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"comments/{foreignModel}/{foreignId}.json",type:"GET",params:a,success:c,error:d})}},{init:function(){}})});steal.executed("app/model/comment.js");
steal("mad/view","app/view/template/component/comments.ejs").then(function(){mad.view.View.extend("passbolt.view.component.Comments",{},{init:function(a,c){this._super(a,c)},".icon.create click":function(){this.getController().addFormController.setState("ready")},"a.button.comment-submit click":function(a){a.trigger("submit")}})});steal.executed("app/view/component/comments.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_comments_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push("<h4>");b.push(a.view.txt(1,"h4",0,this,function(){return __("Comments")}));b.push('</h4>\n<a href="#" class="section-action"><i class="icon create no-text"></i><span>create</span></a>\n<div id="js_rs_details_comments_add_form"></div>\n<ul id="js_rs_details_comments_list"></ul>');return b.join("")}}))});steal.executed("app/view/template/component/comments.ejs");
steal("mad/controller/component/treeController.js","app/view/component/commentsList.js","app/view/component/comments.js","app/model/comment.js").then(function(){mad.controller.component.TreeController.extend("passbolt.controller.component.CommentsListController",{defaults:{label:"Comments List Controller",viewClass:passbolt.view.component.CommentsList,itemClass:passbolt.model.Comment,templateUri:"mad/view/template/component/tree.ejs",itemTemplateUri:"app/view/template/component/comment/commentItem.ejs",
foreignModel:null,foreignId:null,map:new mad.object.Map({id:"id",content:"content",modified:"modified",creatorAvatarPath:{key:"Creator",func:function(a){return a.Profile.avatarPath("smallest")}},creatorName:{key:"Creator",func:function(a){return a.Profile.fullName()}}})}},{init:function(a,c){this._super(a,c);var d=this;passbolt.model.Comment.findAll({foreignModel:this.options.foreignModel,foreignId:this.options.foreignId},function(a){d.load(a)})}," request_delete_comment":function(a,c,d){mad.bus.trigger("request_delete_comment",
d)}})});steal.executed("app/controller/component/commentsListController.js");
steal("mad/view","mad/view/component/tree.js","app/view/template/component/comments.ejs").then(function(){mad.view.component.Tree.extend("passbolt.view.component.CommentsList",{},{init:function(a,c){this._super(a,c)},".actions a .icon.delete click":function(a,c){c.stopPropagation();c.preventDefault();var d=null,d=a.parents("li.comment-wrapper"),d=this.getController().getItemClass()?d.data(this.getController().getItemClass().fullName):d[0].id;a.trigger("request_delete_comment",d)}})});steal.executed("app/view/component/commentsList.js");
steal("mad/form/formController.js","app/view/component/comments.js","app/view/template/form/comment/addForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.comment.CreateFormController",{defaults:{templateBased:!0,foreignModel:null,foreignId:null,callbacks:{submit:function(a){(new passbolt.model.Comment(a["passbolt.model.Comment"])).save()}}}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($(".js_comment_parent_id",this.element),{modelReference:"passbolt.model.Comment.parent_id"})).start());
this.addElement((new mad.form.element.TextboxController($(".js_comment_foreign_model",this.element),{modelReference:"passbolt.model.Comment.foreign_model"})).start().setValue("Resource"));this.addElement((new mad.form.element.TextboxController($(".js_comment_foreign_id",this.element),{modelReference:"passbolt.model.Comment.foreign_id"})).start().setValue(this.options.foreignId));this.addElement((new mad.form.element.TextboxController($(".js_comment_content",this.element),{modelReference:"passbolt.model.Comment.content"})).start(),
(new mad.form.FeedbackController($(".js_comment_content_feedback",this.element),{})).start())}})});steal.executed("app/controller/form/comment/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_comment_addForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<ul>\n\t<li class="comment-wrapper">\n\t\t<div class="comment add">\n\t\t\t<div class="author profile picture"><a href="#"><img src="img/user.png" alt="author profile picture"></a></div>\n\t\t\t<div class="form-content">\n\t\t\t\t<div class="input textarea required">\n\t\t\t\t\t<label for="comment-text">Add a comment</label>\n\t\t\t\t\t<input name="data[comment][parent_id]" class="js_comment_parent_id required" type="hidden" >\n\t\t\t\t\t<input name="data[comment][foreign_id]" class="js_comment_foreign_id required" type="hidden" >\n\t\t\t\t\t<input name="data[comment][foreign_model]" class="js_comment_foreign_model required" type="hidden" >\n\t\t\t\t\t<textarea id="comment-text" name="data[comment][content]" class="js_comment_content required" maxlength="150"  placeholder="add a comment"',a.view.pending(),
">");b.push('</textarea>\n          <div class="js_comment_content_feedback message"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="metadata">\n\t\t\t\t\t<span class="author username"><a href="#">You</a></span>\n\t\t\t\t\t<span class="modified">right now</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="actions">\n\t\t\t\t\t<a href="#" class="button comment-submit"><span>send</span></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</li>\n</ul>');return b.join("")}}))});steal.executed("app/view/template/form/comment/addForm.ejs");
steal("mad/view/component/tree.js","app/controller/component/commentsController.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.SidebarSectionController",{defaults:{label:"Sidebar Section Controller",viewClass:passbolt.view.component.ResourceDetails,resource:null}},{})});steal.executed("app/controller/component/sidebarSectionController.js");
steal("app/view/component/sidebarSection/sidebarSectionTags.js","app/controller/component/sidebarSectionController.js","app/controller/component/tagsController.js").then(function(){passbolt.controller.component.SidebarSectionController.extend("passbolt.controller.component.sidebarSection.SidebarSectionTagsController",{defaults:{label:"Sidebar Section Tags Controller",viewClass:passbolt.view.component.sidebarSection.SidebarSectionTags,instance:null,tagsController:null}},{afterStart:function(){"undefined"==
typeof this.options.instance.ItemTag&&(this.options.instance.ItemTag=passbolt.model.ItemTag.models());this.options.tagsController=(new passbolt.controller.component.TagsController($("#js_rs_details_tags_wrapper",this.element),{resource:this.options.resource,instance:this.options.instance,foreignModel:this.options.foreignModel,foreignId:this.options.foreignId})).start();this.on()}," request_tags_edit":function(){this.setState("edit")},"{instance.ItemTag} change":function(){null!=this.options.instance.ItemTag&&
0<this.options.instance.ItemTag.length?this.setState("ready"):this.setState("edit")},stateReady:function(a){var c=passbolt.model.Permission.isAllowedTo(this.options.instance,passbolt.UPDATE);a&&c&&$(".edit-action",this.element).show()},stateEdit:function(a){a?($(".edit-action",this.element).hide(),this.options.tagsController.setState("edit")):$(".edit-action",this.element).show()}})});steal.executed("app/controller/component/sidebarSections/sidebarSectionTagsController.js");
steal("mad/view","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionTags.ejs").then(function(){passbolt.view.component.SidebarSection.extend("passbolt.view.component.sidebarSection.SidebarSectionTags",{},{"a.edit-action click":function(){this.element.trigger("request_tags_edit")}})});steal.executed("app/view/component/sidebarSection/sidebarSectionTags.js");
steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.SidebarSection",{},{init:function(a,c){this._super(a,c)}})});steal.executed("app/view/component/sidebarSection.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_sidebarSection_sidebarSectionTags_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push("<h4>");b.push(a.view.txt(1,"h4",0,this,function(){return __("Tags")}));b.push('</h4>\n<a href="#" class="section-action edit-action">\n\t<i class="icon edit no-text"></i>\n\t<span>edit</span>\n</a>\n<div id="js_rs_details_tags_wrapper"></div>');return b.join("")}}))});steal.executed("app/view/template/component/sidebarSection/sidebarSectionTags.ejs");
steal("app/controller/component/tagsListController.js","app/controller/form/tag/editFormController.js","app/view/template/component/tags.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.TagsController",{defaults:{label:"Tags Controller",instance:null,foreignModel:null,foreignId:null}},{afterStart:function(){var a=this;this.editFormController=(new passbolt.controller.form.tag.EditFormController($(".tags-edit",this.element),{templateBased:!0,templateUri:"app/view/template/form/tag/editForm.ejs",
foreignModel:this.options.foreignModel,foreignId:this.options.foreignId,tags:this.options.instance.ItemTag,data:{ItemTag:this.options.instance.ItemTag},callbacks:{submit:function(c){passbolt.model.ItemTag.createBulk(c["passbolt.model.ItemTag"],function(c){c=passbolt.model.ItemTag.models(c);a.refreshInstanceTags(c)})}}})).start();this.tagsListController=(new passbolt.controller.component.TagsListController($("ul.tags",this.element),{tags:this.options.instance.ItemTag})).start();passbolt.model.ItemTag.findAll({foreignModel:this.options.foreignModel,
foreignId:this.options.foreignId},function(c){a.refreshInstanceTags(c)},function(){})},refreshInstanceTags:function(a){this.options.instance.ItemTag.splice(0);this.options.instance.ItemTag.push.apply(this.options.instance.ItemTag,a)},"{instance.ItemTag} change":function(){null!=this.options.instance.ItemTag&&0<this.options.instance.ItemTag.length?this.setState("ready"):this.setState("edit")},stateEdit:function(a){if(a){if(!passbolt.model.Permission.isAllowedTo(this.options.instance,passbolt.UPDATE))return this.setState("ready");
this.tagsListController.setState("hidden");this.editFormController.setState("ready")}},stateReady:function(a){a&&(this.tagsListController.setState("ready"),this.editFormController.setState("hidden"))}})});steal.executed("app/controller/component/tagsController.js");
steal("app/model/itemTag.js","mad/controller/component/treeController.js","app/view/template/component/tag/tagItem.ejs").then(function(){mad.controller.component.TreeController.extend("passbolt.controller.component.TagsListController",{defaults:{label:"Tags List Controller",viewClass:mad.view.component.tree.List,itemClass:passbolt.model.ItemTag,itemTemplateUri:"app/view/template/component/tag/tagItem.ejs",tags:null,map:new mad.object.Map({id:"id",Tag:"Tag"})}},{afterStart:function(){null!=this.options.tags&&
this.load(this.options.tags)},"{tags} add":function(a,c,d){for(var b in d)this.insertItem(d[b])},"{tags} remove":function(a,c,d){for(var b in d)this.removeItem(d[b])}})});steal.executed("app/controller/component/tagsListController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_tag_tagItem_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<li id="');b.push(a.view.txt(1,"li","id",this,function(){return mappedItem.id}));b.push('" ');b.push(a.view.txt(1,"li",1,this,function(){return a.proxy(function(b){a.$(b).data(itemClass.fullName,item)},this)}));b.push("",a.view.pending(),">");b.push('\n\t<a class="tag link" href="#">\n\t\t<span>');b.push(a.view.txt(1,"span",0,this,function(){return mappedItem.Tag.name}));
b.push("</span>\n\t</a>\n</li>");return b.join("")}}))});steal.executed("app/view/template/component/tag/tagItem.ejs");
steal("mad/form/formController.js","app/model/itemTag.js","app/view/template/form/tag/editForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.tag.EditFormController",{defaults:{templateBased:!0,tags:null,foreignModel:null,foreignId:null,action:"update"}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($(".js_tag_foreign_model",this.element),{modelReference:"passbolt.model.ItemTag.foreign_model"})).start().setValue(this.options.foreignModel));
this.addElement((new mad.form.element.TextboxController($(".js_tag_foreign_id",this.element),{modelReference:"passbolt.model.ItemTag.foreign_id"})).start().setValue(this.options.foreignId));this.tagList=this.addElement((new mad.form.element.TextboxController($(".js_tag_list",this.element),{modelReference:"passbolt.model.ItemTag.tag_list",validateFunction:function(a){var a=a.split(","),c;for(c in a){var d=passbolt.model.Tag.validateAttribute("name",a[c],{});if(!0!==d)return d}return!0}})).start(),
(new mad.form.FeedbackController($(".js_field_tag_list_feedback",this.element),{})).start());this.updateTagListTxtbxValue()},updateTagListTxtbxValue:function(){var a=[];this.options.tags.each(function(c,d){a[d]=c.Tag.name});this.tagList.setValue(a.join(","))},"{tags} change":function(){this.updateTagListTxtbxValue()}})});steal.executed("app/controller/form/tag/editFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_tag_editForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="form-content tags-edit-wrapper">\n    <input name="data[ItemTag][foreign_id]" class="js_tag_foreign_id required" type="hidden" >\n    <input name="data[ItemTag][foreign_model]" class="js_tag_foreign_model required" type="hidden" >\n    <div class="input text required js_form_element_wrapper">\n        <textarea name="data[ItemTag][tag_list]" class="js_tag_list required" maxlength="150"  placeholder="enter your tags here, separated by a comma"',
a.view.pending(),">");b.push('</textarea>\n\t\t<div class="js_field_tag_list_feedback message">\n\t\t</div>\n    </div>\n    <div class="actions">\n        <input type="submit" class="button tags-submit" value="save">\n    </div>\n</div>\n');return b.join("")}}))});steal.executed("app/view/template/form/tag/editForm.ejs");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_tags_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<form id="js_rs_details_tags_list_edit" class="tags-edit"></form>\n<ul id="js_rs_details_tags_list" class="tags"></ul>');return b.join("")}}))});steal.executed("app/view/template/component/tags.ejs");
steal("app/controller/component/sidebarSectionController.js","app/controller/form/resource/editDescriptionFormController.js","app/view/component/sidebarSection/sidebarSectionDescription.js","app/model/resource.js").then(function(){passbolt.controller.component.SidebarSectionController.extend("passbolt.controller.component.sidebarSection.SidebarSectionDescriptionController",{defaults:{label:"Sidebar Section Description Controller",viewClass:passbolt.view.component.sidebarSection.SidebarSectionDescription,
resource:null,editDescriptionFormCtrl:null}},{beforeRender:function(){this._super();this.setViewData("resource",this.options.resource);this.setViewData("editable",passbolt.model.Permission.isAllowedTo(this.options.resource,passbolt.UPDATE))},afterStart:function(){var a=this;this.options.editDescriptionFormCtrl=(new passbolt.controller.form.resource.EditDescriptionFormController($("#js_rs_details_edit_description",this.element),{templateBased:!0,templateUri:"app/view/template/form/resource/editDescriptionForm.ejs",
resource:this.options.resource,state:"hidden",data:{Resource:this.options.resource},callbacks:{submit:function(c){a.options.resource.update({description:c["passbolt.model.Resource"].description},function(){})}}})).start()}," request_resource_description_edit":function(){this.state.is("edit")?this.setState("ready"):this.setState("edit")},stateEdit:function(a){a?(this.options.editDescriptionFormCtrl.setState("ready"),this.view.showDescription(!1)):(this.options.editDescriptionFormCtrl.setState("hidden"),
this.view.showDescription(!0))}})});steal.executed("app/controller/component/sidebarSections/sidebarSectionDescriptionController.js");
steal("mad/form/formController.js","app/model/resource.js","app/view/template/form/resource/editDescriptionForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.resource.EditDescriptionFormController",{defaults:{templateBased:!0,resource:null,descriptionField:null}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($(".js_resource_id",this.element),{modelReference:"passbolt.model.Resource.id"})).start().setValue(this.options.resource.id));
this.options.descriptionField=this.addElement((new mad.form.element.TextboxController($(".js_resource_description",this.element),{modelReference:"passbolt.model.Resource.description"})).start(),(new mad.form.FeedbackController($(".js_resource_description_feedback",this.element),{})).start());this.options.descriptionField.setValue(this.options.resource.description);$(".button.resource-submit").click(function(){$(this).trigger("submit")})}})});steal.executed("app/controller/form/resource/editDescriptionFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_resource_editDescriptionForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="form-content resource-description-edit-wrapper">\n\t<input name="data[Resource][id]" class="js_resource_id required" type="hidden" >\n    <div class="input text required js_form_element_wrapper">\n        <textarea name="data[Resource][description]" class="js_resource_description required" maxlength="150"  placeholder="enter description"',
a.view.pending(),">");b.push('</textarea>\n\t\t<div class="js_resource_description_feedback message">\n\t\t</div>\n    </div>\n\t<div class="actions">\n\t\t<input type="submit" class="button resource-submit" value="save">\n\t</div>\n</div>\n');return b.join("")}}))});steal.executed("app/view/template/form/resource/editDescriptionForm.ejs");
steal("mad/view","app/view/component/sidebarSection.js","app/view/template/component/sidebarSection/sidebarSectionDescription.ejs").then(function(){passbolt.view.component.SidebarSection.extend("passbolt.view.component.sidebarSection.SidebarSectionDescription",{},{"a#js_edit_description_button, p.description_content click":function(){this.element.trigger("request_resource_description_edit")},showDescription:function(a){a?$(".description_content",$(this.element)).show():$(".description_content",$(this.element)).hide()}})});
steal.executed("app/view/component/sidebarSection/sidebarSectionDescription.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_sidebarSection_sidebarSectionDescription_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push("<h4>");b.push(a.view.txt(1,"h4",0,this,function(){return __("Description")}));b.push("</h4>\n");b.push(a.view.txt(0,"",0,this,function(){var a=[];editable&&a.push('\n<a href="#" class="edit_description_button section-action" id="js_edit_description_button">\n\t<i class="icon edit no-text"></i>\n\t<span>edit</span>\n</a>\n');return a.join("")}));
b.push('\n<p class="description_content">');b.push(a.view.txt(1,"p",0,this,function(){return resource.description}));b.push('</p>\n<\!-- edit description form --\>\n<div id="js_rs_details_edit_description"></div>');return b.join("")}}))});steal.executed("app/view/template/component/sidebarSection/sidebarSectionDescription.ejs");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_resourceDetails_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="resource">\n\t<h3>');b.push(a.view.txt(1,"h3",0,this,function(){return resource.name}));b.push('</h3>\n\t<a href="#" class="dialog-close"><i class="icon close no-text"></i><span>close</span></a>\n\t<div class="detailed-information">\n\t<h4>');b.push(a.view.txt(1,"h4",0,this,function(){return __("Information")}));b.push('</h4>\n\t<ul>\n\t\t<li class="username">\n\t\t\t<span class="label">');
b.push(a.view.txt(1,"span",0,this,function(){return __("Username")}));b.push('</span>\n\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return resource.username}));b.push('</span>\n\t\t</li>\n\t\t<li class="password">\n\t\t\t<div class="label">');b.push(a.view.txt(1,"div",0,this,function(){return __("Password")}));b.push('</div>\n\t\t\t<div class="value">\n\t\t\t\t<div class="secret-copy">\n\t\t\t\t\t<a href="#copy_secret">\n\t\t\t\t\t\t<span>copy password to clipboard</span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<pre>');
b.push(a.view.txt(1,"pre",0,this,function(){return resource.Secret[0].data}));b.push('</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t<li class="url">\n\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("URL")}));b.push('</span>\n\t\t\t<span class="value">\n\t\t\t\t<a href="');b.push(a.view.txt(1,"a","href",this,function(){return resource.uri}));b.push('" target="_blank"',a.view.pending(),">");b.push(a.view.txt(1,"a",0,this,function(){return resource.uri}));b.push('</a>\n\t\t\t</span>\n\t\t</li>\n\t\t<li class="modified">\n\t\t\t<span class="label">');
b.push(a.view.txt(1,"span",0,this,function(){return __("Modified")}));b.push('</span>\n\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return moment(resource.modified).fromNow()}));b.push('</span>\n\t\t</li>\n\t\t<li class="modified-by">\n\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Modified by")}));b.push('</span>\n\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return resource.Modifier.username}));b.push('</span>\n\t\t</li>\n\t\t<li class="modified-by">\n\t\t\t<span class="label">');
b.push(a.view.txt(1,"span",0,this,function(){return __("Owner")}));b.push('</span>\n\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return resource.Creator.username}));b.push('</span>\n\t\t</li>\n\t\t<\!--<li class="expire">--\>\n\t\t\t<\!--<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Expire")}));b.push('</span>--\>\n\t\t\t<\!--<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return null!=resource.expiry_date?moment(resource.expiry_date).fromNow():
__("never")}));b.push('</span>--\>\n\t\t<\!--</li>--\>\n\t\t<\!--<li class="strength">\n\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Strength")}));b.push("</span>\n\t\t\t<span>\n\t\t\t\t");b.push(a.view.txt(1,"span",0,this,function(){return secretStrength?secretStrength.label:"-"}));b.push('\n\t\t\t</span>\n\t\t</li>--\>\n\t</ul>\n\t</div>\n\t<\!-- Description management --\>\n\t<div class="description" id="js_rs_details_description"></div>\n\t<\!-- Tags management --\>\n\t<div class="tags clearfix" id="js_rs_details_tags"></div>\n\t<\!-- Comments management --\>\n\t<div class="comments clearfix" id="js_rs_details_comments"></div>\n</div>\n');
return b.join("")}}))});steal.executed("app/view/template/component/resourceDetails.ejs");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.ResourceShortcutsController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("All items"),cssClasses:["selected"],action:function(){var a=new passbolt.model.Filter({label:__("All items"),order:"modified",type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),
label:__("Favorite"),action:function(){var a=new passbolt.model.Filter({label:__("Favorite"),"case":"favorite",type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Recently modified"),action:function(){var a=new passbolt.model.Filter({label:__("Recently modified"),order:"modified",type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Shared with me"),
action:function(){var a=new passbolt.model.Filter({label:__("Shared with me"),"case":"shared",type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_resources_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Items I own"),action:function(){var a=new passbolt.model.Filter({label:__("Items I own"),"case":"own",type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_resources_browser",a)}})])},"{mad.bus} filter_resources_browser":function(a,c,d){this.element&&d.type!=passbolt.model.Filter.SHORTCUT&&
this.unselectAll()}})});steal.executed("app/controller/component/resourceShortcutsController.js");
steal("mad/controller/componentController.js","app/view/template/component/workspaceSecondaryMenu.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.WorkspaceSecondaryMenuController",{defaults:{label:"Workspace Secondary Menu Controller",tag:"ul"}},{afterStart:function(){var a=mad.Config.read("ui.workspace.showSidebar");this.options.viewSidebarButton=(new mad.controller.component.ToggleButtonController($("#js_wk_secondary_menu_view_sidebar_button"),{state:a?
"selected":"ready"})).start();this.on()},"{mad.bus} workspace_showSidebar":function(a,c,d){this.element&&!d&&this.options.viewSidebarButton.state.is("selected")&&this.options.viewSidebarButton.setState("ready")},"{viewSidebarButton} click":function(){var a=!mad.Config.read("ui.workspace.showSidebar");mad.Config.write("ui.workspace.showSidebar",a);mad.bus.trigger("workspace_showSidebar",a)}})});steal.executed("app/controller/component/workspaceSecondaryMenuController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_workspaceSecondaryMenu_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<li>\n\t<a id="js_wk_secondary_menu_view_sidebar_button" href="#" class="button toggle">\n\t\t<i class="icon layout eye big no-text"></i>\n\t\t<span>');b.push(a.view.txt(1,"span",0,this,function(){return __("view sidebar")}));b.push("</span>\n\t</a>\n</li>\n");return b.join("")}}))});steal.executed("app/view/template/component/workspaceSecondaryMenu.ejs");
steal("mad/form/formController.js","app/view/template/form/category/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.category.CreateFormController",{defaults:{templateBased:!0,action:"create"}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($("#js_field_parent_id"),{modelReference:"passbolt.model.Category.parent_id"})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_name"),{modelReference:"passbolt.model.Category.name"})).start(),
(new mad.form.FeedbackController($("#js_field_name_feedback"))).start())}})});steal.executed("app/controller/form/category/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_category_createForm_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<div class="form-content">\n    <input type="hidden" id="js_field_parent_id" class="form_field" />\n    <div class="input text required js_form_element_wrapper">\n        <label for="js_field_name">Category name</label>\n        <input type="text" id="js_field_name" class="required" />\n        <span id="js_field_name_feedback" class="message"/>\n    </div>\n    <div>\n        <input type="submit" value="submit" />\n    </div>\n</div>\n');return b.join("")}}))});
steal.executed("app/view/template/form/category/createForm.ejs");
steal("mad/form/formController.js","app/controller/component/secretStrengthController.js","app/controller/form/secret/createFormController.js","app/view/template/form/resource/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.resource.CreateFormController",{defaults:{templateBased:!0,secretField:null,action:"create",secretsForms:[],resource:null}},{beforeRender:function(){this._super();this.setViewData("resource",this.options.data)},afterStart:function(){var a=
this;this.options.data.Resource=this.options.data.Resource||{};passbolt.model.Resource.getValidationRules(a.options.action);this.addElement((new mad.form.element.TextboxController($("#js_field_category_id"),{modelReference:"passbolt.model.Resource.Category.id",validate:!1})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_name"),{modelReference:"passbolt.model.Resource.name"})).start(),(new mad.form.FeedbackController($("#js_field_name_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_uri"),
{modelReference:"passbolt.model.Resource.uri"})).start(),(new mad.form.FeedbackController($("#js_field_uri_feedback"),{})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_username"),{modelReference:"passbolt.model.Resource.username"})).start(),(new mad.form.FeedbackController($("#js_field_username_feedback"),{})).start());can.each(this.options.data.Secret,function(c,d){var b=new passbolt.controller.form.secret.CreateFormController("#js_secret_edit_"+d,{data:c,secret_i:d});
b.start();b.load(c);a.options.secretsForms.push(b)});this.addElement((new mad.form.element.TextboxController($("#js_field_description"),{modelReference:"passbolt.model.Resource.description"})).start(),(new mad.form.FeedbackController($("#js_field_description_feedback"),{})).start());$("#js_field_name").focus();mad.bus.trigger("passbolt.plugin.resource_edition")}," submit":function(a,c){c.preventDefault();if(this.validate()){var d=[];"edit"==this.options.action?passbolt.model.Permission.findAll({aco:this.options.data.constructor.shortName,
aco_foreign_key:this.options.data.id},function(a){a.each(function(a){d.push(a.aro_foreign_key)});mad.bus.trigger("passbolt.secret_edition.encrypt",d)}):(d.push(mad.Config.read("user.id")),mad.bus.trigger("passbolt.secret_edition.encrypt",d))}else this.options.callbacks.error&&this.options.callbacks.error()},"{mad.bus} secret_edition_secret_encrypted":function(a,c,d){if(this.element&&this.element){a=this.getData();a["passbolt.model.Resource"].Secret=[];for(var b in d)a["passbolt.model.Resource"].Secret.push({user_id:b,
data:d[b]});this.options.callbacks.submit&&this.options.callbacks.submit(a)}}})});steal.executed("app/controller/form/resource/createFormController.js");
steal("mad/form/formController.js").then(function(){mad.form.FormController.extend("passbolt.controller.form.secret.CreateFormController",{defaults:{templateBased:!1,action:"create",secret_i:null}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($("#js_field_secret_id_"+this.options.secret_i),{modelReference:"passbolt.model.Secret.id",validate:!1})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_secret_user_id_"+this.options.secret_i),
{modelReference:"passbolt.model.Secret.user_id",validate:!1})).start());this.addElement((new mad.form.element.TextboxController($("#js_field_secret_data_"+this.options.secret_i),{modelReference:"passbolt.model.Secret.data",validate:!1})).start());this.on()}})});steal.executed("app/controller/form/secret/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_resource_createForm_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="form-content">\n\t\n\t<input type="hidden" name="passbolt.model.Resource.Category.id" id="js_field_category_id" class="form_field" />\n\t\n\t<div class="input text required js_form_element_wrapper">\n\t\t<label for="js_field_name">');b.push(a.view.txt(1,"label",0,this,function(){return __("Name")}));b.push('</label>\n\t\t<input name="passbolt.model.Resource.name" class="required" maxlength="50" type="text" id="js_field_name" placeholder="name"/>\n\t\t<div id="js_field_name_feedback" class="message">\n\t\t</div>\n\t</div>\n\t\n\t<div class="input text js_form_element_wrapper">\n\t\t<label for="js_field_uri">');
b.push(a.view.txt(1,"label",0,this,function(){return __("URL")}));b.push('</label>\n\t\t<input name="passbolt.model.Resource.uri" maxlength="50" type="text" id="js_field_uri" placeholder="https://example.com/login"/>\n\t\t<div id="js_field_uri_feedback" class="message">\n\t\t</div>\n\t</div>\n\t\n\t<div class="input text required js_form_element_wrapper">\n\t\t<label for="js_field_username">');b.push(a.view.txt(1,"label",0,this,function(){return __("Username")}));b.push('</label>\n\t\t<input name="passbolt.model.Resource.username" class="required" maxlength="50" type="text" id="js_field_username" placeholder="name"/>\n\t\t<div id="js_field_username_feedback" class="message">\n\t\t</div>\n\t</div>\n\t<div class="js_form_element_wrapper js_form_secret_wrapper">\n\t\t<label for="js_field_secret_data_0">');
b.push(a.view.txt(1,"label",0,this,function(){return __("Password")}));b.push('</label>\n        <div id="js_secret_edit_0" class="js_secret_edit_form">\n            <input type="hidden" name="passbolt.model.Secret.id" id="js_field_secret_id_0" class="js_field_secret_id form_field" />\n            <input type="hidden" name="passbolt.model.Secret.user_id" id="js_field_secret_user_id_0" class="js_field_secret_user_id form_field" />\n            <textarea name="passbolt.model.Secret.data" id="js_field_secret_data_0" class="form_field hidden js_field_secret_data"',
a.view.pending(),">");b.push('</textarea>\n        </div>\n\t</div>\n\t<div class="input textarea js_form_element_wrapper">\n\t\t<label for="js_field_description">');b.push(a.view.txt(1,"label",0,this,function(){return __("Description")}));b.push('</label>\n\t\t<textarea name="passbolt.model.Resource.description" class="required" maxlength="150" id="js_field_description" placeholder="add a description"',a.view.pending(),">");b.push('\n\t\t</textarea>\n\t\t<div id="js_field_description_feedback" class="message">\n\t\t</div>\n\t</div>\n</div>\n<div class="submit-wrapper clearfix">\n    <input type="submit" class="button primary" value="');
b.push(a.view.txt(1,"input","value",this,function(){return __("save")}));b.push('" ',a.view.pending(),"/>");b.push('\n    <a href="#" class="js-dialog-cancel cancel">');b.push(a.view.txt(1,"a",0,this,function(){return __("cancel")}));b.push("</a>\n</div>\n");return b.join("")}}))});steal.executed("app/view/template/form/resource/createForm.ejs");
steal("mad/model").then(function(){mad.model.Model("passbolt.model.Filter",{attributes:{label:"string",type:"string",keywords:"string","case":"string",foreignModels:"array",order:"array",requestPrefix:"string"},SHORTCUT:1,FOREIGN_MODEL:2,KEYWORD:3,TAG:4},{init:function(a){if("undefined"==typeof a||"undefined"==typeof a.requestPrefix)this.requestPrefix="fltr_";if("undefined"==typeof a||"undefined"==typeof a.foreignModels)this.foreignModels=new can.List([])},toRequest:function(){var a={};null!=this.keywords&&
(a[this.requestPrefix+"keywords"]=this.keywords);null!=this["case"]&&(a[this.requestPrefix+"case"]=this["case"]);null!=this.order&&(a[this.requestPrefix+"order"]=this.order);var c=this.foreignModels.attr(),d;for(d in c)a[this.requestPrefix+"model_"+[d.toLowerCase()]]=can.map(this.foreignModels[d],function(a){return a.id}).join(",");return a},getForeignModels:function(a){var c=[];"undefined"!=typeof this.foreignModels&&"undefined"!=typeof this.foreignModels[a]&&(c=this.foreignModels[a]);return c}})});
steal.executed("app/model/filter.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_passwordWorkspace_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<div class="js_workspace">\n\t<div class="panel left">\n\t\t<div class="navigation first shortcuts">\n\t\t\t<ul id="js_wsp_pwd_rs_shortcuts" class="clearfix">\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class="navigation last tree categories">\n\t\t\t<ul id="js_wsp_pwd_category_chooser">\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="panel middle">\n        <div id="js_wsp_pwd_breadcrumb" class="breadcrumbs">\n        </div>\n        <div id="js_wsp_pwd_browser" class="tableview">\n        </div>\n\t</div>\n\t<div class="panel aside js_wsp_pwd_sidebar_second" style="display:none">\n\t</div>\n</div>\n');return b.join("")}}))});
steal.executed("app/view/template/passwordWorkspace.ejs");
steal("mad/controller/componentController.js","app/controller/component/peopleBreadcrumbController.js","app/controller/component/groupChooserController.js","app/controller/component/userBrowserController.js","app/controller/component/userShortcutsController.js","app/controller/component/userDetailsController.js","app/controller/form/user/createFormController.js","app/controller/form/group/createFormController.js","app/model/user.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.PeopleWorkspaceController",{defaults:{label:"People",
templateUri:"app/view/template/peopleWorkspace.ejs",selectedUsers:new can.Model.List,selectedGroups:new can.Model.List,filter:new passbolt.model.Filter}},{afterStart:function(){mad.helper.ComponentHelper.create($("#js_wsp_primary_menu_wrapper"),"last",passbolt.controller.component.PeopleWorkspaceMenuController,{selectedUsers:this.options.selectedUsers,selectedGroups:this.options.selectedGroups}).start();mad.helper.ComponentHelper.create($("#js_wsp_secondary_menu_wrapper"),"last",passbolt.controller.component.WorkspaceSecondaryMenuController,
{}).start();this.breadcrumCtl=new passbolt.controller.component.PeopleBreadcrumbController($("#js_wsp_ppl_breadcrumb"),{});this.breadcrumCtl.start();(new passbolt.controller.component.UserShortcutsController("#js_wsp_users_group_shortcuts",{})).start();(new passbolt.controller.component.UserBrowserController("#js_wsp_ppl_browser",{selectedUsers:this.options.selectedUsers})).start();new passbolt.controller.component.UserDetailsController($(".js_wsp_users_sidebar_second",this.element),{selectedUsers:this.options.selectedUsers});
var a=null,a=this.options.filter?this.options.filter:new passbolt.model.Filter({label:__("All users"),type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_users_browser",a)},destroy:function(){$("#js_wsp_primary_menu_wrapper").empty();$("#js_wsp_secondary_menu_wrapper").empty();this._super()},"{mad.bus} group_selected":function(a,c,d){this.element&&(console.log("group selected"),this.options.selectedUsers.splice(0,this.options.selectedUsers.length),this.options.filter.attr({foreignModels:{Group:new can.List([d])},
type:passbolt.model.Filter.FOREIGN_MODEL}),mad.bus.trigger("filter_users_browser",this.options.filter),this.options.selectedGroups.splice(0,this.options.selectedGroups.length),this.options.selectedGroups.push(d))},"{mad.bus} filter_users_browser":function(a,c,d){this.element&&("undefined"!=typeof d.name&&"all"==d.name&&this.options.selectedGroups.splice(0,this.options.selectedGroups.length),this.options.selectedUsers.splice(0,this.options.selectedUsers.length),this.breadcrumCtl.load(d))},"{mad.bus} request_group_creation":function(){if(this.element){var a=
new passbolt.model.Group,c=(new mad.controller.component.DialogController(null,{label:__("Create a new Group")})).start();c.add(passbolt.controller.form.group.CreateFormController,{data:a,callbacks:{submit:function(a){(new passbolt.model.Group(a["passbolt.model.Group"])).save();c.remove()}}}).load(a)}},"{mad.bus} request_group_edition":function(a,c,d){if(this.element){var b=(new mad.controller.component.DialogController(null,{label:__("Edit a Group")})).start();b.add(passbolt.controller.form.group.CreateFormController,
{data:d,callbacks:{submit:function(a){d.attr(a["passbolt.model.Group"]).save();b.remove()}}}).load(d)}},"{mad.bus} request_group_deletion":function(a,c,d){this.element&&d.destroy()},"{mad.bus} request_user_creation":function(){if(this.element){var a=new passbolt.model.User({active:1}),c=(new mad.controller.component.DialogController(null,{label:__("Add User")})).start(),d=c.add(passbolt.controller.form.user.CreateFormController,{data:a,action:"create",callbacks:{submit:function(a){(new passbolt.model.User(a["passbolt.model.User"])).save(function(){c.remove()},
function(a){d.showErrors(JSON.parse(a.responseText).body)})}}});d.load(a)}},"{mad.bus} request_user_edition":function(a,c,d){if(this.element){var d=this.options.selectedUsers[0],b=(new mad.controller.component.DialogController(null,{label:__("Edit User")})).start(),e=b.add(passbolt.controller.form.user.CreateFormController,{data:d,action:"edit",callbacks:{submit:function(a){d.attr(a["passbolt.model.User"]).save(function(){b.remove()},function(a){e.showErrors(JSON.parse(a.responseText).body)})}}});
e.load(d)}},"{mad.bus} request_user_deletion":function(a,c){if(this.element)for(var d=2;d<arguments.length;d++){var b=arguments[d];if(!(b instanceof passbolt.model.User))throw new mad.error.Exception("The parameter "+d+" should be an instance of passbolt.model.User");b.destroy()}},"{mad.bus} request_remove_user_from_group":function(a,c,d,b){if(this.element&&0!=b.attr("length")&&0!=d.attr("length"))for(i in a=b[0].id,d)for(j in d[i].GroupUser)d[i].GroupUser[j].group_id==a&&d[i].GroupUser[j].destroy()}})});
steal.executed("app/controller/peopleWorkspaceController.js");
steal("mad/controller/componentController.js","app/model/category.js","app/view/template/component/breadcrumb/breadcrumb.ejs","app/view/template/component/breadcrumb/breadcrumbItem.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.PeopleBreadcrumbController",{defaults:{categories:passbolt.model.Category.List,templateUri:"app/view/template/component/breadcrumb/breadcrumb.ejs",status:"hidden",filter:null}},{afterStart:function(){var a="#"+this.getId()+" ul";
this.options.menu=new mad.controller.component.MenuController(a,{itemTemplateUri:"app/view/template/component/breadcrumb/breadcrumbItem.ejs"});this.options.menu.start()},parseFilter:function(a){var c=[],d=new mad.model.Action({id:uuid(),label:__("All users"),action:function(){var a=new passbolt.model.Filter({label:__("All users"),type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_users_browser",a)}});c.push(d);"undefined"!=typeof a.foreignModels.Group?1==a.foreignModels.Group.length&&(a=
a.foreignModels.Group[0],d=new mad.model.Action({id:uuid(),label:a.name,action:function(){mad.bus.trigger("group_selected",category)}}),c.push(d)):"undefined"!=typeof a.keywords&&""!=a.keywords?(d=new mad.model.Action({id:uuid(),label:__("Search : %s",a.keywords)}),c.push(d)):"undefined"!=typeof a.label&&a.label!=__("All users")&&(d=new mad.model.Action({id:uuid(),label:a.label}),c.push(d));return c},load:function(a){a=this.parseFilter(a);this.options.menu.reset();this.options.menu.load(a)}})});steal.executed("app/controller/component/peopleBreadcrumbController.js");
steal("mad/controller/component/dynamicTreeController.js","app/view/component/groupChooser.js","app/model/group.js","app/model/groupUser.js").then(function(){mad.controller.component.DynamicTreeController.extend("passbolt.controller.component.GroupChooserController",{defaults:{label:"Group Chooser",viewClass:passbolt.view.component.groupChooser,itemClass:passbolt.model.Group,templateUri:"mad/view/template/component/tree.ejs",map:new mad.object.Map({id:"id",label:"name"}),selectedGroups:new can.Model.List}},
{afterStart:function(){var a=this;this.setState("loading");passbolt.model.Group.findAll({},function(c){a.load(c);a.setState("ready")},function(){})},showContextualMenu:function(a,c,d){var b=mad.model.Action.models([{id:uuid(),label:"Open",action:function(b){mad.bus.trigger("category_selected",a);b.remove()}},{id:uuid(),label:"Create user",action:function(b){mad.bus.trigger("request_user_creation",a);b.remove()}},{id:uuid(),label:"Create group",action:function(b){mad.bus.trigger("request_group_creation",
a);b.remove()}},{id:uuid(),label:"Rename...",action:function(b){mad.bus.trigger("request_group_edition",a);b.remove()}},{id:uuid(),label:"Remove",action:function(b){mad.bus.trigger("request_group_deletion",a);b.remove()}}]),c=new mad.controller.component.ContextualMenuController(null,{mouseX:c,mouseY:d});c.start();c.load(b)}," item_selected":function(a,c,d){mad.bus.trigger("group_selected",d)}," group_dropon":function(a,c,d,b){a=d.element.parent().attr("id");b=b.element.attr("id");(new passbolt.model.GroupUser({group_id:a,
user_id:b})).save()}," item_right_selected":function(a,c,d,b){this._super(a,c,d,b);this.showContextualMenu(d,b.pageX,b.pageY)},"{passbolt.model.Group} created":function(a,c,d){this.insertItem(d,null,"last")},"{passbolt.model.Group} updated":function(){this.refresh()},"{passbolt.model.Group} destroyed":function(a,c,d){this.removeItem(d)},"{mad.bus} filter_users_browser":function(a,c,d){d.type!=passbolt.model.Filter.FOREIGN_MODEL?this.unselectAll():this.selectItem(d.getForeignModels("Group")[0])}})});
steal.executed("app/controller/component/groupChooserController.js");
steal("jquery/event/drop","mad/view/component/tree/dynamicTree.js").then(function(){mad.view.component.tree.DynamicTree.extend("passbolt.view.component.groupChooser",{},{insertItem:function(a,c,d){var b=this,a=this._super(a,c,d);$("> .row",$(a)).bind("dropover",function(a,c,d){$(this).addClass("drop-over");b.element.trigger("group_dropover",[c,d,a])}).bind("dropout",function(a,c,d){$(this).removeClass("drop-over");b.element.trigger("group_dropout",[c,d,a])}).bind("dropon",function(a,c,d){$(this).removeClass("drop-over");
b.element.trigger("group_dropon",[c,d,a])})}})});steal.executed("app/view/component/groupChooser.js");
steal("mad/model","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.GroupUser",{validateRules:{},attributes:{id:"string",group_id:"string",user_id:"string"},create:function(a,c,d){var b=this,a=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"groupsUsers",type:"POST",params:a,success:c,error:d}).pipe(function(a){var c=$.Deferred();c.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,b)]);return c})},destroy:function(a,
c,d){return mad.net.Ajax.request({url:APP_URL+"groupsUsers/{id}",type:"DELETE",params:{id:a},success:c,error:d})},findOne:function(a,c,d){a.children=a.children||!1;return mad.net.Ajax.request({url:APP_URL+"groupsUsers/{id}.json",type:"GET",params:a,success:c,error:d})},findAll:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"groupsUsers.json",type:"GET",params:a,success:c,error:d})},update:function(a,c,d,b){var e=this;delete c.created;delete c.modified;c=mad.model.serializer.CakeSerializer.to(c,
this);c.id=a;return mad.net.Ajax.request({url:APP_URL+"groupsUsers/{id}",type:"PUT",params:c,success:d,error:b}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,e)]);return b})}},{})});steal.executed("app/model/groupUser.js");
steal("mad/controller/component/gridController.js","app/model/user.js","app/model/group.js","app/model/profile.js","app/view/component/userBrowser.js").then(function(){mad.controller.component.GridController.extend("passbolt.controller.component.UserBrowserController",{defaults:{itemClass:passbolt.model.User,viewClass:passbolt.view.component.userBrowser,users:new can.Model.List,groups:[],selectedUsers:new can.Model.List}},{init:function(a,c){c.map=new mad.object.Map({id:"id",name:"name",username:"username",
modified:"modified",Group:"Group",Profile:"Profile"});c.columnModel=[{name:"multipleSelect",index:"multipleSelect",header:{css:["selections s-cell"],label:'<div class="input checkbox"><input type="checkbox" name="select all" value="checkbox-select-all" id="checkbox-select-all-people" disabled="disabled"><label for="checkbox-select-all-people">select all</label> \t\t\t\t\t\t\t\t\t\t</div>'},cellAdapter:function(a,b,c,f){b=[];b[f.id]="";mad.helper.ComponentHelper.create(a,"inside_replace",mad.form.element.CheckboxController,
{id:"multiple_select_checkbox_"+f.id,name:"test",cssClasses:["js_checkbox_multiple_select"],availableValues:b}).start()}},{name:"avatar",index:"Profile",header:{css:["s-cell"],label:""},titleAdapter:function(){return"avatar"},valueAdapter:function(a,b,c){return'<img src="'+c.Profile.avatarPath("small")+'" alt="'+__("Picture of: ")+b.Profile.first_name+" "+b.Profile.last_name+'" width="30" height="30">'}},{name:"name",index:"Profile",header:{css:["m-cell"],label:__("User")},valueAdapter:function(a,
b){return b.Profile.first_name+" "+b.Profile.last_name}},{name:"username",index:"username",header:{css:["m-cell"],label:__("Username")}},{name:"modified",index:"modified",header:{css:["m-cell"],label:__("Modified")},valueAdapter:function(a){return moment(a).fromNow()}}];this._super(a,c)},showContextualMenu:function(a,c){var d=$("td span","#"+a.id),b=d.offset(),d=new mad.controller.component.ContextualMenuController(null,{state:"hidden",source:d[0],coordinates:{x:c,y:b.top}});d.start();b=new mad.model.Action({id:uuid(),
label:"Copy public key",action:function(b){mad.bus.trigger("passbolt.clipboard",{name:"public key",data:a.Gpgkey.key});b.remove()}});d.insertItem(b);b=new mad.model.Action({id:uuid(),label:"Copy email address",cssClasses:["separator-after"],action:function(b){console.log(a);mad.bus.trigger("passbolt.clipboard",{name:"email",data:a.username});b.remove()}});d.insertItem(b);b=new mad.model.Action({id:uuid(),label:"Edit",action:function(b){mad.bus.trigger("request_user_edition",a);b.remove()}});d.insertItem(b);
b=new mad.model.Action({id:uuid(),label:"Delete",action:function(b){mad.bus.trigger("request_user_deletion",a);b.remove()}});d.insertItem(b);d.setState("ready")},insertItem:function(a,c,d){this.options.users.push(a);this._super(a,c,d)},refreshItem:function(a){this._super(a);0<this.options.selectedUsers.length&&this.select(this.options.selectedUsers[0])},removeItem:function(a){this._super(a)},reset:function(){this.options.users.splice(0,this.options.users.length)},load:function(a){this._super(a)},
beforeSelect:function(a){var c=!0;if(this.state.is("selection"))if(0<this.options.selectedUsers.length&&this.options.selectedUsers[0].id==a.id)this.unselect(a),this.setState("ready"),c=!1;else for(a=this.options.selectedUsers.length-1;-1<a;a--)this.unselect(this.options.selectedUsers[a]);return c},select:function(a,c){c="undefined"==typeof c?!1:c;0<this.options.selectedUsers.length&&this.unselect(this.options.selectedUsers[0]);this.options.selectedUsers.push(a);mad.app.getComponent("multiple_select_checkbox_"+
a.id).setValue([a.id]);this.view.selectItem(a);c||mad.bus.trigger("user_selected",a)},beforeUnselect:function(){return!0},unselect:function(a,c){c="undefined"==typeof c?!1:c;mad.app.getComponent("multiple_select_checkbox_"+a.id).reset();this.view.unselectItem(a);mad.model.List.remove(this.options.selectedUsers,a);c||mad.bus.trigger("user_unselected",a)},"{passbolt.model.User} created":function(a,c,d){this.insertItem(d,null,"first");return!1},"{passbolt.model.User} updated":function(a,c,d){-1!=this.options.users.indexOf(d)&&
this.refreshItem(d)},"{users} remove":function(a,c,d){var b=this;can.each(d,function(a){b.removeItem(a)})},"{passbolt.model.GroupUser} destroyed":function(a,c,d){for(i in this.options.users)if(this.options.users[i].id==d.user_id)break;this.options.users.splice(i,1);for(i in this.options.selectedUsers)this.options.selectedUsers[i].id==d.user_id&&this.options.selectedUsers.splice(i,1)}," item_selected":function(a,c,d){this.setState("selection");this.beforeSelect(d)&&this.select(d)}," item_right_selected":function(a,
c,d,b){this.select(d);this.showContextualMenu(d,b.pageX,b.pageY)},".js_checkbox_multiple_select checked":function(a,c,d){this.state.is("ready")?this.setState("selection"):this.state.is("selection")&&this.setState("multipleSelection");a=this.options.users[mad.model.List.indexOf(this.options.users,d)];this.beforeSelect(a)&&this.select(a)},".js_checkbox_multiple_select unchecked":function(a,c,d){a=this.options.users[mad.model.List.indexOf(this.options.users,d)];this.beforeUnselect()&&this.unselect(a);
this.options.selectedUsers.length?1==this.options.selectedUsers.length&&this.setState("selection"):this.setState("ready")},"{mad.bus} filter_users_browser":function(a,c,d){if(this.element){var b=this;this.filter=d;this.options.groups=[];(a=d.getForeignModels("Group"))&&can.each(a,function(a){b.options.groups.push(a.id)});this.setState("loading");passbolt.model.User.findAll({filter:this.filter,recursive:!0},function(a){b.load(a);b.setState("ready")})}},stateReady:function(){},stateSelection:function(){},
stateMultipleSelection:function(){}})});steal.executed("app/controller/component/userBrowserController.js");
steal("jquery/event/drag","mad/view/component/grid.js","app/view/template/component/user/draggedUser.ejs").then(function(){mad.view.component.Grid.extend("passbolt.view.component.userBrowser",{},{insertItem:function(a,c,d){a=this._super(a,c,d);$(".js_grid_column_name",a)},"tbody tr contextmenu":function(a,c){c.stopPropagation();c.preventDefault();if(3==c.which){var d=null,d=this.getController().getItemClass()?a.data(this.getController().getItemClass().fullName):a[0].id;this.element.trigger("item_right_selected",
[d,c])}return!1}})});steal.executed("app/view/component/userBrowser.js");steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_user_draggedUser_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="dragged_user" id="js_dragged_user">\n\tMove \'<span class="name">');b.push(a.view.txt(1,"span",0,this,function(){return name}));b.push("</span>' in a group\n</div>");return b.join("")}}))});steal.executed("app/view/template/component/user/draggedUser.ejs");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.UserShortcutsController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("All users"),action:function(){var a=new passbolt.model.Filter({label:__("All users"),type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_users_browser",a)}}),new mad.model.Action({id:uuid(),label:__("Recently modified"),action:function(){var a=
new passbolt.model.Filter({label:__("Recently modified"),order:"modified",type:passbolt.model.Filter.SHORTCUT});mad.bus.trigger("filter_users_browser",a)}})])},"{mad.bus} filter_users_browser":function(a,c,d){this.element&&d.type!=passbolt.model.Filter.SHORTCUT&&this.unselectAll()}})});steal.executed("app/controller/component/userShortcutsController.js");
steal("mad/view/component/tree.js","app/view/component/userDetails.js","app/controller/component/sidebarSectionController.js","app/controller/component/sidebarSections/sidebarSectionDescriptionController.js","app/view/template/component/userDetails.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.UserDetailsController",{defaults:{label:"User Details Controller",viewClass:passbolt.view.component.UserDetails,resource:null,selectedUsers:new can.Model.List}},
{beforeRender:function(){this._super();this.setViewData("user",this.options.user)},load:function(a){this.options.user=a;this.state.is(null)?this.start():this.refresh();this.on()},isDisabled:function(){return this.state.is("disabled")||this.state.is(null)&&("disabled"==this.options.state||$.isArray(this.options.state)&&-1!=this.options.state.indexOf("disabled"))?!0:!1},stateReady:function(a){a&&this.view.show();this._super(a)}," request_copy_publickey":function(){mad.bus.trigger("passbolt.clipboard",
{name:"Public key",data:this.options.selectedUsers[0].Gpgkey.key})},"{user} updated":function(){this.isDisabled()||this.refresh()},"{mad.bus} workspace_showSidebar":function(a,c,d){this.element&&(d?this.state.is(null)?this.options.state="ready":(this.setState("ready"),1==this.options.selectedUsers.length&&this.refresh()):this.state.is(null)?this.options.state=["hidden","disabled"]:this.setState(["hidden","disabled"]))},"{selectedUsers} add":function(){0==this.options.selectedUsers.length||1<this.options.selectedUsers.length?
(this.options.user=null,this.isDisabled()||this.setState("hidden")):(this.options.user=this.options.selectedUsers[0],this.isDisabled()||(this.load(this.options.user),this.setState("ready")))},"{selectedUsers} remove":function(){0==this.options.selectedUsers.length||1<this.options.selectedUsers.length?(this.options.user=null,!this.isDisabled()&&!this.state.is(null)&&this.setState("hidden")):(this.options.user=this.options.selectedUsers[0],this.isDisabled()||(this.load(this.options.user),this.setState("ready")))}})});
steal.executed("app/controller/component/userDetailsController.js");steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.UserDetails",{},{".icon.close click":function(){mad.Config.write("ui.workspace.showSidebar",!1);mad.bus.trigger("workspace_showSidebar",!1)},"a.copy-public-key click":function(a,c){c.stopPropagation();c.preventDefault();this.element.trigger("request_copy_publickey",[c])}})});steal.executed("app/view/component/userDetails.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_userDetails_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="user">\n\t<div class="header">\n\t\t<img src="');b.push(a.view.txt(1,"img","src",this,function(){return user.Profile.Avatar.url.small}));b.push('" alt="');b.push(a.view.txt(1,"img","alt",this,function(){return user.Profile.first_name}));b.push(" ");b.push(a.view.txt(1,"img","alt",this,function(){return user.Profile.last_name}));b.push(' picture"',
a.view.pending(),"/>");b.push('\n\t\t<h3>\n\t\t\t<span class="name">');b.push(a.view.txt(1,"span",0,this,function(){return user.Profile.first_name}));b.push(" ");b.push(a.view.txt(1,"span",0,this,function(){return user.Profile.last_name}));b.push('</span>\n\t\t\t<span class="username">');b.push(a.view.txt(1,"span",0,this,function(){return user.username}));b.push('</span>\n\t\t</h3>\n\t</div>\n\t<a href="#" class="dialog-close"><i class="icon close no-text"></i><span>close</span></a>\n\t<div class="detailed-information">\n\t\t<h4>');
b.push(a.view.txt(1,"h4",0,this,function(){return __("Information")}));b.push('</h4>\n\t\t<ul>\n\t\t\t<li class="username">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Password")}));b.push('</span>\n\t\t\t\t<span class="value">**********</span>\n\t\t\t</li>\n\t\t\t<li class="password">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Role")}));b.push('</span>\n\t\t\t\t<span class="value">');b.push(a.view.txt(1,"span",
0,this,function(){return user.Role.name.charAt(0).toUpperCase()+user.Role.name.slice(1)}));b.push('</span>\n\t\t\t</li>\n\t\t\t<li class="modified">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Modified")}));b.push('</span>\n\t\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return moment(user.modified).fromNow()}));b.push('</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<div class="key-information">\n\t\t<h4>');b.push(a.view.txt(1,
"h4",0,this,function(){return __("Public Key")}));b.push('</h4>\n\t\t<ul>\n\t\t\t<li class="keyid">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Key id")}));b.push('</span>\n\t\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return user.Gpgkey.key_id}));b.push('</span>\n\t\t\t</li>\n\t\t\t<li class="type">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Type")}));b.push('</span>\n\t\t\t\t<span class="value">');
b.push(a.view.txt(1,"span",0,this,function(){return user.Gpgkey.type}));b.push('</span>\n\t\t\t</li>\n\t\t\t<li class="created">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Created")}));b.push('</span>\n\t\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return user.Gpgkey.key_created}));b.push('</span>\n\t\t\t</li>\n\t\t\t<li class="expires">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Expires")}));
b.push('</span>\n\t\t\t\t<span class="value">');b.push(a.view.txt(1,"span",0,this,function(){return user.Gpgkey.expires}));b.push('</span>\n\t\t\t</li>\n\t\t\t<li class="key">\n\t\t\t\t<span class="label">');b.push(a.view.txt(1,"span",0,this,function(){return __("Public key")}));b.push('</span>\n\t\t\t\t<span class="value">\n\t\t\t\t\t<a href="#" class="button copy-public-key">\n\t\t\t\t\t\t<span>copy</span>\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<textarea class="code"',
a.view.pending(),">");b.push(a.view.txt(1,"textarea",0,this,function(){return user.Gpgkey.key}));b.push("</textarea>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n");return b.join("")}}))});steal.executed("app/view/template/component/userDetails.ejs");
steal("mad/form/formController.js","app/view/template/form/group/createForm.ejs").then(function(){mad.form.FormController.extend("passbolt.controller.form.group.CreateFormController",{defaults:{templateBased:!0,action:"create"}},{afterStart:function(){this.addElement((new mad.form.element.TextboxController($("#js_field_name"),{modelReference:"passbolt.model.Group.name"})).start(),(new mad.form.FeedbackController($("#js_field_name_feedback"))).start())}})});steal.executed("app/controller/form/group/createFormController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_form_group_createForm_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<div class="form-content">\n    <div class="input text required js_form_element_wrapper">\n        <label for="js_field_name">Group name</label>\n        <input type="text" id="js_field_name" class="required" />\n        <span id="js_field_name_feedback" class="message"/>\n    </div>\n    <div>\n        <input type="submit" value="submit" />\n    </div>\n</div>\n');
return b.join("")}}))});steal.executed("app/view/template/form/group/createForm.ejs");
steal("mad/controller/componentController.js","app/view/template/component/peopleWorkspaceMenu.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.PeopleWorkspaceMenuController",{defaults:{label:"User Workspace Menu Controller",tag:"ul",selectedUsers:new can.Model.List,selectedGroups:new can.Model.List}},{afterStart:function(){var a=this;if("admin"==passbolt.model.User.getCurrent().Role.name){this.options.creationButton=(new mad.controller.component.ButtonController($("#js_user_wk_menu_creation_button"))).start();
this.options.editionButton=(new mad.controller.component.ButtonController($("#js_user_wk_menu_edition_button"),{state:"disabled"})).start();this.options.deletionButton=(new mad.controller.component.ButtonController($("#js_user_wk_menu_deletion_button"),{state:"disabled"})).start();var c=[new mad.model.Action({id:"js_ppl_wk_remove_user_from_group",label:__("remove user from group"),initial_state:"disabled",cssClasses:null,action:function(){mad.bus.trigger("request_remove_user_from_group",[a.options.selectedUsers,
a.options.selectedGroups])}})];this.options.moreButton=(new mad.controller.component.ButtonDropdownController($("#js_user_wk_menu_more_button"),{state:"disabled",items:c})).start()}this.on()},"{creationButton} click":function(){mad.bus.trigger("request_user_creation")},"{editionButton} click":function(){mad.bus.trigger("request_user_edition")},"{deletionButton} click":function(){mad.bus.trigger("request_user_deletion",this.options.selectedUsers)},"{selectedUsers} add":function(){0==this.options.selectedUsers.length?
this.setState("ready"):1==this.options.selectedUsers.length?this.setState("selection"):this.setState("multiSelection");"admin"==passbolt.model.User.getCurrent().Role.name&&(0<this.options.selectedGroups.length?this.options.moreButton.setItemState("js_ppl_wk_remove_user_from_group","ready"):this.options.moreButton.setItemState("js_ppl_wk_remove_user_from_group","disabled"))},"{selectedUsers} remove":function(){0==this.options.selectedUsers.length?this.setState("ready"):1==this.options.selectedUsers.length?
this.setState("selection"):this.setState("multiSelection")},stateSelection:function(a){"admin"==passbolt.model.User.getCurrent().Role.name&&(a?(this.options.editionButton.setValue(this.options.selectedUsers[0]).setState("ready"),this.options.deletionButton.setValue(this.options.selectedUsers).setState("ready"),this.options.moreButton.setValue(this.options.selectedUsers[0]).setState("ready")):(this.options.editionButton.setValue(null).setState("disabled"),this.options.deletionButton.setValue(null).setState("disabled"),
this.options.moreButton.setValue(null).setState("disabled")))},stateMultiSelection:function(a){"admin"==passbolt.model.User.getCurrent().Role.name&&(a?(this.options.editionButton.setState("disabled"),this.options.deletionButton.setValue(this.options.selectedUsers).setState("ready"),this.options.moreButton.setState("disabled")):(this.options.editionButton.setValue(null).setState("disabled"),this.options.deletionButton.setValue(null).setState("disabled")))}})});steal.executed("app/controller/component/peopleWorkspaceMenuController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_peopleWorkspaceMenu_ejs",a.EJS(function(c,d){with(d)with(c){var b=[],e=passbolt.model.User.getCurrent().Role.name;b.push("\n");b.push(a.view.txt(0,"ul",0,this,function(){var b=[];"admin"==e&&(b.push('\n<li>\n\t<a id="js_user_wk_menu_creation_button" href="#" class="button">\n\t\t<i class="icon create"></i>\n\t\t<span>'),b.push(a.view.txt(1,"span",0,this,function(){return __("create")})),b.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_user_wk_menu_edition_button" href="#" class="button">\n\t\t<i class="icon edit"></i>\n\t\t<span>'),
b.push(a.view.txt(1,"span",0,this,function(){return __("edit")})),b.push('</span>\n\t</a>\n</li>\n<li>\n\t<a id="js_user_wk_menu_deletion_button" href="#" class="button">\n\t\t<i class="icon delete"></i>\n\t\t<span>'),b.push(a.view.txt(1,"span",0,this,function(){return __("delete")})),b.push('</span>\n\t</a>\n</li>\n<li>\n\t<div class="dropdown" style="display: none">\n\t\t<a id="js_user_wk_menu_more_button" href="#" class="button">\n\t\t\t<span>'),b.push(a.view.txt(1,"span",0,this,function(){return __("more")})),
b.push('</span>\n\t\t\t<i class="icon after arrowdown"></i>\n\t\t</a>\n\t</div>\n</li>\n'));return b.join("")}));b.push("\n");return b.join("")}}))});steal.executed("app/view/template/component/peopleWorkspaceMenu.ejs");
steal("mad/controller/componentController.js","app/view/template/component/settingsWorkspaceMenu.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.SettingsWorkspaceMenuController",{defaults:{label:"Settings Workspace Menu Controller"}},{afterStart:function(){this.options.editionButton=(new mad.controller.component.ButtonController($("#js_settings_wk_menu_edition_button"))).start();this.on()},"{editionButton} click":function(){mad.bus.trigger("request_profile_edition")}})});
steal.executed("app/controller/component/settingsWorkspaceMenuController.js");steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_settingsWorkspaceMenu_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<li>\n\t<a id="js_settings_wk_menu_edition_button" href="#" class="button">\n\t\t<i class="icon edit"></i>\n\t\t<span>');b.push(a.view.txt(1,"span",0,this,function(){return __("edit")}));b.push("</span>\n\t</a>\n</li>\n");return b.join("")}}))});steal.executed("app/view/template/component/settingsWorkspaceMenu.ejs");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.AppNavigationLeftController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("home"),cssClasses:["home"],action:function(){mad.bus.trigger("workspace_selected","password")}}),new mad.model.Action({id:uuid(),label:__("passwords"),cssClasses:["passwords"],action:function(){mad.bus.trigger("workspace_selected","password")}}),
new mad.model.Action({id:uuid(),label:__("users"),cssClasses:["users"],action:function(){mad.bus.trigger("workspace_selected","people")}})])}})});steal.executed("app/controller/component/appNavigationLeftController.js");
steal("mad/controller/component/menuController.js").then(function(){mad.controller.component.MenuController.extend("passbolt.controller.component.AppNavigationRightController",{defaults:{}},{afterStart:function(){this.load([new mad.model.Action({id:uuid(),label:__("logout"),cssClasses:["logout"],action:function(){document.location.href=APP_URL+"/logout"}})])}})});steal.executed("app/controller/component/appNavigationRightController.js");
steal("mad/controller/componentController.js","mad/form/element/listController.js","app/view/component/appFilter.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.AppFilterController",{defaults:{viewClass:passbolt.view.component.AppFilter}},{afterStart:function(){this.filterForm=new mad.form.FormController("#js_app_filter_form",{});this.filterForm.start();this.keywordsFormElement=this.filterForm.addElement(new mad.form.element.TextboxController("#js_app_filter_keywords",
{modelReference:"passbolt.model.Filter.keywords"}));this.keywordsFormElement.start();this.workspace="password"},reset:function(){this.keywordsFormElement.setValue("")},"{mad.bus} category_selected":function(){this.element&&this.reset()},"{mad.bus} workspace_selected":function(a,c,d){this.element&&(this.workspace=d,"password"==this.workspace?this.keywordsFormElement.element.attr("placeholder","search passwords"):this.keywordsFormElement.element.attr("placeholder","search people"))}," update":function(){var a=
this.filterForm.getData(),a=new passbolt.model.Filter(a["passbolt.model.Filter"]);"password"==this.workspace?mad.bus.trigger("filter_resources_browser",a):"people"==this.workspace?mad.bus.trigger("filter_users_browser",a):"settings"==this.workspace&&mad.bus.trigger("workspace_selected",["people",{filter:a}])}," reset":function(){this.reset();var a=new passbolt.model.Filter({keywords:"",tags:[]});mad.bus.trigger("filter_resources_browser",a)}})});steal.executed("app/controller/component/appFilterController.js");
steal("mad/form/formElement.js").then(function(){mad.form.FormElement.extend("mad.form.element.ListController",{defaults:{label:"List Form Element Controller",templateBased:!1,itemClass:passbolt.model,itemTemplateUri:"app/view/template/component/tagFilterItem.ejs",tag:"ul",value:[]}},{afterStart:function(){this.treeCtl=new mad.controller.component.TreeController(this.element,{itemClass:this.options.itemClass,itemTemplateUri:this.options.itemTemplateUri,map:new mad.object.Map({id:"id",label:"name"})});
this.treeCtl.start()},setValue:function(a){var c=this;this.value=a;this.treeCtl.reset();can.each(a,function(a){if(!(a instanceof c.options.itemClass))throw new mad.error.WrongParametersException("tag",c.options.itemClass.fullName);c.treeCtl.insertItem(a)})}})});steal.executed("lib/mad/form/element/listController.js");steal("mad/view","app/view/template/component/appFilter.ejs").then(function(){mad.view.View.extend("passbolt.view.component.AppFilter",{defaults:{}},{"form submit":function(){this.element.trigger("update")}})});
steal.executed("app/view/component/appFilter.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_appFilter_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<form id="js_app_filter_form" class="search">\n\t<\!-- <ul id="js_filter_tags" class="tags"></ul> --\>\n    <div class="input search required">\n        <label for="js_app_filter_keywords"> Search</label>\n        <input id="js_app_filter_keywords" class="required" maxlength="50" type="search" placeholder="search" />\n    </div>\n    <button value="search">\n        <i class="icon search"></i>\n        <span class="text visuallyhidden">search</span>\n    </button>\n</form>\n<\!-- <form id="js_filter_form">\n    <ul id="js_filter_tags" class="tags"></ul>\n    <fieldset>\n        <legend>\n            Please enter a search keyword\n        </legend>\n        <div class="input text required">\n            <label for="js_filter_keywords">\n                Search</label>\n            <input id="js_filter_keywords" class="required" maxlength="50" type="text"/>\n        </div>\n    </fieldset>\n    <span id="js_filter_reset" class="control reset">x</span>\n    <div class="submit">\n        <input type="submit" />\n    </div>\n</form> --\>');return b.join("")}}))});
steal.executed("app/view/template/component/appFilter.ejs");
steal("mad/controller/componentController.js","app/view/template/component/profileDropdown.ejs").then(function(){mad.controller.component.ButtonDropdownController.extend("passbolt.controller.component.ProfileDropdownController",{defaults:{label:null,cssClasses:[],templateBased:!0,templateUri:"app/view/template/component/profileDropdown.ejs",contentElement:"#js_app_profile_dropdown .dropdown-content",user:null}},{afterStart:function(){this._super();var a=this;a.options.user=passbolt.model.User.getCurrent();
var c=new mad.model.Action({id:uuid(),label:"my profile",action:function(){mad.bus.trigger("workspace_selected","settings");a.view.close()}});this.options.menu.insertItem(c);c=new mad.model.Action({id:uuid(),label:"manage your keys",action:function(){mad.bus.trigger("workspace_selected","settings");mad.bus.trigger("request_settings_section","keys");a.view.close()}});this.options.menu.insertItem(c);c=new mad.model.Action({id:uuid(),label:"logout",action:function(){document.location.href=APP_URL+"/logout"}});
this.options.menu.insertItem(c)},beforeRender:function(){this._super();this.setViewData("user",this.options.user)},"{user} updated":function(){!this.state.is("disabled")&&!this.state.is(null)&&this.refresh()}})});steal.executed("app/controller/component/profileDropdownController.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_profileDropdown_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<div class="center-cell-wrapper">\n    <div class="details center-cell">\n        <span class="name">');b.push(a.view.txt(1,"span",0,this,function(){return user.Profile.first_name}));b.push(" ");b.push(a.view.txt(1,"span",0,this,function(){return user.Profile.last_name}));b.push('</span>\n        <span class="email">');b.push(a.view.txt(1,"span",
0,this,function(){return user.username}));b.push('</span>\n    </div>\n</div>\n<div class="picture left-cell">\n    <img src="');b.push(a.view.txt(1,"img","src",this,function(){return user.Profile.avatarPath("small")}));b.push('" alt="your picture"',a.view.pending(),"/>");b.push('\n</div>\n<div class="more right-cell">\n    <a href="#"><span>more</span></a>\n</div>\n<ul class="dropdown-content right">\n</ul>\n');return b.join("")}}))});steal.executed("app/view/template/component/profileDropdown.ejs");
steal("mad/controller/componentController.js","app/model/notification.js","app/view/component/notification.js","app/view/template/component/notification.ejs").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.NotificationController",{defaults:{label:"Notification Controller",viewClass:passbolt.view.component.Notification,status:"hidden",notifications:[]}},{load:function(a){this.options.notifications.push(a);null==this.view?this.start():this.state.is("hidden")&&
(this.refresh(),this.setState("ready"))},"{mad.bus} passbolt_notify":function(a,c,d){this.element&&this.load(new passbolt.model.Notification(d))}})});steal.executed("app/controller/component/notificationController.js");steal("mad/model").then(function(){mad.model.Model("passbolt.model.Notification",{attributes:{status:"string",title:"string"}},{})});steal.executed("app/model/notification.js");
steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.Notification",{defaults:{timeout:2500,notifications:[]}},{init:function(a,c){var d=mad.Config.read("notification.timeout");"undefined"!=typeof d&&(this.options.timeout=d);this._super(a,c)},load:function(a){this.notifications.push(a)},render:function(){var a=this,c=this.getController().options.notifications,d=c.shift();this.getController().setViewData(d);setTimeout(function(){c.length?a.getController().refresh():a.getController().setState("hidden")},
a.options.timeout);return this._super()}})});steal.executed("app/view/component/notification.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_component_notification_ejs",a.EJS(function(c,d){with(d)with(c){var b=[];b.push('<span class="message animated fadeInUp ');b.push(a.view.txt(1,"span","class",this,function(){return status}));b.push('"',a.view.pending(),">");b.push("\n    <strong>");b.push(a.view.txt(1,"strong",0,this,function(){return status}));b.push("</strong>\n    ");b.push(a.view.txt(1,"span",0,this,function(){return title}));b.push("\n</span>\n");return b.join("")}}))});
steal.executed("app/view/template/component/notification.ejs");
steal("mad/controller/componentController.js","app/view/component/loadingBar.js").then(function(){mad.controller.ComponentController.extend("passbolt.controller.component.LoadingBarController",{defaults:{label:"Loading Bar Controller",viewClass:passbolt.view.component.LoadingBar,templateBased:!1,currentProcs:0,previousProcs:0,maxProcs:0,loadingPercent:0,postponedUpdate:!1}},{loading_start:function(a){this.view.update(20,!0,function(){a&&a()})},loading_complete:function(a){var c=this;this.view.update(100,
!0,function(){c.view.update(0,false);a&&a()})},stateLoading:function(){},update:function(a){var c=this;"undefined"!=typeof a&&a&&(this.options.postponedUpdate=!1);this.state.is("updating")?this.options.postponedUpdate||(this.options.postponedUpdate=!0,setTimeout(function(){c.update(!0)},100)):(this.state.addState("updating"),a=this.options.currentProcs,this.options.maxProcs<a&&(this.options.maxProcs=a),a-this.options.previousProcs?a?(this.state.is("progressing")||this.state.addState("progressing"),
this.view.update(100-(this.options.maxProcs-(this.options.maxProcs-this.options.currentProcs))*(1*(100/this.options.maxProcs)/2),!0,function(){c.state.removeState("updating")})):(this.state.addState("completing"),this.loading_complete(function(){c.state.setState("ready")})):this.state.removeState("updating"),this.options.previousProcs=a)},"{mad.bus} passbolt_component_loading_start":function(){this.element&&(this.options.currentProcs++,this.update())},"{mad.bus} passbolt_component_loading_complete":function(){this.element&&
(this.options.currentProcs--,this.update())},"{mad.bus} passbolt_ajax_request_start":function(a,c,d){this.element&&!d.silentLoading&&(this.options.currentProcs++,this.update())},"{mad.bus} passbolt_ajax_request_complete":function(a,c,d){this.element&&!d.silentLoading&&(this.options.currentProcs--,this.update())},"{mad.bus} passbolt_loading":function(){this.element&&(this.options.currentProcs++,this.update())},"{mad.bus} passbolt_loading_complete":function(){this.element&&(this.options.currentProcs--,
this.update())}})});steal.executed("app/controller/component/loadingBarController.js");steal("mad/view").then(function(){mad.view.View.extend("passbolt.view.component.LoadingBar",{defaults:{}},{update:function(a,c,d){d=d||null;a+="%";("undefined"!=typeof c?c:1)?$(".progress-bar span",this.element).animate({width:a},d):($(".progress-bar span",this.element).css("width",a),d&&d())}})});steal.executed("app/view/component/loadingBar.js");
steal("jquery/model","app/model/category.js","app/model/secret.js","mad/model/serializer/cakeSerializer.js").then(function(){mad.model.Model("passbolt.model.Favorite",{validateRules:{user_id:[],foreign_model:[],foreign_id:[]},attributes:{id:"string",user_id:"string",foreign_model:"string",foreign_id:"string"},create:function(a,c,d){var b=mad.model.serializer.CakeSerializer.to(a,this);return mad.net.Ajax.request({url:APP_URL+"/favorites/"+a.foreign_model.toLowerCase()+"/"+a.foreign_id,type:"POST",
params:b,success:c,error:d}).pipe(function(a){var b=$.Deferred();b.resolveWith(this,[mad.model.serializer.CakeSerializer.from(a,self)]);return b})},destroy:function(a,c,d){return mad.net.Ajax.request({url:APP_URL+"/favorites/"+a,type:"DELETE",params:{id:a},success:c,error:d})}},{})});steal.executed("app/model/favorite.js");
steal("can/view/ejs",function(a){return a.view.preload("app_view_template_app_ejs",a.EJS(function(a,d){with(d)with(a){var b=[];b.push('<div id="js_app_loading_bar" class="update-loading-bar">\n\t<div class="progress-bar">\n\t\t<span style="width:0%"></span>\n\t</div>\n</div>\n<div class="notification-container">\n    <div id="js_app_notificator" class="notification col2_3 push_1">\n    </div>\n</div>\n<div class="header first">\n    <nav>\n        <div class="primary navigation top">\n            <ul id="js_app_navigation_left" class="left">\n            </ul>\n            <ul id="js_app_navigation_right" class="right">\n            </ul>\n        </div>\n    </nav>\n</div>\n<div class="header second">\n    <div class="col1">\n        <div class="logo">\n            <img src="img/logo/logo.png" alt="passbolt"/>\n        </div>\n    </div>\n    <div class="col2 search-wrapper">\n        <div id="js_app_filter">\n        </div>\n    </div>\n    <div class="col3 profile-wrapper">\n        <div id="js_app_profile_dropdown" class="user profile dropdown">\n        </div>\n    </div>\n</div>\n<div class="header third">\n\t<div class="col1 workspace-title-wrapper">\n\t\t<h1 class="workspace-title">Passwords</h1>\n\t</div>\n\t<div class="col2_3 actions-wrapper">\n\t\t<div id="js_wsp_primary_menu_wrapper" class="actions">\n\t\t</div>\n\t\t<div id="js_wsp_secondary_menu_wrapper" class="actions secondary">\n\t\t</div>\n\t</div>\n</div>\n<div id="js_app_panel_main" class="panel main">\n</div>\n');return b.join("")}}))});
steal.executed("app/view/template/app.ejs");
steal("jquery/class").then(function(){mad.net.ResponseHandler.extend("passbolt.net.ResponseHandler",{},{_success:function(){switch(this.request.type.toUpperCase()){case "POST":case "PUT":case "DELETE":mad.bus&&mad.bus.trigger("passbolt_notify",{status:this.response.getStatus(),title:this.response.getMessage()})}this._super()},_error:function(){this.response.getStatus()==mad.net.Response.STATUS_ERROR&&this.response.getMessage()==__("You need to login to access this location")?location.href=mad.Config.read("app.url"):
this.response.attr("header").title=this.response.getMessage();this._super()}})});steal.executed("app/net/responseHandler.js");steal.popPending();

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
	<head>
		<title>Controller Example</title>
		<script type='text/javascript' src='../../../steal/steal.js'></script>
		<style type='text/css'>
			/* Form state error style */
			.form_field.js_state_error { border:1px solid red; }
			.form_feedback.js_state_error { color:red; }
			/* form style */
			div { clear:both; }
			label { float:left; width:200px; }
			.form_field { float:left; width:200px; }
			.form_feedback { float:left; width:200px; }
		</style>
	</head>
	<body>
		
<!-- -----------------------------------------------------------------------
												DEMO HTML BLOCK
 -------------------------------------------------------------------------->
<div id="demo-html">
<div id="js_demo_app_controller">
	<form id="js_demo_form_controller" method="post" action="#">
		
		<div>
			<label>surname</label>
			<input type="text" name="demo.model.Meeting.surname" id="js_field_surname" class="form_field" />
			<span id="js_field_surname_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>name</label>
			<input type="text" name="demo.model.Meeting.name" id="js_field_name" class="form_field" />
			<span id="js_field_name_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>I am a freelancer</label>
			<fieldset id="js_field_freelancer" class="form_field"></fieldset>
			<span id="js_field_freelancer_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>phone</label>
			<input type="text" name="demo.model.Meeting.phone" id="js_field_phone" class="form_field" />
			<span id="js_field_phone_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>email</label>
			<input type="text" name="demo.model.Meeting.email" id="js_field_email" class="form_field" />
			<span id="js_field_email_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>meeting date purpose</label>
			<input type="text" name="demo.model.Meeting.date" id="js_field_date" class="form_field" />
			<span id="js_field_date_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>want to meet</label>
			<select name="demo.model.Person.id" id="js_field_who" class="form_field"></select>
			<span id="js_field_who_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>I want to talk about</label>
			<fieldset name="demo.model.Meeting.topics" id="js_field_topics" class="form_field"></fieldset>
			<span id="js_field_topics_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<label>The password to open the door</label>
			<input type="text" name="demo.model.Meeting.password" id="js_field_password" class="form_field" />
			<span id="js_field_password_feedback" class="form_feedback"/>
		</div>
		
		<div>
			<input type="submit" value="submit" />
		</div>
		
	</form>
</div>
</div>

<!-- -----------------------------------------------------------------------
												DEMO JAVASCRIPT BLOCK
 -------------------------------------------------------------------------->
<script type='text/javascript'>
steal('mad/demo/init.js').then(function() {
	
	// Create a fake model
	mad.model.Model.extend('demo.model.Meeting', {
		'validateRules': {
			'surname': ['alphanum', 'required'],
			'name': ['alphanum', 'required'],
			'freelancer': ['required'],
			'phone': ['required', 'num'],
			'email': ['required', 'email'],
			'date': ['required', {
				'rule':'date', 
				'options': {'type': 'us'}
			}],
			'password': [{
				'rule': 'size',
				'options': {'min': 3, 'max': 8}
			}]
		}
	}, {});
	mad.model.Model.extend('demo.model.Person', {
		'validateRules': {
			'id': ['required', 'uid']
		}
	}, {});
	
	var form = new mad.form.FormController($('#js_demo_form_controller'), {
		'callbacks': {
			'submit': function (data) {
				console.log(data);
			}
		}
	});
	
	// Add a surname field element to the form
	form.addElement(
		new mad.form.element.TextboxController($('#js_field_surname'), {
			'value': 'Passbolt'
		}),
		new mad.form.FeedbackController($('#js_field_surname_feedback'), {})
	);

	// Add a name field element to the form
	form.addElement(
		new mad.form.element.TextboxController($('#js_field_name'), {
			'value': 'Jean'
		}),
		new mad.form.FeedbackController($('#js_field_name_feedback'), {})
	);

	// Add a freelancer field element to the form
	form.addElement(
		new mad.form.element.RadiobuttonController($('#js_field_freelancer'), {
		'modelReference': 'demo.model.Meeting.freelancer',
		'availableValues': {
				'0': 'No',
				'1': 'Yes'
			},
			'value': ['1']
		}),
		new mad.form.FeedbackController($('#js_field_freelancer_feedback'), {})
	);

	// Add a phone field element to the form
	form.addElement(
		new mad.form.element.TextboxController($('#js_field_phone'), {}),
		new mad.form.FeedbackController($('#js_field_phone_feedback'), {})
	);

	// Add a email field element to the form
	form.addElement(
		new mad.form.element.TextboxController($('#js_field_email'), {}),
		new mad.form.FeedbackController($('#js_field_email_feedback'), {})
	);

	// Add a date field element to the form
	form.addElement(
		new mad.form.element.TextboxController($('#js_field_date'), {}),
		new mad.form.FeedbackController($('#js_field_date_feedback'), {})
	);

	// Add a who field element to the form
	form.addElement(
		new mad.form.element.DropdownController($('#js_field_who'), {
			'availableValues': {
				'c': 'Cedric',
				'i': 'Isma',
				'k': 'Kevin',
				'm': 'Myriam',
				'r': 'Remy'
			}
//			'value': ''
		}),
		new mad.form.FeedbackController($('#js_field_who_feedback'), {})
	);

	// Add a topics field element to the form
	form.addElement(
		new mad.form.element.CheckboxController($('#js_field_topics'), {
			'availableValues': {
					'Business': 'Business',
					'Administration': 'Administration',
					'Fiesta': 'Fiesta'
			},
			'value': ['Fiesta']
		}),
		new mad.form.FeedbackController($('#js_field_topics_feedback'), {})
	);
	
	// Add a surname field element to the form
	form.addElement(
		new mad.form.element.TextboxController($('#js_field_password'), {}),
		new mad.form.FeedbackController($('#js_field_password_feedback'), {})
	);
	
});
</script>

	</body>
</html>